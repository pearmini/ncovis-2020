{"version":3,"sources":["assets/images/china.png","assets/images/zhihu.png","assets/images/talk.jpg","assets/images/hots.jpg","assets/fonts/思源柔黑.ttf","assets/images/news.jpg","serviceWorker.js","components/OverviewPanel.js","components/IntroductionPanel.js","utils/mouse.js","utils/formatDate.js","components/Timeline.js","components/Card.js","hook/useSize.js","utils/download.js","components/Svg.js","components/BarRace.js","components/Canvas.js","components/StoryTelling.js","components/Tooltip.js","components/Areachart.js","components/HotsPanel.js","hook/useAnimation.js","utils/memorizedColor.js","utils/randomColor.js","components/Shape.js","components/Piechart.js","components/TreeMatrix.js","components/HeatMap.js","components/DateMap.js","components/NewsPanel.js","components/DiscoveryPanel.js","utils/str2num.js","components/Header.js","components/Footer.js","App.js","models/hots.js","models/news.js","models/total.js","models/comment.js","models/ncov.js","index.js"],"names":["module","exports","Boolean","window","location","hostname","match","TabPane","Tabs","Container","styled","div","props","height","An","Title","h1","Row","China","img","Zhihu","Time","Box","CardContainer","Card","Change","color","Value","Name","DashBoard","connect","total","loading","models","getTotal","type","useWindowSize","useState","tab","setTab","data","time","colorByName","累计确诊","累计死亡","累计治愈","现存确诊","useEffect","id","onChange","activeKey","style","width","maxWidth","map","d","name","key","value","change","Math","abs","date","Date","getFullYear","getMonth","getDate","formate","src","zhihuURL","chinaURL","Intro","TalkImage","IntroductionPanel","href","target","talkImage","evevt","SVGelement","clientX","clientY","getBoundingClientRect","left","top","realWidth","realHeight","mouseX","mouseY","getBBox","x","d3","y","wrapper","year","month","Svg","svg","Button","g","Slider","rect","Dot","circle","selectedTime","running","toggleAnimation","changeValue","range","finish","totalDuration","duration","dragging","useRef","sliderRef","dotRef","tip","setTip","margin","domain","foramtTime","t","m","max","s","startButton","className","viewBox","version","xmlns","p-id","fill","pauseButton","restartButton","handleMouseUp","current","handleMouseMove","e","mouse","invert","addEventListener","removeEventListener","fontSize","transform","onClick","textAnchor","dy","ref","rx","onMouseMove","onMouseOver","foramtDate","cx","cy","r","onMouseDown","attrs","zoom","position","zIndex","marginTop","show","Layer","MiddleSpin","Spin","MiddleEmpty","Empty","Content","ul","StyledDrawer","Drawer","Header","Left","Slot","Right","StyledIcon","Icon","ZoomIcon","State","description","image","PRESENTED_IMAGE_SIMPLE","children","onDownload","onDownloadPng","onDownloadSvg","nodata","title","introduction","slot","rest","size","setSize","ResizeObserver","entry","contentRect","observer","node","observe","disconnect","useSize","setZoom","more","setMore","pop","setPop","content","onClickItem","cb","placement","trigger","arrowPointAtCenter","visible","stopPropagation","closable","onClose","getContainer","serialize","cloneNode","fragment","walker","document","createTreeWalker","NodeFilter","SHOW_ELEMENT","nextNode","currentNode","attributes","attr","includes","replace","setAttributeNS","string","XMLSerializer","serializeToString","Blob","blob","filename","url","URL","createObjectURL","a","createElement","download","click","WhiteSvg","background","cardProps","resolve","reject","promise","Promise","n","Image","onerror","onload","canvas","context","getContext","scale","drawImage","toBlob","rasterize","then","fontFamily","keyframes","selectedName","showWordsOfTopic","hideWordsOfTopic","selectedTopic","undefined","fullTitle","setFullTitle","checked","bisect","padding","barSize","bandwidth","bars","i","length","rank","b","find","interpolate","textWidth","index","offset","names","cur","pre","axis","ticks","tickSizeOuter","tickSizeInner","call","select","remove","selectAll","cursor","fillOpacity","dx","clipPath","fontWeight","formatDate","Canvas","dependcies","canvasProps","restore","save","colorScale","selectedWords","draw","interpolateAttrs","Set","initWord","word","text","words","disappear","filter","Object","keys","reduce","obj","has","interpolateData","fillStyle","fillRect","translate","textAlign","font","fillText","drawText","textBaseline","drawLabel","extent","pos","x0","y0","ofx","contentW","rightY","rightX","dataByDate","selectedType","selectedLevel","setSelectedTime","focus","setFocus","selectedCountries","countries","secondLevelSet","countriesSet","highlight","setHighlight","all","useMemo","Array","from","region","sort","first","tipCnt","legendWidth","tw","tipW","ceil","tipH","min","series","nice","legendX","legendY","tipX","tipY","lineX","area","y1","reverse","xAxis","onDoubleClick","onMouseLeave","getTime","stroke","darker","strokeWidth","strokeLinecap","x1","x2","y2","onMouseEnter","Tooltip","ry","Option","Select","message","config","maxCount","Control","NewsImage","MyRow","hots","ncov","loadingHots","loadingNcov","dataByRegion","dateRange","widthData","getCountryData","country","payload","setSelectedCountries","setSelectedWords","getWords","getData","options","setSelectedName","updateDataByTime","dataByName","timeByName","wordsByTime","totalTimeRange","setRunning","pause","setPause","setSelectedLevel","setSelectedType","setSelectedTopic","frameRate","timer","requestAnimation","start","setInterval","step","cancelAnimation","clearInterval","setFrame","pauseAnimation","useAnimation","timeScale","barColor","colorByKey","Map","c","get","splice","rc","set","dk","pk","ck","dc","push","delete","_","arguments","mc","wordColor","colors","random","newColor","listKeyframes","cloudsKeyframes","hotTimeRange","every","barsProps","stopAnimation","search","sw","w","keywords","interpolateInterval","hour","storyProps","timeProps","startAnimation","end","error","validValue","areaPros","startDuartion","request","to","tick","limit","interval","requestData","newsImage","gutter","span","md","BarRace","StoryTelling","Timeline","mode","alert","newKeys","k","minWidth","Areachart","Shape","selectedDate","selectedRegion","fillingWords","FontFace","fontURL","fontRef","loadFont","setLoadingFont","transX","transY","rotate","fillX","fillY","status","load","fonts","add","console","outerRadius","arc","innerRadius","count","pie","angle","startAngle","endAngle","PI","arcs","d3All","d3Array","setSelectedDate","setSelectedRegion","setShow","highlightColor","normalColor","highlightRectColor","disabledColor","legendHeight","treeData","setTreeData","handleChangeRange","move","drag","setDrag","hover","setHover","eachAfter","visableH","hideChildren","descendants","visableRegions","hide","layers","groups","depth","th","isNaN","days","hset","colorData","timeFormat","labels","treeH","matrixWidth","root","tree","separation","parent","allLeaves","leaves","cellHeight","pairs","Infinity","cellWidth","nodeByTitle","rollup","scaleBand","each","h","scaleSequential","specialColorScale","scaleSqrt","special","pathLink","linkHorizontal","strokeSpecial","minusButton","plusButton","handleMouseup","handleMousemove","maxMove","hasSpecialLegend","toggleNode","transition","ease","easeExpOut","animateShowChildren","animateHideChildren","animateHideButton","animateHideLegend","showChildren","newTreeData","copyTree","nodes","validNodes","allHide","forEach","animateHideAxis","o","source","child","eachBefore","hierarchy","regionsData","old","isSelect","noData","scaleLegend","scaleLinear","specialScaleLegend","legendAxis","axisBottom","specialLegendAxis","tickFormat","label","this","indexOf","l","buttonSize","toggleNodes","links","link","strokeOpacity","hasChildren","some","deleteNodes","toggleHighlightNode","toString","handleClickRect","countDay","getDay","formatMonth","timeWeek","timeMonth","timeDay","startDate","endDate","valueExtent","startMonth","endMonth","totalWeek","months","valueByDate","dates","cellSize","chartWidth","chartHeight","yDay","pathMonth","slice","formatDay","selectedRange","setSelectedRange","isTree","setIsTree","flatMap","dead","confirmed","cured","treeProps","heatMapProps","TreeMatrix","HeatMap","formTree","news","newsByRegion","loadingNews","getNewsData","regions","newsByDate","tags","shapeProps","pieProps","dateProps","DateMap","showSearch","dropdownStyle","maxHeight","overflow","treeDefaultExpandAll","moment","disabledDate","showTody","Piechart","Wrapper","VoteButton","ContentWrapper","Avatar","Main","Sub","Preview","Tool","CardButton","Footer","deleteComment","setTop","readMore","des","createTime","isAdmin","author","isTop","isShow","reading","preview","showDelete","setShowDelete","open","avatar","schemeTableau10","str","ch","codePointAt","avatarColor","toLocaleString","onOk","onCancel","okText","cancelText","comment","openForm","pages","addComment","setVisible","Form","create","form","getFieldDecorator","pageIndex","setPageIndex","setPreview","pageSize","hideOnSinglePage","page","bodyStyle","paddingBottom","layout","hideRequiredMark","Item","rules","required","placeholder","TextArea","rows","right","bottom","borderTop","marginRight","preventDefault","validateFields","values","theme","header","Logo","Lab","HeaderWrapper","Nav","nav","ToggleButton","Overlayer","setOpenForm","menu","rel","overlay","icon","ghost","App","OverviewPanel","cache","InMemoryCache","persistCache","storage","localStorage","maxSize","client","ApolloClient","uri","getHots","query","gql","getTimeRange","platform","getWordsOfTopics","weight","computeWordCloud","cloud","sqrt","on","computePreFramesWordsCloud","computeFramesWordCloud","preprocess","raw","begin","listTicks","wordTicks","topics","datewords","datetopics","heat","interploate","wordsKeyframes","bisector","interpolateValues","v1","v2","descending","unique","namespace","state","reducers","action","addWords","addTimeRange","newRange","addFrames","newListKeyframes","newCloudsKeyframes","effects","put","wordsWithLayout","timeData","log","result","getNews","addNews","global","china","format","confirmedIncr","curedIncr","deadIncr","remainingConfirmed","remainingConfirmedIncr","setData","ncovOverall","code","setTimeout","setAdmin","getItem","res","getNcov","getAllCountry","regionTree","regionvalues","rollups","newRegion","sum","day","addCountryData","init","countryByDate","countryByRegion","entries","ncovResult","countryResult","app","dva","use","createLoading","model","ncovModel","hotsModel","newsModel","totalModel","commentModel","router","navigator","serviceWorker","ready","registration","unregister","catch"],"mappings":"+GAAAA,EAAOC,QAAU,IAA0B,mC,oBCA3CD,EAAOC,QAAU,IAA0B,mC,oBCA3CD,EAAOC,QAAU,IAA0B,kC,oBCA3CD,EAAOC,QAAU,IAA0B,kC,oBCA3CD,EAAOC,QAAU,IAA0B,sD,oBCA3CD,EAAOC,QAAU,IAA0B,kC,4ICYvBC,QACW,cAA7BC,OAAOC,SAASC,UAEe,UAA7BF,OAAOC,SAASC,UAEhBF,OAAOC,SAASC,SAASC,MACvB,2D,ilFCVEC,EAAYC,IAAZD,QAEFE,EAAYC,IAAOC,IAAV,KAGH,SAACC,GAAD,OAAWA,EAAMC,UAQvBC,EAAKJ,IAAOC,IAAV,KAKFI,EAAQL,IAAOM,GAAV,KAkBLC,EAAMP,IAAOC,IAAV,KAYHO,EAAQR,IAAOS,IAAV,KAQLC,EAAQV,IAAOS,IAAV,KAQLE,EAAOX,IAAOC,IAAV,KAQJW,EAAMZ,IAAOC,IAAV,KAQHY,EAAgBb,IAAOC,IAAV,KAMba,EAAOd,IAAOC,IAAV,KAMJc,EAASf,IAAOC,IAAV,KAMC,SAACC,GAAD,OAAWA,EAAMc,SAIxBC,EAAQjB,IAAOC,IAAV,KAEA,SAACC,GAAD,OAAWA,EAAMc,SAItBE,EAAOlB,IAAOC,IAAV,KASJkB,EAAYnB,IAAOC,IAAV,KAsEAmB,yBACb,kBAAyB,CACvBC,MADF,EAAGA,MAEDC,QAFF,EAAUA,QAESC,OAAOF,SAE1B,CACEG,SAAU,iBAAO,CAAEC,KAAM,mBANdL,EA/Df,YAA4C,IAApBC,EAAmB,EAAnBA,MAAOG,EAAY,EAAZA,SACrBrB,EAAWuB,cAAXvB,OADiC,EAEnBwB,mBAAS,gBAFU,mBAElCC,EAFkC,KAE7BC,EAF6B,KAGjCC,EAAeT,EAAfS,KAAMC,EAASV,EAATU,KAMRC,EAAc,CAClBC,2BAAM,UACNC,2BAAM,UACNC,2BAAM,UACNC,2BAAM,WAOR,OAJAC,qBAAU,WACRb,MACC,CAACA,IAGF,kBAACzB,EAAD,CAAWI,OAAQA,GACjB,kBAACC,EAAD,CAAIkC,GAAG,aACP,kBAACnB,EAAD,KACE,kBAACd,EAAD,4DACA,kBAAC,IAAD,CACEkC,SAAUV,EACVW,UAAWZ,EACXa,MAAO,CAAEC,MAAO,IAAKC,SAAU,SAE9Bb,EAAKc,KAAI,SAACC,GAAD,OACR,kBAAChD,EAAD,CAAS+B,IAAKiB,EAAEC,KAAMC,IAAKF,EAAEC,MAC3B,kBAAClC,EAAD,KACE,kBAACC,EAAD,KACGgC,EAAEf,KAAKc,KAAI,gBAAGE,EAAH,EAAGA,KAAME,EAAT,EAASA,MAAOC,EAAhB,EAAgBA,OAAhB,OACV,kBAACnC,EAAD,CAAMiC,IAAKD,GACT,kBAAC/B,EAAD,CAAQC,MAAOgB,EAAYc,IACxBG,GAAU,EAAI,eAAO,eACtB,8BACGA,GAAU,EAAI,IAAM,IACpBC,KAAKC,IAAIF,KAGd,kBAAChC,EAAD,CAAOD,MAAOgB,EAAYc,IAAQE,GAClC,kBAAC9B,EAAD,KAAO2B,EAAEC,KAAOA,QAItB,kBAACnC,EAAD,2BA5CE,SAACoB,GACf,IAAMqB,EAAO,IAAIC,KAAKtB,GACtB,MAAM,GAAN,OAAUqB,EAAKE,cAAf,iBAAgCF,EAAKG,WAAa,EAAlD,iBAAuDH,EAAKI,UAA5D,UA0CwBC,CAAQ1B,GAApB,aACa,iBAAXc,EAAEC,KAAgB,2EAAiB,oCAO/C,kBAACvC,EAAD,KACE,kBAACG,EAAD,CAAOgD,IAAKC,MACZ,kBAACnD,EAAD,CAAOkD,IAAKE,W,4uBC1LpB,IAAM7D,GAAYC,IAAOC,IAAV,KAKTG,GAAKJ,IAAOC,IAAV,KAKFM,GAAMP,IAAOC,IAAV,KAWH4D,GAAQ7D,IAAOC,IAAV,KAUL6D,GAAY9D,IAAOS,IAAV,KA8EAsD,OA1Ef,WACE,OACE,kBAAC,GAAD,KACE,kBAAC,GAAD,CAAIzB,GAAG,iBACP,4CACA,kBAAC,GAAD,KACE,kBAACuB,GAAD,KACE,2BACE,qCADF,kCACsB,IACpB,uBAAGG,KAAK,uBAAuBC,OAAO,UAAtC,UAEK,IAJP,gOAQA,4BACE,kGACA,kGACA,qKAEF,2BACE,uCADF,8FAEE,qFAFF,4TAKA,2vBAGA,2BACE,qLADF,iIAGE,uBACEA,OAAO,SACPD,KAAK,yFAFP,sBAHF,qEAUE,uBAAGC,OAAO,SAASD,KAAK,8BAAxB,kCAVF,yDAcE,uBAAGC,OAAO,SAASD,KAAK,0BAAxB,gBAdF,oDAiBY,IACV,uBAAGA,KAAK,iCAAiCC,OAAO,UAAhD,sBAlBF,yIAuBA,shBACuF,IACrF,0CAFF,sEAGE,uBACEA,OAAO,SACPD,KAAK,iGAEJ,IAJH,cAKc,KARhB,4HAYA,sVAEE,+MAGJ,kBAACF,GAAD,CAAWJ,IAAKQ,S,mECzGT,YAASC,EAAOC,GAAa,IAClCC,EAAqBF,EAArBE,QAASC,EAAYH,EAAZG,QADwB,EAOrCF,EAAWG,wBAJbC,EAHuC,EAGvCA,KACAC,EAJuC,EAIvCA,IACOC,EALgC,EAKvChC,MACQiC,EAN+B,EAMvCxE,OAEIyE,EAASP,EAAUG,EACvBK,EAASP,EAAUG,EAToB,EAUfL,EAAWU,UAA7BpC,EAViC,EAUjCA,MAAOvC,EAV0B,EAU1BA,OACT4E,EAAIC,eAAe,CAAC,EAAGN,GAAY,CAAC,EAAGhC,IAC3CuC,EAAID,eAAe,CAAC,EAAGL,GAAa,CAAC,EAAGxE,IAC1C,MAAO,CAAC4E,EAAEH,GAASK,EAAEJ,KCfjBK,GAAU,SAAArC,GAAC,OAAKA,EAAI,GAAK,IAAMA,EAAIA,GAC1B,YAASd,GACtB,IAAMoD,EAAOpD,EAAKuB,cAChB8B,EAAQrD,EAAKwB,WAAa,EAC1BH,EAAOrB,EAAKyB,UACd,MAAM,GAAN,OAAU2B,EAAV,YAAkBD,GAAQE,GAA1B,YAAoCF,GAAQ9B,K,wXCC9C,IAAMiC,GAAMrF,IAAOsF,IAAV,MAIHC,GAASvF,IAAOwF,EAAV,MAINC,GAASzF,IAAO0F,KAAV,MAINC,GAAM3F,IAAO4F,OAAV,MAIM,eASX,IARFC,EAQC,EARDA,aACAC,EAOC,EAPDA,QACAC,EAMC,EANDA,gBACAC,EAKC,EALDA,YACAC,EAIC,EAJDA,MACAC,EAGC,EAHDA,OACAC,EAEC,EAFDA,cACAC,EACC,EADDA,SAEMC,EAAWC,kBAAO,GAClBC,EAAYD,iBAAO,MACnBE,EAASF,iBAAO,MAHrB,EAIqB3E,mBAAS,CAC7BI,MAAO,EACPqE,UAAW,IANZ,mBAIMK,EAJN,KAIWC,EAJX,KAUCC,EAAgB,GAAhBA,EAA2B,GAA3BA,EAAiD,GAE7C5B,EAAIC,iBAEP4B,OAAOX,GACPA,MAAM,CAACU,EAPI,KAOiBA,IAEzB9D,EAAImC,iBAEP4B,OAAO,CAACD,EAXG,KAWkBA,IAC7BV,MAAM,CAAC,EAAGE,IAEPU,EAAa,SAAAC,GACjB,IAAMjE,EAAKiE,EAAI,IAAQ,EACjBC,EAAI7D,KAAK8D,IAAKnE,EAAI,GAAM,EAAG,GAC3BoE,EAAI/D,KAAK8D,IAAInE,EAAI,GAAI,GAC3B,MAAM,GAAN,OAAUkE,EAAI,GAAK,IAAMA,EAAIA,EAA7B,YAAkCE,EAAI,GAAK,IAAMA,EAAIA,IAGjDC,EACJ,yBACEJ,EAAE,gBACFK,UAAU,OACVC,QAAQ,gBACRC,QAAQ,MACRC,MAAM,6BACNC,OAAK,OACL7E,MAAM,KACNvC,OAAO,MAEP,0BACE0C,EAAE,8HACF2E,KAAK,UACLD,OAAK,SAEP,0BACE1E,EAAE,iZACF2E,KAAK,UACLD,OAAK,UAKLE,EACJ,yBACEX,EAAE,gBACFK,UAAU,OACVC,QAAQ,gBACRC,QAAQ,MACRC,MAAM,6BACNC,OAAK,OACL7E,MAAM,KACNvC,OAAO,MAEP,0BACE0C,EAAE,4HACF2E,KAAK,UACLD,OAAK,SAEP,0BACE1E,EAAE,iWACF2E,KAAK,UACLD,OAAK,UAKLG,EACJ,yBACEZ,EAAE,gBACFK,UAAU,OACVC,QAAQ,gBACRC,QAAQ,MACRC,MAAM,6BACNC,OAAK,OACL7E,MAAM,KACNvC,OAAO,MAEP,0BAAM0C,EAAE,mBAAmB0E,OAAK,SAChC,0BACE1E,EAAE,8lBACF0E,OAAK,UAiDX,OAlBAlF,qBAAU,WACR,IAAMsF,EAAgB,kBAAOtB,EAASuB,SAAU,GAC1CC,EAAkB,SAAAC,GACtB,GAAKzB,EAASuB,QAAd,CAD2B,MAEVG,GAAMD,EAAGvB,EAAUqB,SAA7BhD,EAFoB,oBAGrBkC,EAAI/B,EAAEiD,OAAOpD,EAAS+B,GAC5BX,EAAYc,KAMd,OAHArH,OAAOwI,iBAAiB,UAAWN,GACnClI,OAAOwI,iBAAiB,YAAaJ,GAE9B,WACLpI,OAAOyI,oBAAoB,UAAWP,GACtClI,OAAOyI,oBAAoB,YAAaL,OAK1C,kBAACxC,GAAD,CAAK+B,QAAS,CAAC,EAAG,EArIN,KACH,IAoI4Be,SAAS,MAC5C,kBAAC5C,GAAD,CAAQ6C,UAAS,oBAAe,GAAf,KAAsB,GAAtB,KAA6BC,QAAStC,GACpDD,EAAU2B,EAAcvB,EAASwB,EAAgBR,GAEpD,uBAAGkB,UAAS,oBAAezB,EAAc,GAA7B,aAAoCxG,GAApC,MACV,0BAAMmI,WAAW,MAAMC,GAAG,SACvB1B,EAAWT,KAGhB,kBAACX,GAAD,CACE+C,IAAKjC,EACLxB,EAAG4B,EACH1B,EAAG0B,EACHjE,MAlJQ,KAkJOiE,EAAcA,EAC7BxG,OAAQ,GACRqH,KAAK,OACLiB,GAAI,EACJJ,QA9DN,SAAqBP,GAAI,IAAD,EACLC,GAAMD,EAAGvB,EAAUqB,SAA7BhD,EADe,oBAEhB7C,EAAOgD,EAAEiD,OAAOpD,EAAS+B,GAC/BX,EAAYjE,IA4DR2G,YAzDN,SAAyBZ,GAAI,IAAD,EACTC,GAAMD,EAAGvB,EAAUqB,SAA7BhD,EADmB,oBAEpBwB,EAAWvD,EAAE+B,EAAS+B,GACtB5E,EAAOgD,EAAEiD,OAAOpD,EAAS+B,GAC/BD,EAAO,CACL3E,OACAqE,cAoDEuC,YAhDN,SAAyBb,GAAI,IAAD,EACTC,GAAMD,EAAGvB,EAAUqB,SAA7BhD,EADmB,oBAEpBwB,EAAWvD,EAAE+B,EAAS+B,GACtB5E,EAAOgD,EAAEiD,OAAOpD,EAAS+B,GAC/BD,EAAO,CACL3E,OACAqE,eA4CE,0CAAYS,EAAWJ,EAAIL,UAA3B,aAAyCwC,GACvC,IAAIvF,KAAKoD,EAAI1E,UAGjB,kBAAC4D,GAAD,CACE6C,IAAKhC,EACLqC,GAAI9D,EAAEc,IAAiBc,EACvBmC,GAAI3I,GACJ4I,EAAG,EACHC,YAAa,kBAAO3C,EAASuB,SAAU,KAEzC,uBAAGQ,UAAS,oBArKF,KAqKE,aAAyBjI,GAAzB,MACV,0BAAMmI,WAAW,MAAMtH,MAAM,QAAQuH,GAAG,SACrC1B,EAAWV,O,mvECzMtB,IAAMpG,GAAYC,IAAOC,IAAIgJ,OAC3B,SAAC/I,GAAD,OACEA,EAAMgJ,MAAQ,CACZzG,MAAO,CACL0G,SAAU,QACVC,OAAQ,IACR5E,KAAM,MACNC,IAAK,MACL2D,UAAW,wBACXiB,UAAW,GACX3G,MAAO,MACPC,SAAU,SAXA3C,CAAH,MAeF,SAACE,GAAD,OAAYA,EAAMoJ,KAAO,QAAU,UAW1CC,GAAQvJ,IAAOC,IAAV,MAULW,GAAMZ,IAAOC,IAAV,MACE,SAACC,GAAD,OAAWA,EAAMwC,SAChB,SAACxC,GAAD,OAAWA,EAAMC,UACZ,SAACD,GAAD,OAAWA,EAAMC,UAElB,SAACD,GAAD,MACG,aAAfA,EAAMuB,KAAsB,cAAgB,WAM1C+H,GAAaxJ,YAAOyJ,KAAPzJ,CAAH,MAOV0J,GAAc1J,YAAO2J,KAAP3J,CAAH,MAQX4J,GAAU5J,IAAO6J,GAAV,MAgBPC,GAAe9J,YAAO+J,KAAP/J,CAAH,MAIZgK,GAAShK,IAAOC,IAAV,MASNgK,GAAOjK,IAAOC,IAAV,MAMJiK,GAAOlK,IAAOC,IAAV,MASJkK,GAAQnK,IAAOC,IAAV,MAKLmK,GAAapK,YAAOqK,KAAPrK,CAAH,MAIVsK,GAAWtK,YAAOoK,GAAPpK,CAAH,MAId,SAASuK,GAAT,GAAyC,IAAxB9I,EAAuB,EAAvBA,KAAMiB,EAAiB,EAAjBA,MAAOvC,EAAU,EAAVA,OAC5B,OACE,kBAAC,GAAD,CAAKuC,MAAOA,EAAOvC,OAAQA,EAAQsB,KAAMA,GAC7B,YAATA,EACC,kBAAC+H,GAAD,MAEA,kBAACE,GAAD,CACEc,YAAY,2BACZC,MAAOd,KAAMe,0BA0GR5J,OAnGf,YAYI,IAXF6J,EAWC,EAXDA,SACAC,EAUC,EAVDA,WACAC,EASC,EATDA,cACAC,EAQC,EARDA,cACAxJ,EAOC,EAPDA,QACAyJ,EAMC,EANDA,OAMC,IALDC,aAKC,MALO,QAKP,EAJDC,EAIC,EAJDA,aACAC,EAGC,EAHDA,KAGC,IAFD5B,YAEC,SADE6B,EACF,kIACK3C,EAAMlC,iBAAO,MADlB,ECrJY,SAASkC,GAAM,IAAD,EACH7G,mBAAS,CAC/Be,MAAO,EACPvC,OAAQ,IAHiB,mBACpBiL,EADoB,KACdC,EADc,OAMR1J,mBACjB,IAAI2J,YAAe,YAAc,IAAZC,EAAW,oBAC9B,GAAIA,EAAO,CAAC,IAAD,EACiBA,EAAMC,YAAxB9I,EADC,EACDA,MAAOvC,EADN,EACMA,OACfkL,EAAQ,CAAE3I,QAAOvC,gBAJhBsL,EANoB,oBAmB3B,OALApJ,qBAAU,WACR,IAAMqJ,EAAOlD,EAAIZ,QAEjB,OADA6D,EAASE,QAAQD,GACV,kBAAMD,EAASG,gBACrB,CAACpD,EAAKiD,IACFL,EDoImBS,CAAQrD,GAA1B9F,EAFP,EAEOA,MAAOvC,EAFd,EAEcA,OAFd,EAGuBwB,oBAAS,GAHhC,mBAGMuH,EAHN,KAGY4C,EAHZ,OAIuBnK,oBAAS,GAJhC,mBAIMoK,EAJN,KAIYC,EAJZ,OAKqBrK,oBAAS,GAL9B,mBAKMsK,EALN,KAKWC,EALX,KAOKC,EACJ,kBAACvC,GAAD,KACE,wBAAIvB,QAAS,kBAAM+D,EAAYxB,GAA0BC,KACvD,sCAEDC,GACC,wBAAIzC,QAAS,kBAAM+D,EAAYtB,KAC7B,uCAMR,SAASsB,EAAYC,GACnBA,GAAMA,IACNH,GAAO,GAGT,OACE,oCACE,kBAAC,GAAD,eACE1D,IAAKA,EACLc,KAAMA,GACF6B,EAHN,CAIEjC,KAAMA,EACNb,QAAS,kBAAM6D,GAAO,MAErB5K,EACC,kBAACiJ,GAAD,CAAO7H,MAAOA,EAAOvC,OAAQA,EAAQsB,KAAK,YAE1CsJ,GAAU,kBAACR,GAAD,CAAO7H,MAAOA,EAAOvC,OAAQA,IAEzC,kBAAC6J,GAAD,KACE,kBAACC,GAAD,KACE,kBAACG,GAAD,CACE3I,KAAK,kBACL4G,QAAS,kBAAM+D,GAAY,kBAAMJ,GAAQ,SAE3C,8BAAOhB,IAET,kBAACb,GAAD,KACE,kBAACD,GAAD,KAAOgB,GACP,kBAACZ,GAAD,CACE7I,KAAMyH,EAAO,kBAAoB,aACjCb,QAAS,kBAAM+D,GAAY,kBAAMN,GAAS5C,SAE5C,kBAAC,KAAD,CACEoD,UAAU,cACVH,QAASA,EACTI,QAAQ,QACRC,oBAAkB,EAClBC,QAASR,GAET,kBAAC7B,GAAD,CACE3I,KAAK,WACL4G,QAAS,SAACP,GACRoE,GAAQD,GACRnE,EAAE4E,wBAMX/B,EACD,kBAACb,GAAD,CACEkB,MAAOA,EACPsB,UAAU,QACVK,UAAU,EACVC,QAAS,kBAAMZ,GAAQ,IACvBS,QAASV,EACTc,cAAc,GAEb5B,IAGJ/B,GAAQ,kBAACK,GAAD,CAAOlB,QAAS,kBAAMyD,GAAQ,QEzOtC,SAASgB,GAAUxH,GACxB,IAAMgC,EAAQ,gCAGdhC,EAAMA,EAAIyH,WAAU,GAQpB,IAPA,IAAMC,EAAWvN,OAAOC,SAASsE,KAAO,IAClCiJ,EAASC,SAASC,iBACtB7H,EACA8H,WAAWC,aACX,MACA,GAEKJ,EAAOK,YAAY,CAAC,IAAD,uBACxB,YAAmBL,EAAOM,YAAYC,WAAtC,+CAAkD,CAAC,IAAxCC,EAAuC,QAC5CA,EAAKzK,MAAM0K,SAASV,KACtBS,EAAKzK,MAAQyK,EAAKzK,MAAM2K,QAAQX,EAAU,OAHtB,mFAO1B1H,EAAIsI,eAAetG,EAAO,QAhBZ,8BAiBdhC,EAAIsI,eAAetG,EAAO,cAlBV,gCAmBhB,IACMuG,GADa,IAAIpO,OAAOqO,eACJC,kBAAkBzI,GAC5C,OAAO,IAAI0I,KAAK,CAACH,GAAS,CAAEpM,KAAM,kBAsBrB,gBAASwM,EAAMC,GAC5B,IAAMC,EAAMC,IAAIC,gBAAgBJ,GAC1BK,EAAIpB,SAASqB,cAAc,KACjCD,EAAEtK,KAAOmK,EACTG,EAAEE,SAAWN,GAAY,WACzBI,EAAEG,S,uEC7CJ,IAAMC,GAAW1O,IAAOsF,IAAI2D,OAAM,SAAC/I,GAAD,MAAY,CAC5CuC,MAAO,CACLkM,WAAY,YAFC3O,CAAH,MAMC,eAYX,IAXFyC,EAWC,EAXDA,MACA0E,EAUC,EAVDA,UACA7E,EASC,EATDA,GACAhB,EAQC,EARDA,QACAyJ,EAOC,EAPDA,OAOC,IANDzB,YAMC,SALDqB,EAKC,EALDA,SACAM,EAIC,EAJDA,aACAD,EAGC,EAHDA,MACAE,EAEC,EAFDA,KACGC,EACF,8GACK3C,EAAMlC,iBAAO,MAUnB,IAAMsI,EAAY,CAChB/D,cALF,YDJK,SAAmBvF,GACxB,IAAIuJ,EAASC,EACPC,EAAU,IAAIC,SAAQ,SAAC/J,EAAGgK,GAAJ,OAAYJ,EAAU5J,EAAK6J,EAASG,KAC1DxE,EAAQ,IAAIyE,MAalB,OAZAzE,EAAM0E,QAAUL,EAChBrE,EAAM2E,OAAS,WACb,IAAM1J,EAAOJ,EAAIf,wBACX8K,EAASnC,SAASqB,cAAc,UACtCc,EAAO3M,MAAqB,EAAbgD,EAAKhD,MACpB2M,EAAOlP,OAAuB,EAAduF,EAAKvF,OACrB,IAAMmP,EAAUD,EAAOE,WAAW,MAClCD,EAAQE,MAAM,EAAG,GACjBF,EAAQG,UAAUhF,EAAO,EAAG,EAAG/E,EAAKhD,MAAOgD,EAAKvF,QAChDmP,EAAQD,OAAOK,OAAOb,IAExBpE,EAAM/G,IAAM0K,IAAIC,gBAAgBvB,GAAUxH,IACnCyJ,GCXLY,CAAUnH,EAAIZ,SAASgI,KAAKpB,KAK5B1D,cAXF,WACE,IAAMmD,EAAOnB,GAAUtE,EAAIZ,SAC3B4G,GAASP,IAUT3L,KACAG,QACA0E,YACA7F,UACAyJ,SACAzB,OACA2B,eACAD,QACAE,QAGF,OACE,kBAAC,GAAS0D,EACR,kBAACF,GAAD,eAAUlG,IAAKA,GAAS2C,EAAxB,CAA8B0E,WAAW,WACtClF,K,UC/CM,eAUX,IATFrJ,EASC,EATDA,QACAwO,EAQC,EARDA,UACAjK,EAOC,EAPDA,aACAC,EAMC,EANDA,QACA9E,EAKC,EALDA,MACA+O,EAIC,EAJDA,aACAC,EAGC,EAHDA,iBACAC,EAEC,EAFDA,iBACAC,EACC,EADDA,cAIEvJ,EAAgB,GAAhBA,EAA2B,GAA3BA,EAAuC,GAAvCA,EAAiD,GAEnD,QAAkBwJ,IAAdL,EACF,OACE,kBAAC,GAAD,CACE1I,QAAS,CAAC,EAAG,EAPL,IACH,KAOL9F,QAASA,EACTyJ,QAAQ,IAVb,MAeiCpJ,oBAAS,GAf1C,mBAeMyO,EAfN,KAeiBC,EAfjB,KAgBKnF,EACJ,oCACE,0DACA,kBAAC,KAAD,CAAQ3I,SAAU8N,EAAcC,QAASF,EAAWhF,KAAK,WAIvDmF,EAASvL,aAAY,SAACnC,GAAD,OAAOA,EAAE,MAC9BoC,EAAID,eAEP4B,OAAO5B,SAASiK,KAChBuB,QAAQ,IACRvK,MAAM,CAACU,GA1BC,IA0BsBA,GANvB,GAMY,KAChB8J,EAAUxL,EAAEyL,YACZC,EAwCN,SAAqB7O,EAAMC,GACzB,IAAM6O,EAAIL,EAAO/L,KAAK1C,EAAMC,EAAM,EAAGD,EAAK+O,OAAS,GACjDvC,EAAIxM,EAAK8O,GACX,IAAKA,IAAM9K,EAAS,OAAOwI,EAAE,GAAG1L,KAAI,SAACC,GAAD,uBAAaA,EAAb,CAAgBoC,EAAGA,EAAEpC,EAAEiO,WAC3D,IAAMC,EAAIjP,EAAK8O,EAAI,GACjB9J,GAAK/E,EAAOuM,EAAE,KAAOyC,EAAE,GAAKzC,EAAE,IAEhC,OAAOA,EAAE,GAAG1L,KAAI,SAACC,GAAO,IAAD,EACGkO,EAAE,GAAGC,MAAK,gBAAGlO,EAAH,EAAGA,KAAH,OAAcD,EAAEC,OAASA,MAAS,CAClEE,MAAOH,EAAEG,MACT8N,KA1DI,IAwDE9N,EADa,EACbA,MAAO8N,EADM,EACNA,KAIf,OAAO,gBACFjO,EADL,CAEEoC,EAAGA,EAAEpC,EAAEiO,OAAS,EAAIhK,GAAK7B,EAAE6L,GAAQhK,EACnC9D,MAAOH,EAAEG,OAAS,EAAI8D,GAAK9D,EAAQ8D,OAvD5BmK,CAAYnB,EAAWjK,GAE9Bd,EAAIC,iBAEP4B,OAAO,CAAC,EAAG5B,OAAO2L,GAAM,SAAC9N,GAAD,OAAOA,EAAEG,WACjCiD,MAAM,CAACU,EAlCI,IAkCiBA,IAEzBuK,EAAY,SAACrO,EAAGsO,GACpB,IAAMC,EAASD,EAAQ,EAAI,EAAI,GAI/B,OAHaf,EACTrL,EAAEkB,QAAQ,GAAKlB,EAAE,GAAKqM,EACtBlO,KAAK8D,IAAIjC,EAAElC,EAAEG,OAAS+B,EAAE,GAAK,EAAG,IAIhCsM,EAAQV,EAAK/N,KAAI,SAACC,GAAD,OAAOA,EAAEC,QAC1BR,EAAK,SAACO,GAAD,kBAAYA,EAAEG,QAInBiI,EACJ,6BACE,4CACA,6IACA,4CACA,yKACA,4CACA,4BACE,4BACE,2CADF,4KAGA,4BACE,6DADF,kHA8CN,OAvCAjK,EAAMsQ,IAAID,GAsBVhP,qBAAU,WAERrB,EAAMuQ,IAAIF,GAGV,IAAMG,EAAOxM,WACFD,GACR0M,MAAM/O,MACNgP,cAAc,GACdC,eAAelB,GAAWxB,GAAQhK,EAAEuL,YAEjChL,EAAIR,UAAU,aAAa4M,KAAKJ,GACtChM,EAAEqM,OAAO,4BAA4BC,SACrCtM,EAAEuM,UAAU,kCAAkCtE,KAAK,SAAU,SAC7DjI,EAAEqM,OAAO,WAAWC,YAIpB,kBAAC,GAAD,CACE1K,QAAS,CAAC,EAAG,EA5GH,IACH,KA4GP9F,QAASA,EACT+G,QAAS4H,EACTjF,MAAM,iCACNC,aAAcA,EACdC,KAAMA,GAELyF,EAAK/N,KAAI,SAACC,GAAD,OACR,uBACEuF,UAAS,oBAAezB,EAAf,aAA+Bb,EAAUjD,EAAEoC,EAAIA,EAAEpC,EAAEiO,MAAnD,KACT/N,IAAKF,EAAEC,MAEP,0BACEJ,MAAO0N,EAAYrL,EAAEkB,QAAQ,GAAKlB,EAAE,GAAKA,EAAElC,EAAEG,OAAS+B,EAAE,GACxD5E,OAAQsQ,EACRjJ,MA7EU1E,EA6EOD,EAAEC,KA5ET,OAAlBoN,GAA0BA,IAAkBpN,EAAO,UAAY9B,EAAM8B,IA6E7DkP,OAAO,UACPC,YAAa,GACb5J,QAAS,SAACP,GACRkI,EAAiBnN,EAAEC,MACnBgF,EAAE4E,oBAGJ,+BAAQ7J,EAAEC,QArFD,IAACA,KAyFhB,uBAAGR,GAAG,WAAW8F,UAAS,oBAAe,EAAf,KAAqBzB,EAArB,OACzBgK,EAAK/N,KAAI,SAACC,EAAGsO,GAAJ,OACR,uBACE/I,UAAS,oBAAezB,EAAf,aAA+Bb,EAAUjD,EAAEoC,EAAIA,EAAEpC,EAAEiO,MAAnD,KACT/N,IAAKF,EAAEC,MAEP,0BACEoP,GAAG,IACH3J,GAAG,QACH4J,SAAQ,eAAU7P,EAAGO,GAAb,KACRuP,WAAW,OACXjK,SAAS,KACT6J,OAAO,UACP3J,QAAS,SAACP,GACRkI,EAAiBnN,EAAEC,MACnBgF,EAAE4E,oBAGH7J,EAAEC,KACH,+BAAQD,EAAEC,OAEZ,0BACEoP,GAAG,IACHjN,EAAGwL,EACHlI,GAAG,UACH4J,SAAQ,eAAU7P,EAAGO,GAAb,KACRsF,SAAS,KACTX,KAAK,gBAEM,EAAV3E,EAAEG,OAEL,8BACE,8BAAUV,GAAIA,EAAGO,IACf,0BAAMkC,EAAE,IAAIE,EAAE,IAAIvC,MAAOwO,EAAUrO,EAAGsO,GAAQhR,OAAQsQ,UAK9D,uBACErI,UAAS,oBA9KD,IA8KwBzB,EAAe,EAAtC,aAA4CxG,IAA5C,KACTmI,WAAW,MACXd,KAAM4I,EAAY,QAAU,QAE5B,0BAAMjI,SAAU,GAAIiK,WAAW,QAC5BrC,GAEH,0BAAM5H,SAAU,GAAII,GAAG,SACpB8J,GAAW,IAAIhP,KAAKwC,Q,0GCjM/B,IAAMyM,GAAStS,IAAOqP,OAAV,MAKG,eAcX,IAbF/N,EAaC,EAbDA,QACAyJ,EAYC,EAZDA,OACAtI,EAWC,EAXDA,MACA0E,EAUC,EAVDA,UACA7E,EASC,EATDA,GASC,IARDiQ,kBAQC,MARY,GAQZ,EAPD5H,EAOC,EAPDA,SACAjI,EAMC,EANDA,MACAvC,EAKC,EALDA,OAKC,IAJD+N,gBAIC,MAJU,QAIV,EAHDjD,EAGC,EAHDA,aACAD,EAEC,EAFDA,MACGG,EACF,yIASD,IAAM3C,EAAMlC,iBAAO,MAEbsI,EAAY,CAChBhE,WAVF,WACiBpC,EAAIZ,QACZ8H,QAAO,SAAAzB,GACZO,GAASP,EAAMC,OAQjB5L,KACAG,QACA0E,YACA7F,UACAyJ,SACAE,eACAD,SAGIwH,EAAW,cACfhK,MACA9F,MAvBY,EAuBLA,EACPvC,OAxBY,EAwBJA,GACLgL,GAYL,OATA9I,qBAAU,WACR,IACMiN,EADS9G,EAAIZ,QACI2H,WAAW,MAClCD,EAAQmD,UACRnD,EAAQoD,OACRpD,EAAQE,MAjCI,KAkCZ7E,GAAYA,EAAS2E,KACpBiD,GAGD,kBAAC,GAAS3D,EACR,kBAAC0D,GAAWE,KC5DH,eAUX,IATFlR,EASC,EATDA,QACAuE,EAQC,EARDA,aACAiK,EAOC,EAPDA,UACAhK,EAMC,EANDA,QACAiK,EAKC,EALDA,aACA4C,EAIC,EAJDA,WACA3R,EAGC,EAHDA,MACA4R,EAEC,EAFDA,cACA1C,EACC,EADDA,cAOA,QAAkBC,IAAdL,GAAgD,IAArBA,EAAUe,OACvC,OACE,kBAAC,GAAD,CACEnO,MARQ,IASRvC,OARK,IASLmB,QAASA,EACTiR,WAAY,CAAC1M,EAAcgN,GAC3B9H,YAAsBoF,IAAdL,IAId,IAAMgD,EAAmB,IAAIC,IAAI,CAAC,IAAK,IAAK,SAEtCC,EAAW,SAACC,GAAD,uBACZA,EADY,CAEf7H,KAAM,KAEF8H,EAAO,SAACrQ,GAAD,OAAOA,EAAEqQ,MAChBC,EACc,OAAlBjD,EAaF,SAAyBnO,GACvB,IACM6O,GAAIL,EADKvL,aAAY,SAACnC,GAAD,OAAOA,EAAE,MAAI2B,MACvBsL,EAAW/N,EAAM,EAAG+N,EAAUe,OAAS,GACtDvC,EAAIwB,EAAUc,GAChB,IAAKA,IAAM9K,GAAW/D,EAAOuM,EAAE,GAAI,OAAOA,EAAE,GAC5C,IAAMyC,EAAIjB,EAAUc,EAAI,GACtB9J,EAAI9B,oBAAoBjD,EAAOuM,EAAE,KAAOyC,EAAE,GAAKzC,EAAE,KAG7C8E,EAAYrC,EAAE,GACjBsC,QAAO,SAACJ,GAAD,OAAW3E,EAAE,GAAG0C,MAAK,SAACnO,GAAD,OAAOqQ,EAAKrQ,KAAOqQ,EAAKD,SACpDrQ,IAAIoQ,GAEP,MADS,uBAAOI,GAAP,aAAqB9E,EAAE,KACrB1L,KAAI,SAACqQ,GACd,IAAM1B,EAAMR,EAAE,GAAGC,MAAK,SAACnO,GAAD,OAAOqQ,EAAKrQ,KAAOqQ,EAAKD,OAAUD,EAASC,GACjE,OAAOK,OAAOC,KAAKN,GAAMO,QAAO,SAACC,EAAK1Q,GAMpC,OALI+P,EAAiBY,IAAI3Q,GACvB0Q,EAAI1Q,GAAOkQ,EAAKlQ,IAAQ,EAAI+D,GAAKyK,EAAIxO,GAAO+D,EAE5C2M,EAAI1Q,GAAOkQ,EAAKlQ,GAEX0Q,IACN,OAnCoBE,CAAgB9N,GAAgB+M,EAErD3H,EACJ,6BACE,4CACA,mKACA,4CACA,yKACA,4CACA,sCA4DJ,SAAS4H,EAAKvD,GACZA,EAAQsE,UAAY,QACpBtE,EAAQuE,SAAS,EAAG,EA/FR,IACH,KA+EX,SAAkBvE,GAChBA,EAAQoD,OACRpD,EAAQwE,UAAUpR,IAAWvC,KAC7BmP,EAAQyE,UAAY,SAHK,2BAIzB,YAAiBZ,EAAjB,+CAAwB,CAAC,IAAhBF,EAAe,QAChBzL,EAAyB,OAAlB0I,EAAyByC,EAAWO,EAAKD,IAASjS,EAC/DsO,EAAQsE,UAAR,UAAuBpM,GACvB8H,EAAQ0E,KAAR,UAAkBf,EAAK7H,KAAvB,aACAkE,EAAQ2E,SAASf,EAAKD,GAAOA,EAAKlO,EAAGkO,EAAKhO,IARnB,kFAUzBqK,EAAQmD,UAMRyB,CAAS5E,GAjCX,SAAmBA,GACjBA,EAAQoD,OAERpD,EAAQwE,UAAUpR,IAAyBvC,KAC3CmP,EAAQsE,UAAY,OACpBtE,EAAQyE,UAAY,MACpBzE,EAAQ6E,aAAe,SACvB7E,EAAQ0E,KAAR,mBACA1E,EAAQ2E,SAASlE,EAAc,EAAG,GAGlCT,EAAQ0E,KAAO,uCACf1E,EAAQ2E,SAAS5B,GAAW,IAAIhP,KAAKwC,IAAgB,EAAG,IAExDyJ,EAAQmD,UAoBR2B,CAAU9E,GAGZ,OACE,kBAAC,GAAD,CACE5M,MAtGU,IAuGVvC,OAtGO,IAuGPoS,WAAY,CAAC1M,EAAcgN,GAC3BvR,QAASA,EACTyJ,OAAyB,IAAjBoI,EAAMtC,OACd7F,MAAM,2BACNC,aAAcA,GAEb4H,IC3HQ,eAA2C,IAAhCwB,EAA+B,EAA/BA,OAAQC,EAAuB,EAAvBA,IAAKlJ,EAAkB,EAAlBA,KAAMT,EAAY,EAAZA,SAAY,cACvB0J,EADuB,GAChDE,EADgD,KAC5CC,EAD4C,KACxC9R,EADwC,KACjCvC,EADiC,mBAEtCmU,EAFsC,GAEhDvP,EAFgD,KAE7C0P,EAF6C,mBAG1BrJ,EAH0B,GAGhDsJ,EAHgD,KAIjDC,GAAUH,EAAKrU,EAJkC,MAIb,EACtCyU,EAAS7P,EAMb,OALIA,EAAI2P,EAAWD,EAAMF,EAAK7R,EAC5BkS,GAAUF,EAAWD,EAErBG,GAAUH,EAEL,oCAAG9J,GAAYA,EAASiK,EAAQD,KCR1B,eAYX,IAXFrT,EAWC,EAXDA,QACAuT,EAUC,EAVDA,WACAhP,EASC,EATDA,aASC,IARDiP,oBAQC,MARc,UAQd,MAPDC,qBAOC,MAPe,MAOf,EANDC,EAMC,EANDA,gBACAC,EAKC,EALDA,MACAC,EAIC,EAJDA,SACApP,EAGC,EAHDA,QACAqP,EAEC,EAFDA,kBACAC,EACC,EADDA,UAEM5M,EAAMlC,iBAAO,MAGjBK,EAAgB,GAAhBA,EAA2B,GAA3BA,EAAuC,GAAvCA,EAAiD,GACjD0L,EAAarN,cAAc,MAC3BuL,EAASvL,aAAY,SAACnC,GAAD,OAAOA,EAAEO,QAAMoB,KAEhC6Q,EAAiB,IAAItC,IAAI,CAC7B,2BACA,2BACA,2BACA,2BACA,2BACA,2BACA,2BACA,mCAGIuC,EAAe,IAAIvC,IAAIqC,GAnB5B,EAqBiCzT,mBAAS,IArB1C,mBAqBM4T,EArBN,KAqBiBC,EArBjB,OAsBiB7T,mBAAS,MAtB1B,mBAsBE8E,EAtBF,KAsBOC,EAtBP,KAwBK+O,EAAMC,mBACR,kBACEC,MAAMC,KAAKf,GAAYjS,KAAI,mCAAEQ,EAAF,KAAQtB,EAAR,0BACzBsB,KAAM,IAAIC,KAAKD,IACZtB,EACAuR,QAAO,YAAiB,IAAdwC,EAAa,EAAbA,OACT,MAAsB,QAAlBd,EACQ,IAAIhC,IAAIoC,GACTzB,IAAImC,GACc,WAAlBd,EACFM,EAAe3B,IAAImC,IAElBP,EAAa5B,IAAImC,KAAYR,EAAe3B,IAAImC,MAG3DrC,QAAO,SAACC,EAAD,OAAQoC,EAAR,EAAQA,OAAQ/T,EAAhB,EAAgBA,KAAhB,OAA6B2R,EAAIoC,GAAU/T,EAAO2R,IAAM,UAEtE,CAACoB,EAAYE,EAAeI,EAAkBtE,SAEhD/O,EAAO4T,mBACL,kBACED,EACG7S,KAAI,SAACC,GAAD,OACHyQ,OAAOC,KAAK1Q,GAAG2Q,QAAO,SAACC,EAAK1Q,GAM1B,MALY,SAARA,EACF0Q,EAAI1Q,GAAOF,EAAEE,GACM,KAAVkS,GAAgBA,IAAUlS,IACnC0Q,EAAI1Q,GAAOF,EAAEE,GAAK+R,IAEbrB,IACN,OAEJqC,MAAK,SAACxH,EAAGyC,GAAJ,OAAUzC,EAAElL,KAAO2N,EAAE3N,UAC/B,CAACqS,EAAKX,EAAcG,IAErBc,EAnCG,YAmCMjU,EAnCN,MAoCJyR,EAAOwC,EAAQzC,OAAOC,KAAKwC,GAAO1C,QAAO,SAACxQ,GAAD,MAAa,SAANA,KAAgB,GAEhEmT,EAA2B,WAAlBjB,EAA6B,EAAI,EAC1CkB,EAAgC,UAAlBlB,EAA4B,GAAK,GAG/CmB,EAAuB,WAAlBnB,EAA6B,IAAM,GAExCoB,EAAOjT,KAAK8D,IAAIkP,EAAKhT,KAAKkT,KAAK7C,EAAK1C,OAASmF,GAAS,KACtDK,EAFK,GAEEnT,KAAKoT,IAAI/C,EAAK1C,OAAQmF,GAAe,GAExCO,EAASvR,WAAWuO,KAAKA,EAAhBvO,CAAsBlD,GAE/BiD,EAAIC,eAEP4B,OAAO5B,UAAUlD,GAAM,SAACe,GAAD,OAAO,IAAIQ,KAAKR,EAAEO,UACzC6C,MAAM,CAAC,EA1EI,KA0EOU,EAAeA,IAE9B1B,EAAID,iBAEP4B,OAAO,CAAC,EAAG5B,OAAOuR,GAAQ,SAAC1T,GAAD,OAAOmC,OAAOnC,GAAG,SAACA,GAAD,OAAOA,EAAE,WACpD2T,OACAvQ,MAAM,CA/EE,IA+EQU,EAAgBA,EAAY,IAEzC8P,EAAU,SAACtF,GAAD,OAAaA,EAvBrB,EAuBoC,GAAK8E,GAC3CS,EAAU,SAACvF,GAAD,OAAYA,EAxBpB,EAGS,IAsBXwF,EAAO,SAACxF,GAAD,OAAaA,EAAQ6E,EAAU,GAAKE,GAC3CU,EAAO,SAACzF,GAAD,OAAYA,EAAQ6E,EApB1B,IAsBDa,EAAQ,WACZ,OAAoB9R,EAAhBe,EAAkB,IAAIzC,KAAKwC,GAC3BY,EAAcA,EAAI1E,KACb,IAAIsB,KAAK,KAGdyT,EAAO9R,UAEVD,GAAE,SAAClC,GAAD,OAAOkC,EAAElC,EAAEf,KAAKsB,SAClBoR,IAAG,SAAC3R,GAAD,OAAOoC,EAAEpC,EAAE,OACdkU,IAAG,SAAClU,GAAD,OAAOoC,EAAEpC,EAAE,OAEX8P,EACY,IAAhBY,EAAK1C,OACD,iBAAM,WACN7L,kBAEG4B,OAAO2M,GACPtN,MAAMjB,YAAYA,uBAAwBuO,EAAK1C,QAAQmG,WAE1DhW,EAAQ,SAAC+B,GAAD,MACE,KAAdwS,GAAoBxS,IAAQwS,EAAY5C,EAAW5P,GA7CpC,WAkDXT,GAAK,SAACS,GAAD,kBAAcA,IAEnBkI,GACJ,6BACE,4CACA,uMACA,4CACA,iMACA,4CACA,4BACE,4BACE,6DADF,8IAEE,6DAFF,wCAIA,4BACE,2CADF,yGAC4B,6DAD5B,SAEE,2CAFF,gDAkCN,OARA5I,qBAAU,WACR,IAAM4U,EAAQjS,cAAcD,GAG5BC,UAAU,eAAe4M,KAAKqF,GAC9BjS,UAAU,eAAe4M,MAHX,SAACpM,GAAD,OACZA,EAAEoM,KAAK5M,YAAYC,IAAI2M,MAAK,SAACpM,GAAD,OAAOA,EAAEqM,OAAO,WAAWC,iBAGxD,CAAChQ,IAGF,oCAZyB,IAAlByU,EAAO1F,OAcV,kBAAC,GAAD,CACEzJ,QAAS,CAAC,EAAG,EArKP,KACH,KAqKH9F,QAASA,EACTyJ,QAAQ,IAGV,kBAAC,GAAD,CACE3D,QAAS,CAAC,EAAG,EA3KP,KACH,KA2KH9F,QAASA,EACT4V,cAAe,kBAAMhC,EAAS,KAC9BiC,aAAc,kBAAM3B,EAAa,KACjCvK,aAAcA,GACdD,MAAM,kCAEN,uBACEgH,OAAO,UACPxJ,IAAKA,EACLJ,UAAS,oBAAezB,EAAf,aAA+BA,EAA/B,KACTwQ,aAAc,kBAAMzQ,EAAO,QAE3B,uBACEgC,YA5CZ,SAAyBZ,GAAI,IAAD,EACDC,GAAMD,EAAGU,EAAIZ,SADZ,mBACnBhD,EADmB,KACXC,EADW,KAEpB9C,EAAOgD,EAAEiD,OAAOpD,GAAQwS,UACxBxG,EAAIL,EAAOzO,EAAM,IAAIuB,KAAKtB,GAAO,EAAGD,EAAK+O,OAAS,GACtDvC,EAAIxM,EAAK8O,GACXlK,EAAO,gBAAK4H,EAAN,CAASvM,OAAMgD,EAAGH,EAAQK,EAAGJ,MAwCzBwD,QAnDZ,SAAkCP,GAAI,IAAD,EAClBC,GAAMD,EAAGU,EAAIZ,SAAvBhD,EAD4B,oBAE7B7C,EAAOgD,EAAEiD,OAAOpD,GAAQwS,UAC9BpC,EAAgBjT,IAiDN4G,YAAa,iBAAoB,KAAd4M,GAAoBC,EAAa,MAEnDe,EAAO3T,KAAI,SAACqE,GAAD,OACV,0BACElE,IAAKkE,EAAElE,IACPyE,KAAMxG,EAAMiG,EAAElE,KACdF,EAAGiU,EAAK7P,GACRoQ,QApFAtU,EAoFekE,EAAElE,IAnFb,QAAlBgS,EAA0B/P,SAAShE,EAAM+B,IAAMuU,SAAW,QAoF5CC,YAAa,EACbC,cAAc,UAtFf,IAACzU,MA0FN,0BACE0U,GAAIZ,IACJE,GAAI,EACJW,GAAIb,IACJc,GA3MD,IA2MchR,EAAgBA,EAC7B0Q,OAAO,iBAET,uBAAGjP,UAAS,oBAAe,GAAf,KAAqB,GAArB,MACV,0BACE+O,aAAc,kBAAM3B,EAAa,KACjCzQ,GAAI,GACJE,GAAI,GACJuC,KAAK,cACL9E,MAAOuT,EAAc/S,KAAKkT,KAAK7C,EAAK1C,OA1J1C,GA2JM1Q,OAxJG,GAwJK+C,KAAKoT,IAAI/C,EAAK1C,OA3J5B,KA6JK0C,EAAK3Q,KAAI,SAACG,EAAKoO,GAAN,OACR,uBACEpO,IAAKA,EACLqF,UAAS,oBAAeqO,EAAQtF,GAAvB,aAAkCuF,EAAQvF,GAA1C,KACTyG,aAAc,kBAAMpC,EAAazS,IACjCsF,QAAS,SAACP,GACRoN,EAASnS,GACTyS,EAAa,IACb1N,EAAE4E,oBAGJ,4BAAQlF,KAAMxG,EAAM+B,GAAM8F,GAAI,EAAGC,GAAI,EAAGC,EAAG,IAC3C,0BACER,GAAI,EACJ2J,GAAI,GACJ1K,KAAK,eACLW,SAAS,KACTgK,SAAQ,eAAU7P,GAAGS,GAAb,MAEPA,EACD,+BAAQA,IAEV,8BACE,8BAAUT,GAAIA,GAAGS,IACf,0BACEgC,EAAG,EACHE,GAAG,KACHvC,MAAOuT,EAAc,EACrB9V,OAtLL,YA6LNsG,GACC,kBAACoR,GAAD,CACExD,OAAQ,CACN,EACA,EA/PF,KAgQU1N,EAAcA,EA/P3B,IAgQcA,EAAaA,GAExByE,KAAM,CAAC+K,EAAME,GACb/B,IAAK,CAAC7N,EAAI1B,EAAG,MAEZ,SAACA,EAAGE,GAAJ,OACC,uBAAGmD,UAAS,oBAAerD,EAAf,aAAqBE,EAArB,MACV,0BACEvC,MAAOyT,EACPhW,OAAQkW,EACR5N,GAAI,GACJqP,GAAI,GACJtQ,KAAK,QACL6P,OAAO,iBAET,0BAAMnF,GAAI,GAAI3J,GAAI,IACf8J,EAAW5L,EAAIrD,OAElB,uBAAGgF,UAAS,qBACTkL,OAAOC,KAAK9M,GACV4M,QACC,SAACxQ,GAAD,MACQ,SAANA,GACM,MAANA,GACM,MAANA,GACM,SAANA,KAEHiT,MAAK,SAACxH,EAAGyC,GAAJ,OAAUtK,EAAIsK,GAAKtK,EAAI6H,MAC5B1L,KAAI,SAACG,EAAKoO,GAAN,OACH,0BACEhJ,SAAS,KACTpF,IAAKA,EACLgC,EAAG4R,EAAKxF,GACRlM,EAAG2R,EAAKzF,IAJV,UAKKpO,EALL,aAKa0D,EAAI1D,cAQjC,uBACEoE,UAAU,aACViB,UAAS,oBAAezB,EAAf,aA5SR,IA4SgDA,EAAxC,OAEX,uBACEQ,UAAU,aACViB,UAAS,oBAAezB,EAAf,aAA+BA,EAA/B,U,69BCpTboR,GAAWC,KAAXD,OACRE,KAAQC,OAAO,CACbC,SAAU,IAGZ,IAAMpY,GAAYC,IAAOC,IAAV,MAKTG,GAAKJ,IAAOC,IAAV,MAKFmY,GAAUpY,IAAOC,IAAV,MASPoY,GAAYrY,IAAOS,IAAV,MAKToD,GAAQ7D,IAAOC,IAAV,MAULqY,GAAQtY,IAAOC,IAAV,MAiXImB,0BACb,gBAAGmX,EAAH,EAAGA,KAAMjX,EAAT,EAASA,QAASkX,EAAlB,EAAkBA,KAAlB,uBACKD,EADL,CAEEE,YAAanX,EAAQC,OAAOgX,KAC5BG,YAAapX,EAAQC,OAAOiX,KAC5B3D,WAAY2D,EAAK3D,WACjB8D,aAAcH,EAAKG,aACnBC,UAAWJ,EAAKvS,MAChB4S,UAAWL,EAAKK,UAChBxX,MAAOmX,EAAKnX,MACZ8T,kBAAmBqD,EAAKrD,kBAAkBoD,KAC1C1S,aAAc2S,EAAK3S,aACnBuP,UAAWoD,EAAKpD,cAElB,CACE0D,eAAgB,SAACC,EAASlE,EAAY8D,EAActX,EAAOyB,GAA3C,MAAqD,CACnErB,KAAM,sBACNuX,QAAS,CAAED,UAASlE,aAAY8D,eAActX,QAAOyB,UAEvDmW,qBAAsB,SAACnW,EAAMyQ,GAAP,MAAiB,CACrC9R,KAAM,4BACNuX,QAAS,CACPzF,OACAzQ,UAGJkS,gBAAiB,SAACjT,GAAD,MAAW,CAC1BN,KAAM,uBACNuX,QAASjX,IAEXmX,iBAAkB,SAAC/F,GAAD,MAAY,CAC5B1R,KAAM,wBACNuX,QAAS7F,IAEXgG,SAAU,SAACrW,EAAMf,EAAMiJ,GAAb,MAAwB,CAChCvJ,KAAM,gBACNuX,QAAS,CACPlW,OACAf,OACAiJ,WAGJoO,QAAS,SAACC,GAAD,MAAc,CACrB5X,KAAM,eACNuX,QAASK,IAEXC,gBAAiB,SAACxW,GAAD,MAAW,CAC1BrB,KAAM,uBACNuX,QAASlW,IAEXsU,QAAS,SAACtU,GAAD,MAAW,CAAErB,KAAM,eAAgBuX,QAAS,CAAElW,UACvDyW,iBAAkB,SAACF,GAAD,MAAc,CAC9B5X,KAAM,wBACNuX,QAASK,KArDAjY,EArWf,YAuBI,IAtBFoY,EAsBC,EAtBDA,WACA3E,EAqBC,EArBDA,WACA8D,EAoBC,EApBDA,aACAS,EAmBC,EAnBDA,QACAX,EAkBC,EAlBDA,YACAC,EAiBC,EAjBDA,YACAe,EAgBC,EAhBDA,WACArC,EAeC,EAfDA,QACAvR,EAcC,EAdDA,aACAmP,EAaC,EAbDA,gBACAuE,EAYC,EAZDA,iBACAJ,EAWC,EAXDA,SACAvG,EAUC,EAVDA,cACAsG,EASC,EATDA,iBACAQ,EAQC,EARDA,YACAtE,EAOC,EAPDA,UACAD,EAMC,EANDA,kBACA8D,EAKC,EALDA,qBACAH,EAIC,EAJDA,eACWa,EAGV,EAHDf,UACAvX,EAEC,EAFDA,MACAwX,EACC,EADDA,UACC,EAYyBlX,mBAAS,IAZlC,mBAYMsT,EAZN,KAYaC,EAZb,OAa6BvT,oBAAS,GAbtC,mBAaMmE,EAbN,KAae8T,EAbf,OAcyBjY,oBAAS,GAdlC,mBAcMkY,EAdN,KAcaC,EAdb,OAeyCnY,mBAAS,OAflD,mBAeMoT,EAfN,KAeqBgF,EAfrB,OAgBuCpY,mBAAS,aAhBhD,mBAgBMmT,EAhBN,KAgBoBkF,EAhBpB,OAiByCrY,mBAAS,MAjBlD,mBAiBMuO,EAjBN,KAiBqB+J,EAjBrB,OCzFY,SAAS5N,GAAqB,IAAjB6N,EAAgB,uDAAJ,GAChCC,EAAQ7T,mBACRF,EAAWE,iBAAO,GAClBiL,EAAMjL,mBAEN8T,EAAmB,SAAAC,GACvBA,IAAUjU,EAASwB,QAAUyS,GAC7BF,EAAMvS,QAAU0S,YAAYC,EAAM,IAAOL,IAGrCM,EAAkB,WACtBjJ,EAAI3J,aAAUuI,EACd/J,EAASwB,QAAU,EACnB6S,cAAcN,EAAMvS,UAGhB8S,EAAW,SAAA3Y,GACfqE,EAASwB,QAAU7F,GAGf4Y,EAAiB,WACrBpJ,EAAI3J,aAAUuI,EACdsK,cAAcN,EAAMvS,UAGtB,SAAS2S,IACP,IAAMxY,GAAO,IAAIsB,MAAO+T,eACJjH,IAAhBoB,EAAI3J,UAAuB2J,EAAI3J,QAAU7F,GAC7CqE,EAASwB,SAAW7F,EAAOwP,EAAI3J,QAC/B2J,EAAI3J,QAAU7F,GAGF,IAFAsK,EAAGjG,EAASwB,UAGtB4S,IAKJ,MAAO,CACLJ,mBACAO,iBACAD,YDkEqDE,EA0FvD,SAAcxU,GAEZ,IAAMU,EAAI5D,KAAKoT,IAAIuE,GAAUzU,GAAWuT,EAAe,IAEvD,GADA3E,EAAgBlO,GACZV,EAAWD,GAEb,OADAyT,GAAW,IACJ,KAhGHQ,EAlBP,EAkBOA,iBAAkBO,EAlBzB,EAkByBA,eAAgBD,EAlBzC,EAkByCA,SAEpCI,GAAWxU,iBE9GJ,SAASM,GACtB,IAAMmU,EAAa,IAAIC,IACnBzJ,EAAM,GACRD,EAAM,GAUR,SAAStQ,EAAM+B,GACb,IAAMkY,EAAIF,EAAWG,IAAInY,GACzB,GAAIkY,EAAG,OAAOA,EAFI,MAGLrU,EAAOuU,OAAO,EAAG,GAAvBC,EAHW,oBAKlB,GADAL,EAAWM,IAAItY,EAAKqY,IACfxU,EAAOiK,OAAQ,CAGlB,IAAMyK,EAAK/J,EAAIP,MACb,SAAAuK,GAAE,OAAKjK,EAAIN,MAAK,SAAAwK,GAAE,OAAIA,IAAOD,MAAOR,EAAWG,IAAIK,MAE/CE,EAAKV,EAAWG,IAAII,GAC1B1U,EAAO8U,KAAKD,GACZV,EAAWY,OAAOL,GAEpB,OAAOF,EAET,OAzBApa,EAAMuQ,IAAM,SAASqK,GACnB,OAAOC,UAAUhL,QAAWU,EAAMqK,EAAI5a,GAASuQ,GAGjDvQ,EAAMsQ,IAAM,SAASsK,GACnB,OAAOC,UAAUhL,QAAWS,EAAMsK,EAAI5a,GAASsQ,GAoB1CtQ,EFiFL8a,CAAG,GAAD,oBAAK9W,oBAAL,CAAyB,UAAW,cAElC+W,GAAYzV,iBGjHL,SAAS0V,GACtB,IAAMjB,EAAa,IAAIC,IASvB,OARA,SAAejY,GACb,IAAMkY,EAAIF,EAAWG,IAAInY,GACzB,GAAIkY,EAAG,OAAOA,EACd,IAAMrK,EAAK1N,KAAK+Y,SAAWD,EAAOnL,OAAU,EAC1CqL,EAAWF,EAAOpL,GAEpB,OADAmK,EAAWM,IAAItY,EAAKmZ,GACbA,GHyGgBd,CAAGpW,qBAvB3B,GA0BkBwU,EAAW0B,IADT,UAEoC,GAAjDiB,GA3BP,GA2BOA,cAAeC,GA3BtB,GA2BsBA,gBAEjBC,GAAe5C,EAAWyB,IAJX,SAUnB/U,GAA+B,IAJvBnB,YACLsX,MAFQ,IAGRrW,MAAM0T,EAAe,GAAIA,EAAe,IACxC/W,KAAI,SAACC,GAAD,OAAOA,EAAEuU,aACMvG,OAGlBgK,GAAY7V,iBAEb4B,OAAO,CAAC,EAAGT,KACXF,MAAM0T,GAAkB,CAAC,EAAG,IAC/BvT,GAAWyU,GAAU7S,OAAOnC,GAExB0W,GAAY,CAChB7Z,MAAO,IACPvC,OAAQ,IACR2P,UAAWqM,GACXtW,eACA7E,MAAO8Z,GAASlT,QAChB9B,UACAxE,QAASmX,EACT1I,aAAc,eACdC,iBAoGF,SAA0BhF,GACxBiP,EAAiBjP,GACjBwR,KACA,IAAM5L,EAAI6L,GAAO5W,GACf9D,EAAOsa,GAAazL,GAAG7O,KAAO,IAC9BoR,EAAQuG,EAAYwB,IAAInZ,GAC1B,GAAIoR,EAAO,CACT,IAAMuJ,EAAKvJ,EAAMnC,MAAK,SAACnO,GAAD,OAAOA,EAAEmI,QAAUA,KACnC2R,EAAID,EAAKA,EAAGE,SAAW,GAC7B1D,EAAiByD,QACZxD,EA1IY,QA0IWpX,EAAMiJ,IA7GpCiF,iBAAkB,kBAAMgK,EAAiB,OACzC/J,gBACA2M,oBApBsBC,OAuBlBC,GAAa,CACjBra,MAAO,IACPvC,OAAQ,IACR2P,UAAWsM,GACXxJ,gBACA1C,gBACArK,eACA7E,MAAO8Z,GAASlT,QAAQsI,GACxByC,WAAYoJ,GAAUnU,QACtBtG,QAASmX,EACT3S,QAASA,GAAW+T,EACpB9J,aAAc,gBAGViN,GAAY,CAChBnX,eACAC,UACAC,gBA8DF,WACMD,EAAS0W,KACRS,MA/DLjX,YAkEF,SAAqBhD,GACnB,IAAKqZ,GAAc,OACnB,IAAMhC,EAAQV,EAAe,GAC3BuD,EAAMb,GAAaA,GAAaxL,OAAS,GAAG9O,MAC1CiB,EAAQqX,GAASrX,EAAQka,IAAKjF,KAAQkF,MAAM,mEAChD,IAAMC,EAAala,KAAK8D,IAAIqT,EAAOnX,KAAKoT,IAAItT,EAAOka,IACnDxC,EAASG,GAAU7S,OAAOoV,IAC1BpI,EAAgBoI,IAxEhBnX,MAAO0T,GAAkB,CAAC,EAAG,GAC7BzT,OAAQE,IAAYD,GACpBA,iBACAC,aAGIiX,GAAW,CACf/b,QAASoX,EACT7D,aACAhP,eACAmP,kBACAF,eACAC,gBACAE,QACAC,WACApP,UACAqP,oBACAC,aAuBF,SAAS6H,KACP,IAAInX,EAGJ,GAFsB,OAAlBoK,GAAwB+J,EAAiB,MAC7CL,GAAW,GACPxT,IAAYD,GAAe,CAC7B,IAAMkU,EAAQV,EAAe,GAC3B2D,EAAgBzC,GAAU7S,OAAOqS,GACnCD,EAAiBkD,QAEjBlD,EAAiBhU,IAIrB,SAASoW,KACF1W,IACL8T,GAAW,GACX5E,EAAgBnP,EAAe,GAC/B8U,KA4CF,SAAS8B,GAAO1a,GACd,IACM6O,EADS5L,aAAY,SAACnC,GAAD,OAAOA,EAAEd,QACnByC,KAAK6X,GAActa,GACpC,OAAOmB,KAAK8D,IAAI,EAAG4J,EAAI,GAwCzB,OA5HI9K,GAAW2S,IAAgBoB,IAC7B2C,KACA1C,GAAS,KAGPD,GAAUpB,GAAgB3S,IAC5BmX,KACAnD,GAAS,IAwGXzX,qBAAU,WAER,GAAKga,GAAL,CAKA,IAAMlL,EAAQsL,GAAO5W,GACZwW,GAAalL,GACboM,SAjCX,SAAqBpM,GAEnB,IACIP,EAAI,EACR,IAAKA,EAAI,EAAGA,EAFE,IAEWO,EAAQP,EAAIyL,GAAaxL,OAAS,EAAGD,IAAK,CAEjE,GADayL,GAAalL,EAAQP,GACzB2M,QAAS,MAGpBhE,EAAiB,CACfzW,KA1KiB,QA2KjB8S,KAAMzE,EACNqM,GAAIrM,EAAQP,IAGdwI,EAAQ,CACNtW,KAhLiB,QAiLjB2a,KAAMpB,GAAalL,GACnBkJ,MAAOgC,GAAa,GAAGta,KACvB2b,MAAO9M,EACP+M,SAzKoBb,QAuLtBc,CAAYzM,QAPViG,EA3LiB,WAmMlB,CAACgC,EAAShC,EAnMQ,QAmMeiF,GAAcxW,IAGhD,kBAAC,GAAD,KACE,kBAAC,GAAD,CAAIvD,GAAG,SACP,4FACA,kBAACgW,GAAD,KACE,kBAAC,GAAD,KACE,iMACA,0FACY,iDADZ,SACuB,2CADvB,mDAEE,2HAFF,SAGE,qIAHF,yGAKE,uDALF,2NAOE,2CAPF,0GAUA,kQAEE,6DAFF,mDAIE,qLAJF,UAMA,2BACE,mEADF,mqBAGE,6DAHF,8RAMA,oCACG,6DADH,+GACiC,2CADjC,+GAEoB,6DAFpB,6CAGE,uDAHF,mCAMF,kBAACD,GAAD,CAAW3U,IAAKma,QAElB,kBAAC,KAAD,CAAKC,OAAQ,CAAC,GAAI,KAChB,kBAAC,KAAD,CAAKC,KAAM,GAAIC,GAAI,IACjB,kBAACC,GAAY1B,KAEf,kBAAC,KAAD,CAAKwB,KAAM,GAAIC,GAAI,IACjB,kBAACE,GAAiBnB,MAGtB,kBAAC,KAAD,KACE,kBAAC,KAAD,CAAKgB,KAAM,IACT,kBAACI,GAAanB,MAGlB,kBAAC,KAAD,CAAKc,OAAQ,CAAC,GAAI,KAChB,kBAAC,KAAD,CAAKC,KAAM,IACT,kBAAC3F,GAAD,KACE,6BACE,8BACE,4CAFJ,SAKE,kBAAC,KAAD,CACEpV,MAAO+R,EACPxS,SAAU,SAACS,GACT+W,EAAiB/W,GACjBkS,EAAS,MA3RV,CACX,CAAEpS,KAAM,eAAMC,IAAK,OACnB,CAAED,KAAM,eAAMC,IAAK,UACnB,CAAED,KAAM,eAAMC,IAAK,UA2RDH,KAAI,SAACC,GAAD,OACV,kBAACkV,GAAD,CAAQhV,IAAKF,EAAEE,KAAMF,EAAEC,UAb7B,eAiBE,8BACE,4CAlBJ,SAqBE,kBAAC,KAAD,CACEE,MAAO8R,EACPvS,SAAU,SAACS,GAAD,OAAWgX,EAAgBhX,KApSzC,CACN,CAAEF,KAAM,eAAMC,IAAK,aACnB,CAAED,KAAM,eAAMC,IAAK,SACnB,CAAED,KAAM,eAAMC,IAAK,SAmSFH,KAAI,SAACC,GAAD,OACT,kBAACkV,GAAD,CAAQhV,IAAKF,EAAEE,KAAMF,EAAEC,UAGR,QAAlBiS,GACC,mDAEE,8BACE,8DAHJ,SAME,kBAAC,KAAD,CACEqJ,KAAK,OACLpb,MAAOmS,EACP5S,SApJlB,SAAiCgR,GAC/B,GAAIA,EAAK1C,QAAU,GACjBwN,MAAM,sDADR,CAIA,IAAMC,EAAU,GALqB,uBAMrC,YAAc/K,EAAd,+CAAoB,CAAC,IAAZgL,EAAW,QACd1F,EAAUnF,IAAI6K,GAAID,EAAQ5C,KAAK6C,GAC9BzF,EAAeyF,EAAG1J,EAAY8D,EAActX,EAAO,SARrB,kFAUrC4X,EAAqB,OAAQqF,KA2Ib7b,MAAO,CACL+b,SAAU,MAGXpJ,EAAUxS,KAAI,SAACC,GAAD,OACb,kBAACkV,GAAD,CAAQhV,IAAKF,GAAIA,UAO7B,kBAAC4b,GAAcpB,U,mGIjTVqB,OA5Gf,YAAiE,IAAhD5c,EAA+C,EAA/CA,KAAMR,EAAyC,EAAzCA,QAASqd,EAAgC,EAAhCA,aAAcC,EAAkB,EAAlBA,eACtC,EAIyB9c,GAAQ,GAAnC8a,EAJE,EAIFA,SAAUiC,EAJR,EAIQA,aAGR7K,EACgB,qBAAb8K,SACH,KACA,IAAIA,SAAS,SAAb,cAA8BC,KAA9B,MACAC,EAAU1Y,iBAAO0N,GAZuC,EAa3BrS,mBAAkB,OAATqS,GAbkB,mBAavDiL,EAbuD,KAa7CC,EAb6C,KAe9D,SAAShL,EAAS5E,EAAS6D,EAA3B,GAA2E,IAAvCS,EAAsC,EAAtCA,UAAWG,EAA2B,EAA3BA,UAAWI,EAAgB,EAAhBA,aACxD7E,EAAQyE,UAAYA,EACpBzE,EAAQ6E,aAAeA,EACvB7E,EAAQsE,UAAYA,EAHoD,2BAIxE,YAAiBT,EAAjB,+CAAwB,CAAC,IAAhBF,EAAe,QACdnQ,EAAyDmQ,EAAzDnQ,KAAMqc,EAAmDlM,EAAnDkM,OAAQC,EAA2CnM,EAA3CmM,OAAQC,EAAmCpM,EAAnCoM,OAAQlX,EAA2B8K,EAA3B9K,SAAUmX,EAAiBrM,EAAjBqM,MAAOC,EAAUtM,EAAVsM,MACvDjQ,EAAQoD,OACRpD,EAAQ0E,KAAR,UAAkB7L,EAAlB,aACAmH,EAAQwE,UAAUqL,EAAQC,GAC1B9P,EAAQ+P,OAAOA,GACf/P,EAAQ2E,SAASnR,EAAMwc,EAAOC,GAC9BjQ,EAAQmD,WAX8D,mFAe1E,SAAS2B,EAAU9E,GACjBA,EAAQoD,OAERpD,EAAQwE,UAAUpR,IAAqBvC,KACvCmP,EAAQsE,UAAY,OACpBtE,EAAQyE,UAAY,MACpBzE,EAAQ6E,aAAe,SACvB7E,EAAQ0E,KAAR,mBACA1E,EAAQ2E,SAAS2K,EAAgB,EAAG,GAEpCtP,EAAQ0E,KAAO,qBACf1E,EAAQ2E,SAAS0K,EAAc,EAAG,IAElCrP,EAAQmD,UA3CoD,8CA8C9D,WAAoBnD,GAApB,UAAAhB,EAAA,kEAESsO,GAAaiC,EAFtB,oDAK4B,OAApBG,EAAQpX,SAA+C,aAA3BoX,EAAQpX,QAAQ4X,OALpD,gCAMYR,EAAQpX,QAAQ6X,OAN5B,OAOMvS,SAASwS,MAAMC,IAAIX,EAAQpX,SAC3BsX,GAAe,GARrB,OAYI5P,EAAQsE,UAAY,QACpBtE,EAAQuE,SAAS,EAAG,EA1DV,IACH,KA4DPO,EAAU9E,GAGV4E,EAAS5E,EAASsN,EAAU,CAC1BhJ,UAAW,UACXG,UAAW,SACXI,aAAc,aAGhBD,EAAS5E,EAASuP,EAAc,CAC9BjL,UAAW,UACXG,UAAW,QACXI,aAAc,WA5BpB,kDA+BIyL,QAAQzC,MAAR,MACA+B,GAAe,GAhCnB,2DA9C8D,sBAkF9D,IAAMjU,EACJ,6BACE,4CACA,iJACA,4CACA,uMACA,4CACA,sCAIJ,OACE,kBAAC,GAAD,CACEvI,MA9FU,IA+FVvC,OA9FO,IA+FPmB,QAAS2d,GAAY3d,EACrByJ,YAAiBoF,IAATrO,EACRyQ,WAAY,CAACzQ,GACbmJ,aAAcA,EACdD,MAAM,gBArGoD,+CCDjD,eAAiE,IAArD1J,EAAoD,EAApDA,QAASsd,EAA2C,EAA3CA,eAAgBD,EAA2B,EAA3BA,aAA2B,IAAb7c,YAAa,MAAN,GAAM,EAG3E6E,EAAgB,GAAhBA,EAA2B,GAA3BA,EAAuC,GAAvCA,EAAiD,GAEjDkZ,EACE3c,KAAKoT,IALK,IAMA3P,EAAcA,EALjB,IAMIA,EAAaA,GAEtB,EACF,EAEEmZ,EAAM9a,SAAS+a,YAAY,GAAGF,YAAYA,GAEhD/d,EAAKgU,MAAK,SAACxH,EAAGyC,GAAJ,OAAUA,EAAEiP,MAAQ1R,EAAE0R,SAEhC,IAAM3O,EAAQvP,EAAKc,KAAI,SAACC,GAAD,OAAOA,EAAEC,QAC1Bmd,EAAMjb,SAET8Q,KAAK,MACL9S,OAAM,SAACH,GAAD,OAAOA,EAAEmd,SAEZhf,EACY,IAAhBc,EAAK+O,OACD,iBAAM,WACN7L,kBAEG4B,OAAOyK,GACPpL,MACCjB,aAEI,SAAC8B,GAAD,OAAO9B,uBAA2B,GAAJ8B,EAAU,MACxChF,EAAK+O,QAENmG,WAMPkJ,EAAQ,SAAC5R,GAAD,OAAQ,KAAOA,EAAE6R,WAAa7R,EAAE8R,WAAc,EAAIld,KAAKmd,IAAM,IACrEC,EAAOL,EAAIne,GACXmJ,EACJ,6BACE,4CACA,+KACA,4CACA,uMACA,4CACA,sCAIJ,OACE,kBAAC,GAAD,CACE7D,QAAS,CAAC,EAAG,EAvDH,IACH,KAuDP9F,QAASA,EACTyJ,OAAwB,IAAhBjJ,EAAK+O,OACb5F,aAAcA,EACdD,MAAM,sBAELlJ,EAAK+O,QACJ,uBACEzI,UAAS,oBA/DH,IA+D0BzB,EAAvB,aA9DN,IA+DQA,EADF,KAGT2B,WAAW,MACXd,KAAK,QAEL,0BAAMW,SAAU,GAAIiK,WAAW,QAC5BwM,GAEH,0BAAMzW,SAAU,GAAII,GAAG,SACpBoW,IAIP,uBAAGvW,UAAS,oBAAezB,EAAf,aAA+BA,EAA/B,MACT0K,EAAMzO,KAAI,SAACC,EAAGsO,GAAJ,OACT,uBAAGpO,IAAKF,EAAGuF,UAAS,oBAAe,EAAf,KA5EX,GA4E+C+I,EAApC,MAClB,4BAAQ3J,KAAMxG,EAAM6B,GAAIkG,EAAG,IAC3B,0BAAMvB,KAAK,eAAe0K,GAAI,GAAI3J,GAAG,UAClC1F,QAKT,uBAAGuF,UAAS,oBAAe1F,IAAf,aAAkCvC,IAAlC,MACTmgB,EAAK1d,KAAI,SAAC0L,GAAD,OACR,0BAAMvL,IAAKuL,EAAExM,KAAKgB,KAAMD,EAAGid,EAAIxR,GAAI9G,KAAMxG,EAAMsN,EAAExM,KAAKgB,WAEvDwd,EAAK1d,KAAI,SAAC0L,GAAD,OACR,uBACEvL,IAAKuL,EAAExM,KAAKgB,KACZsF,UAAS,iBAAY8X,EAAM5R,GAAlB,uBAAmCuR,EAAc,GAAjD,KACTvX,WAAW,UAEX,0BACEd,KAAK,eACLW,SAAU,GACVC,UAAS,kBAAa8X,EAAM5R,GAAnB,SA/DPzL,EAiEIyL,GAhEV8R,SAAWvd,EAAEsd,YAAcjd,KAAKmd,GAAM,GAAM,GAAK,MAD5C,IAACxd,Q,kBClCVmC,GAAE,gBACHub,GADG,GAEHC,IAGU,eAuBX,IAtBF7H,EAsBC,EAtBDA,aACAiG,EAqBC,EArBDA,eACAD,EAoBC,EApBDA,aACA8B,EAmBC,EAnBDA,gBACAC,EAkBC,EAlBDA,kBACA5L,EAiBC,EAjBDA,aACAxT,EAgBC,EAhBDA,QACAgI,EAeC,EAfDA,KACAqX,EAcC,EAdDA,QACAje,EAaC,EAbDA,MACAvC,EAYC,EAZDA,OACA6b,EAWC,EAXDA,OACAvG,EAUC,EAVDA,IACAmL,EASC,EATDA,eACAC,EAQC,EARDA,YACAC,EAOC,EAPDA,mBACAC,EAMC,EANDA,cACA9K,EAKC,EALDA,YACA+K,EAIC,EAJDA,aACAC,EAGC,EAHDA,SACAC,EAEC,EAFDA,YACAC,EACC,EADDA,kBAEA,IAAKxI,EAAavN,OAAS6V,EAAStW,SAClC,OACE,kBAAC,GAAD,CACEvD,QAAS,CAAC,EAAG,EAAG1E,EAAOvC,GACvBmB,QAASA,EACTyJ,QAAQ,EACRzB,KAAMA,IAPX,MAWiC3H,mBAAS,IAX1C,mBAWM4T,EAXN,KAWiBC,EAXjB,OAYuB7T,mBAAS,CAC/B0Y,MAAO,KACP+G,KAAM,IAdP,mBAYMC,EAZN,KAYYC,EAZZ,OAgByB3f,oBAAS,GAhBlC,mBAgBM4f,EAhBN,KAgBaC,EAhBb,KAiBKjb,EAAYD,iBAAO,MACzB2a,EAASQ,WAAU,SAAC/V,GAClBA,EAAKgW,SACHhW,EAAKf,WAAae,EAAKiW,aACnB3c,GAAGgC,IAAI0E,EAAKf,UAAU,SAAC9H,GAAD,OAAOA,EAAE6e,YAAY,EAC3C,KAER,IAAME,EAAcX,EAASW,cAC3BC,EAAiB,IAAI9O,IACnB6O,EACGvO,QAAO,SAACxQ,GAAD,OAAQA,EAAEif,QAAUjf,EAAE8H,UAAY9H,EAAE8e,iBAC3C/e,KAAI,SAACC,GAAD,OAAOA,EAAEf,KAAKkJ,UAEvB+W,EAAS/c,GACNgd,OAAOJ,GAAa,SAAC/e,GAAD,OAAOA,EAAEof,SAC7B5O,QACC,mCAAE4O,EAAF,KAASngB,EAAT,YACEmgB,IAAUhB,EAAS9gB,QAAoB,IAAV8hB,GAAengB,EAAKwa,OAAM,SAACzZ,GAAD,OAAQA,EAAEif,WAEvEI,EAAKjB,EAASS,SAEV5f,EAAO2T,EACR7S,KAAI,SAACC,GAAD,MAAQ,CACXO,KAAMP,EAAEO,KACRyS,OAAQhT,EAAEgT,OACV7S,MAAOH,EAAEiS,OAEVzB,QAAO,gBAAGrQ,EAAH,EAAGA,MAAH,OAAgBmf,MAAMnf,IAAoB,KAAVA,KACvCqQ,QAAO,SAACxQ,GAAD,OAAOgf,EAAenO,IAAI7Q,EAAEgT,WACtCuM,EAAOzM,MAAMC,KAAK,IAAI7C,IAAIjR,EAAKc,KAAI,SAACC,GAAD,OAAOA,EAAEO,UAExCif,EAAO,IAAItP,IAAIwC,EAAU3S,KAAI,SAACC,GAAD,OAAOA,EAAEf,KAAKkJ,UAC3CsX,EAAY/M,EAAU1E,OACxB/O,EAAKuR,QAAO,SAACxQ,GAAD,OAAOwf,EAAK3O,IAAI7Q,EAAEgT,WAC9B/T,EAEE6E,EAAgB,GAAhBA,EAA2B,GAA3BA,EAAuC,GAAvCA,EAAiD,GAKrD0L,EAAarN,GAAGud,WAAW,MAC3BC,EAAS,CACP,MACA,MACA,MACA,MACA,MACA,OACA,OACA,MACA,OACA,MACA,MACA,OAGFC,EAAQtiB,EAASwG,EAAaA,EAjBhB,EAkBd+b,GAAchgB,EAAQiE,EAAcA,EArBrB,GACH,GAkBQub,EAQpBS,GAJW3d,GACR4d,OACAxX,KAAK,CAACqX,EAxBG,GAwBIxB,EAAS9gB,SACtB0iB,YAAW,SAACvU,EAAGyC,GAAJ,OAAWzC,EAAEwU,SAAW/R,EAAE+R,OAAS,EAAI,MAC9CF,CAAK3B,GACZ8B,GAAYJ,GAAKK,SACjBC,GACuB,IAArBF,GAAUlS,OACNkS,GAAU,GAAGhe,EACbC,GACGke,MAAMH,IACNvP,QACC,SAACnS,EAAD,0BAASiN,EAAT,KAAYyC,EAAZ,YAAmB7N,KAAKoT,IAAIjV,EAAO6B,KAAKC,IAAImL,EAAEvJ,EAAIgM,EAAEhM,MACpDoe,KAEVC,GAAYlgB,KAAK8D,IAAI0b,GAAcN,EAAKvR,OAAQ,MAChDwS,GAAcre,GAAGse,OACfX,GAAKf,eACL,0CACA,SAAC/e,GAAD,OAAOA,EAAEf,KAAKkJ,SAGZjG,GAAIC,GACPue,YACA3c,OAAOwb,GACPnc,MAAM,CAAC,EAAGmd,GAAYhB,EAAKvR,SAExB5L,GAAI,SAAC+F,GACT,IAAMU,EAAO2X,GAAYnI,IAAIlQ,GAC7B,IAAKU,EAAKf,SAAU,OAAOe,EAAK3G,EAChC,IAAIwP,EAAK4O,IAIT,OAHAzX,EAAK8X,MAAK,SAAC3gB,GACLA,EAAEkC,EAAIwP,IAAIA,EAAK1R,EAAEkC,MAEhBwP,GAGHkP,GAAI,SAACzY,GACT,IAAMU,EAAO2X,GAAYnI,IAAIlQ,GAC7B,IAAKU,EAAKf,SAAU,OAAOsY,GAC3B,IAAI1O,EAAK4O,IACL1L,GAAMlD,EAKV,OAJA7I,EAAK8X,MAAK,SAAC3gB,GACLA,EAAEkC,EAAI0S,IAAIA,EAAK5U,EAAEkC,GACjBlC,EAAEkC,EAAIwP,IAAIA,EAAK1R,EAAEkC,MAEhB0S,EAAKlD,EAAK0O,IAGbtQ,GAAa3N,GAAG0e,gBAAgB1H,EAAOlH,IAAelO,OAC1D5B,GAAGqP,OACDiO,EAAUjP,QAAO,SAACxQ,GAAD,MAAoB,iBAAbA,EAAEgT,QAAgC,6BAAbhT,EAAEgT,WAC/C,SAAChT,GAAD,OAAOA,EAAEG,UAIP2gB,GAAoB3e,GACvB4e,YACA3S,aAAY,kBAAM+K,EAAO6H,WACzBjd,OACC5B,GAAGqP,OACDiO,EAAUjP,QAAO,SAACxQ,GAAD,MAAoB,iBAAbA,EAAEgT,QAAgC,6BAAbhT,EAAEgT,WAC/C,SAAChT,GAAD,OAAOA,EAAEG,UAWT8gB,GAAW9e,GACd+e,iBACAhf,GAAE,SAAClC,GAAD,OAAOA,EAAEoC,KACXA,GAAE,SAACpC,GAAD,OAAOA,EAAEkC,KAERsS,GAASrS,GACZ0e,gBAAgB1H,EAAOlH,IACvBlO,OAAO,CAAC,EAAGqP,IAER+N,GAAgBhf,GACnB4e,YACA3S,aAAY,kBAAM+K,EAAO6H,WACzBjd,OAAO,CAAC,EAAGqP,IAERhL,GACJ,6BACE,4CACA,6MACA,4CACA,4BACE,kPAGA,iLAEF,wDACA,4BACE,2CACI,iDADJ,SACe,iDADf,gKAIA,4BACE,yEADF,8IAGA,4BACE,6DADF,yDACuB,2CADvB,sEAGA,4BACE,6DADF,2BACkB,2CADlB,2HAGE,2CAHF,oDAKA,4BACE,6DADF,2BACkB,2CADlB,qBAC8B,uDAD9B,2EAGE,2CAHF,gDASAgZ,GACJ,yBACEnd,EAAE,gBACFK,UAAU,OACVC,QAAQ,gBACRC,QAAQ,MACRC,MAAM,6BACNC,OAAK,OACL7E,MAzJW,GA0JXvC,OA1JW,GA2JX6R,OAAO,WAEP,0BACEnP,EAAE,sLACF0E,OAAK,UAKL2c,GACJ,yBACEpd,EAAE,gBACFK,UAAU,OACVC,QAAQ,gBACRC,QAAQ,MACRC,MAAM,6BACNC,OAAK,OACL7E,MA5KW,GA6KXvC,OA7KW,GA8KX6R,OAAO,WAEP,0BACEnP,EAAE,sSACF0E,OAAK,UAKX,SAAS4c,KACP7C,EAAQ,gBAAKD,EAAN,CAAYhH,MAAO,QAG5B,SAAS+J,GAAgBtc,GACvB,GAAmB,OAAfuZ,EAAKhH,OACiB,OAAtB9T,EAAUqB,QAAd,CAF0B,MAGTG,GAAMD,EAAGvB,EAAUqB,SAA7BhD,EAHmB,oBAIpByf,EAAU3B,IAAe,EAAIA,IAAeN,EAAKvR,OAASuS,KAC1DhC,EAAOle,KAAK8D,IAAI,EAAG9D,KAAKoT,IAAI+N,EAASzf,EAASyc,EAAKhH,QACzDiH,EAAQ,gBAAKD,EAAN,CAAYD,WAWrB,SAASkD,KACP,MAC2B,iBAAxBrD,EAASnf,KAAKkJ,OAAuC,IAArBuK,EAAU1E,QAC3C0E,EAAUvE,MAAK,SAACnO,GAAD,MAAwB,iBAAjBA,EAAEf,KAAKkJ,UAC7BuK,EAAUvE,MAAK,SAACnO,GAAD,MAAwB,6BAAjBA,EAAEf,KAAKkJ,SAxQhC,SAkScuZ,GAlSd,mFAkSD,WAA0B7Y,GAA1B,oBAAA4C,EAAA,yDACO5C,EAAKf,SADZ,oDAEqB,IAAfe,EAAKuW,MAFX,uBAGUhc,EAA4B,iBAApByF,EAAK5J,KAAKkJ,MAAiB,QAAU,QACnDmW,EAAkBlb,GAJtB,iCAQQa,EAAI9B,GAAGwf,aAAape,SAAS,KAAKqe,KAAKzf,GAAG0f,YAChDhZ,EAAKiW,aACDgD,GAAoBjZ,EAAM5E,GAC1B8d,GAAoBlZ,EAAM5E,IAC7B4E,EAAKiW,cAA+B,IAAfjW,EAAKuW,OAAe4C,GAAkB/d,GAC5Dge,GAAkBhe,GAbpB,UAcQA,EAAEoW,MAdV,QAiBExR,EAAKiW,aAAeoD,GAAarZ,GAAQiW,GAAajW,GAGhDsZ,EAAcC,KACpB/D,EAAY8D,GACZxP,EAAa,IAtBf,6CAlSC,sEA2TD,WAA2B0P,GAA3B,sBAAA5W,EAAA,6DAEQxH,EAAI9B,GAAGwf,aAAape,SAAS,KAAKqe,KAAKzf,GAAG0f,YAE1CS,EAAaD,EAAM7R,QAAO,SAAC3H,GAAD,OAAUA,EAAKf,aACzCya,EAAUD,EAAW7I,OAAM,SAACzZ,GAAD,OAAOA,EAAE8e,iBAEtCwD,EAAWE,SAAQ,SAACxiB,GAAD,OAAO8hB,GAAoB9hB,EAAGiE,MACjDqe,EACG9R,QAAO,SAACxQ,GAAD,OAAQA,EAAE8e,gBACjB0D,SAAQ,SAACxiB,GAAD,OAAO+hB,GAAoB/hB,EAAGiE,MAC7Cge,GAAkBhe,GAClBwe,GAAgBxe,GAZlB,SAaQA,EAAEoW,MAbV,OAgBEkI,EACID,EAAWE,QAAQN,IACnBI,EAAW9R,QAAO,SAACxQ,GAAD,OAAQA,EAAE8e,gBAAc0D,QAAQ1D,IAGhDqD,EAAcC,KACpB/D,EAAY8D,GACZxP,EAAa,IAvBf,6CA3TC,sBAqVD,SAASqP,GAAkB/d,GACzB9B,GAAG6M,OAAO,aAAa2S,WAAW1d,GAAG2G,KAAK,eAAgB,GAG5D,SAASqX,GAAkBhe,GAEzB9B,GAAG+M,UAAU,kDACVyS,WAAW1d,GACX2G,KAAK,iBAAkB,GACvBA,KAAK,eAAgB,GAG1B,SAAS6X,GAAgBxe,GACvB9B,GAAG6M,OAAO,eACP2S,WAAW1d,GACX2G,KAAK,iBAAkB,GACvBA,KAAK,eAAgB,GAG1B,SAASmX,GAAoBlZ,EAAM5E,GACjC,IACQpE,EADKsC,GAAG6M,OAAH,gBAAmBnG,EAAK5J,KAAKkJ,MAA7B,UAA2CU,OACjC5G,UAAfpC,MACRsC,GAAG6M,OAAH,gBAAmBnG,EAAK5J,KAAKkJ,MAA7B,UACGwZ,WAAW1d,GACX2G,KAAK,IAAK/K,EAAQ,GAErBgJ,EAAK8X,MAAK,SAAC3gB,GACL6I,EAAK5J,KAAKkJ,QAAUnI,EAAEf,KAAKkJ,QAG/BhG,GAAG6M,OAAH,gBAAmBhP,EAAEf,KAAKkJ,QACvByC,KAAK,eAAgB,GACrB+W,WAAW1d,GACX2G,KAAK,YAHR,oBAGkC/B,EAAKzG,EAHvC,aAG6CyG,EAAK3G,EAHlD,MAIG0I,KAAK,eAAgB,GAGxBzI,GAAG6M,OAAH,gBAAmBhP,EAAEf,KAAKkJ,QACvBwZ,WAAW1d,GACX2G,KAAK,KAAK,WACT,IAAM8X,EAAI,CAAExgB,EAAG2G,EAAK3G,EAAGE,EAAGyG,EAAKzG,GAC/B,OAAO6e,GAAS,CAAE0B,OAAQD,EAAGthB,OAAQshB,OAIzCvgB,GAAG+M,UAAH,gBAAsBlP,EAAEf,KAAKkJ,QAC1BwZ,WAAW1d,GACX2G,KAAK,iBAAkB,GACvBA,KAAK,eAAgB,OAI5B,SAASkX,GAAoBjZ,EAAM5E,GACjC,IACQpE,EADKsC,GAAG6M,OAAH,gBAAmBnG,EAAK5J,KAAKkJ,MAA7B,UAA2CU,OACjC5G,UAAfpC,MACRsC,GAAG6M,OAAH,gBAAmBnG,EAAK5J,KAAKkJ,MAA7B,UACGwZ,WAAW1d,GACX2G,KAAK,KAAM/K,EAAQ,GAEtBsC,GAAG+M,UAAH,gBAAsBrG,EAAK5J,KAAKkJ,MAAhC,MACGwZ,WAAW1d,GACX2G,KAAK,iBAAkB,GACvBA,KAAK,eAAgB,GAGxB/B,EAAK8X,MAAK,SAAC3gB,GACL6I,EAAK5J,KAAKkJ,QAAUnI,EAAEf,KAAKkJ,QAC/BhG,GAAG6M,OAAH,gBAAmBhP,EAAEf,KAAKkJ,QACvBwZ,WAAW1d,GACX2G,KAAK,YAFR,oBAEkC5K,EAAEoC,EAFpC,aAE0CpC,EAAEkC,EAF5C,MAGG0I,KAAK,eAAgB,GAExBzI,GAAG6M,OAAH,gBAAmBhP,EAAEf,KAAKkJ,QACvBwZ,WAAW1d,GACX2G,KAAK,iBAAkB,IACvBA,KAAK,KAAK,WACT,IAAM8X,EAAI,CAAExgB,EAAGlC,EAAEkC,EAAGE,EAAGpC,EAAEoC,GACnBgC,EAAI,CAAElC,EAAGlC,EAAEigB,OAAO/d,EAAGE,EAAGpC,EAAEigB,OAAO7d,GACvC,OAAO6e,GAAS,CAAE0B,OAAQve,EAAGhD,OAAQshB,WAK7C,SAAS5D,GAAajW,GACpB4V,EAAQ,CACNF,KAAM,EACN/G,MAAO,OAET3O,EAAKiW,cAAe,EACpBjW,EAAK8X,MAAK,SAACiC,GACLA,EAAM3jB,KAAKkJ,QAAUU,EAAK5J,KAAKkJ,QACnCya,EAAM3D,MAAO,MAIjB,SAASiD,GAAarZ,GACpB4V,EAAQ,CACNF,KAAM,EACN/G,MAAO,OAET3O,EAAKiW,cAAe,EACpBjW,EAAKga,YAAW,SAACD,GACXA,EAAM3jB,KAAKkJ,QAAUU,EAAK5J,KAAKkJ,QACnCya,EAAM3D,MAAO,EACb2D,EAAM9D,cAAe,MAIzB,SAASsD,KAEP,IAAMD,EAAchgB,GAAG2gB,UAAUC,IAMjC,OALAZ,EAAYxB,MAAK,SAAC9X,GAChB,IAAMma,EAAMxC,GAAYnI,IAAIxP,EAAK5J,KAAKkJ,OACtCU,EAAKiW,aAAekE,EAAIlE,aACxBjW,EAAKoW,KAAO+D,EAAI/D,QAEXkD,EAGT,SAASc,GAASjjB,GAChB,OAAO+b,IAAmB/b,EAAEgT,QAAU8I,IAAiB9b,EAAEO,KAQ3D,SAAS2iB,GAAOjkB,GACd,OAA4D,IAArDA,EAAKuR,QAAO,gBAAGrQ,EAAH,EAAGA,MAAH,OAAgBmf,MAAMnf,MAAQ6N,OAsEnD,OAnEAxO,qBAAU,WAER,IAAM2jB,EAAchhB,GACjBihB,cACArf,OAAO+L,GAAW/L,UAClBX,MAAM,CAAC,EAAGgQ,IAEPiQ,EAAqBlhB,GACxB4e,YACAhd,OAAO+c,GAAkB/c,UACzBX,MAAM,CAAC,EAAGgQ,IAEPkQ,EAAanhB,GAChBohB,WAAWJ,GACXvU,MAAMwE,EAAc,IACpBvE,cAAc,GAEX2U,EAAoBrhB,GACvBohB,WAAWF,GACXzU,MAAMwE,EAAc,IACpBvE,cAAc,GAEXuF,EAAQjS,GACXohB,WAAWrhB,IACX2M,cAAc,GACd4U,YAAW,SAACvkB,GACX,IAAMqB,EAAO,IAAIC,KAAKtB,GAAMyB,UAC5B,GAAa,IAATJ,EAAY,OAAOA,EACvB,IAAMgC,EAAQ,IAAI/B,KAAKtB,GAAMwB,WAC7B,OAAOif,EAAOpd,MAGlBJ,GAAG6M,OAAO,eACPD,KAAKqF,GACLrF,MAAK,SAACpM,GAAD,OACJA,EACGuM,UAAU,QACVsB,QAAO,WACN,IAAMkT,EAAQvhB,GAAG6M,OAAO2U,MAAMtT,OAC9B,OAAkC,IAA3BsP,EAAOiE,QAAQF,MAEvB9Y,KAAK,cAAe,QACpBA,KAAK,KAAM,UAGlBzI,GAAG6M,OAAO,gBAAgBD,KAAKuU,GAC/BnhB,GAAG6M,OAAO,wBAAwBD,KAAKyU,GAGvC5mB,OAAOwI,iBAAiB,UAAWkc,IACnC1kB,OAAOwI,iBAAiB,YAAamc,IAGrC,IAAMtd,EAAI9B,GAAGwf,aAAape,SAAS,KAQnC,OAPApB,GAAG+M,UACD,8FAECyS,WAAW1d,GACX2G,KAAK,iBAAkB,GACvBA,KAAK,eAAgB,GAEjB,WACLhO,OAAOyI,oBAAoB,UAAWic,IACtC1kB,OAAOyI,oBAAoB,YAAakc,QAK1C,kBAAC,GAAD,CACEhd,QAAS,CAAC,EAAG,EAAG1E,EAAOvC,GACvBmB,QAASA,GAAWykB,GAAOjkB,GAC3BiJ,OAAQgb,GAAOjkB,GACfuG,QAAS,kBAAMmN,EAAa,KAC5BoC,aAAc,kBAAM4J,GAAS,IAC7BrK,aAAc,kBAAMqK,GAAS,IAC7B7Y,YAAa,kBAAO4Y,GAASC,GAAS,IACtClY,KAAMA,EACN0B,MAAM,8BACNC,aAAcA,IAEbiX,GACC,uBACE9Z,UAAS,oBAAe1F,EAAQiE,EAAesP,EAAc,GAApD,aACPtP,EAAa,EADN,MAIR3B,GAAGiB,MAAM,EAAGgQ,GAAarT,KAAI,SAAC8jB,GAAD,OAC5B,0BACEvf,UAAU,YACVpE,IAAK2jB,EACLjP,GAAIiP,EACJ3P,IAAKiK,EAAe,EACpBtJ,GAAIgP,EACJ/O,GAAIqJ,EAAe,EACnB3J,OAAQA,GAAOqP,QAGnB,uBACEvf,UAAU,cACViB,UAAS,uBAAkB4Y,EAAe,EAAjC,OAEX,0BAAM1Y,WAAW,MAAMd,KAAK,eAAee,GAAG,SAAS2J,IAAK,IACzDoS,KAAqB,2BAAS,6BAIpCA,MACC,uBACElc,UACS,IAAP8Z,EAAA,oBACiBxf,EAAQiE,EAAesP,EAAc,GADtD,aAEMtP,EAAa,EAFnB,yBAKMjE,EAAQiE,EAAesP,EAAcA,EAAc,IALzD,aAMStP,EAAa,EANtB,MASD3B,GAAGiB,MAAM,EAAGgQ,GAAarT,KAAI,SAAC8jB,GAAD,OAC5B,0BACEvf,UAAU,YACVpE,IAAK2jB,EACLjP,GAAIiP,EACJ3P,IAAKiK,EAAe,EACpBtJ,GAAIgP,EACJ/O,GAAIqJ,EAAe,EACnB3J,OAAQ2M,GAAc0C,QAG1B,uBACEvf,UAAU,sBACViB,UAAS,uBAAkB4Y,EAAe,EAAjC,OAEX,0BAAM1Y,WAAW,MAAMd,KAAK,eAAee,GAAG,SAAS2J,IAAK,IAClD,IAAPgQ,EAAW,eAAc,IAAPA,EAAW,2BAAS,iBAI5CH,EAAOnf,KAAI,mCAAEqf,EAAF,KAASngB,EAAT,YACV,uBACEqF,UAAU,WACViB,UAAS,oBACPzB,EAhjBI,GAgjBUsb,EAAoB0E,IAD3B,aAEJxmB,EAASwG,EAAaggB,IAFlB,KAGT5jB,IAAKkf,EACL5Z,QAAS,SAACP,IA1mBjB,qCA2mBS8e,CAAY9kB,GACZgG,EAAE4E,mBAEJuF,YAAa,GAEZnQ,EAAKwa,OAAM,SAACzZ,GAAD,OAAOA,EAAE8e,gBAAgBuC,GAAaD,OAGtD,uBAAG7b,UAAS,oBAAezB,EAAf,aAA+BA,EAA/B,MACTgc,GAAKkE,QAAQjkB,KAAI,SAACkkB,EAAM3V,GAAP,OAChB,0BACE7O,GAAE,eAAUwkB,EAAK7iB,OAAOnC,KAAKkJ,OAC7BjI,IAAKoO,EACL3J,KAAK,OACL6P,OAAO,OACP0P,cAAeD,EAAK7iB,OAAO6d,MAAQgF,EAAKtB,OAAO1D,KAAO,EAAI,GAC1DvK,YAAa,IACb1U,EAAGihB,GAASgD,QAGfnE,GACEf,cACA5K,UACApU,KAAI,SAAC8I,GAAD,OACH,uBACE3I,IAAK2I,EAAK5J,KAAKkJ,MACf1I,GAAE,eAAUoJ,EAAK5J,KAAKkJ,OACtB5C,UAAS,oBAAesD,EAAKzG,EAApB,aAA0ByG,EAAK3G,EAA/B,KACTyC,KACEoX,IAAmBlT,EAAK5J,KAAKkJ,MACzB4V,EACAC,EAEN5O,YAAavG,EAAKoW,KAAO,EAAI,EAC7B9P,OAAO,WAELtG,EAAKf,SAGL,oCACE,4BACE5B,EAAG4d,IACHnf,KAAK,QACLa,QAAS,SAACP,GACRyc,GAAW7Y,GACX5D,EAAE4E,qBAGN,uBACEtE,UAAS,qBAAe,IAAf,cACP,IADO,KAGTC,QAAS,SAACP,GACRyc,GAAW7Y,GACX5D,EAAE4E,oBAGFhB,EAAKiW,aAA6BuC,GAAdD,KApB1B,4BAAQlb,EAAG,IAwBb,0BACER,GAAG,SACHxD,GAAI2G,EAAKf,UAAYe,EAAKiW,aAAe,GAAK,EAC9CrZ,YACGoD,EAAKf,UAAYe,EAAKiW,aAAe,QAAU,MAElDxZ,SAAS,KACTE,QAAS,SAACP,IAnaxB,SAA6B4D,GAC3B,GAAKA,EAAKoX,OAAV,CAEA,IAAM+C,EAAMtQ,EAAUvE,MAAK,SAACnO,GAAD,OAAOA,EAAEf,KAAKkJ,QAAUU,EAAK5J,KAAKkJ,SACvDgc,EAAczR,EAAU0R,MAC5B,SAACpkB,GAAD,OAAOA,EAAEigB,OAAOhhB,KAAKkJ,QAAUU,EAAK5J,KAAKkJ,SAE3C,GAAI6a,GAAOmB,EAAa,CACtB,IAAME,EAAcxb,EAAKiW,aAAe,CAACjW,GAAQA,EAAKsX,SADhC,uBAEtB,YAAckE,EAAd,+CAA2B,CAAC,IAAnBrkB,EAAkB,QACnBsO,EAAQoE,EAAUkR,QAAQ5jB,GAChC0S,EAAU4F,OAAOhK,EAAO,IAJJ,wFAOtBzF,EAAKiW,aACDpM,EAAUmG,KAAKhQ,GACf6J,EAAUmG,KAAV,MAAAnG,EAAS,aAAS7J,EAAKsX,WAE7BxN,EAAa,aAAID,IACjBmL,EAAkBhV,EAAK5J,KAAKkJ,QAiZdmc,CAAoBzb,GACpB5D,EAAE4E,mBAEJwK,cAAe,SAACpP,GACd4Y,EAAkBhV,EAAK5J,KAAKkJ,OAC5B2V,GAAQ,GACR7Y,EAAE4E,oBAGHhB,EAAK5J,KAAKkJ,YAKrB,uBAAG5C,UAAS,oBAAe1F,EAAQiE,EAAe+b,GAAtC,KAAsD,EAAtD,MACV,uBAAGvQ,SAAS,oBACV,uBACE/J,UAAS,qBAAgBiZ,EAAKD,KAArB,aACPza,EAAasc,GAAa,EADnB,MAIRnhB,EAAKc,KAAI,SAACC,GAAD,OACR,0BACEsE,UAAS,eAAUtE,EAAEgT,OAAZ,SACT9S,IAAKF,EAAEgT,OAAShT,EAAEO,KAAKgkB,WACvBriB,EAAGA,GAAElC,EAAEO,MAAQ,EACf6B,EAAGA,GAAEpC,EAAEgT,QAAU,EACjBnT,MAAOqC,GAAE2L,YAAc,EACvBvQ,OAAQsjB,GAAE5gB,EAAEgT,QAAU,EACtBrO,MA9jBCkE,EA8jBW7I,EA7jBpB0S,EAAU1E,SAAWwR,EAAK3O,IAAIhI,EAAKmK,QAAgBkL,EACnC,iBAAhBrV,EAAKmK,QAAmC,6BAAhBnK,EAAKmK,OACxB8N,GAAkBjY,EAAK1I,OACzB2P,GAAWjH,EAAK1I,QA2jBXiP,YAAa,EACb8U,cAAe,EACf/U,OAAO,UACP3J,QAAS,SAACP,IAjQxB,YAA4C,IAAjB+N,EAAgB,EAAhBA,OAAQzS,EAAQ,EAARA,KACjCsd,EAAkB7K,GAClB4K,EAAgBrd,GAgQFikB,CAAgBxkB,GAChBiF,EAAE4E,mBAEJ2K,OAAQyO,GAASjjB,GAAKie,EAAqB,OAC3CvJ,YAAauO,GAASjjB,GAAK,EAAI,GAE/B,yCAAWA,EAAEgT,OAAb,YAAuBhT,EAAEG,MAAzB,YAAkCqP,EAChC,IAAIhP,KAAKR,EAAEO,OADb,OAzkBA,IAACsI,MA+kBP,uBACEvE,UAAU,aACViB,UAAS,qBAAgBiZ,EAAKD,KAArB,aAA8BjhB,EAASwG,EAAvC,QAGb,8BACE,8BAAUrE,GAAG,cACX,0BACEyC,EAAE,IACFE,EAAE,IACFvC,MAAOggB,GACPviB,OAAQA,EAASwG,EAAgB,OAItC4a,GAASmB,GAAcN,EAAKvR,OAASuS,IACpC,uBAAGhb,UAAS,uBAAkBjI,EAASwG,EAAgB,GAA3C,MACV,0BACE6B,IAAKjC,EACL7D,MAAOggB,GACPviB,OAAQ,EACR4E,EAAG,EACHE,EAAG,EACHwD,GAAI,EACJqP,GAAI,EACJtQ,KAAK,gBAEP,0BACEwB,YA9fZ,SAAyBlB,GAAI,IAAD,EACTC,GAAMD,EAAGvB,EAAUqB,SAA7BhD,EADmB,oBAE1B0c,EAAQ,CACNjH,MAAOzV,EACPwc,KAAM,KA2fE1e,MAAOggB,IAAeA,IAAeN,EAAKvR,OAASuS,KACnDjjB,OAAQ,EACR4E,EAAGsc,EAAKD,KACRnc,EAAG,EACHwD,GAAI,EACJqP,GAAI,EACJtQ,KAAK,UACLwK,OAAO,gB,6FC/xBrB,IAAMjS,GAAYC,IAAOC,IAAV,MAIA,eAgBX,IAfF0e,EAeC,EAfDA,aACA8B,EAcC,EAdDA,gBACA3L,EAaC,EAbDA,aACAxT,EAYC,EAZDA,QACAoB,EAWC,EAXDA,MACAvC,EAUC,EAVDA,OACAmJ,EASC,EATDA,KACAqX,EAQC,EARDA,QACA3E,EAOC,EAPDA,OACAvG,EAMC,EANDA,IACAmJ,EAKC,EALDA,eACAkC,EAIC,EAJDA,mBACAC,EAGC,EAHDA,cACA9K,EAEC,EAFDA,YACA+K,EACC,EADDA,aAEMra,EAAgB,GAAhBA,EAA2B,GAA3BA,EAAiD,GACjD7E,EAAO2T,EACVpC,QAAO,SAAAxQ,GAAC,OAAIA,EAAEgT,SAAW+I,KACzBhc,KAAI,SAAAC,GAAC,MAAK,CACTG,MAAOH,EAAEiS,GACT1R,KAAM,IAAIC,KAAKR,EAAEO,UAElBiQ,QAAO,gBAAGrQ,EAAH,EAAGA,MAAH,OAAgBmf,MAAMnf,IAAoB,KAAVA,KAEpCskB,EAAW,SAAAzkB,GAAC,OAAIA,EAAE0kB,UAEtBC,EAAcxiB,cAAc,MAExByiB,EAAWziB,cACf0iB,EAAY1iB,aACZ2iB,EAAU3iB,WAFN,EAGmBA,UAAUlD,GAAM,SAAAe,GAAC,OAAIA,EAAEO,QAH1C,mBAGHwkB,EAHG,KAGQC,EAHR,KAIJC,EAAc9iB,UAAUlD,GAAM,SAAAe,GAAC,OAAIA,EAAEG,SACrC+kB,EAAaL,EAAUE,GACvBI,EAAWN,EAAUtR,KAAKyR,GAC1BI,EAAYR,EAASzH,MAAM+H,EAAYC,GACvC5F,EAAOpd,SAAS,GAAGpC,KAAI,SAAAgO,GAAC,OAAI,IAAIvN,KAAK,KAAM,EAAGuN,MAC9CsX,EAASljB,cAAc+iB,EAAYC,GAK/BG,EAAcnjB,OAAOlD,GAAM,SAAAe,GAAC,OAAIwP,GAAWxP,EAAEO,SAC7CglB,EAAQT,EAAQ1hB,MAAM8hB,EAAYC,GAAUplB,KAAI,SAAAC,GACpD,IAAME,EAAMsP,GAAWxP,GACjBG,EAAQmlB,EAAYjN,IAAInY,GAC9B,OAAIC,GACG,CACLI,KAAMP,EACNG,MAAO,SAILqlB,EAAWnlB,KAAKoT,KACnB5T,EAAQiE,EAAcA,GAAgBshB,EACvC,IAGIK,EAAcD,EAAWJ,EAAa,EAC1CM,EAA0B,EAAXF,EAAgB,EAE3BxE,EAA6B,iBAAnBjF,GAA8C,6BAAnBA,EACrC7Z,EAAI,SAAA3B,GAAI,OAAIqkB,EAASzH,MAAM+H,EAAY3kB,GAAQilB,EAAW,IAC9DpjB,EAAI,SAAA7B,GAAI,OAAIkkB,EAASlkB,GAAQilB,EAAW,IACxC1V,EAAakR,EACT7e,eAEGiM,aAAY,kBAAM+K,EAAO6H,WACzBjd,OAAOkhB,GACV9iB,mBAAmBgX,EAAOlH,IAAelO,OAAOkhB,GACpD9mB,EAAQ,SAAAgC,GACN,OAAc,OAAVA,EAAuB+d,EACpBpO,EAAW3P,IAEpBqU,EAASwM,EACL7e,eAEGiM,aAAY,kBAAM+K,EAAO6H,WACzBjd,OAAO,CAAC,EAAGqP,IACdjR,mBAAmBgX,EAAOlH,IAAelO,OAAO,CAAC,EAAGqP,IACxDuS,EAAO,SAAA3lB,GAAC,OAAKykB,EAASzkB,GAAK,IAAOwlB,GAClCvC,EAAW,SAAA1iB,GAAI,OAAIiP,GAAWjP,KAAUub,GAEpC8J,EAAY,SAAA3hB,GAChB,IACMjE,EAAIykB,EAASxgB,GACb6V,EAAI8K,EAASzH,MAAM+H,EAAYjhB,GACrC,MAAM,GAAN,OACQ,IAANjE,EAAA,WACQ8Z,EAAI0L,EADZ,MAJQ,IAMJxlB,EAAA,YACK8Z,EAAI,GAAK0L,EADd,kBAEK1L,EAAI,GAAK0L,EAFd,cAE4BxlB,EAAIwlB,EAFhC,YAE4C1L,EAAI0L,GALtD,YAHU,EASFA,IAOV,IAAMpd,EACJ,6BACE,4CACA,6MACA,4CACA,4BACE,kPAGA,iLAEF,wDACA,4BACE,4BACE,2CADF,gDA2BN,OApBA5I,qBAAU,WAER,IAAM2jB,EAAcnC,EAChB7e,eAEG4B,OAAO+L,EAAW/L,UAClBX,MAAM,CAAC,EAAGgQ,IACbjR,iBAEG4B,OAAO+L,EAAW/L,UAClBX,MAAM,CAAC,EAAGgQ,IAEXkQ,EAAanhB,cACLghB,GACXvU,MAAMwE,EAAc,IACpBvE,cAAc,GAEjB1M,UAAU,gBAAgB4M,KAAKuU,MAI/B,kBAAC,GAAD,CAAWjP,cAAe,kBAAMyJ,GAAQ,KACtC,kBAAC,GAAD,CACEvZ,QAAS,CAAC,EAAG,EAAG1E,EAAOvC,GACvBmB,QAASA,EACTyJ,OAjDN,SAAgBjJ,GACd,OAA4D,IAArDA,EAAKuR,QAAO,gBAAGrQ,EAAH,EAAGA,MAAH,OAAgBmf,MAAMnf,MAAQ6N,OAgDrCkV,CAAOjkB,GACfwH,KAAMA,EACN2B,aAAcA,EACdD,MAAM,4BAEN,uBACE5C,UAAS,oBAAe1F,EAAQiE,EAAesP,EAAc,GAApD,aACPtP,EADO,MAIR3B,SAAS,EAAGiR,GAAarT,KAAI,SAAA8jB,GAAC,OAC7B,0BACEvf,UAAU,YACVpE,IAAK2jB,EACLjP,GAAIiP,EACJ3P,IAAKiK,EAAe,EACpBtJ,GAAIgP,EACJ/O,GAAIqJ,EAAe,EACnB3J,OAAQA,EAAOqP,QAGnB,uBACEvf,UAAU,cACViB,UAAS,uBAAkB4Y,EAAe,EAAjC,QAGb,uBACE5Y,UAAS,qBAAgB1F,EAAQ4lB,GAAc,EAAtC,cAA6CnoB,EACpDooB,GACA,EAFO,MAIQ,IAAhBzmB,EAAK+O,QACJqX,EAAOtlB,KAAI,SAAAC,GAAC,OACV,0BAAM2E,KAAK,eAAezC,EAAGA,EAAElC,GAAI0F,GAAG,OAAOxF,IAAKF,GAC/C2kB,EAAY3kB,OAGF,IAAhBf,EAAK+O,QACJqX,EACGQ,MAAM,EAAGR,EAAOrX,QAChBjO,KAAI,SAAAC,GAAC,OACJ,0BACEA,EAAG4lB,EAAU5lB,GACbwU,OApJT,QAqJSE,YAtJT,EAuJS/P,KAAK,OACLzE,IAAKF,OAGZulB,EAAMxlB,KAAI,gBAAGQ,EAAH,EAAGA,KAAMJ,EAAT,EAASA,MAAT,OACT,0BACED,IAAKK,EACL2B,EAAGA,EAAE3B,GACL6B,EAAGA,EAAE7B,GACLV,MAAO2lB,EAjKP,EAkKAloB,OAAQkoB,EAlKR,EAmKA7gB,KAAMxG,EAAMgC,GACZqU,OAAQyO,EAAS1iB,GAAQ0d,EAAqB,OAC9CvJ,YArKA,EAsKAlP,QAAS,SAAAP,GACO,OAAV9E,GAAgByd,EAAgBpO,GAAWjP,IAC/C0E,EAAE4E,oBAGJ,yCAAW2F,GAAWjP,GAAtB,YACY,OAAVJ,EAAiB,2BAASA,QAIf,IAAhBlB,EAAK+O,QACJuR,EAAKxf,KAAI,SAAAC,GAAC,OACR,0BACEE,IAAKF,EACL2E,KAAK,eACLzC,GAAIsjB,EACJpjB,EAAGujB,EAAK3lB,GACR0F,GAAG,UApMH,SAAA1F,GAAC,MAAI,UAAUykB,EAASzkB,IAsMvB8lB,CAAU9lB,QAIlBf,EAAK+O,QACJ,uBACEzI,UAAS,oBAAe1F,EAAQ,GAAvB,aAA8BvC,EAAS,GAAvC,KACTmI,WAAW,MACXd,KAAK,QAEL,0BAAMW,SAAU,GAAIiK,WAAW,QAC5BwM,GAEH,0BAAMzW,SAAU,GAAII,GAAG,SACpBoW,OCpPA,eAcX,IAbFhG,EAaC,EAbDA,aACAiG,EAYC,EAZDA,eACAD,EAWC,EAXDA,aACA8B,EAUC,EAVDA,gBACAC,EASC,EATDA,kBACA5L,EAQC,EARDA,aACAxT,EAOC,EAPDA,QACAsnB,EAMC,EANDA,cACAC,EAKC,EALDA,iBACA1T,EAIC,EAJDA,kBACA8L,EAGC,EAHDA,SACAC,EAEC,EAFDA,YACAC,EACC,EADDA,kBACC,EAC2Bxf,oBAAS,GADpC,mBACMmnB,EADN,KACcC,EADd,KAYKtT,EAAMC,mBACV,kBACEiD,EACIhD,MAAMC,KAAK+C,GAAcqQ,SAAQ,mCAAEnT,EAAF,KAAUhB,EAAV,YAC/B7P,SAEI2Q,MAAMC,KAAKf,GACRjS,KAAI,yCAAmB,CACtBQ,KADG,KAEHtB,KAFG,KAEQA,SAEZgU,MAAK,SAACxH,EAAGyC,GAAJ,OAAU,IAAI1N,KAAKiL,EAAElL,MAAQ,IAAIC,KAAK0N,EAAE3N,UAEjDR,KAAI,mCAAE0L,EAAF,KAAKyC,EAAL,0BACH8E,SACAzS,KAAM2N,EAAE3N,MACLkQ,OAAOC,KAAKxC,EAAEjP,MAAM0R,QACrB,SAACC,EAAK1Q,GAAN,OAAgB0Q,EAAI1Q,GAAOgO,EAAEjP,KAAKiB,GAAOuL,EAAExM,KAAKiB,GAAO0Q,IACvD,WAIR,KACN,CAACkF,EAAcxD,EAAkBtE,SAG7BmL,EAAS,CACbiN,KAAMjkB,sBACNkkB,UAAWlkB,mBACXmkB,MAAOnkB,qBACP6e,QAAS7e,oBAGLokB,EAAY,CAChBzQ,eACAiG,iBACAD,eACA8B,kBACAC,oBACA5L,eACAxT,UACAgI,KAAMwf,EACNnI,QAASoI,EACTrmB,MArDY,KAsDZvC,OArDS,IAsDT6b,SACAvG,MACAmL,eApDqB,MAqDrBC,YApDc,QAqDdC,mBApDqB,MAqDrBC,cApDgB,UAqDhBC,aA1De,GA2Df/K,YA5Dc,IA6Dd2S,gBACAC,mBACA5H,WACAC,cACAC,qBAGIkI,EAAe,CACnB3mB,MAvEY,KAwEZvC,OAvES,IAwETmJ,MAAOwf,EACPnI,QAASoI,EACT/M,SACAvG,MACAmJ,iBACA9J,eACAxT,SAAS,EACTqd,eACAmC,mBA1EqB,MA2ErBC,cA1EgB,UA2EhBN,kBACAxK,YAlFc,IAmFd+K,aAlFe,IAqFjB,OACE,6BACE,kBAACsI,GAAeF,GAChB,kBAACG,GAAYF,K,u/BClGXtR,GAAWC,KAAXD,OACFhY,GAAYC,IAAOC,IAAV,MAKTmY,GAAUpY,IAAOC,IAAV,MAaPG,GAAKJ,IAAOC,IAAV,MAKFqY,GAAQtY,IAAOC,IAAV,MAWL4D,GAAQ7D,IAAOC,IAAV,MAULoY,GAAYrY,IAAOS,IAAV,MAKf,SAAS+oB,GAAStE,GAChB,MAAO,CACLla,MAAO,eACPhI,MAAO,eACP2H,SAAUua,EAAMtiB,KAAI,SAACC,GAAD,MAAQ,CAC1BmI,MAAOnI,EACPG,MAAOH,OAuPEzB,0BACb,gBAAGqoB,EAAH,EAAGA,KAAMjR,EAAT,EAASA,KAAMlX,EAAf,EAAeA,QAAf,MAA8B,CAC5BooB,aAAcD,EAAKC,aACnBzjB,MAAOuS,EAAKvS,MACZ5E,MAAOmX,EAAKnX,MACZ+T,UAAWoD,EAAKpD,UAChBD,kBAAmBqD,EAAKrD,kBAAkBsU,KAC1CZ,iBAAkBrQ,EAAKS,qBACvBN,aAAcH,EAAKG,aACnB9D,WAAY2D,EAAK3D,WACjB8J,aAAcnG,EAAKmG,aACnB9F,UAAWL,EAAKK,UAChB8Q,YAAaroB,EAAQC,OAAOkoB,KAC5B/Q,YAAapX,EAAQC,OAAOiX,QAE9B,CACEM,eAAgB,SAACC,EAASlE,EAAY8D,EAActX,EAAOyB,GAA3C,MAAqD,CACnErB,KAAM,sBACNuX,QAAS,CAAED,UAASlE,aAAY8D,eAActX,QAAOyB,UAEvD2d,gBAAiB,SAAC1e,GAAD,MAAW,CAC1BN,KAAM,uBACNuX,QAASjX,IAEX6nB,YAAa,SAAC/T,EAAQzS,GAAT,MAAmB,CAC9B3B,KAAM,mBACNuX,QAAS,CAAEnD,SAAQzS,UAErBgW,QAAS,SAACL,GAAD,MAAc,CAAEtX,KAAM,eAAgBuX,QAAS,CAAED,aAC1DE,qBAAsB,SAACnW,EAAMyQ,GAAP,MAAiB,CACrC9R,KAAM,4BACNuX,QAAS,CACPzF,OACAzQ,WAjCO1B,EAlPf,YAiBI,IAhBFud,EAgBC,EAhBDA,aACA8B,EAeC,EAfDA,gBACA9H,EAcC,EAdDA,aACA9D,EAaC,EAbDA,WACA6U,EAYC,EAZDA,aACAE,EAWC,EAXDA,YACAxQ,EAUC,EAVDA,QACAuQ,EASC,EATDA,YACAjR,EAQC,EARDA,YACAzS,EAOC,EAPDA,MACAmP,EAMC,EANDA,UACAD,EAKC,EALDA,kBACA8D,EAIC,EAJDA,qBACAJ,EAGC,EAHDA,UACAC,EAEC,EAFDA,eACAzX,EACC,EADDA,MACC,EAC2CM,mBAAS,gBADpD,mBACMid,EADN,KACsB8B,EADtB,OAEuC/e,mBAAS,aAFhD,mBAEMmT,EAFN,KAEoBkF,EAFpB,OAGyCrY,mBAAS,SAHlD,mBAGMinB,EAHN,KAGqBC,EAHrB,OAI+BlnB,mBAASqD,aAAa6kB,KAJrD,mBAIM5I,EAJN,KAIgBC,EAJhB,KAcK4I,EAAaJ,EAAaxO,IAAI0D,GAC9B6K,EAAOK,GAAcA,EAAW5O,IAAIyD,GAfzC,EAgBuB8K,GAAQ,GAAxBtW,EAhBP,EAgBOA,MAAO4W,EAhBd,EAgBcA,KACTC,EAAa,CACjBloB,KAAMqR,EACN7R,QAASqoB,GAAejR,EACxBiG,eACAC,kBAGIqL,EAAW,CACf3oB,QAASqoB,GAAejR,EACxB5W,KAAMioB,EACNpL,eACAC,kBAGIsL,EAAY,CAChBL,WACA5jB,QACA2Y,iBACAD,eACA8B,kBACAC,oBACAkI,gBACA9T,eACAxT,QAASoX,EACTC,eACAxD,oBACA8L,WACAC,cACAC,qBAiBF,SAASA,EAAkBne,GAEvBke,EADY,UAAVle,EACUgC,aAAawkB,GAASrU,IACnBnQ,aAAa6kB,KAC9BhB,EAAiB7lB,GAuBnB,OAfAX,qBAAU,WAEHsW,EAAavN,UAMP+E,IAATsZ,GACiB,KAAjB9K,GACmB,iBAAnBC,GAEAgL,EAAYhL,EAAD,UAAoBD,IAT/BvF,EAAQ,kBAWT,CAACA,EAASuF,EAAcC,EAAgBgL,IAEzC,kBAAC,GAAD,KACE,kBAAC,GAAD,CAAItnB,GAAG,SACP,+GACA,kBAAC,GAAD,KACE,kBAAC,GAAD,KACE,yNACA,kNAEE,0DAFF,yDAIE,2LAJF,UAMA,kEACQ,iDADR,+kBAGE,qCAHF,8OAMA,qOAGA,4BACE,4BACE,2CADF,6CACkB,uDADlB,uFAEgB,2CAFhB,8CAIA,4BACE,2CADF,kFACyB,+EADzB,yIAKF,4JACuB,iDADvB,uIAGE,mHAHF,iFAGqC,IACnC,0CAJF,4EAIiC,qFAJjC,2YAQF,kBAAC,GAAD,CAAWoB,IAAKma,QAElB,kBAAC,GAAD,KACE,6BACE,8BACE,4CAFJ,SAKE,kBAAC,KAAD,CAAQ7a,MAAO4lB,EAAermB,SAAU4e,GApIjC,CACb,CAAEre,KAAM,eAAMC,IAAK,SACnB,CAAED,KAAM,eAAMC,IAAK,UAmIHH,KAAI,SAACC,GAAD,OACV,kBAAC,GAAD,CAAQE,IAAKF,EAAEE,KAAMF,EAAEC,UAP7B,SAWE,8BACE,4CAZJ,SAeE,kBAAC,KAAD,CACEE,MAAO8R,EACPvS,SAAU,SAACS,GAAD,OAAWgX,EAAgBhX,KA5IjC,CACZ,CAAEF,KAAM,eAAMC,IAAK,aACnB,CAAED,KAAM,eAAMC,IAAK,SACnB,CAAED,KAAM,eAAMC,IAAK,SA2IJH,KAAI,SAACC,GAAD,OACT,kBAAC,GAAD,CAAQE,IAAKF,EAAEE,KAAMF,EAAEC,UApB7B,UAyBmB,UAAlB8lB,GACC,yBAAKzhB,UAAU,WACb,8BACE,8DAFJ,SAKE,kBAAC,KAAD,CACEiX,KAAK,OACLpb,MAAOmS,EACP5S,SAtHZ,SAAiCgR,GAC/B,GAAIA,EAAK1C,QAAU,GACjBwN,MAAM,sDADR,CAIA,IAAMC,EAAU,GALqB,uBAMrC,YAAc/K,EAAd,+CAAoB,CAAC,IAAZgL,EAAW,QACd1F,EAAUnF,IAAI6K,GAAID,EAAQ5C,KAAK6C,GAC9BzF,EAAeyF,EAAG1J,EAAY8D,EAActX,EAAO,SARrB,kFAUrC4X,EAAqB,OAAQqF,GAC7B4C,EAAYlc,aAAawkB,GAASjW,OA4GxB9Q,MAAO,CACL+b,SAAU,MAGXpJ,EAAUxS,KAAI,SAACC,GAAD,OACb,kBAAC,GAAD,CAAQE,IAAKF,GAAIA,SAM3B,kBAAC,KAAD,KACE,kBAAC,KAAD,CAAKkb,KAAM,IACT,kBAACoM,GAAYD,KAGjB,kBAAC,GAAD,KACE,6BACE,8BACE,4CAFJ,SAKE,kBAAC,KAAD,CACEE,YAAU,EACVpnB,MAAO4b,EACPqC,SAAU4I,GACVQ,cAAe,CAAEC,UAAW,IAAKC,SAAU,QAC3CC,sBAAoB,EACpBjoB,SAAUme,KAZhB,SAgBE,6BACE,8BACE,4CAFJ,SAKE,kBAAC,KAAD,CACE1d,MAAwB,KAAjB2b,EAAsB,KAAO8L,KAAO9L,GAC3Cpc,SAAU,SAACa,EAAMyK,GACf4S,EAAgB5S,IAElB6c,aA5IV,SAAsB9iB,GACpB,OAAqB,IAAjB3B,EAAM4K,SACHjJ,EAAU6iB,KAAOxkB,EAAM,KAAO2B,EAAU6iB,KAAOxkB,EAAM,MA2IpD0kB,UAAU,MAIhB,kBAAC,KAAD,CAAK7M,OAAQ,CAAC,GAAI,KAChB,kBAAC,KAAD,CAAKC,KAAM,GAAIC,GAAI,IACjB,kBAAC4M,GAAaX,IAEhB,kBAAC,KAAD,CAAKlM,KAAM,GAAIC,GAAI,IACjB,kBAAC,GAAUgM,S,wmGCpSbjS,GAAWC,KAAXD,OAEFhY,GAAYC,IAAOC,IAAV,MAKTG,GAAKJ,IAAOC,IAAV,MAKFqY,GAAQtY,IAAOC,IAAV,MAIL4qB,GAAU7qB,IAAOC,IAAV,MAIPY,GAAgBb,IAAOC,IAAV,MAiBb6qB,GAAa9qB,YAAOuF,KAAPvF,CAAH,MAEV+qB,GAAiB/qB,IAAOC,IAAV,MAOd+qB,GAAShrB,IAAOC,IAAV,MAII,SAACC,GAAD,OAAWA,EAAMc,OAAS,WAepCkO,GAAQlP,IAAOC,IAAV,MAWLgrB,GAAOjrB,IAAOC,IAAV,MAMJirB,GAAMlrB,IAAOC,IAAV,MAkBHgK,GAAOjK,IAAOC,IAAV,MAUJmY,GAAUpY,IAAOC,IAAV,MAMPkrB,GAAUnrB,IAAOC,IAAV,MAIPmrB,GAAOprB,IAAOC,IAAV,MAmBJorB,GAAarrB,YAAOuF,KAAPvF,CAAH,MAIVsrB,GAAStrB,IAAOC,IAAV,MAMNa,GAAOM,kBAAQ,KAAM,CACzBmqB,cAAe,SAACjpB,GAAD,MAAS,CAAEb,KAAM,wBAAyBuX,QAAS,CAAE1W,QACpEkpB,OAAQ,SAAClpB,GAAD,MAAS,CAAEb,KAAM,iBAAkBuX,QAAS,CAAE1W,QACtDqe,QAAS,SAACre,GAAD,MAAS,CAAEb,KAAM,kBAAmBuX,QAAS,CAAE1W,QACxDmpB,SAAU,SAACnpB,GAAD,MAAS,CAAEb,KAAM,mBAAoBuX,QAAS,CAAE1W,SAJ/ClB,EAMX,YAiBO,IAhBLkB,EAgBI,EAhBJA,GACA0I,EAeI,EAfJA,MACA0gB,EAcI,EAdJA,IACAvd,EAaI,EAbJA,IACAwd,EAYI,EAZJA,WACAC,EAWI,EAXJA,QACAtqB,EAUI,EAVJA,QACAuqB,EASI,EATJA,OACAC,EAQI,EARJA,MACAC,EAOI,EAPJA,OACAR,EAMI,EANJA,cACAS,EAKI,EALJA,QACAR,EAII,EAJJA,OACAS,EAGI,EAHJA,QACAtL,EAEI,EAFJA,QACA8K,EACI,EADJA,SACI,EACgC9pB,oBAAS,GADzC,mBACGuqB,EADH,KACeC,EADf,KAIJ,OACE,kBAACtB,GAAD,KACE,kBAAC,GAAD,CACExiB,QAAS,WACP5I,OAAO2sB,KAAKje,GACZsd,EAASnpB,KAGVhB,EACC,kBAAC,KAAD,CAAU+qB,QAAM,IAEhB,kBAACtB,GAAD,KACE,kBAAC,GAAD,KACE,kBAACC,GAAD,CAAQhqB,MAfA,kBAClBsrB,oBClMmBC,EDkMKV,ECjMhBlW,MAAMC,KAAK2W,GAAK/Y,QAC1B,SAACnS,EAAOmrB,GAAR,OAAenrB,EAAQmrB,EAAGC,YAAY,KACtC,GD+LoCH,mBAAgBzb,SClMzC,IAAU0b,EDgNMG,IACZb,EAAOnD,MAAM,EAAG,IAEnB,kBAACuC,GAAD,KACE,4BAAKjgB,GACL,kBAACkgB,GAAD,KACa,IAAVY,GAAe,0BAAM3kB,UAAU,OAAhB,gBAChB,mDAAU0kB,GACV,mDAAUG,GACV,mDAAUL,EAAWgB,mBAEvB,2BAAIjB,KAGR,kBAAC,GAAD,QAILE,IAAYK,GACX,oCACE,kBAACb,GAAD,MACIW,GAAU,oDACZ,kBAACV,GAAD,CACEhjB,QAAS,SAACP,GACRA,EAAE4E,kBACFiU,EAAQre,KAGTypB,EAAS,eAAO,gBAEnB,kBAACV,GAAD,CACEhjB,QAAS,SAACP,GACRA,EAAE4E,kBACF8e,EAAOlpB,KAGRwpB,EAAQ,2BAAS,gBAEpB,kBAACT,GAAD,CACEhjB,QAAS,SAACP,GACRqkB,GAAc,GACdrkB,EAAE4E,oBAHN,iBASF,kBAAC,KAAD,CACE1B,MAAM,2BACNyB,QAASyf,EACTU,KAAM,SAAC9kB,GACLA,EAAE4E,kBACF6e,EAAcjpB,GACd6pB,GAAc,IAEhBU,SAAU,kBAAMV,GAAc,IAC9BW,OAAO,eACPC,WAAW,gBAEX,yEA4LC3rB,mBACb,gBAAG4rB,EAAH,EAAGA,QAAS1rB,EAAZ,EAAYA,QAAZ,MAA2B,CACzBmL,QAASugB,EAAQC,SACjBrB,QAASoB,EAAQpB,QACjB9pB,KAAMkrB,EAAQlrB,KACdorB,MAAOF,EAAQE,MACf5rB,QAASA,EAAQC,OAAOyrB,WAE1B,CACEG,WAAY,SAAC9T,GAAD,MAAc,CACxB5X,KAAM,qBACNuX,QAASK,IAEX+T,WAAY,SAACpqB,GAAD,MAAY,CACtBvB,KAAM,sBACNuX,QAAS,CAAEhW,WAEboW,QAAS,SAACjI,EAAO1P,GAAR,MAAkB,CACzBA,KAAM,kBACNuX,QAAS,CACP7H,QACA1P,WArBOL,CAyBbisB,KAAKC,QAALD,EA5MF,YAUI,IATFE,EASC,EATDA,KACA9gB,EAQC,EARDA,QACA2gB,EAOC,EAPDA,WACAxB,EAMC,EANDA,QACAxS,EAKC,EALDA,QACAtX,EAIC,EAJDA,KACAR,EAGC,EAHDA,QACA6rB,EAEC,EAFDA,WACAD,EACC,EADDA,MAEQM,EAAsBD,EAAtBC,kBADP,EAEuC7rB,mBAAS,WAFhD,mBAEMmT,EAFN,KAEoBkF,EAFpB,OAGiCrY,mBAAS,GAH1C,mBAGM8rB,EAHN,KAGiBC,EAHjB,OAI6B/rB,oBAAS,GAJtC,mBAIMsqB,EAJN,KAIe0B,EAJf,KAwBD,OAJAtrB,qBAAU,WACR+W,EAAQqU,EAAW3Y,KAClB,CAACA,EAAc2Y,IAGhB,kBAAC,GAAD,KACE,kBAAC,GAAD,CAAInrB,GAAG,UACP,4CACA,kBAAC,GAAD,KACE,yQAGA,kBAACwoB,GAAD,CAAYrpB,KAAK,UAAU4G,QAAS,kBAAM+kB,GAAW,KAArD,6BAIF,kBAAC,GAAD,KACE,6BACE,8BACE,wDAFJ,SAKE,kBAAC,KAAD,CACEpqB,MAAO8R,EACPvS,SAAU,SAACS,GAAD,OAAWgX,EAAgBhX,KAvCjC,CACZ,CAAEF,KAAM,eAAMC,IAAK,WACnB,CAAED,KAAM,eAAMC,IAAK,SAuCJH,KAAI,SAACC,GAAD,OACT,kBAAC,GAAD,CAAQE,IAAKF,EAAEE,KAAMF,EAAEC,WAI5B8oB,GACC,kBAACT,GAAD,KACE,8BACE,4CAFJ,SAKE,kBAAC,KAAD,CAAQ5oB,SAAU,kBAAMorB,GAAY1B,IAAU3b,QAAS2b,MAI5D3qB,EACG2E,iBAAM,GAAGrD,KAAI,SAACC,GAAD,OAAO,kBAAC,GAAD,CAAME,IAAKF,EAAGvB,SAAS,OAC3CQ,GACAA,EACGuR,QAAO,SAACxQ,GAAD,OAAQopB,GAAWppB,EAAEkpB,UAC5BjW,MAAK,SAACxH,EAAGyC,GACR,MAAqB,YAAjB+D,EAEAxG,EAAEyd,OAAShb,EAAEgb,QACbhb,EAAE+a,MAAQxd,EAAEwd,OACZ/a,EAAEib,QAAU1d,EAAE0d,QAEN1d,EAAEqd,WAAa5a,EAAE4a,cAE9B/oB,KAAI,SAACC,GAAD,OACH,kBAAC,GAAD,iBAAUA,EAAV,CAAaE,IAAKF,EAAEP,GAAIspB,QAASA,EAASK,QAASA,QAE3D,kBAACX,GAAD,KACE,kBAAC,KAAD,CACE1jB,QAAS6lB,EACTpsB,MAAO6rB,EACPU,SAAU,GACVC,kBAAkB,EAClBtrB,SAAU,SAACurB,GAAD,OAAUJ,EAAaI,OAGrC,kBAAC,KAAD,CACE9iB,MAAM,eACNtI,MAAO,IACPkK,QAAS,kBAAMwgB,GAAW,IAC1B3gB,QAASA,EACTshB,UAAW,CAAEC,cAAe,IAC5BvrB,MAAO,CAAE2G,OAAQ,OAEjB,kBAAC,KAAD,CAAM6kB,OAAO,WAAWC,kBAAgB,GACtC,kBAAC,KAAD,CAAKpQ,OAAQ,IACX,kBAAC,KAAD,CAAKC,KAAM,IACT,kBAAC,KAAKoQ,KAAN,CAAW5H,MAAM,gBACdiH,EAAkB,SAAU,CAC3BY,MAAO,CACL,CAAEC,UAAU,EAAMpW,QAAS,8EAF9BuV,CAIE,kBAAC,KAAD,CAAOc,YAAY,iFAI5B,kBAAC,KAAD,CAAKxQ,OAAQ,IACX,kBAAC,KAAD,CAAKC,KAAM,IACT,kBAAC,KAAKoQ,KAAN,CAAW5H,MAAM,gBACdiH,EAAkB,QAAS,CAC1BY,MAAO,CAAC,CAAEC,UAAU,EAAMpW,QAAS,sDADpCuV,CAEE,kBAAC,KAAD,CAAOc,YAAY,yDAI5B,kBAAC,KAAD,CAAKxQ,OAAQ,IACX,kBAAC,KAAD,CAAKC,KAAM,IACT,kBAAC,KAAKoQ,KAAN,CAAW5H,MAAM,4BACdiH,EAAkB,MAAO,CACxBY,MAAO,CAAC,CAAEC,UAAU,EAAMpW,QAAS,sDADpCuV,CAEE,kBAAC,KAAD,CAAOc,YAAY,yDAI5B,kBAAC,KAAD,CAAKxQ,OAAQ,IACX,kBAAC,KAAD,CAAKC,KAAM,IACT,kBAAC,KAAKoQ,KAAN,CAAW5H,MAAM,gBACdiH,EAAkB,MAAO,CACxBY,MAAO,CACL,CACEC,UAAU,EACVpW,QAAS,gDAJduV,CAQC,kBAAC,KAAMe,SAAP,CACEC,KAAM,EACNF,YAAY,oGAOxB,yBACE7rB,MAAO,CACL0G,SAAU,WACVslB,MAAO,EACPC,OAAQ,EACRhsB,MAAO,OACPisB,UAAW,oBACXne,QAAS,YACT7B,WAAY,OACZoF,UAAW,UAGb,kBAAC,KAAD,CAAQ1L,QAAS,kBAAM+kB,GAAW,IAAQ3qB,MAAO,CAAEmsB,YAAa,IAAhE,gBAGA,kBAAC,KAAD,CAAQvmB,QAtJhB,SAAsBP,GACpBA,EAAE+mB,iBACFtB,EAAKuB,gBAAe,SAAC3R,EAAO4R,GACrB5R,GACHgQ,EAAW4B,MAGf3B,GAAW,IA+I0B3rB,KAAK,WAApC,uBASKL,I,+5DElcf,IAAMrB,GAAYC,IAAOC,IAAV,MAGC,SAACC,GAAD,OAAWA,EAAM8uB,MAAMC,UAQjCC,GAAOlvB,IAAO+d,KAAV,MAKJ9T,GAAOjK,IAAO+d,KAAV,MAIJoR,GAAMnvB,IAAOsO,EAAV,MAIE,SAACpO,GAAD,OAAWA,EAAM8uB,MAAMhb,QAIrB,SAAC9T,GAAD,OAAWA,EAAM8uB,MAAMhb,QAI9Bob,GAAgBpvB,IAAOivB,OAAV,MAGH,SAAC/uB,GAAD,OAAWA,EAAM8uB,MAAMC,UAM5B,SAAC/uB,GAAD,OAAWA,EAAM8uB,MAAMhb,QAG5Bqb,GAAMrvB,IAAOsvB,IAAV,MAUI,SAACpvB,GAAD,OAAWA,EAAM8uB,MAAMhb,QAUrB,SAAC9T,GAAD,OAAYA,EAAMoJ,KAAO,QAAU,UAgB5CimB,GAAevvB,YAAOuF,KAAPvF,CAAH,MAEI,SAACE,GAAD,OAAWA,EAAMggB,SAMjCsP,GAAYxvB,IAAOC,IAAV,MAkHAmB,yBAAQ,KAAM,CAC3BquB,YAAa,SAACzsB,GAAD,MAAY,CACvBvB,KAAM,sBACNuX,QAAS,CAAEhW,YAHA5B,EAxGf,YAAiC,EAAfquB,YAAgB,IAAD,EACP9tB,oBAAS,GADF,mBACxB2H,EADwB,KAClBqX,EADkB,KAyBzB+O,EACJ,kBAAC,KAAD,KACE,kBAAC,KAAKvB,KAAN,KACE,uBACElqB,OAAO,SACP0rB,IAAI,sBACJ3rB,KAAK,+BAHP,mCAQF,kBAAC,KAAKmqB,KAAN,KACE,uBACElqB,OAAO,SACP0rB,IAAI,sBACJ3rB,KAAK,4BAHP,6BAQF,kBAAC,KAAKmqB,KAAN,KACE,uBACElqB,OAAO,SACP0rB,IAAI,sBACJ3rB,KAAK,gCAHP,8BAUN,OACE,oCACE,kBAAC,GAAD,KACE,kBAACorB,GAAD,KACE,kBAAC,GAAD,KACE,kBAACF,GAAD,eACA,kBAACC,GAAD,CAAKnrB,KAAK,uBAAuBC,OAAO,UAAxC,oCAIF,kBAACorB,GAAD,CAAK/lB,KAAMA,GACT,4BAjEG,CACX,CACExG,KAAM,eACNR,GAAI,YAEN,CACEQ,KAAM,eACNR,GAAI,gBAEN,CACEQ,KAAM,iCACNR,GAAI,QAEN,CACEQ,KAAM,iCACNR,GAAI,SAmDUM,KAAI,SAAC0sB,GAAD,OACR,wBAAIvsB,IAAKusB,EAAIxsB,MACX,uBAAGuF,QAAS,kBAAMsY,GAAQ,IAAQ3c,KAAM,IAAMsrB,EAAIhtB,IAC/CgtB,EAAIxsB,UAcX,4BACE,kBAAC,KAAD,CAAU8sB,QAASF,GACjB,uBAAGrnB,QAAS,SAACP,GAAD,OAAOA,EAAE+mB,mBAArB,gCAKR,kBAACU,GAAD,CACEM,KAAK,OACLC,OAAK,EACLznB,QAAS,kBAAMsY,GAASrX,IACxB4W,MAAO5W,EAAO,GAAK,MAIxBA,GAAQ,kBAACkmB,GAAD,CAAWnnB,QAAS,kBAAMsY,GAAQ,U,iICzM/B3gB,IAAOC,IAAV,M,iICUf,IAAM2J,GAAU5J,IAAOC,IAAV,MA2BE8vB,OArBf,WAME,OACE,kBAAC,IAAD,CAAef,MANH,CACZC,OAAQ,QACR9iB,QAAS,UACT6H,KAAM,UAIJ,kBAAC,GAAD,MACA,kBAAC,GAAD,KACE,kBAACgc,EAAD,MACA,kBAAC,GAAD,MACA,kBAAC,GAAD,MACA,kBAAC,GAAD,S,k+BCtBR,IAAMhrB,GAAE,gBACHub,GADG,GAEHC,IAGCyP,GAAQ,IAAIC,KAAc,IAEhC,wBAAC,uBAAA5hB,EAAA,sEACO6hB,wBAAa,CACjBF,SACAG,QAAS3wB,OAAO4wB,aAChBC,SAAS,IAJZ,kFAAD,GAOA,IAAMC,GAAS,IAAIC,KAAa,CAC9BP,SACAQ,IACE,+EAGJ,SAASC,GAAT,GAA8C,IAA3B5tB,EAA0B,EAA1BA,KAAM8S,EAAoB,EAApBA,KAAoB,IAAd8H,aAAc,MAAN,GAAM,EAC3C,OAAO6S,GAAOI,MAAM,CAClBA,MAAOC,aAAF,KAEC9tB,EACQ4a,EACN9H,EAAI,eAAWA,GAAS,MAuBpC,SAASib,KAAkC,IAArBC,EAAoB,uDAAT,QAC/B,OAAOP,GAAOI,MAAM,CAClBA,MAAOC,aAAF,KACDE,KASR,SAASC,GAAT,GAA2C,IAAfjuB,EAAc,EAAdA,KAAMf,EAAQ,EAARA,KAChC,OAAOwuB,GAAOI,MAAM,CAClBA,MAAOC,aAAF,KAEC9tB,EACOf,KAkBjB,SAASoR,GAAMrR,GAAe,IAATmN,EAAQ,uDAAJ,GACjB0N,EAAI,IAAI5J,IAAI,CAChB,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,iBAEF,OAAOjR,EACJc,KAAI,SAACC,GAAD,MAAQ,CACXqQ,KAAMrQ,EAAEC,KACRE,MAAOH,EAAEmuB,QAAUnuB,EAAEG,UAEtBqQ,QAAO,SAACxQ,GAAD,OAAQ8Z,EAAEjJ,IAAI7Q,EAAEqQ,SACvB4C,MAAK,SAACxH,EAAGyC,GAAJ,OAAUA,EAAE/N,MAAQsL,EAAEtL,SAC3B0lB,MAAM,EAAGzZ,GAGd,SAASgiB,GAAiBnvB,EAAMoZ,GAC9B,OAAO,IAAIlM,SAAQ,SAACH,GAClBqiB,OACG9lB,KAAK,CAAC,IAAK,MACX+H,MAAMrR,GACN0O,QAAQ,GACR6O,OAAO,GACPlX,UAAS,SAACtF,GAAD,OAA4B,GAArBK,KAAKiuB,KAAKtuB,EAAEG,UAC5BouB,GAAG,OAAO,SAACje,GAAD,OAAWtE,EAAQqM,EAAI/H,OACjCkH,WAIP,SAASgX,GAA2BvvB,GAClC,OAAOkN,QAAQyG,IACb3T,EAAKc,KAAI,gBAAGga,EAAH,EAAGA,SAAU5R,EAAb,EAAaA,MAAb,OACPimB,GAAiB9d,GAAMyJ,IAAW,SAACzJ,GAAD,MAAY,CAC5CyJ,SAAUzJ,EACVnI,gBAMR,SAASsmB,GAAuBxvB,GAC9B,OAAOkN,QAAQyG,IACb3T,EAAKc,KAAI,mCAAEQ,EAAF,YACP6tB,GAAiB9d,GADV,OACoB,SAACA,GAAD,MAAW,CAAC/P,EAAM+P,UAKnD,SAASoe,GAAWC,EAAKnX,EAAOsD,GAC9B,IAAM7b,EAAO0vB,EAAI5uB,KAAI,gBAAGb,EAAH,EAAGA,KAASoJ,EAAZ,8CAA0BpJ,KAAa,IAAPA,GAAgBoJ,MAC/DlF,EAAQjB,GAAGqP,OAAOvS,GAAM,SAACe,GAAD,OAAOA,EAAEd,QACjC0vB,EAAQpX,IAAWpU,EAAM,GAAKoU,GAASsD,EAAY,GAAKA,EACxDT,EAAMuU,EAAQvuB,KAAKkT,MAAMnQ,EAAM,GAAKwrB,GAAS9T,GAAYA,EAAW,EACpE+T,EAAY1sB,GAAGiB,MAAMwrB,EAAOvU,EAAKS,GACjCgU,EAAY3sB,GAAGiB,MAAMwrB,EAAOvU,EAAgB,EAAXS,GACjCxK,EAAQ,IAAIJ,IAAIjR,EAAKknB,SAAQ,SAACnmB,GAAD,OAAOA,EAAE+Z,SAASha,KAAI,SAACC,GAAD,OAAOA,EAAEC,YAC5D8uB,EAAS,IAAI7e,IAAIjR,EAAKknB,SAAQ,SAACnmB,GAAD,OAAOA,EAAE+uB,OAAOhvB,KAAI,SAACC,GAAD,OAAOA,EAAEmI,aAE3D6mB,EAAYlc,MAAMC,KACtB5Q,GAAGse,OACDxhB,GACA,gBAAEe,EAAF,2BACEmC,GAAGse,OACDzgB,EAAE+Z,UACF,uCAAIoU,UACJ,SAACnuB,GAAD,OAAOA,EAAEC,WAEb,SAACD,GAAD,OAAOA,EAAEd,SAIP+vB,EAAanc,MAAMC,KACvB5Q,GAAGse,OACDxhB,GACA,gBAAEe,EAAF,2BACEmC,GAAGse,OACDzgB,EAAE+uB,QACF,uCAAIG,QACJ,SAAClvB,GAAD,OAAOA,EAAEmI,YAEb,SAACnI,GAAD,OAAOA,EAAEd,SAEX+T,MAAK,gEAEP,MAAO,CACLqG,cAAeuV,EACZ9uB,KAAI,SAAC6a,GAAD,OAAUuU,GAAYF,EAAYF,EAAQnU,MAC9C7a,KAAI,yCAAkB,CAAlB,UAEEA,KAAI,SAACC,EAAGsO,GAAJ,uBAAoBtO,EAApB,CAAuBiO,KAAMK,OAAUuX,MAAM,EAAG,QAE7DuJ,eAAgBN,EAAU/uB,KAAI,SAAC6a,GAAD,OAC5BuU,GAAYH,EAAW1e,EAAOsK,OAKpC,SAASuU,GAAYlwB,EAAMuP,EAAOtP,GAChC,IACM6O,GAAIL,EADKvL,GAAGktB,UAAS,SAACrvB,GAAD,OAAOA,EAAE,MAAI2B,MACvB1C,EAAMC,EAAM,EAAGD,EAAK+O,OAAS,GAC5CvC,EAAIxM,EAAK8O,GACX,IAAKA,EAAG,MAAO,CAAC7O,EAAMowB,GAAkB9gB,GAAO,SAACtO,GAAD,OAASuL,EAAE,GAAG4M,IAAInY,OAEjE,IAAMgO,EAAIjP,EAAK8O,EAAI,GACjB9J,GAAK/E,EAAOuM,EAAE,KAAOyC,EAAE,GAAKzC,EAAE,IAChC,MAAO,CACLvM,EACAowB,GAAkB9gB,GAAO,SAACtO,GACxB,IAAMqvB,EAAK9jB,EAAE,GAAG4M,IAAInY,IAAQ,EACtBsvB,EAAKthB,EAAE,GAAGmK,IAAInY,IAAQ,EAC5B,OAAOqvB,GAAM,EAAItrB,GAAKurB,EAAKvrB,MAKjC,SAASqrB,GAAkB9gB,EAAOrO,GAChC,IAAMlB,EAAO6T,MAAMC,KAAKvE,GAAO,SAACvO,GAAD,MAAW,CACxCA,OACAE,MAAOA,EAAMF,IAAS,MAGxB,OADAhB,EAAKgU,MAAK,SAACxH,EAAGyC,GAAJ,OAAU/L,GAAGstB,WAAWhkB,EAAEtL,MAAO+N,EAAE/N,UACtClB,EAGT,SAASywB,GAAOzwB,EAAMiB,GACpB,OAAOjB,EACJc,KAAI,SAACC,EAAGsO,GACP,OAAc,IAAVA,GAAepO,EAAIjB,EAAKqP,EAAQ,MAAQpO,EAAIF,GAAU,GAAN,oBAAWA,GAAX,EAAc,IAC7D,uBAAWA,GAAX,EAAc,OAEpBwQ,QAAO,SAACxQ,GAAD,OAAOA,EAAE,MAChBD,KAAI,yCAAkB,CAAlB,cAGM,QACb4vB,UAAW,OACXC,MAAO,CACLjZ,WAAYxU,GAAGpC,MACf6W,WAAYzU,GAAGpC,MACf8W,YAAa1U,GAAGpC,MAChBgQ,cAAe,GACftR,SAAS,GAEXoxB,SAAU,CACRzZ,qBADQ,SACawZ,EAAOE,GAC1B,IAAMpf,EAAOof,EAAO3Z,QACpB,OAAO,gBAAKyZ,EAAZ,CAAmBtd,kBAAmB5B,KAExCqf,SAAU,SAACH,EAAOE,GAAY,IAAD,EACHA,EAAO3Z,QAAvB7F,EADmB,EACnBA,MAAOpR,EADY,EACZA,KACP2X,EAAgB+Y,EAAhB/Y,YAER,OADAA,EAAY2B,IAAItZ,EAAMoR,GACf,gBAAKsf,EAAZ,CAAmB/Y,iBAErBR,iBAAkB,SAACuZ,EAAOE,GAAR,uBACbF,EADa,CAEhB7f,cAAe+f,EAAO3Z,WAExB6Z,aAAc,SAACJ,EAAOE,GAAY,IAAD,EACPA,EAAO3Z,QAAvB/S,EADuB,EACvBA,MAAOnD,EADgB,EAChBA,KACP2W,EAAegZ,EAAfhZ,WAER,OADAA,EAAW4B,IAAIvY,EAAMmD,GACd,gBAAKwsB,EAAZ,CAAmBhZ,gBAErBF,iBAAkB,SAACkZ,EAAOE,GAAY,IAAD,EACRA,EAAO3Z,QAA1BlW,EAD2B,EAC3BA,KAAM8S,EADqB,EACrBA,KAAM4H,EADe,EACfA,GACZ/D,EAAegZ,EAAfhZ,WAEFqZ,EADWrZ,EAAWyB,IAAIpY,GACNF,KAAI,SAACC,EAAG+N,GAAJ,uBACzB/N,EADyB,CAE5B0a,QAAS3M,GAAKgF,GAAQhF,EAAI4M,GAAY3a,EAAE0a,aAG1C,OADA9D,EAAW4B,IAAIvY,EAAMgwB,GACd,gBAAKL,EAAZ,CAAmBhZ,gBAErBsZ,UAAW,SAACN,EAAOE,GAAY,IAAD,EACqBA,EAAO3Z,QAAhDlW,EADoB,EACpBA,KAAMqZ,EADc,EACdA,cAAeC,EADD,EACCA,gBACrB5C,EAAeiZ,EAAfjZ,WACFxW,EAAQwW,EAAW0B,IAAIpY,GAC7B,GAAKE,EAKE,CACL,IAAMgwB,EAAmBT,GACvB,uBAAIvvB,EAAMmZ,eAAV,aAA4BA,IAAerG,MACzC,SAACxH,EAAGyC,GAAJ,OAAUzC,EAAE,GAAKyC,EAAE,OAErB,SAAClO,GAAD,OAAOA,EAAE,MAELowB,EAAqBV,GACzB,uBAAIvvB,EAAMoZ,iBAAV,aAA8BA,IAAiBtG,MAC7C,SAACxH,EAAGyC,GAAJ,OAAUzC,EAAE,GAAKyC,EAAE,OAErB,SAAClO,GAAD,OAAOA,EAAE,MAGX2W,EAAW6B,IAAIvY,EAAM,CACnBqZ,cAAe6W,EACf5W,gBAAiB6W,SApBnBzZ,EAAW6B,IAAIvY,EAAM,CACnBqZ,gBACAC,oBAsBJ,OAAO,gBAAKqW,EAAZ,CAAmBjZ,iBAGvB0Z,QAAS,CACN/Z,SADM,sBACGwZ,EADH,+FAIU,OAHG/gB,EADb,EACaA,KAAMuhB,EADnB,EACmBA,IADnB,WAG2BR,EAAO3Z,QAA7BjX,EAHL,EAGKA,KAAMe,EAHX,EAGWA,KAAMkI,EAHjB,EAGiBA,MAHjB,SAIgB4G,EAAKmf,GAAkB,CAAEjuB,OAAMf,SAJ/C,OAMqB,OAFlBD,EAJH,OAKGqR,EAAQrR,EAAKA,KAAKgB,GAAMhB,KAAK,GAAG8vB,OALnC,SAM2BhgB,EAAKyf,GAA4Ble,GAN5D,OASH,OAHMigB,EANH,OAOGxgB,EAAgBwgB,EAAgBpiB,MAAK,SAACnO,GAAD,OAAOA,EAAEmI,QAAUA,KACxD4R,EAAWhK,EAAgBA,EAAcgK,SAAW,GARvD,UASGuW,EAAI,CAAE1xB,KAAM,WAAYuX,QAAS,CAAEoa,kBAAiBrxB,UATvD,QAUH,OAVG,UAUGoxB,EAAI,CAAE1xB,KAAM,mBAAoBuX,QAAS4D,IAV5C,0DAYHgD,QAAQzC,MAAR,MAZG,yDAeN/F,QAfM,sBAeEub,EAfF,mFAkBc,OAHF/gB,EAfZ,EAeYA,KAAMuhB,EAflB,EAekBA,IAflB,SAiBKrwB,EAAS6vB,EAAO3Z,QAAhBlW,KAjBL,SAkBoB8O,EAAKif,GAAc/tB,GAlBvC,OAwBH,OANMuwB,EAlBH,OAmBGptB,EAAQotB,EAASvxB,KAAKgB,GAAMhB,KAC/Bc,KAAI,mBAAqB,IAArB,EAAGb,QACPa,KAAI,SAACC,GAAD,MAAQ,CAAEd,KAAMc,EAAG0a,SAAS,MAChCzH,MAAK,SAACxH,EAAGyC,GAAJ,OAAUzC,EAAEvM,KAAOgP,EAAEhP,QAtB1B,SAwBGoxB,EAAI,CAAE1xB,KAAM,eAAgBuX,QAAS,CAAE/S,QAAOnD,UAxBjD,yDA0BH8c,QAAQzC,MAAR,MA1BG,yDA6BN/D,QA7BM,sBA6BEuZ,EA7BF,qGAiCY,OAJA/gB,EA7BZ,EA6BYA,KAAMuhB,EA7BlB,EA6BkBA,IA7BlB,EA8B0CR,EAAO3Z,QAA9ClW,EA9BH,EA8BGA,KAAM6a,EA9BT,EA8BSA,SAAUF,EA9BnB,EA8BmBA,KAAMC,EA9BzB,EA8ByBA,MAAOrD,EA9BhC,EA8BgCA,MACrCuF,QAAQ0T,IAAI7V,EAAK1b,MA/BZ,kBAiCkB6P,EAAK8e,GAAS,CACjC5tB,OACA8S,MAAQ6H,EAAK1b,KAAO,IAAQ,GAAK,EACjC2b,MAAOA,EAAQ,IApCd,OA4CqB,OAXlB6V,EAjCH,OAsCGzxB,EAAOyxB,EAAOzxB,KAAKgB,GAAMhB,KAtC5B,EAuCuCyvB,GACxCzvB,EACAuY,EACAsD,GAHMxB,EAvCL,EAuCKA,cAAe8V,EAvCpB,EAuCoBA,eAvCpB,UA4C2BrgB,EAC5B0f,GACAW,GA9CC,QAkDH,OANM7V,EA5CH,iBAkDG+W,EAAI,CACR1xB,KAAM,YACNuX,QAAS,CAAElW,OAAMqZ,gBAAeC,qBApD/B,0DAuDHwD,QAAQzC,MAAR,MAvDG,2D,ysBChTX,IAAM8S,GAAQ,IAAIC,KAAc,IAEhC,wBAAC,uBAAA5hB,EAAA,sEACO6hB,wBAAa,CACjBF,SACAG,QAAS3wB,OAAO4wB,eAHnB,kFAAD,GAMA,IAAME,GAAS,IAAIC,KAAa,CAC9BP,SACAQ,IACE,+EAGJ,SAAS+C,GAAQ3d,EAAQzS,GACvB,OAAOmtB,GAAOI,MAAM,CAClBA,MAAOC,aAAF,KAEe/a,EAAmBzS,KAkC5B,QACbovB,UAAW,OACXC,MAAO,CACL/I,aAAc,IAAI1O,KAEpB0X,SAAU,CACRe,QAAS,SAAChB,EAAOE,GAAY,IAAD,EACKA,EAAO3Z,QAA9BnD,EADkB,EAClBA,OAAQhB,EADU,EACVA,WACR6U,EAAiB+I,EAAjB/I,aAER,OADAA,EAAarO,IAAIxF,EAAQhB,GAClB,gBAAK4d,EAAZ,CAAmB/I,mBAGvBwJ,QAAS,CACNtJ,YADM,sBACM+I,EADN,+FAKY,OAJI/gB,EADhB,EACgBA,KAAMuhB,EADtB,EACsBA,IADtB,WAIsBR,EAAO3Z,QAAxBnD,EAJL,EAIKA,OAAQzS,EAJb,EAIaA,KAJb,SAKkBwO,EAAK4hB,GAAS3d,EAAQzS,GALxC,OAeH,OAVMmwB,EALH,SAMsCA,EAAOzxB,KAAK2nB,KAAKA,KAAK,GAAvDM,EANL,EAMKA,KAAMnN,EANX,EAMWA,SAAUiC,EANrB,EAMqBA,aAQlBhK,EAAa,IAAImG,IAAI,CAAC,CAAC5X,EAPhB,CACX2mB,OACA5W,MAAO,CACLyJ,WACAiC,oBAXD,UAeGsU,EAAI,CACR1xB,KAAM,UACNuX,QAAS,CAAEnD,SAAQhB,gBAjBlB,0DAoBH+K,QAAQzC,MAAR,MApBG,2D,kjBClEX,IAAM8S,GAAQ,IAAIC,KAAc,IAEhC,wBAAC,uBAAA5hB,EAAA,sEACO6hB,wBAAa,CACjBF,SACAG,QAAS3wB,OAAO4wB,eAHnB,kFAAD,GAMA,IAAME,GAAS,IAAIC,KAAa,CAC9BP,SACAQ,IACE,+EAGJ,SAASjvB,KACP,OAAO+uB,GAAOI,MAAM,CAClBA,MAAOC,aAAF,QA4BT,SAASW,GAAWzvB,GAAO,IACjB4xB,EAA2B5xB,EAA3B4xB,OAAQ3xB,EAAmBD,EAAnBC,KAAS4xB,EADD,aACW7xB,EADX,mBAElB8xB,EAAS,SAAC,EAWd9wB,GAXa,IAEXomB,EAFW,EAEXA,UACA2K,EAHW,EAGXA,cACA1K,EAJW,EAIXA,MACA2K,EALW,EAKXA,UACAC,EANW,EAMXA,SACA9K,EAPW,EAOXA,KAPW,MAYT,CACJnmB,OACAhB,KAAM,CACJ,CACEgB,KAAM,2BACNE,MAAOkmB,EACPjmB,OAAQ4wB,GAEV,CACE/wB,KAAM,2BACNE,MAtBS,EAQXgxB,mBAeE/wB,OAvBS,EASXgxB,wBAgBA,CACEnxB,KAAM,2BACNE,MAAOmmB,EACPlmB,OAAQ6wB,GAEV,CAAEhxB,KAAM,2BAAQE,MAAOimB,EAAMhmB,OAAQ8wB,MAGzC,MAAO,CACLhyB,KAAa,IAAPA,EACND,KAAM,CAAC8xB,EAAOF,EAAQ,gBAAOE,EAAOD,EAAO,kBAIhC,QACbnB,UAAW,QACXC,MAAO,CACL1wB,MAAM,IAAIsB,MAAO+T,UACjBtV,KAAM,CACJ,CACEgB,KAAM,eACNhB,KAAM,CACJ,CACEgB,KAAM,2BACNE,MAAO,EACPC,OAAQ,GAEV,CACEH,KAAM,2BACNE,MAAO,EACPC,OAAQ,GAEV,CACEH,KAAM,2BACNE,MAAO,EACPC,OAAQ,GAEV,CAAEH,KAAM,2BAAQE,MAAO,EAAGC,OAAQ,KAGtC,CACEH,KAAM,eACNhB,KAAM,CACJ,CACEgB,KAAM,2BACNE,MAAO,EACPC,OAAQ,GAEV,CACEH,KAAM,2BACNE,MAAO,EACPC,OAAQ,GAEV,CACEH,KAAM,2BACNE,MAAO,EACPC,OAAQ,GAEV,CAAEH,KAAM,2BAAQE,MAAO,EAAGC,OAAQ,OAK1CyvB,SAAU,CACRwB,QAAS,SAACzB,EAAOE,GAAR,uBAAyBF,EAAzB,GAAmCE,EAAO3Z,WAErDka,QAAS,CACN9Z,QADM,sBACEuZ,EADF,mFAGY,OAFA/gB,EADZ,EACYA,KAAMuhB,EADlB,EACkBA,IADlB,kBAGkBvhB,EAAKpQ,IAHvB,OAMH,OAHM+xB,EAHH,OAIGY,EAAcZ,EAAOzxB,KAAKqyB,YAC1BryB,EAAOyvB,GAAW4C,GALrB,SAMGhB,EAAI,CACR1xB,KAAM,UACNuX,QAASlX,IARR,yDAWH8d,QAAQzC,MAAR,MAXG,2DC9IX,SAASS,GAAT,GAA4C,EAArBwW,KAAqB,EAAf3yB,KAAe,EAAT0P,MACjC,OAAO,IAAInC,SAAQ,SAACH,GAClBwlB,YAAW,WACTxlB,EAAQ,CACN+c,SAAS,EACTsB,MAAO,GACPprB,KAAM,CACJ,CACEQ,GAAI,EACJ0I,MAAO,MACPmD,IAAK,wBACLud,IACE,q3BACFC,WAAY,IAAItoB,KAAK,cACrBwoB,OAAQ,qBACRG,QAAS,EACTF,MAAO,EACPC,OAAQ,EACR5Y,MAAO,IAET,CACE7Q,GAAI,EACJ0I,MAAO,QACPmD,IAAK,wBACLud,IACE,q3BACFC,WAAY,IAAItoB,KAAK,cACrB2oB,QAAS,GACTF,MAAO,EACPC,OAAQ,EACRF,OAAQ,YAEV,CACEvpB,GAAI,EACJ0I,MAAO,UACPmD,IAAK,wBACLud,IACE,q3BACFC,WAAY,IAAItoB,KAAK,cACrB2oB,QAAS,EACTF,MAAO,EACPC,OAAQ,EACRF,OAAQ,2BAIb,QAIQ,QACb2G,UAAW,UACXC,MAAO,CACLxF,UAAU,EACVrB,SAAS,EACT9pB,KAAM,GACNorB,MAAO,GAETwF,SAAU,CACRjD,YADQ,SACIgD,EAAOE,GAAS,IAClB3vB,EAAU2vB,EAAO3Z,QAAjBhW,MACR,OAAO,gBAAKyvB,EAAZ,CAAmBxF,SAAUjqB,KAE/BsxB,SALQ,SAKC7B,GACP,OAAO,gBAAKA,EAAZ,CAAmB7G,SAAS,KAE9BsI,QARQ,SAQAzB,EAAOE,GACb,OAAO,gBAAKF,EAAZ,GAAsBE,EAAO3Z,UAE/ByS,SAXQ,SAWCgH,EAAOE,GAAS,IACfrwB,EAAOqwB,EAAO3Z,QAAd1W,GACFR,EAAO2wB,EAAM3wB,KAAK4mB,QAClBzN,EAAInZ,EAAKkP,MAAK,SAACnO,GAAD,OAAOA,EAAEP,KAAOA,KAGpC,OAFA2Y,GAAKA,EAAE+Q,UAEA,gBAAKyG,EAAZ,CAAmB3wB,UAErBqrB,WAnBQ,SAmBGsF,EAAOE,GAAS,IACjB7wB,EAAS2wB,EAAT3wB,KACFmZ,EAAC,gBACF0X,EAAO3Z,QADL,CAEL2S,WAAY,IAAItoB,KAChB2oB,QAAS,EACTF,MAAO,EACPC,OAAQ,IAKV,OAHAjqB,EAAK4Z,KAAKT,GAGH,gBAAKwX,EAAZ,CAAmB3wB,UAErB6e,QAjCQ,SAiCA8R,EAAOE,GAAS,IACdrwB,EAAOqwB,EAAO3Z,QAAd1W,GACFR,EAAO2wB,EAAM3wB,KAAK4mB,QAClBzN,EAAInZ,EAAKkP,MAAK,SAACnO,GAAD,OAAOA,EAAEP,KAAOA,KAIpC,OAHA2Y,IAAMA,EAAE8Q,OAAsB,IAAb9Q,EAAE8Q,OAAe,EAAI,GAG/B,gBAAK0G,EAAZ,CAAmB3wB,UAErB0pB,OA1CQ,SA0CDiH,EAAOE,GAAS,IACbrwB,EAAOqwB,EAAO3Z,QAAd1W,GACFR,EAAO2wB,EAAM3wB,KAAK4mB,QAClBzN,EAAInZ,EAAKkP,MAAK,SAACnO,GAAD,OAAOA,EAAEP,KAAOA,KAIpC,OAHA2Y,IAAMA,EAAE6Q,MAAoB,IAAZ7Q,EAAE6Q,MAAc,EAAI,GAG7B,gBAAK2G,EAAZ,CAAmB3wB,UAErBypB,cAnDQ,SAmDMkH,EAAOE,GAAS,IACpBrwB,EAAOqwB,EAAO3Z,QAAd1W,GACF2Y,EAAIwX,EAAM3wB,KAAKkP,MAAK,SAACnO,GAAD,OAAOA,EAAEP,KAAOA,KACpC6O,EAAQshB,EAAM3wB,KAAK2kB,QAAQxL,GAC3BnZ,EAAO2wB,EAAM3wB,KAAK4mB,QAIxB,OAHA5mB,EAAKqZ,OAAOhK,EAAO,GAGZ,gBAAKshB,EAAZ,CAAmB3wB,WAGvBoxB,QAAS,CACN9Z,QADM,sBACEuZ,EADF,uFAKS,OAJG/gB,EADZ,EACYA,KAAMuhB,EADlB,EACkBA,IADlB,WAGqBR,EAAO3Z,QAAvB7H,EAHL,EAGKA,MAAO1P,EAHZ,EAGYA,KACT2yB,EAAO/D,aAAakE,QAAQ,UAJ/B,SAKe3iB,EAAKgM,GAAa,CAClCwW,OACAjjB,QACA1P,SARC,YAKG+yB,EALH,QAUK5I,QAVL,iBAUc,OAVd,UAUoBuH,EAAI,CAAE1xB,KAAM,aAVhC,QAWH,OAXG,UAWG0xB,EAAI,CACR1xB,KAAM,UACNuX,QAAS,CACPlX,KAAM0yB,EAAI1yB,MAAQ,GAClBorB,MAAOsH,EAAItH,SAfZ,0DAmBHtN,QAAQzC,MAAR,MAnBG,2D,kYC/GX,IAAMnY,GAAE,gBACHub,GADG,GAEHC,IAGCyP,GAAQ,IAAIC,KAAc,IAEhC,wBAAC,uBAAA5hB,EAAA,sEACO6hB,wBAAa,CACjBF,SACAG,QAAS3wB,OAAO4wB,eAHnB,kFAAD,GAMA,IAAME,GAAS,IAAIC,KAAa,CAC9BP,SACAQ,IACE,+EAGJ,SAASgE,KAAyB,IAAjB1b,EAAgB,uDAAN,eACzB,OAAOwX,GAAOI,MAAM,CAClBA,MAAOC,aAAF,KAEe7X,KAYxB,SAAS2b,KACP,OAAOnE,GAAOI,MAAM,CAClBA,MAAOC,aAAF,QAUT,SAASW,GAAWzvB,EAAMsgB,GAAuB,IAAjBrJ,EAAgB,uDAAN,eAClC4J,EAAO3d,GAAG2gB,UAAUgP,IACpBC,EAAe5vB,GAClB6vB,QACC/yB,GACA,0CACA,SAACe,GAAD,OAAOA,EAAEgT,UACT,SAAChT,GAAD,OAAOA,EAAEO,QAEViQ,QAAO,kBAAyB,iBAAzB,uBACPzQ,KAAI,yCAAoB,CAApB,UAEEkT,MAAK,SAACxH,EAAGyC,GAAJ,OAAU,IAAI1N,KAAKiL,EAAE,IAAM,IAAIjL,KAAK0N,EAAE,WAEjDnO,KAAI,mCAAEiT,EAAF,KAAU/T,EAAV,WAAoB,CACvB+T,EACAuM,EAAKxf,KAAI,SAACC,GAAD,OAAOsvB,GAAkBrwB,EAAMe,UAgB5C,MAbgB,iBAAZkW,GACF4J,EAAKlB,WAAU,SAAC/V,GACd,GAAKA,EAAKf,SAAV,CACA,IAAMmqB,EAAYC,GAChBrpB,EAAKf,SAAS/H,KAAI,SAACC,GAAD,OAAOA,EAAEf,KAAKkJ,SAChC4pB,EACAlpB,EAAK5J,KAAKkJ,MACVoX,GAEFwS,EAAalZ,KAAKoZ,OAIfF,EAAa5L,SAAQ,0CAG9B,SAASmJ,GAAkBpD,EAAQ3rB,GACjC,IACMwN,GAAIL,EADKvL,GAAGktB,UAAS,gBAAEnwB,EAAF,2BAAY,IAAIsB,KAAKtB,MAAOyC,MACtCuqB,EAAQ,IAAI1rB,KAAKD,GAAO,EAAG2rB,EAAOle,OAAS,GAC1DvC,EAAIygB,EAAOne,GACb,IAAKA,EACH,MAAO,CACLiF,OAAQvH,EAAE,GAAGuH,OACbzS,OACAtB,KAAM,CACJonB,UAAW5a,EAAE,GAAG4a,UAChBD,KAAM3a,EAAE,GAAG2a,KACXE,MAAO7a,EAAE,GAAG6a,QAGlB,IAAMpY,EAAIge,EAAOne,EAAI,GACnB9J,GAAK,IAAIzD,KAAKD,GAAQ,IAAIC,KAAKiL,EAAE,MAAQ,IAAIjL,KAAK0N,EAAE,IAAM,IAAI1N,KAAKiL,EAAE,KAEjE2C,EAAc,SAAClO,GAAD,OAASG,KAAKkT,KAAK9H,EAAE,GAAGvL,IAAQ,EAAI+D,GAAKiK,EAAE,GAAGhO,GAAO+D,IACzE,MAAO,CACL+O,OAAQ9E,EAAE,GAAG8E,OACbzS,OACAtB,KAAM,CACJonB,UAAWjY,EAAY,aACvBgY,KAAMhY,EAAY,QAClBkY,MAAOlY,EAAY,WAKzB,SAAS8jB,GAAIlL,EAASkF,EAAQ/jB,EAAOoX,GACnC,IAAMtgB,EAAOsgB,EAAKxf,KAAI,SAACoyB,GAAD,MAAU,CAC9Bnf,OAAQ7K,EACR5H,KAAM4xB,EACNlzB,KAAM,CACJonB,UAAW,EACXC,MAAO,EACPF,KAAM,OAIJpU,EAAa7P,GAAGse,OACpBxhB,GACA,0CACA,SAACe,GAAD,OAAOA,EAAEO,QAd8B,uBAgBzC,IAhByC,IAgBzC,EAhByC,iBAgBhC2F,EAhBgC,UAiBrBgmB,EAAO/d,MAAK,yCAAyBjI,KAA9C/F,EAjB8B,2CAkBvC,YAA2BA,EAA3B,+CAAkC,CAAC,IAAD,UAAvBI,EAAuB,EAAvBA,KAAMtB,EAAiB,EAAjBA,KACTe,EAAIgS,EAAWqG,IAAI9X,GACzBP,EAAEf,KAAKonB,WAAapnB,EAAKonB,UACzBrmB,EAAEf,KAAKqnB,OAASrnB,EAAKqnB,MACrBtmB,EAAEf,KAAKmnB,MAAQnnB,EAAKmnB,MAtBiB,oFAgBzC,EAAcY,EAAd,+CAAwB,IAhBiB,kFAyBzC,MAAO,CAAC7e,EAAOlJ,GAGF,QACb0wB,UAAW,OACXC,MAAO,CACL9Z,aAAc,IAAIqC,IAClBnG,WAAY,IAAImG,IAChB2D,aAAc,GACd1Y,MAAO,GACPmP,UAAW,GACXyD,UAAW,IAAI9F,IACf1R,MAAO,GACP8T,kBAAmB,CACjBoD,KAAM,GACNkR,KAAM,KAGViJ,SAAU,CACRuC,eADQ,SACOxC,EAAOE,GAAS,IAAD,EACwBA,EAAO3Z,QAAnDnE,EADoB,EACpBA,WAAY8D,EADQ,EACRA,aAAcI,EADN,EACMA,QAASjW,EADf,EACeA,KACnCqS,EAAiCsd,EAAjCtd,kBAAmB0D,EAAc4Z,EAAd5Z,UAG3B,OAFA1D,EAAkBrS,GAAM4Y,KAAK3C,GAC7BF,EAAU8G,IAAI5G,GACP,gBAAK0Z,EAAZ,CAAmB5d,aAAY8D,eAAcxD,uBAE/C8D,qBARQ,SAQawZ,EAAOE,GAAS,IAAD,EACXA,EAAO3Z,QAAtBzF,EAD0B,EAC1BA,KAAMzQ,EADoB,EACpBA,KACNqS,EAAsBsd,EAAtBtd,kBAER,OADAA,EAAkBrS,GAAQyQ,EACnB,gBAAKkf,EAAZ,CAAmBtd,uBAErB+f,KAdQ,SAcHzC,EAAOE,GACV,OAAO,gBAAKF,EAAZ,GAAsBE,EAAO3Z,UAE/BhE,gBAAiB,SAACyd,EAAOE,GAAR,uBACZF,EADY,CAEf5sB,aAAc8sB,EAAO3Z,WAEvByH,gBAAiB,SAACgS,EAAOE,GAAR,uBACZF,EADY,CAEf9T,aAAcgU,EAAO3Z,YAGzBka,QAAS,CACNpa,eADM,sBACS6Z,EADT,qHAGU,OAFS/gB,EADnB,EACmBA,KAAMuhB,EADzB,EACyBA,IADzB,EAEsDR,EAAO3Z,QAA1DD,EAFH,EAEGA,QAAS1X,EAFZ,EAEYA,MAAOwT,EAFnB,EAEmBA,WAAY8D,EAF/B,EAE+BA,aAAc7V,EAF7C,EAE6CA,KAF7C,SAGgB8O,EAAK6iB,GAAS1b,GAH9B,OAkBL,IAfMwa,EAHD,OAIC9J,EAAO8J,EAAOzxB,KAAK0W,KACnB1W,EAAOyvB,GAAW9H,EAAMpoB,EAAO0X,GAC/Boc,EAAgBnwB,GAAGse,OACvBxhB,GACA,uCAAWA,QACX,SAACe,GAAD,OAAOA,EAAEO,QAELgyB,EAAkBpwB,GAAGse,OACzBxhB,GACA,0CACA,SAACe,GAAD,OAAOA,EAAEgT,UACT,SAAChT,GAAD,OAAOA,EAAEO,QAfN,6BAkBL,EAAyByR,EAAWwgB,UAApC,+CAAgD,EAAD,uBAArCtyB,EAAqC,KAAhCC,EAAgC,KACvCH,EAAIsyB,EAAcja,IAAInY,GAC5BC,EAAM0Y,KAAK,CAAE7F,OAAQkD,EAASjX,KAAMe,IACpCgS,EAAWwG,IAAItY,EAAKC,GArBjB,0OA0BL,OAFA2V,EAAa0C,IAAItC,EAASqc,EAAgBla,IAAInC,IAxBzC,UA0BCoa,EAAI,CACR1xB,KAAM,iBACNuX,QAAS,CACPnE,aACA8D,eACAI,UACAjW,UAhCC,4EAoCNsW,QApCM,sBAoCEuZ,EApCF,uGAuCgB,OAHJ/gB,EApCZ,EAoCYA,KAAMuhB,EApClB,EAoCkBA,IApClB,SAsCGpa,EAAU,eAtCb,SAuCsBnH,EAAK6iB,GAAS1b,GAvCpC,OAwCmB,OADhBuc,EAvCH,gBAwCyB1jB,EAAK8iB,IAxC9B,OA2EH,OAnCMa,EAxCH,OAyCG9L,EAAO6L,EAAWxzB,KAAK0W,KACvBpD,EAAYO,MAAMC,KACtB,IAAI7C,IACFwiB,EAAczzB,KAAK0W,KAChB5V,KAAI,SAACC,GAAD,OAAOA,EAAEkW,WACb1F,QAAO,SAACxQ,GAAD,MAAa,KAANA,OAGfxB,EAAQsU,MAAMC,KAAK,IAAI7C,IAAI0W,EAAK7mB,KAAI,SAACC,GAAD,OAAOA,EAAEO,UAC7CtB,EAAOyvB,GAAW9H,EAAMpoB,EAAO0X,GACnCJ,EAAe3T,GAAGse,OAChBxhB,GACA,0CACA,SAACe,GAAD,OAAOA,EAAEgT,UACT,SAAChT,GAAD,OAAOA,EAAEO,QAEX6C,EAAQjB,GAAGqP,OAAOhT,GAAOuB,KAAI,SAACC,GAAD,OAAO,IAAIQ,KAAKR,MAC7CgS,EAAa7P,GAAGse,OACdxhB,GACA,SAACA,GAAD,OACEA,EAAKc,KAAI,SAACC,GAAD,MAAQ,CACfgT,OAAQhT,EAAEgT,OACV/T,KAAMe,EAAEf,YAEZ,SAACe,GAAD,OAAOA,EAAEO,QAEXyC,EAAe,IAAIxC,KAAK4C,EAAM,IAAImR,UAClCjC,EAAoB,CAClBoD,KAAM,CAAC,gBACPkR,KAAM,CAAC,iBAET5Q,EAAY,IAAI9F,IAAI,CAAC,iBACN,aAzEd,UA2EGogB,EAAI,CACR1xB,KAAM,OACNuX,QAAS,CACPL,eACA9D,aACA8J,aAPa,aAQb9Y,eACAkT,UACA9S,QACAkP,oBACA9T,QACAwX,YACAzD,eAvFD,0DA2FHwK,QAAQzC,MAAR,MA3FG,2DC/KLqY,I,OAAM,IAAIC,KAEhBD,GAAIE,IAAIC,eACRH,GAAII,MAAMC,IACVL,GAAII,MAAME,IACVN,GAAII,MAAMG,IACVP,GAAII,MAAMI,IACVR,GAAII,MAAMK,IAEVT,GAAIU,QAAO,kBAAM,kBAAC,GAAD,SAEjBV,GAAInb,MAAM,SnC0GJ,kBAAmB8b,WACrBA,UAAUC,cAAcC,MACrBzmB,MAAK,SAAA0mB,GACJA,EAAaC,gBAEdC,OAAM,SAAArZ,GACLyC,QAAQzC,MAAMA,EAAMlF,a","file":"static/js/main.58460fb0.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/china.6d888cb3.png\";","module.exports = __webpack_public_path__ + \"static/media/zhihu.9e85bbdf.png\";","module.exports = __webpack_public_path__ + \"static/media/talk.1ad6cd23.jpg\";","module.exports = __webpack_public_path__ + \"static/media/hots.a9e67241.jpg\";","module.exports = __webpack_public_path__ + \"static/media/思源柔黑.d0355c20.ttf\";","module.exports = __webpack_public_path__ + \"static/media/news.0f6ed5a1.jpg\";","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' }\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React, { useEffect, useState } from \"react\";\nimport styled from \"styled-components\";\nimport { useWindowSize } from \"react-use\";\nimport chinaURL from \"../assets/images/china.png\";\nimport zhihuURL from \"../assets/images/zhihu.png\";\nimport { connect } from \"dva\";\nimport { Tabs } from \"antd\";\n\nconst { TabPane } = Tabs;\n\nconst Container = styled.div`\n  padding: 56px 0;\n  position: relative;\n  height: ${(props) => props.height}px;\n  width: 100%;\n  justify-content: space-around;\n  align-items: center;\n  display: flex;\n  flex-direction: column;\n`;\n\nconst An = styled.div`\n  position: absolute;\n  top: -56px;\n`;\n\nconst Title = styled.h1`\n  margin-top: 1em;\n  font-size: 60px;\n  font-weight: bold;\n\n  @media (max-width: 992px) {\n    font-size: 40px;\n  }\n\n  @media (max-width: 768px) {\n    font-size: 40px;\n  }\n\n  @media (max-width: 576px) {\n    font-size: 25px;\n  }\n`;\n\nconst Row = styled.div`\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  width: 100%;\n\n  @media (max-width: 768px) {\n    flex-direction: column;\n    height: 50%;\n  }\n`;\n\nconst China = styled.img`\n  width: 50%;\n  @media (max-width: 768px) {\n    height: 50%;\n    width: initial;\n  }\n`;\n\nconst Zhihu = styled.img`\n  width: 50%;\n  @media (max-width: 768px) {\n    height: 50%;\n    width: initial;\n  }\n`;\n\nconst Time = styled.div`\n  margin: 1em auto;\n  color: #bfbfbf;\n  font-size: 11px;\n  display: flex;\n  flex-direction: row-reverse;\n`;\n\nconst Box = styled.div`\n  background: white;\n  border-radius: 8px;\n  padding: 0.5em 1em;\n  width: 500px;\n  max-width: 100%;\n`;\n\nconst CardContainer = styled.div`\n  display: flex;\n  margin-top: 1em;\n  justify-content: space-around;\n`;\n\nconst Card = styled.div`\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n`;\n\nconst Change = styled.div`\n  color: #999999;\n  line-height: 22px;\n  font-size: 12px;\n  & span {\n    margin-left: 2px;\n    color: ${(props) => props.color};\n  }\n`;\n\nconst Value = styled.div`\n  font-size: 19px;\n  color: ${(props) => props.color};\n  font-weight: bold;\n`;\n\nconst Name = styled.div`\n  font-weight: bold;\n  color: #444444;\n\n  @media (max-width: 700px) {\n    font-size: 10px;\n  }\n`;\n\nconst DashBoard = styled.div`\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  width: 100%;\n`;\n\nfunction Introduction({ total, getTotal }) {\n  const { height } = useWindowSize();\n  const [tab, setTab] = useState(\"全球\");\n  const { data, time } = total;\n  const formate = (time) => {\n    const date = new Date(time);\n    return `${date.getFullYear()}年${date.getMonth() + 1}月${date.getDate()}日`;\n  };\n\n  const colorByName = {\n    累计确诊: \"#F9345e\",\n    累计死亡: \"#6236ff\",\n    累计治愈: \"#1cb142\",\n    现存确诊: \"#fa6400\",\n  };\n\n  useEffect(() => {\n    getTotal();\n  }, [getTotal]);\n\n  return (\n    <Container height={height}>\n      <An id=\"overview\" />\n      <DashBoard>\n        <Title>COVID-19 舆论新闻可视化</Title>\n        <Tabs\n          onChange={setTab}\n          activeKey={tab}\n          style={{ width: 500, maxWidth: \"100%\" }}\n        >\n          {data.map((d) => (\n            <TabPane tab={d.name} key={d.name}>\n              <Box>\n                <CardContainer>\n                  {d.data.map(({ name, value, change }) => (\n                    <Card key={name}>\n                      <Change color={colorByName[name]}>\n                        {change >= 0 ? \"新增\" : \"减少\"}\n                        <span>\n                          {change >= 0 ? \"+\" : \"-\"}\n                          {Math.abs(change)}\n                        </span>\n                      </Change>\n                      <Value color={colorByName[name]}>{value}</Value>\n                      <Name>{d.name + name}</Name>\n                    </Card>\n                  ))}\n                </CardContainer>\n                <Time>{`截至${formate(time)}, ${\n                  d.name === \"全国\" ? \"全国累计（含港澳台地区）\" : \"全球数据\"\n                }`}</Time>\n              </Box>\n            </TabPane>\n          ))}\n        </Tabs>\n      </DashBoard>\n      <Row>\n        <Zhihu src={zhihuURL} />\n        <China src={chinaURL} />\n      </Row>\n    </Container>\n  );\n}\nexport default connect(\n  ({ total, loading }) => ({\n    total,\n    loading: loading.models.total,\n  }),\n  {\n    getTotal: () => ({ type: \"total/getData\" }),\n  }\n)(Introduction);\n","import React from \"react\";\nimport styled from \"styled-components\";\nimport talkImage from \"../assets/images/talk.jpg\";\n\nconst Container = styled.div`\n  position: relative;\n  margin-bottom: 4em;\n`;\n\nconst An = styled.div`\n  position: absolute;\n  top: -56px;\n`;\n\nconst Row = styled.div`\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  width: 100%;\n\n  @media (max-width: 768px) {\n    flex-direction: column;\n  }\n`;\n\nconst Intro = styled.div`\n  width: 60%;\n  & ul {\n    padding-left: 2em;\n  }\n  @media (max-width: 768px) {\n    width: 100%;\n  }\n`;\n\nconst TalkImage = styled.img`\n  border-radius: 8px;\n`;\n\nfunction IntroductionPanel() {\n  return (\n    <Container>\n      <An id=\"introduction\" />\n      <h1>介绍</h1>\n      <Row>\n        <Intro>\n          <p>\n            <b>nCoVIS</b> 是山东大学{\" \"}\n            <a href=\"https://vislab.wang/\" target=\"_blank\">\n              VisLab\n            </a>{\" \"}\n            实验室为大众提供的一个在线可视化分析平台，旨在探索从 COVID-19\n            疫情出现直到现在：\n          </p>\n          <ul>\n            <li>人们在网络上讨论什么？</li>\n            <li>各地区新闻在报道什么？</li>\n            <li>上面两者的关系以及对控制疫情有什么指导意义？</li>\n          </ul>\n          <p>\n            <b>COVID-19</b> 是人类历史上第一次在高度发达的\n            <b>自媒体、全媒体时代</b>\n            遇到的高传染性病毒。面对病毒，我们不能只关心患者的患病情况，同时也要关心群众们在讨论什么，防止出现恐慌。\n          </p>\n          <p>\n            在病毒传播初期，武汉曾出现过因为恐慌导致大量常规感冒、发烧患者挤兑医院，在医院造成大规模传染。并且因为恐慌效应在自媒体时代各种社交软件上的二次传播，加剧了人们对病毒的恐惧，促使大量疫情严重地区的人开始向其他地区逃离，进一步加大了空坠疫情的难度。\n          </p>\n          <p>\n            <b>新闻报道控制舆论导向，而舆论反过来也影响新闻报道。</b>\n            所以我们除了提供和疫情直接相关的数据（来自\n            <a\n              target=\"_blank\"\n              href=\"https://github.com/BlankerL/DXY-COVID-19-Crawler?spm=5176.12282029.0.0.480b56f5rDZFu0\"\n            >\n              丁香园\n            </a>\n            ）可视化以外，还爬取了\n            <a target=\"_blank\" href=\"https://www.chinanews.com/\">\n              中国新闻网\n            </a>\n            各地区的新闻数据和\n            <a target=\"_blank\" href=\"https://www.zhihu.com/\">\n              知乎\n            </a>\n            的热搜数据（感谢 {\" \"}\n            <a href=\"https://github.com/mjrao/hotso\" target=\"_blank\">\n              mjrao 先生\n            </a>\n            提供的部分知乎热搜数据)，并提供相关的可视化。\n          </p>\n          <p>\n            在可视化技术方面，因为面对的对象是大众，所以我们并没有使用比较复杂的技术。一方面我们使用了一些常见的可视化技术：面积图、条形图、饼状图等，另一方面使用了我们实验室在去年{\" \"}\n            <b>InfoVis2019</b> 发表的论文所提到的技术\n            <a\n              target=\"_blank\"\n              href=\"https://vislab.wang/post/shapewordle:-tailoring-wordles-using-shape-aware-archimedean-spirals\"\n            >\n              {\" \"}\n              ShapeWordle{\" \"}\n            </a>\n            ，让我们的可视化结果更加生动和有人情味。\n          </p>\n          <p>\n            最后，我们希望这场灾难早点过去，祝愿病人们早日康复，也向奋斗在一线的白衣天使和科学家们致以最崇高的敬意。\n            <b>中国加油，世界加油，那些不能打到我们的，只能让我们更强大！</b>\n          </p>\n        </Intro>\n        <TalkImage src={talkImage} />\n      </Row>\n    </Container>\n  );\n}\n\nexport default IntroductionPanel;\n","import * as d3 from \"d3\";\n// 获取 SVG 元素的 mouseX 和 mouseY 和普通 DOM 元素有一点不同，因为它会缩放\nexport default function(evevt, SVGelement) {\n  const { clientX, clientY } = evevt;\n  const {\n    left,\n    top,\n    width: realWidth,\n    height: realHeight\n  } = SVGelement.getBoundingClientRect();\n  const mouseX = clientX - left,\n    mouseY = clientY - top;\n  const { width, height } = SVGelement.getBBox();\n  const x = d3.scaleLinear([0, realWidth], [0, width]),\n    y = d3.scaleLinear([0, realHeight], [0, height]);\n  return [x(mouseX), y(mouseY)];\n}\n","const wrapper = d => (d < 10 ? \"0\" + d : d);\nexport default function(time) {\n  const year = time.getFullYear(),\n    month = time.getMonth() + 1,\n    date = time.getDate();\n  return `${year}-${wrapper(month)}-${wrapper(date)}`;\n}\n","import React, { useRef, useEffect, useState } from \"react\";\nimport styled from \"styled-components\";\nimport mouse from \"../utils/mouse\";\nimport foramtDate from \"../utils/formatDate\";\nimport * as d3 from \"d3\";\n\nconst Svg = styled.svg`\n  background: #f9f9f9;\n`;\n\nconst Button = styled.g`\n  cursor: pointer;\n`;\n\nconst Slider = styled.rect`\n  cursor: pointer;\n`;\n\nconst Dot = styled.circle`\n  cursor: pointer;\n`;\n\nexport default function({\n  selectedTime,\n  running,\n  toggleAnimation,\n  changeValue,\n  range,\n  finish,\n  totalDuration,\n  duration\n}) {\n  const dragging = useRef(false);\n  const sliderRef = useRef(null);\n  const dotRef = useRef(null);\n  const [tip, setTip] = useState({\n    time: -1,\n    duration: -1\n  });\n  const width = 1200,\n    height = 50,\n    margin = { top: 20, right: 40, bottom: 20, left: 90 };\n\n  const x = d3\n    .scaleLinear()\n    .domain(range)\n    .range([margin.left, width - margin.right]);\n\n  const d = d3\n    .scaleLinear()\n    .domain([margin.left, width - margin.right])\n    .range([0, totalDuration]);\n\n  const foramtTime = t => {\n    const d = (t / 1000) | 0;\n    const m = Math.max((d / 60) | 0, 0);\n    const s = Math.max(d % 60, 0);\n    return `${m < 10 ? \"0\" + m : m}:${s < 10 ? \"0\" + s : s}`;\n  };\n\n  const startButton = (\n    <svg\n      t=\"1583152510891\"\n      className=\"icon\"\n      viewBox=\"0 0 1024 1024\"\n      version=\"1.1\"\n      xmlns=\"http://www.w3.org/2000/svg\"\n      p-id=\"2302\"\n      width=\"30\"\n      height=\"30\"\n    >\n      <path\n        d=\"M149.989688 874.093352a509.948138 509.948138 0 1 0-109.714286-162.700613 513.206978 513.206978 0 0 0 109.714286 162.700613z\"\n        fill=\"#4D4D4D\"\n        p-id=\"2303\"\n      ></path>\n      <path\n        d=\"M429.646454 687.977369a57.331447 57.331447 0 0 0 27.277699 7.000472 60.348892 60.348892 0 0 0 32.829797-10.017916l175.977369-115.990571a68.677039 68.677039 0 0 0 30.777935-58.055634 66.504479 66.504479 0 0 0-29.812353-56.486563l-177.54644-115.749175a57.934936 57.934936 0 0 0-60.348892-3.017445 67.832155 67.832155 0 0 0-33.312588 60.348893V627.628477a67.470061 67.470061 0 0 0 34.157473 60.348892z\"\n        fill=\"#FFFFFF\"\n        p-id=\"2304\"\n      ></path>\n    </svg>\n  );\n\n  const pauseButton = (\n    <svg\n      t=\"1583152894415\"\n      className=\"icon\"\n      viewBox=\"0 0 1024 1024\"\n      version=\"1.1\"\n      xmlns=\"http://www.w3.org/2000/svg\"\n      p-id=\"1002\"\n      width=\"30\"\n      height=\"30\"\n    >\n      <path\n        d=\"M874.058005 149.941995a510.06838 510.06838 0 1 0 109.740156 162.738976 511.396369 511.396369 0 0 0-109.740156-162.738976z\"\n        fill=\"#4D4D4D\"\n        p-id=\"1003\"\n      ></path>\n      <path\n        d=\"M417.954256 281.533601a41.046923 41.046923 0 0 0-41.77128 40.201839v385.116718a41.892007 41.892007 0 0 0 83.663287 0v-385.116718a41.167649 41.167649 0 0 0-41.892007-40.201839zM606.045744 281.533601a41.046923 41.046923 0 0 0-41.77128 40.201839v385.116718a41.892007 41.892007 0 0 0 83.663287 0v-385.116718a41.167649 41.167649 0 0 0-41.892007-40.201839z\"\n        fill=\"#FFFFFF\"\n        p-id=\"1004\"\n      ></path>\n    </svg>\n  );\n\n  const restartButton = (\n    <svg\n      t=\"1583294650370\"\n      className=\"icon\"\n      viewBox=\"0 0 1024 1024\"\n      version=\"1.1\"\n      xmlns=\"http://www.w3.org/2000/svg\"\n      p-id=\"1815\"\n      width=\"30\"\n      height=\"30\"\n    >\n      <path d=\"M471.616 361.728\" p-id=\"1816\"></path>\n      <path\n        d=\"M512 0C229.248 0 0 229.248 0 512s229.248 512 512 512 512-229.248 512-512S794.752 0 512 0zM534.976 860.672c-100.992 0-191.616-44.48-253.312-114.944l63.36-55.424c3.712 4.224 7.488 8.32 11.52 12.288 47.68 47.68 111.104 73.92 178.56 73.92 67.456 0 130.816-26.304 178.56-73.92 47.68-47.68 73.92-111.104 73.92-178.56s-26.304-130.816-73.92-178.56c-47.68-47.68-111.104-73.92-178.56-73.92-67.456 0-130.816 26.304-178.56 73.92l94.4 94.4L198.336 439.872 198.336 187.328 296.96 285.952c60.928-60.928 145.088-98.624 238.016-98.624 185.92 0 336.64 150.72 336.64 336.64C871.616 709.888 720.896 860.672 534.976 860.672z\"\n        p-id=\"1817\"\n      ></path>\n    </svg>\n  );\n\n  function handleClick(e) {\n    const [mouseX] = mouse(e, sliderRef.current);\n    const time = x.invert(mouseX + margin.left);\n    changeValue(time);\n  }\n\n  function handleMouseMove(e) {\n    const [mouseX] = mouse(e, sliderRef.current);\n    const duration = d(mouseX + margin.left);\n    const time = x.invert(mouseX + margin.left);\n    setTip({\n      time,\n      duration\n    });\n  }\n\n  function handleMouseOver(e) {\n    const [mouseX] = mouse(e, sliderRef.current);\n    const duration = d(mouseX + margin.left);\n    const time = x.invert(mouseX + margin.left);\n    setTip({\n      time,\n      duration\n    });\n  }\n\n  useEffect(() => {\n    const handleMouseUp = () => (dragging.current = false);\n    const handleMouseMove = e => {\n      if (!dragging.current) return;\n      const [mouseX] = mouse(e, sliderRef.current);\n      const t = x.invert(mouseX + margin.left);\n      changeValue(t);\n    };\n\n    window.addEventListener(\"mouseup\", handleMouseUp);\n    window.addEventListener(\"mousemove\", handleMouseMove);\n\n    return () => {\n      window.removeEventListener(\"mouseup\", handleMouseUp);\n      window.removeEventListener(\"mousemove\", handleMouseMove);\n    };\n  });\n\n  return (\n    <Svg viewBox={[0, 0, width, height]} fontSize=\"12\">\n      <Button transform={`translate(${10}, ${10})`} onClick={toggleAnimation}>\n        {running ? pauseButton : finish ? restartButton : startButton}\n      </Button>\n      <g transform={`translate(${margin.left - 10}, ${height / 2})`}>\n        <text textAnchor=\"end\" dy=\"0.5em\">\n          {foramtTime(duration)}\n        </text>\n      </g>\n      <Slider\n        ref={sliderRef}\n        x={margin.left}\n        y={margin.top}\n        width={width - margin.left - margin.right}\n        height={10}\n        fill=\"#eee\"\n        rx={5}\n        onClick={handleClick}\n        onMouseMove={handleMouseMove}\n        onMouseOver={handleMouseOver}\n      >\n        <title>{`[${foramtTime(tip.duration)}] ${foramtDate(\n          new Date(tip.time)\n        )}`}</title>\n      </Slider>\n      <Dot\n        ref={dotRef}\n        cx={x(selectedTime) || margin.left}\n        cy={height / 2}\n        r={7}\n        onMouseDown={() => (dragging.current = true)}\n      ></Dot>\n      <g transform={`translate(${width}, ${height / 2})`}>\n        <text textAnchor=\"end\" color=\"black\" dy=\"0.5em\">\n          {foramtTime(totalDuration)}\n        </text>\n      </g>\n    </Svg>\n  );\n}\n","import React, { useState, useRef } from \"react\";\nimport styled from \"styled-components\";\nimport useSize from \"../hook/useSize\";\nimport { Popover, Empty, Spin, Icon, Drawer } from \"antd\";\n\nconst Container = styled.div.attrs(\n  (props) =>\n    props.zoom && {\n      style: {\n        position: \"fixed\",\n        zIndex: 999,\n        left: \"50%\",\n        top: \"50%\",\n        transform: \"translate(-50%, -50%)\",\n        marginTop: 28,\n        width: \"90%\",\n        maxWidth: 1200,\n      },\n    }\n)`\n  display: ${(props) => (props.show ? \"block\" : \"none\")};\n  position: relative;\n  border-radius: 8px;\n  overflow: hidden;\n  transition: all 0.5s;\n  background: white;\n  &:hover {\n    box-shadow: 0px 0px 10px 3px rgba(0, 0, 0, 0.1);\n  }\n`;\n\nconst Layer = styled.div`\n  position: fixed;\n  left: 0;\n  top: 0;\n  z-index: 5;\n  width: 100%;\n  height: 100%;\n  background: rgba(0, 0, 0, 0.7);\n`;\n\nconst Box = styled.div`\n  width: ${(props) => props.width}px;\n  height: ${(props) => props.height}px;\n  line-height: ${(props) => props.height}px;\n  z-index: 10;\n  background: ${(props) =>\n    props.type === \"loading \" ? \"transparent\" : \"white\"};\n  position: absolute;\n  left: 0;\n  top: 0;\n`;\n\nconst MiddleSpin = styled(Spin)`\n  position: absolute;\n  left: 50%;\n  top: 50%;\n  transform: translate(-50%, -50%);\n`;\n\nconst MiddleEmpty = styled(Empty)`\n  position: absolute;\n  left: 50%;\n  top: 50%;\n  transform: translate(-50%, -50%);\n  margin: 0;\n`;\n\nconst Content = styled.ul`\n  padding: 0;\n  margin: 0;\n  cursor: pointer;\n\n  & li {\n    list-style: none;\n    padding: 0.5em;\n    border-bottom: 1px solid transparent;\n  }\n\n  & li:hover {\n    border-bottom: 1px solid #efefef;\n  }\n`;\n\nconst StyledDrawer = styled(Drawer)`\n  position: absolute;\n`;\n\nconst Header = styled.div`\n  display: flex;\n  margin: 0.5em 1em 0 1em;\n  padding-bottom: 0.5em;\n  border-bottom: 1px solid #efefef;\n  align-items: center;\n  justify-content: space-between;\n`;\n\nconst Left = styled.div`\n  & > span {\n    margin-left: 8px;\n  }\n`;\n\nconst Slot = styled.div`\n  margin-right: 8px;\n\n  & span {\n    font-size: 12px;\n    margin-right: 4px;\n  }\n`;\n\nconst Right = styled.div`\n  display: flex;\n  align-items: center;\n`;\n\nconst StyledIcon = styled(Icon)`\n  cursor: pointer;\n`;\n\nconst ZoomIcon = styled(StyledIcon)`\n  margin-right: 8px;\n`;\n\nfunction State({ type, width, height }) {\n  return (\n    <Box width={width} height={height} type={type}>\n      {type === \"loading\" ? (\n        <MiddleSpin />\n      ) : (\n        <MiddleEmpty\n          description=\"暂无数据\"\n          image={Empty.PRESENTED_IMAGE_SIMPLE}\n        />\n      )}\n    </Box>\n  );\n}\n\nfunction Card({\n  children,\n  onDownload,\n  onDownloadPng,\n  onDownloadSvg,\n  loading,\n  nodata,\n  title = \"title\",\n  introduction,\n  slot,\n  show = true,\n  ...rest\n}) {\n  const ref = useRef(null);\n  const { width, height } = useSize(ref);\n  const [zoom, setZoom] = useState(false);\n  const [more, setMore] = useState(false);\n  const [pop, setPop] = useState(false);\n\n  const content = (\n    <Content>\n      <li onClick={() => onClickItem(onDownload ? onDownload : onDownloadPng)}>\n        <span>PNG</span>\n      </li>\n      {onDownloadSvg && (\n        <li onClick={() => onClickItem(onDownloadSvg)}>\n          <span>SVG</span>\n        </li>\n      )}\n    </Content>\n  );\n\n  function onClickItem(cb) {\n    cb && cb();\n    setPop(false);\n  }\n\n  return (\n    <>\n      <Container\n        ref={ref}\n        show={show}\n        {...rest}\n        zoom={zoom}\n        onClick={() => setPop(false)}\n      >\n        {loading ? (\n          <State width={width} height={height} type=\"loading\" />\n        ) : (\n          nodata && <State width={width} height={height} />\n        )}\n        <Header>\n          <Left>\n            <StyledIcon\n              type=\"question-circle\"\n              onClick={() => onClickItem(() => setMore(true))}\n            />\n            <span>{title}</span>\n          </Left>\n          <Right>\n            <Slot>{slot}</Slot>\n            <ZoomIcon\n              type={zoom ? \"fullscreen-exit\" : \"fullscreen\"}\n              onClick={() => onClickItem(() => setZoom(!zoom))}\n            />\n            <Popover\n              placement=\"bottomRight\"\n              content={content}\n              trigger=\"click\"\n              arrowPointAtCenter\n              visible={pop}\n            >\n              <StyledIcon\n                type=\"download\"\n                onClick={(e) => {\n                  setPop(!pop);\n                  e.stopPropagation();\n                }}\n              />\n            </Popover>\n          </Right>\n        </Header>\n        {children}\n        <StyledDrawer\n          title={title}\n          placement=\"right\"\n          closable={true}\n          onClose={() => setMore(false)}\n          visible={more}\n          getContainer={false}\n        >\n          {introduction}\n        </StyledDrawer>\n      </Container>\n      {zoom && <Layer onClick={() => setZoom(false)} />}\n    </>\n  );\n}\n\nexport default Card;\n","import { useEffect, useState } from \"react\";\nimport ResizeObserver from \"resize-observer-polyfill\";\n\nexport default function(ref) {\n  const [size, setSize] = useState({\n    width: 0,\n    height: 0\n  });\n\n  const [observer] = useState(\n    new ResizeObserver(([entry]) => {\n      if (entry) {\n        const { width, height } = entry.contentRect;\n        setSize({ width, height });\n      }\n    })\n  );\n  useEffect(() => {\n    const node = ref.current;\n    observer.observe(node);\n    return () => observer.disconnect();\n  }, [ref, observer]);\n  return size;\n}\n","// https://observablehq.com/@mbostock/saving-svg\nexport function serialize(svg) {\n  const xmlns = \"http://www.w3.org/2000/xmlns/\";\n  const xlinkns = \"http://www.w3.org/1999/xlink\";\n  const svgns = \"http://www.w3.org/2000/svg\";\n  svg = svg.cloneNode(true);\n  const fragment = window.location.href + \"#\";\n  const walker = document.createTreeWalker(\n    svg,\n    NodeFilter.SHOW_ELEMENT,\n    null,\n    false\n  );\n  while (walker.nextNode()) {\n    for (const attr of walker.currentNode.attributes) {\n      if (attr.value.includes(fragment)) {\n        attr.value = attr.value.replace(fragment, \"#\");\n      }\n    }\n  }\n  svg.setAttributeNS(xmlns, \"xmlns\", svgns);\n  svg.setAttributeNS(xmlns, \"xmlns:xlink\", xlinkns);\n  const serializer = new window.XMLSerializer();\n  const string = serializer.serializeToString(svg);\n  return new Blob([string], { type: \"image/svg+xml\" });\n}\n\nexport function rasterize(svg) {\n  let resolve, reject;\n  const promise = new Promise((y, n) => ((resolve = y), (reject = n)));\n  const image = new Image();\n  image.onerror = reject;\n  image.onload = () => {\n    const rect = svg.getBoundingClientRect();\n    const canvas = document.createElement(\"canvas\");\n    canvas.width = rect.width * 2;\n    canvas.height = rect.height * 2;\n    const context = canvas.getContext(\"2d\");\n    context.scale(2, 2);\n    context.drawImage(image, 0, 0, rect.width, rect.height);\n    context.canvas.toBlob(resolve);\n  };\n  image.src = URL.createObjectURL(serialize(svg));\n  return promise;\n}\n\nexport default function(blob, filename) {\n  const url = URL.createObjectURL(blob);\n  const a = document.createElement(\"a\");\n  a.href = url;\n  a.download = filename || \"nCov-vis\";\n  a.click();\n}\n","import React, { useRef } from \"react\";\nimport styled from \"styled-components\";\nimport Card from \"./Card\";\nimport download, { serialize, rasterize } from \"../utils/download\";\n\n// 背景颜色必须要写成内联样式的形式\nconst WhiteSvg = styled.svg.attrs((props) => ({\n  style: {\n    background: \"white\",\n  },\n}))``;\n\nexport default function ({\n  style,\n  className,\n  id,\n  loading,\n  nodata,\n  show = true,\n  children,\n  introduction,\n  title,\n  slot,\n  ...rest\n}) {\n  const ref = useRef(null);\n  function onDownloadSvg() {\n    const blob = serialize(ref.current);\n    download(blob);\n  }\n\n  function onDownloadPng() {\n    rasterize(ref.current).then(download);\n  }\n\n  const cardProps = {\n    onDownloadPng,\n    onDownloadSvg,\n    id,\n    style,\n    className,\n    loading,\n    nodata,\n    show,\n    introduction,\n    title,\n    slot,\n  };\n\n  return (\n    <Card {...cardProps}>\n      <WhiteSvg ref={ref} {...rest} fontFamily=\"siyuan\">\n        {children}\n      </WhiteSvg>\n    </Card>\n  );\n}\n","import React, { useState, useEffect } from \"react\";\nimport Svg from \"./Svg\";\nimport * as d3 from \"d3\";\nimport formatDate from \"../utils/formatDate\";\nimport { Switch } from \"antd\";\nexport default function ({\n  loading,\n  keyframes,\n  selectedTime,\n  running,\n  color,\n  selectedName,\n  showWordsOfTopic,\n  hideWordsOfTopic,\n  selectedTopic,\n}) {\n  const width = 600,\n    height = 400,\n    margin = { top: 30, right: 35, bottom: 20, left: 40 };\n\n  if (keyframes === undefined) {\n    return (\n      <Svg\n        viewBox={[0, 0, width, height]}\n        loading={loading}\n        nodata={true}\n      ></Svg>\n    );\n  }\n\n  const [fullTitle, setFullTitle] = useState(false);\n  const slot = (\n    <>\n      <span>标题模式</span>\n      <Switch onChange={setFullTitle} checked={fullTitle} size=\"small\" />\n    </>\n  );\n  const n = 10;\n  const bisect = d3.bisector((d) => d[0]);\n  const y = d3\n    .scaleBand()\n    .domain(d3.range(n + 1))\n    .padding(0.1)\n    .range([margin.top, ((height - margin.bottom) / n) * (n + 1)]);\n  const barSize = y.bandwidth();\n  const bars = interpolate(keyframes, selectedTime);\n\n  const x = d3\n    .scaleLinear()\n    .domain([0, d3.max(bars, (d) => d.value)])\n    .range([margin.left, width - margin.right]);\n\n  const textWidth = (d, index) => {\n    const offset = index < 8 ? 0 : 90;\n    const full = fullTitle\n      ? x.range()[1] - x(0) - offset\n      : Math.max(x(d.value) - x(0) - 8, 0);\n    return full;\n  };\n\n  const names = bars.map((d) => d.name);\n  const id = (d) => `t-${d.value}`;\n  const colorScale = (name) =>\n    selectedTopic !== null && selectedTopic !== name ? \"#efefef\" : color(name);\n\n  const introduction = (\n    <div>\n      <h3>作用</h3>\n      <p>反映知乎热榜前10的话题的热度变化情况。</p>\n      <h3>说明</h3>\n      <p>目前只有 2020-02-27 之后的数据。前面的数据会尽快补上。</p>\n      <h3>交互</h3>\n      <ul>\n        <li>\n          <b>单击</b>任意热搜话题，旁边的词云会只展示当前话题下回答中的热词。\n        </li>\n        <li>\n          <b>鼠标移动到</b>任意热搜话题上面，会显示完整的标题。\n        </li>\n      </ul>\n    </div>\n  );\n\n  color.cur(names);\n\n  function interpolate(data, time) {\n    const i = bisect.left(data, time, 0, data.length - 1),\n      a = data[i];\n    if (!i || !running) return a[1].map((d) => ({ ...d, y: y(d.rank) }));\n    const b = data[i - 1],\n      t = (time - a[0]) / (b[0] - a[0]);\n\n    return a[1].map((d) => {\n      const { value, rank } = b[1].find(({ name }) => d.name === name) || {\n        value: d.value,\n        rank: n,\n      };\n      return {\n        ...d,\n        y: y(d.rank) * (1 - t) + y(rank) * t,\n        value: d.value * (1 - t) + value * t,\n      };\n    });\n  }\n\n  useEffect(() => {\n    // 保存上一帧的颜色\n    color.pre(names);\n\n    // 绘制坐标轴\n    const axis = d3\n      .axisTop(x)\n      .ticks(width / 160)\n      .tickSizeOuter(0)\n      .tickSizeInner(-barSize * (n + 1 + y.padding()));\n\n    const g = d3.select(\"#bar-axis\").call(axis);\n    g.select(\".tick:first-of-type text\").remove();\n    g.selectAll(\".tick:not(:first-of-type) line\").attr(\"stroke\", \"white\");\n    g.select(\".domain\").remove();\n  });\n\n  return (\n    <Svg\n      viewBox={[0, 0, width, height]}\n      loading={loading}\n      onClick={hideWordsOfTopic}\n      title=\"动态条形图\"\n      introduction={introduction}\n      slot={slot}\n    >\n      {bars.map((d) => (\n        <g\n          transform={`translate(${margin.left}, ${running ? d.y : y(d.rank)})`}\n          key={d.name}\n        >\n          <rect\n            width={fullTitle ? x.range()[1] - x(0) : x(d.value) - x(0)}\n            height={barSize}\n            fill={colorScale(d.name)}\n            cursor=\"pointer\"\n            fillOpacity={0.7}\n            onClick={(e) => {\n              showWordsOfTopic(d.name);\n              e.stopPropagation();\n            }}\n          >\n            <title>{d.name}</title>\n          </rect>\n        </g>\n      ))}\n      <g id=\"bar-axis\" transform={`translate(${0}, ${margin.top})`}></g>\n      {bars.map((d, index) => (\n        <g\n          transform={`translate(${margin.left}, ${running ? d.y : y(d.rank)})`}\n          key={d.name}\n        >\n          <text\n            dx=\"8\"\n            dy=\"1.1em\"\n            clipPath={`url(#${id(d)})`}\n            fontWeight=\"bold\"\n            fontSize=\"13\"\n            cursor=\"pointer\"\n            onClick={(e) => {\n              showWordsOfTopic(d.name);\n              e.stopPropagation();\n            }}\n          >\n            {d.name}\n            <title>{d.name}</title>\n          </text>\n          <text\n            dx=\"8\"\n            y={barSize}\n            dy=\"-0.33em\"\n            clipPath={`url(#${id(d)})`}\n            fontSize=\"10\"\n            fill=\"currentColor\"\n          >\n            {d.value | 0}\n          </text>\n          <defs>\n            <clipPath id={id(d)}>\n              <rect x=\"0\" y=\"0\" width={textWidth(d, index)} height={barSize} />\n            </clipPath>\n          </defs>\n        </g>\n      ))}\n      <g\n        transform={`translate(${width - margin.right - 5}, ${height - 50})`}\n        textAnchor=\"end\"\n        fill={fullTitle ? \"black\" : \"#777\"}\n      >\n        <text fontSize={35} fontWeight=\"bold\">\n          {selectedName}\n        </text>\n        <text fontSize={15} dy=\"1.5em\">\n          {formatDate(new Date(selectedTime))}\n        </text>\n      </g>\n    </Svg>\n  );\n}\n","import React, { useRef, useEffect } from \"react\";\nimport styled from \"styled-components\";\nimport Card from \"./Card\";\nimport download from \"../utils/download\";\n\nconst Canvas = styled.canvas`\n  width: 100%;\n  height: 100%;\n`;\n\nexport default function({\n  loading,\n  nodata,\n  style,\n  className,\n  id,\n  dependcies = [],\n  children,\n  width,\n  height,\n  filename = \"words\",\n  introduction,\n  title,\n  ...rest\n}) {\n  const ratio = 4;\n  function onDownload() {\n    const canvas = ref.current;\n    canvas.toBlob(blob => {\n      download(blob, filename);\n    });\n  }\n\n  const ref = useRef(null);\n\n  const cardProps = {\n    onDownload,\n    id,\n    style,\n    className,\n    loading,\n    nodata,\n    introduction,\n    title\n  };\n\n  const canvasProps = {\n    ref,\n    width: width * ratio,\n    height: height * ratio,\n    ...rest\n  };\n\n  useEffect(() => {\n    const canvas = ref.current;\n    const context = canvas.getContext(\"2d\");\n    context.restore();\n    context.save();\n    context.scale(ratio, ratio);\n    children && children(context);\n  }, dependcies);\n\n  return (\n    <Card {...cardProps}>\n      <Canvas {...canvasProps}></Canvas>\n    </Card>\n  );\n}\n","import React from \"react\";\nimport Canvas from \"./Canvas\";\nimport formatDate from \"../utils/formatDate\";\nimport * as d3 from \"d3\";\nexport default function ({\n  loading,\n  selectedTime,\n  keyframes,\n  running,\n  selectedName,\n  colorScale,\n  color,\n  selectedWords,\n  selectedTopic,\n}) {\n  const width = 900,\n    height = 600,\n    marginRight = 50,\n    marginBottom = 60;\n\n  if (keyframes === undefined || keyframes.length === 0)\n    return (\n      <Canvas\n        width={width}\n        height={height}\n        loading={loading}\n        dependcies={[selectedTime, draw]}\n        nodata={keyframes === undefined}\n      ></Canvas>\n    );\n\n  const interpolateAttrs = new Set([\"x\", \"y\", \"size\"]);\n\n  const initWord = (word) => ({\n    ...word,\n    size: 0,\n  });\n  const text = (d) => d.text;\n  const words =\n    selectedTopic === null ? interpolateData(selectedTime) : selectedWords;\n\n  const introduction = (\n    <div>\n      <h3>作用</h3>\n      <p>反映当前知乎热门话题下回答中的热词变化情况。</p>\n      <h3>说明</h3>\n      <p>目前只有 2020-02-27 之后的数据。前面的数据会尽快补上。</p>\n      <h3>交互</h3>\n      <p>无</p>\n    </div>\n  );\n\n  function interpolateData(time) {\n    const bisect = d3.bisector((d) => d[0]).left;\n    const i = bisect(keyframes, time, 0, keyframes.length - 1),\n      a = keyframes[i];\n    if (!i || !running || time > a[0]) return a[1];\n    const b = keyframes[i - 1],\n      t = d3.easeCircleInOut((time - a[0]) / (b[0] - a[0]));\n\n    // 找出消失的\n    const disappear = b[1]\n      .filter((word) => !a[1].find((d) => text(d) === text(word)))\n      .map(initWord);\n    const all = [...disappear, ...a[1]];\n    return all.map((word) => {\n      const pre = b[1].find((d) => text(d) === text(word)) || initWord(word);\n      return Object.keys(word).reduce((obj, key) => {\n        if (interpolateAttrs.has(key)) {\n          obj[key] = word[key] * (1 - t) + pre[key] * t;\n        } else {\n          obj[key] = word[key];\n        }\n        return obj;\n      }, {});\n    });\n  }\n\n  function drawLabel(context) {\n    context.save();\n    // region\n    context.translate(width - marginRight - 5, height - marginBottom - 10);\n    context.fillStyle = \"#777\";\n    context.textAlign = \"end\";\n    context.textBaseline = \"bottom\";\n    context.font = `bold 50px siyuan`;\n    context.fillText(selectedName, 0, 0);\n\n    // date\n    context.font = \"normal 25px 微软雅黑\";\n    context.fillText(formatDate(new Date(selectedTime)), 0, 35);\n\n    context.restore();\n  }\n\n  function drawText(context) {\n    context.save();\n    context.translate(width / 2, height / 2);\n    context.textAlign = \"center\";\n    for (let word of words) {\n      const fill = selectedTopic === null ? colorScale(text(word)) : color;\n      context.fillStyle = `${fill}`;\n      context.font = `${word.size}px siyuan`;\n      context.fillText(text(word), word.x, word.y);\n    }\n    context.restore();\n  }\n\n  function draw(context) {\n    context.fillStyle = \"white\";\n    context.fillRect(0, 0, width, height);\n    drawText(context);\n    drawLabel(context);\n  }\n\n  return (\n    <Canvas\n      width={width}\n      height={height}\n      dependcies={[selectedTime, draw]}\n      loading={loading}\n      nodata={words.length === 0}\n      title=\"动态词云\"\n      introduction={introduction}\n    >\n      {draw}\n    </Canvas>\n  );\n}\n","import React from \"react\";\n\nexport default function({ extent, pos, size, children }) {\n  const [x0, y0, width, height] = extent;\n  const [x, ofx] = pos;\n  const [contentW, contentH] = size;\n  const rightY = (y0 + height - contentH) / 2;\n  let rightX = x;\n  if (x + contentW + ofx > x0 + width) {\n    rightX -= contentW + ofx;\n  } else {\n    rightX += ofx;\n  }\n  return <>{children && children(rightX, rightY)}</>;\n}\n","import React, { useEffect, useMemo, useRef, useState } from \"react\";\nimport Svg from \"./Svg\";\nimport * as d3 from \"d3\";\nimport mouse from \"../utils/mouse\";\nimport Tooltip from \"./Tooltip\";\nexport default function ({\n  loading,\n  dataByDate,\n  selectedTime,\n  selectedType = \"confirm\",\n  selectedLevel = \"top\",\n  setSelectedTime,\n  focus,\n  setFocus,\n  running,\n  selectedCountries,\n  countries,\n}) {\n  const ref = useRef(null);\n  const width = 1200,\n    height = 350,\n    margin = { top: 75, right: 40, bottom: 25, left: 90 },\n    formatDate = d3.timeFormat(\"%x\"),\n    bisect = d3.bisector((d) => d.date).left;\n\n  const secondLevelSet = new Set([\n    \"华北地区\",\n    \"西北地区\",\n    \"东北地区\",\n    \"华东地区\",\n    \"华中地区\",\n    \"西南地区\",\n    \"华南地区\",\n    \"港澳台地区\",\n  ]);\n\n  const countriesSet = new Set(countries);\n\n  const [highlight, setHighlight] = useState(\"\"),\n    [tip, setTip] = useState(null);\n\n  const all = useMemo(\n      () =>\n        Array.from(dataByDate).map(([date, data]) => ({\n          date: new Date(date),\n          ...data\n            .filter(({ region }) => {\n              if (selectedLevel === \"top\") {\n                const s = new Set(selectedCountries);\n                return s.has(region);\n              } else if (selectedLevel === \"second\") {\n                return secondLevelSet.has(region);\n              } else {\n                return !countriesSet.has(region) && !secondLevelSet.has(region);\n              }\n            })\n            .reduce((obj, { region, data }) => ((obj[region] = data), obj), {}),\n        })),\n      [dataByDate, selectedLevel, selectedCountries.length]\n    ),\n    data = useMemo(\n      () =>\n        all\n          .map((d) =>\n            Object.keys(d).reduce((obj, key) => {\n              if (key === \"date\") {\n                obj[key] = d[key];\n              } else if (focus === \"\" || focus === key) {\n                obj[key] = d[key][selectedType];\n              }\n              return obj;\n            }, {})\n          )\n          .sort((a, b) => a.date - b.date),\n      [all, selectedType, focus]\n    ),\n    [first] = data,\n    keys = first ? Object.keys(first).filter((d) => d !== \"date\") : [],\n    cnt = 2,\n    tipCnt = selectedLevel === \"second\" ? 4 : 6,\n    legendWidth = selectedLevel === \"third\" ? 55 : 75,\n    legendHeight = 25,\n    disableColor = \"#efefef\",\n    tw = selectedLevel === \"second\" ? 100 : 70,\n    th = 20,\n    tipW = Math.max(tw * Math.ceil(keys.length / tipCnt), 100),\n    tipH = Math.min(keys.length, tipCnt) * th + 30;\n\n  const series = d3.stack().keys(keys)(data);\n\n  const x = d3\n    .scaleTime()\n    .domain(d3.extent(data, (d) => new Date(d.date)))\n    .range([0, width - margin.right - margin.left]);\n\n  const y = d3\n    .scaleLinear()\n    .domain([0, d3.max(series, (d) => d3.max(d, (d) => d[1]))])\n    .nice()\n    .range([height - margin.bottom - margin.top, 0]);\n\n  const legendX = (index) => ((index / cnt) | 0) * legendWidth;\n  const legendY = (index) => (index % cnt) * legendHeight;\n  const tipX = (index) => ((index / tipCnt) | 0) * tw;\n  const tipY = (index) => (index % tipCnt) * th;\n\n  const lineX = () => {\n    if (running) return x(new Date(selectedTime));\n    if (tip) return x(tip.time);\n    return x(new Date(0));\n  };\n\n  const area = d3\n    .area()\n    .x((d) => x(d.data.date))\n    .y0((d) => y(d[0]))\n    .y1((d) => y(d[1]));\n\n  const colorScale =\n    keys.length === 1\n      ? () => \"#61d4b3\"\n      : d3\n          .scaleOrdinal()\n          .domain(keys)\n          .range(d3.quantize(d3.interpolateSpectral, keys.length).reverse());\n\n  const color = (key) =>\n    highlight === \"\" || key === highlight ? colorScale(key) : disableColor;\n\n  const stroke = (key) =>\n    selectedLevel === \"top\" ? d3.color(color(key)).darker() : \"none\";\n\n  const id = (key) => `a-${key}`;\n\n  const introduction = (\n    <div>\n      <h3>作用</h3>\n      <p>反映各个地区每天确诊、治愈或死亡的总人数随着时间的变化。</p>\n      <h3>说明</h3>\n      <p>如果某个地区的数据长时间没有变化，可能是因为数据缺失。</p>\n      <h3>交互</h3>\n      <ul>\n        <li>\n          <b>鼠标移动到</b>某个地区的名字上，会高亮该地区所对应的“带子”.\n          <b>鼠标移出后</b>会取消高亮。\n        </li>\n        <li>\n          <b>单击</b>某个地区的名字，进入该地区所对应的<b>普通面积图</b>。\n          <b>双击</b>空白部分返回。\n        </li>\n      </ul>\n    </div>\n  );\n\n  function handleChangeSelectedTime(e) {\n    const [mouseX] = mouse(e, ref.current);\n    const time = x.invert(mouseX).getTime();\n    setSelectedTime(time);\n  }\n\n  function handleChangeTip(e) {\n    const [mouseX, mouseY] = mouse(e, ref.current);\n    const time = x.invert(mouseX).getTime();\n    const i = bisect(data, new Date(time), 0, data.length - 1),\n      a = data[i];\n    setTip({ ...a, time, x: mouseX, y: mouseY });\n  }\n\n  function noData() {\n    return series.length === 0;\n  }\n\n  useEffect(() => {\n    const xAxis = d3.axisBottom(x);\n    const yAxis = (g) =>\n      g.call(d3.axisLeft(y)).call((g) => g.select(\".domain\").remove());\n    d3.select(\".area-xAxis\").call(xAxis);\n    d3.select(\".area-yAxis\").call(yAxis);\n  }, [data]);\n\n  return (\n    <>\n      {noData(data) ? (\n        <Svg\n          viewBox={[0, 0, width, height]}\n          loading={loading}\n          nodata={true}\n        ></Svg>\n      ) : (\n        <Svg\n          viewBox={[0, 0, width, height]}\n          loading={loading}\n          onDoubleClick={() => setFocus(\"\")}\n          onMouseLeave={() => setHighlight(\"\")}\n          introduction={introduction}\n          title=\"堆叠面积图\"\n        >\n          <g\n            cursor=\"pointer\"\n            ref={ref}\n            transform={`translate(${margin.left}, ${margin.top})`}\n            onMouseLeave={() => setTip(null)}\n          >\n            <g\n              onMouseMove={handleChangeTip}\n              onClick={handleChangeSelectedTime}\n              onMouseOver={() => highlight !== \"\" && setHighlight(\"\")}\n            >\n              {series.map((s) => (\n                <path\n                  key={s.key}\n                  fill={color(s.key)}\n                  d={area(s)}\n                  stroke={stroke(s.key)}\n                  strokeWidth={2}\n                  strokeLinecap=\"round\"\n                />\n              ))}\n            </g>\n            <line\n              x1={lineX()}\n              y1={0}\n              x2={lineX()}\n              y2={height - margin.bottom - margin.top}\n              stroke=\"currentColor\"\n            />\n            <g transform={`translate(${10},${-legendHeight * cnt + 10})`}>\n              <rect\n                onMouseLeave={() => setHighlight(\"\")}\n                x={-10}\n                y={-10}\n                fill=\"transparent\"\n                width={legendWidth * Math.ceil(keys.length / cnt)}\n                height={Math.min(keys.length, cnt) * legendHeight}\n              ></rect>\n              {keys.map((key, index) => (\n                <g\n                  key={key}\n                  transform={`translate(${legendX(index)}, ${legendY(index)})`}\n                  onMouseEnter={() => setHighlight(key)}\n                  onClick={(e) => {\n                    setFocus(key);\n                    setHighlight(\"\");\n                    e.stopPropagation();\n                  }}\n                >\n                  <circle fill={color(key)} cx={0} cy={0} r={5}></circle>\n                  <text\n                    dy={5}\n                    dx={10}\n                    fill=\"currentColor\"\n                    fontSize=\"12\"\n                    clipPath={`url(#${id(key)})`}\n                  >\n                    {key}\n                    <title>{key}</title>\n                  </text>\n                  <defs>\n                    <clipPath id={id(key)}>\n                      <rect\n                        x={0}\n                        y={-legendHeight / 2}\n                        width={legendWidth - 5}\n                        height={legendHeight}\n                      />\n                    </clipPath>\n                  </defs>\n                </g>\n              ))}\n            </g>\n            {tip && (\n              <Tooltip\n                extent={[\n                  0,\n                  0,\n                  width - margin.left - margin.right,\n                  height - margin.top - margin.bottom,\n                ]}\n                size={[tipW, tipH]}\n                pos={[tip.x, 10]}\n              >\n                {(x, y) => (\n                  <g transform={`translate(${x}, ${y})`}>\n                    <rect\n                      width={tipW}\n                      height={tipH}\n                      rx={10}\n                      ry={10}\n                      fill=\"white\"\n                      stroke=\"currentColor\"\n                    ></rect>\n                    <text dx={10} dy={20}>\n                      {formatDate(tip.date)}\n                    </text>\n                    <g transform={`translate(10, 40)`}>\n                      {Object.keys(tip)\n                        .filter(\n                          (d) =>\n                            d !== \"time\" &&\n                            d !== \"x\" &&\n                            d !== \"y\" &&\n                            d !== \"date\"\n                        )\n                        .sort((a, b) => tip[b] - tip[a])\n                        .map((key, index) => (\n                          <text\n                            fontSize=\"10\"\n                            key={key}\n                            x={tipX(index)}\n                            y={tipY(index)}\n                          >{`${key}: ${tip[key]}`}</text>\n                        ))}\n                    </g>\n                  </g>\n                )}\n              </Tooltip>\n            )}\n          </g>\n          <g\n            className=\"area-xAxis\"\n            transform={`translate(${margin.left}, ${height - margin.bottom})`}\n          />\n          <g\n            className=\"area-yAxis\"\n            transform={`translate(${margin.left}, ${margin.top})`}\n          />\n        </Svg>\n      )}\n    </>\n  );\n}\n","import React, { useEffect, useRef, useState } from \"react\";\nimport useAnimation from \"../hook/useAnimation\";\nimport styled from \"styled-components\";\nimport { connect } from \"dva\";\nimport { Row, Col, Select, message } from \"antd\";\n\nimport Timeline from \"./Timeline\";\nimport BarRace from \"../components/BarRace\";\nimport StoryTelling from \"../components/StoryTelling\";\nimport Areachart from \"../components/Areachart\";\nimport mc from \"../utils/memorizedColor\";\nimport rc from \"../utils/randomColor\";\nimport * as d3 from \"d3\";\n\nimport newsImage from \"../assets/images/hots.jpg\";\n\nconst { Option } = Select;\nmessage.config({\n  maxCount: 1,\n});\n\nconst Container = styled.div`\n  position: relative;\n  margin-bottom: 4em;\n`;\n\nconst An = styled.div`\n  position: absolute;\n  top: -56px;\n`;\n\nconst Control = styled.div`\n  display: flex;\n  margin: 0.5em 0 1em 0;\n\n  @media (max-width: 700px) {\n    flex-direction: column;\n  }\n`;\n\nconst NewsImage = styled.img`\n  width: 370px;\n  border-radius: 8px;\n`;\n\nconst Intro = styled.div`\n  width: 60%;\n  & ul {\n    padding-left: 2em;\n  }\n  @media (max-width: 768px) {\n    width: 100%;\n  }\n`;\n\nconst MyRow = styled.div`\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  width: 100%;\n  margin-bottom: 2em;\n\n  @media (max-width: 768px) {\n    flex-direction: column;\n  }\n`;\n\nfunction HotsPanel({\n  dataByName,\n  dataByDate,\n  dataByRegion,\n  getData,\n  loadingHots,\n  loadingNcov,\n  timeByName,\n  getTime,\n  selectedTime,\n  setSelectedTime,\n  updateDataByTime,\n  getWords,\n  selectedWords,\n  setSelectedWords,\n  wordsByTime,\n  countries,\n  selectedCountries,\n  setSelectedCountries,\n  getCountryData,\n  dateRange: totalTimeRange,\n  total,\n  widthData,\n}) {\n  const levels = [\n      { name: \"国家\", key: \"top\" },\n      { name: \"分区\", key: \"second\" },\n      { name: \"省份\", key: \"third\" },\n    ],\n    types = [\n      { name: \"确诊\", key: \"confirmed\" },\n      { name: \"治愈\", key: \"cured\" },\n      { name: \"死亡\", key: \"dead\" },\n    ];\n\n  const [focus, setFocus] = useState(\"\");\n  const [running, setRunning] = useState(false); // 用户是否点击播放\n  const [pause, setPause] = useState(false); // 是否应为 loading data 而暂停\n  const [selectedLevel, setSelectedLevel] = useState(\"top\");\n  const [selectedType, setSelectedType] = useState(\"confirmed\");\n  const [selectedTopic, setSelectedTopic] = useState(null);\n  const { requestAnimation, pauseAnimation, setFrame } = useAnimation(step);\n\n  const barColor = useRef(\n    mc([...d3.schemeTableau10, \"#634294\", \"#d54087\"], 10)\n  );\n  const wordColor = useRef(rc(d3.schemeTableau10));\n\n  const selectedName = \"zhihu\";\n  const namevalues = dataByName.get(selectedName);\n  const { listKeyframes, cloudsKeyframes } = namevalues || {};\n\n  const hotTimeRange = timeByName.get(selectedName);\n  const hour = 12,\n    ticks = d3.timeHour\n      .every(hour) // 每隔 12 小时获取一下数据\n      .range(totalTimeRange[0], totalTimeRange[1])\n      .map((d) => d.getTime()),\n    totalDuration = ticks.length * 5000,\n    interpolateInterval = hour * 60 * 60 * 50; // 1小时 0.75秒\n\n  const timeScale = d3\n      .scaleLinear()\n      .domain([0, totalDuration])\n      .range(totalTimeRange || [0, 0]),\n    duration = timeScale.invert(selectedTime);\n\n  const barsProps = {\n    width: 600,\n    height: 400,\n    keyframes: listKeyframes,\n    selectedTime,\n    color: barColor.current,\n    running,\n    loading: loadingHots,\n    selectedName: \"知乎\",\n    showWordsOfTopic,\n    hideWordsOfTopic: () => setSelectedTopic(null),\n    selectedTopic,\n    interpolateInterval,\n  };\n\n  const storyProps = {\n    width: 600,\n    height: 400,\n    keyframes: cloudsKeyframes,\n    selectedWords,\n    selectedTopic,\n    selectedTime,\n    color: barColor.current(selectedTopic),\n    colorScale: wordColor.current,\n    loading: loadingHots,\n    running: running || pause,\n    selectedName: \"知乎\",\n  };\n\n  const timeProps = {\n    selectedTime,\n    running,\n    toggleAnimation,\n    changeValue,\n    range: totalTimeRange || [0, 0],\n    finish: duration >= totalDuration,\n    totalDuration,\n    duration,\n  };\n\n  const areaPros = {\n    loading: loadingNcov,\n    dataByDate,\n    selectedTime,\n    setSelectedTime,\n    selectedType,\n    selectedLevel,\n    focus,\n    setFocus,\n    running,\n    selectedCountries,\n    countries\n  };\n\n  if (running && loadingHots && !pause) {\n    stopAnimation();\n    setPause(true);\n  }\n\n  if (pause && !loadingHots && !running) {\n    startAnimation();\n    setPause(false);\n  }\n\n  function step(duration) {\n    // 不能超过最大的时间\n    const t = Math.min(timeScale(duration), totalTimeRange[1]);\n    setSelectedTime(t);\n    if (duration > totalDuration) {\n      setRunning(false);\n      return false;\n    }\n  }\n\n  function startAnimation() {\n    if (running) return;\n    if (selectedTopic !== null) setSelectedTopic(null);\n    setRunning(true);\n    if (duration >= totalDuration) {\n      const start = totalTimeRange[0],\n        startDuartion = timeScale.invert(start);\n      requestAnimation(startDuartion);\n    } else {\n      requestAnimation(duration);\n    }\n  }\n\n  function stopAnimation() {\n    if (!running) return;\n    setRunning(false);\n    setSelectedTime(selectedTime + 1); // 防止出现过渡效果\n    pauseAnimation();\n  }\n\n  function toggleAnimation() {\n    if (running) stopAnimation();\n    else startAnimation();\n  }\n\n  function changeValue(value) {\n    if (!hotTimeRange) return;\n    const start = totalTimeRange[0],\n      end = hotTimeRange[hotTimeRange.length - 1].time;\n    if (value < start || value > end) message.error(\"该时间段暂时没有数据!!!\");\n    const validValue = Math.max(start, Math.min(value, end));\n    setFrame(timeScale.invert(validValue));\n    setSelectedTime(validValue);\n  }\n\n  function showWordsOfTopic(title) {\n    setSelectedTopic(title);\n    stopAnimation();\n    const i = search(selectedTime),\n      time = hotTimeRange[i].time / 1000,\n      words = wordsByTime.get(time);\n    if (words) {\n      const sw = words.find((d) => d.title === title);\n      const w = sw ? sw.keywords : [];\n      setSelectedWords(w);\n    } else getWords(selectedName, time, title);\n  }\n\n  function handleCountryDataChange(keys) {\n    if (keys.length >= 30) {\n      alert(\"不能超过 30 个国家\");\n      return;\n    }\n    const newKeys = [];\n    for (let k of keys) {\n      if (widthData.has(k)) newKeys.push(k);\n      else getCountryData(k, dataByDate, dataByRegion, total, \"hots\");\n    }\n    setSelectedCountries(\"hots\", newKeys);\n  }\n\n  function search(time) {\n    const bisect = d3.bisector((d) => d.time);\n    const i = bisect.left(hotTimeRange, time);\n    return Math.max(0, i - 1);\n  }\n\n  function requestData(index) {\n    // 一直向后找，找到没有请求的地方\n    const limit = 10;\n    let i = 1;\n    for (i = 1; i < limit && index + i < hotTimeRange.length - 1; i++) {\n      const tick = hotTimeRange[index + i];\n      if (tick.request) break;\n    }\n\n    updateDataByTime({\n      name: selectedName,\n      from: index,\n      to: index + i,\n    });\n\n    getData({\n      name: selectedName,\n      tick: hotTimeRange[index],\n      start: hotTimeRange[0].time,\n      limit: i,\n      interval: interpolateInterval,\n    });\n  }\n\n  useEffect(() => {\n    // 获得时间范围\n    if (!hotTimeRange) {\n      getTime(selectedName);\n      return;\n    }\n\n    const index = search(selectedTime),\n      tick = hotTimeRange[index];\n    if (tick.request) return;\n    requestData(index);\n  }, [getData, getTime, selectedName, hotTimeRange, selectedTime]);\n\n  return (\n    <Container>\n      <An id=\"hots\" />\n      <h1>人们都在讨论些什么？</h1>\n      <MyRow>\n        <Intro>\n          <p>这里是和舆论相关的可视化，用来探索全国人们在讨论什么？</p>\n          <p>\n            首先上面是一个动态的<b>条形图</b>和<b>词云</b>，分别反映的是：\n            <b>知乎热榜前10的话题的热度变化情况</b>和\n            <b>当前热门话题下回答中的热词变化情况</b>\n            。点击播放按钮动画开始播放动画，在\n            <b>条形图中</b>\n            将鼠标移动到任意一条热门话题上会显示完整的话题；点击任意一条热门话题，在\n            <b>词云</b>\n            显示这一条热门话题对应回答的热词。\n          </p>\n          <p>\n            当你发现了一些有趣的话题，并且想找寻它们和疫情的关系的时候，就可以使用下面的\n            <b>堆叠面积图</b>\n            ，该图反映的是：\n            <b>各个地区每天确诊、治愈或死亡的总人数随着时间的变化</b>。\n          </p>\n          <p>\n            <b>堆叠面积图中</b>\n            ，其中每一种颜色的“带子”代表一个地区，该“带子”越宽，表示该地区当天相应类别（确诊、治愈或者死亡）总人数越大。在这里你不仅能看各个省份（湖北省、山东省等）和各个直辖市（北京市、上海市）的相应类别总人数的变化情况，还可以通过\n            <b>级别下拉框</b>\n            来选择不同的级别，从而查看各个分区（华中地区、华南地区等），甚至全国相应类别总人数的变化情况。\n          </p>\n          <p>\n            在<b>堆叠面积图</b>中，如果你对某个地区特别感兴趣，可以<b>单击</b>\n            该地区的名字，进入只显示该地区情况的<b>普通面积图</b>。并且可以通过\n            <b>双击空白</b>部分返回。\n          </p>\n        </Intro>\n        <NewsImage src={newsImage} />\n      </MyRow>\n      <Row gutter={[16, 16]}>\n        <Col span={24} md={12}>\n          <BarRace {...barsProps} />\n        </Col>\n        <Col span={24} md={12}>\n          <StoryTelling {...storyProps} />\n        </Col>\n      </Row>\n      <Row>\n        <Col span={24}>\n          <Timeline {...timeProps} />\n        </Col>\n      </Row>\n      <Row gutter={[16, 16]}>\n        <Col span={24}>\n          <Control>\n            <div>\n              <span>\n                <b>级别</b>\n              </span>\n              &ensp;\n              <Select\n                value={selectedLevel}\n                onChange={(value) => {\n                  setSelectedLevel(value);\n                  setFocus(\"\");\n                }}\n              >\n                {levels.map((d) => (\n                  <Option key={d.key}>{d.name}</Option>\n                ))}\n              </Select>\n              &ensp;&ensp;\n              <span>\n                <b>种类</b>\n              </span>\n              &ensp;\n              <Select\n                value={selectedType}\n                onChange={(value) => setSelectedType(value)}\n              >\n                {types.map((d) => (\n                  <Option key={d.key}>{d.name}</Option>\n                ))}\n              </Select>\n              {selectedLevel === \"top\" && (\n                <>\n                  &ensp;&ensp;\n                  <span>\n                    <b>查看的国家</b>\n                  </span>\n                  &ensp;\n                  <Select\n                    mode=\"tags\"\n                    value={selectedCountries}\n                    onChange={handleCountryDataChange}\n                    style={{\n                      minWidth: 200,\n                    }}\n                  >\n                    {countries.map((d) => (\n                      <Option key={d}>{d}</Option>\n                    ))}\n                  </Select>\n                </>\n              )}\n            </div>\n          </Control>\n          <Areachart {...areaPros} />\n        </Col>\n      </Row>\n    </Container>\n  );\n}\n\nexport default connect(\n  ({ hots, loading, ncov }) => ({\n    ...hots,\n    loadingHots: loading.models.hots,\n    loadingNcov: loading.models.ncov,\n    dataByDate: ncov.dataByDate,\n    dataByRegion: ncov.dataByRegion,\n    dateRange: ncov.range,\n    widthData: ncov.widthData,\n    total: ncov.total,\n    selectedCountries: ncov.selectedCountries.hots,\n    selectedTime: ncov.selectedTime,\n    countries: ncov.countries,\n  }),\n  {\n    getCountryData: (country, dataByDate, dataByRegion, total, name) => ({\n      type: \"ncov/getCountryData\",\n      payload: { country, dataByDate, dataByRegion, total, name },\n    }),\n    setSelectedCountries: (name, keys) => ({\n      type: \"ncov/setSelectedCountries\",\n      payload: {\n        keys,\n        name,\n      },\n    }),\n    setSelectedTime: (time) => ({\n      type: \"ncov/setSelectedTime\",\n      payload: time,\n    }),\n    setSelectedWords: (words) => ({\n      type: \"hots/setSelectedWords\",\n      payload: words,\n    }),\n    getWords: (name, time, title) => ({\n      type: \"hots/getWords\",\n      payload: {\n        name,\n        time,\n        title,\n      },\n    }),\n    getData: (options) => ({\n      type: \"hots/getData\",\n      payload: options,\n    }),\n    setSelectedName: (name) => ({\n      type: \"hots/setSelectedName\",\n      payload: name,\n    }),\n    getTime: (name) => ({ type: \"hots/getTime\", payload: { name } }),\n    updateDataByTime: (options) => ({\n      type: \"hots/updateDataByTime\",\n      payload: options,\n    }),\n  }\n)(HotsPanel);\n","import { useRef } from \"react\";\nexport default function(cb, frameRate = 60) {\n  const timer = useRef();\n  const duration = useRef(0);\n  const pre = useRef();\n\n  const requestAnimation = start => {\n    start && (duration.current = start);\n    timer.current = setInterval(step, 1000 / frameRate);\n  };\n\n  const cancelAnimation = () => {\n    pre.current = undefined;\n    duration.current = 0;\n    clearInterval(timer.current);\n  };\n\n  const setFrame = time => {\n    duration.current = time;\n  };\n\n  const pauseAnimation = () => {\n    pre.current = undefined;\n    clearInterval(timer.current);\n  };\n\n  function step() {\n    const time = new Date().getTime();\n    if (pre.current === undefined) pre.current = time;\n    duration.current += time - pre.current;\n    pre.current = time;\n    const end = cb(duration.current);\n\n    if (end === false) {\n      cancelAnimation();\n      return;\n    }\n  }\n\n  return {\n    requestAnimation,\n    pauseAnimation,\n    setFrame\n  };\n}\n","export default function(domain) {\n  const colorByKey = new Map();\n  let pre = [],\n    cur = [];\n\n  color.pre = function(_) {\n    return arguments.length ? ((pre = _), color) : pre;\n  };\n\n  color.cur = function(_) {\n    return arguments.length ? ((cur = _), color) : cur;\n  };\n\n  function color(key) {\n    const c = colorByKey.get(key);\n    if (c) return c;\n    const [rc] = domain.splice(0, 1);\n    colorByKey.set(key, rc);\n    if (!domain.length) {\n      // 找到一个之前没有且有对应颜色的 key\n      // 因为在调用 pre 方法之前，之前没有的颜色可能已经被删除过了\n      const dk = pre.find(\n        pk => !cur.find(ck => ck === pk) && colorByKey.get(pk)\n      );\n      const dc = colorByKey.get(dk);\n      domain.push(dc);\n      colorByKey.delete(dk);\n    }\n    return rc;\n  }\n  return color;\n}\n","export default function(colors) {\n  const colorByKey = new Map();\n  function color(key) {\n    const c = colorByKey.get(key);\n    if (c) return c;\n    const i = (Math.random() * colors.length) | 0,\n      newColor = colors[i];\n    colorByKey.set(key, newColor);\n    return newColor;\n  }\n  return color;\n}\n","import React, { useState, useRef } from \"react\";\nimport Canvas from \"./Canvas\";\nimport fontURL from \"../assets/fonts/思源柔黑.ttf\";\n\nfunction Shape({ data, loading, selectedDate, selectedRegion }) {\n  const width = 900,\n    height = 600,\n    marginRight = 50,\n    marginBottom = 60,\n    { keywords, fillingWords } = data || {};\n\n  // 在 edge 没有 FontFace 对象\n  const font =\n    typeof FontFace === \"undefined\"\n      ? null\n      : new FontFace(\"siyuan\", `url(${fontURL})`);\n  const fontRef = useRef(font);\n  const [loadFont, setLoadingFont] = useState(font === null ? false : true);\n\n  function drawText(context, words, { fillStyle, textAlign, textBaseline }) {\n    context.textAlign = textAlign;\n    context.textBaseline = textBaseline;\n    context.fillStyle = fillStyle;\n    for (let word of words) {\n      const { name, transX, transY, rotate, fontSize, fillX, fillY } = word;\n      context.save();\n      context.font = `${fontSize}px siyuan`;\n      context.translate(transX, transY);\n      context.rotate(rotate);\n      context.fillText(name, fillX, fillY);\n      context.restore();\n    }\n  }\n\n  function drawLabel(context) {\n    context.save();\n    // region\n    context.translate(width - marginRight, height - marginBottom);\n    context.fillStyle = \"#777\";\n    context.textAlign = \"end\";\n    context.textBaseline = \"bottom\";\n    context.font = `bold 50px siyuan`;\n    context.fillText(selectedRegion, 0, 0);\n\n    context.font = \"normal 25px siyuan\";\n    context.fillText(selectedDate, 0, 35);\n    // date\n    context.restore();\n  }\n\n  async function draw(context) {\n    try {\n      if (!keywords || !fillingWords) return;\n\n      // 加载字体\n      if (fontRef.current !== null && fontRef.current.status === \"unloaded\") {\n        await fontRef.current.load();\n        document.fonts.add(fontRef.current);\n        setLoadingFont(false);\n      }\n\n      // 绘制背景\n      context.fillStyle = \"white\";\n      context.fillRect(0, 0, width, height);\n\n      // 绘制地区和时间信息\n      drawLabel(context);\n\n      // 绘制词云\n      drawText(context, keywords, {\n        fillStyle: \"#59569d\",\n        textAlign: \"center\",\n        textBaseline: \"alphabet\"\n      });\n\n      drawText(context, fillingWords, {\n        fillStyle: \"#f25292\",\n        textAlign: \"start\",\n        textBaseline: \"middle\"\n      });\n    } catch (e) {\n      console.error(e);\n      setLoadingFont(false);\n    }\n  }\n\n  const introduction = (\n    <div>\n      <h3>作用</h3>\n      <p>展示该地区和该日期新闻报道中的关键字。</p>\n      <h3>说明</h3>\n      <p>目前只有省份和直辖市的数据，同时数据可能出现缺失的情况。</p>\n      <h3>交互</h3>\n      <p>无</p>\n    </div>\n  );\n\n  return (\n    <Canvas\n      width={width}\n      height={height}\n      loading={loadFont || loading}\n      nodata={data === undefined}\n      dependcies={[data]}\n      introduction={introduction}\n      title=\"Shapewordle\"\n    >\n      {draw}\n    </Canvas>\n  );\n}\n\nexport default Shape;\n","import React from \"react\";\nimport Svg from \"./Svg\";\nimport * as d3 from \"d3\";\nexport default function ({ loading, selectedRegion, selectedDate, data = [] }) {\n  const width = 600,\n    height = 400,\n    margin = { top: 50, right: 35, bottom: 40, left: 40 },\n    legendHeight = 25,\n    outerRadius =\n      Math.min(\n        width - margin.left - margin.right,\n        height - margin.top - margin.bottom\n      ) /\n        2 -\n      1;\n\n  const arc = d3.arc().innerRadius(0).outerRadius(outerRadius);\n\n  data.sort((a, b) => b.count - a.count);\n\n  const names = data.map((d) => d.name);\n  const pie = d3\n    .pie()\n    .sort(null)\n    .value((d) => d.count);\n\n  const color =\n    data.length === 1\n      ? () => \"#61d4b3\"\n      : d3\n          .scaleOrdinal()\n          .domain(names)\n          .range(\n            d3\n              .quantize(\n                (t) => d3.interpolateSpectral(t * 0.8 + 0.1),\n                data.length\n              )\n              .reverse()\n          );\n\n  const text = (d) =>\n    ((((d.endAngle - d.startAngle) / Math.PI) * 50) | 0) + \"%\";\n\n  const angle = (a) => (180 * (a.startAngle + a.endAngle)) / (2 * Math.PI) - 90;\n  const arcs = pie(data);\n  const introduction = (\n    <div>\n      <h3>作用</h3>\n      <p>展示该地区，该日期不同种类的新闻报道数量的占比。</p>\n      <h3>说明</h3>\n      <p>目前只有省份和直辖市的数据，同时数据可能出现缺失的情况。</p>\n      <h3>交互</h3>\n      <p>无</p>\n    </div>\n  );\n\n  return (\n    <Svg\n      viewBox={[0, 0, width, height]}\n      loading={loading}\n      nodata={data.length === 0}\n      introduction={introduction}\n      title=\"饼状图\"\n    >\n      {data.length && (\n        <g\n          transform={`translate(${width - margin.right}, ${\n            height - margin.bottom\n          })`}\n          textAnchor=\"end\"\n          fill=\"#777\"\n        >\n          <text fontSize={35} fontWeight=\"bold\">\n            {selectedRegion}\n          </text>\n          <text fontSize={15} dy=\"1.5em\">\n            {selectedDate}\n          </text>\n        </g>\n      )}\n      <g transform={`translate(${margin.left}, ${margin.top})`}>\n        {names.map((d, index) => (\n          <g key={d} transform={`translate(${0}, ${legendHeight * index})`}>\n            <circle fill={color(d)} r={5}></circle>\n            <text fill=\"currentColor\" dx={10} dy=\"0.31em\">\n              {d}\n            </text>\n          </g>\n        ))}\n      </g>\n      <g transform={`translate(${width / 2 + 30}, ${height / 2})`}>\n        {arcs.map((a) => (\n          <path key={a.data.name} d={arc(a)} fill={color(a.data.name)} />\n        ))}\n        {arcs.map((a) => (\n          <g\n            key={a.data.name}\n            transform={`rotate(${angle(a)}) translate(${outerRadius - 20})`}\n            textAnchor=\"middle\"\n          >\n            <text\n              fill=\"currentColor\"\n              fontSize={11}\n              transform={`rotate(${-angle(a)})`}\n            >\n              {text(a)}\n            </text>\n          </g>\n        ))}\n      </g>\n    </Svg>\n  );\n}\n","import React, { useState, useEffect, useRef } from \"react\";\nimport Svg from \"./Svg\";\nimport * as d3All from \"d3\";\nimport * as d3Array from \"d3-array\";\nimport mouse from \"../utils/mouse\";\nimport regionsData from \"../assets/data/region_options.json\";\n\nconst d3 = {\n  ...d3All,\n  ...d3Array,\n};\n\nexport default function ({\n  dataByRegion,\n  selectedRegion,\n  selectedDate,\n  setSelectedDate,\n  setSelectedRegion,\n  selectedType,\n  loading,\n  show,\n  setShow,\n  width,\n  height,\n  colors,\n  all,\n  highlightColor,\n  normalColor,\n  highlightRectColor,\n  disabledColor,\n  legendWidth,\n  legendHeight,\n  treeData,\n  setTreeData,\n  handleChangeRange,\n}) {\n  if (!dataByRegion.size || !treeData.children)\n    return (\n      <Svg\n        viewBox={[0, 0, width, height]}\n        loading={loading}\n        nodata={true}\n        show={show}\n      ></Svg>\n    );\n\n  const [highlight, setHighlight] = useState([]);\n  const [drag, setDrag] = useState({\n    start: null,\n    move: 0,\n  });\n  const [hover, setHover] = useState(false);\n  const sliderRef = useRef(null);\n  treeData.eachAfter((node) => {\n    node.visableH =\n      node.children && !node.hideChildren\n        ? d3.max(node.children, (d) => d.visableH) + 1\n        : 0;\n  });\n  const descendants = treeData.descendants(),\n    visableRegions = new Set(\n      descendants\n        .filter((d) => !d.hide && (!d.children || d.hideChildren))\n        .map((d) => d.data.title)\n    ),\n    layers = d3\n      .groups(descendants, (d) => d.depth)\n      .filter(\n        ([depth, data]) =>\n          depth !== treeData.height && depth !== 0 && data.every((d) => !d.hide)\n      ),\n    th = treeData.visableH;\n\n  const data = all\n      .map((d) => ({\n        date: d.date,\n        region: d.region,\n        value: d[selectedType],\n      }))\n      .filter(({ value }) => !isNaN(value) && value !== \"\")\n      .filter((d) => visableRegions.has(d.region)),\n    days = Array.from(new Set(data.map((d) => d.date)));\n\n  const hset = new Set(highlight.map((d) => d.data.title));\n  const colorData = highlight.length\n    ? data.filter((d) => hset.has(d.region))\n    : data;\n\n  const margin = { top: 55, right: 30, bottom: 60, left: 60 },\n    chartPadding = 75,\n    nodeWidth = 75,\n    buttonSize = 15,\n    axisPadding = 5,\n    formatDate = d3.timeFormat(\"%x\"),\n    labels = [\n      \"Jan\",\n      \"Feb\",\n      \"Mar\",\n      \"Apr\",\n      \"May\",\n      \"June\",\n      \"July\",\n      \"Aug\",\n      \"Sept\",\n      \"Oct\",\n      \"Nov\",\n      \"Dec\",\n    ],\n    treeW = nodeWidth * th,\n    treeH = height - margin.top - margin.bottom - axisPadding,\n    matrixWidth = width - margin.left - margin.right - chartPadding - treeW;\n\n  const tree = d3\n      .tree()\n      .size([treeH, treeData.height * nodeWidth])\n      .separation((a, b) => (a.parent === b.parent ? 1 : 1.5)),\n    root = tree(treeData),\n    allLeaves = root.leaves(),\n    cellHeight =\n      allLeaves.length === 1\n        ? allLeaves[0].x\n        : d3\n            .pairs(allLeaves)\n            .reduce(\n              (total, [a, b]) => Math.min(total, Math.abs(a.x - b.x)),\n              Infinity\n            ),\n    cellWidth = Math.max(matrixWidth / days.length, 12.5),\n    nodeByTitle = d3.rollup(\n      root.descendants(),\n      ([d]) => d,\n      (d) => d.data.title\n    );\n\n  const x = d3\n    .scaleBand()\n    .domain(days)\n    .range([0, cellWidth * days.length]);\n\n  const y = (title) => {\n    const node = nodeByTitle.get(title);\n    if (!node.children) return node.x;\n    let x0 = Infinity;\n    node.each((d) => {\n      if (d.x < x0) x0 = d.x;\n    });\n    return x0;\n  };\n\n  const h = (title) => {\n    const node = nodeByTitle.get(title);\n    if (!node.children) return cellHeight;\n    let x0 = Infinity;\n    let x1 = -x0;\n    node.each((d) => {\n      if (d.x > x1) x1 = d.x;\n      if (d.x < x0) x0 = d.x;\n    });\n    return x1 - x0 + cellHeight;\n  };\n\n  const colorScale = d3.scaleSequential(colors[selectedType]).domain(\n    d3.extent(\n      colorData.filter((d) => d.region !== \"湖北\" && d.region !== \"华中地区\"),\n      (d) => d.value\n    )\n  );\n\n  const specialColorScale = d3\n    .scaleSqrt()\n    .interpolate(() => colors.special)\n    .domain(\n      d3.extent(\n        colorData.filter((d) => d.region === \"湖北\" || d.region === \"华中地区\"),\n        (d) => d.value\n      )\n    );\n\n  const color = (node) => {\n    if (highlight.length && !hset.has(node.region)) return disabledColor;\n    if (node.region === \"湖北\" || node.region === \"华中地区\")\n      return specialColorScale(node.value);\n    return colorScale(node.value);\n  };\n\n  const pathLink = d3\n    .linkHorizontal()\n    .x((d) => d.y)\n    .y((d) => d.x);\n\n  const stroke = d3\n    .scaleSequential(colors[selectedType])\n    .domain([0, legendWidth]);\n\n  const strokeSpecial = d3\n    .scaleSqrt()\n    .interpolate(() => colors.special)\n    .domain([0, legendWidth]);\n\n  const introduction = (\n    <div>\n      <h3>作用</h3>\n      <p>反映各个地区每天确诊、治愈或死亡人数相对前一天的变化情况。</p>\n      <h3>说明</h3>\n      <ul>\n        <li>\n          因为湖北和华中地区的数据远大于其他地区，所以选择了一种特殊的颜色范围。\n        </li>\n        <li>变化为 0 的格子不一定真的为 0 ，可能是因为数据缺失。</li>\n      </ul>\n      <h3>交互方法</h3>\n      <ul>\n        <li>\n          鼠标<b>移动到</b>到<b>热力图</b>\n          任意格子并停留一会儿，会显示地区、时间以及变化人数。\n        </li>\n        <li>\n          <b>单击“热力图”</b>中的任意格子，会高亮并且选择对应的日期和地区。\n        </li>\n        <li>\n          <b>点击“树”</b>中地区的名字后面的<b>按钮</b>会收缩或者展开该地区。\n        </li>\n        <li>\n          <b>单击“树”</b>中地区的<b>名字</b>\n          会选择该地区，并且只可视化选择的地区；再\n          <b>单击</b>一次，取消选择。\n        </li>\n        <li>\n          <b>双击“树”</b>中地区的<b>名字</b>会进入<b>日历热图</b>\n          ，只可视化该地区的数据；\n          <b>双击</b>空白地方返回。\n        </li>\n      </ul>\n    </div>\n  );\n\n  const minusButton = (\n    <svg\n      t=\"1583216776327\"\n      className=\"icon\"\n      viewBox=\"0 0 1024 1024\"\n      version=\"1.1\"\n      xmlns=\"http://www.w3.org/2000/svg\"\n      p-id=\"1313\"\n      width={buttonSize}\n      height={buttonSize}\n      cursor=\"pointer\"\n    >\n      <path\n        d=\"M512 128c211.968 0 384 172.032 384 384s-172.032 384-384 384-384-172.032-384-384 172.032-384 384-384z m-187.221333 425.6h371.2a41.6 41.6 0 1 0 0-83.2h-371.2a41.6 41.6 0 0 0 0 83.2z\"\n        p-id=\"1314\"\n      ></path>\n    </svg>\n  );\n\n  const plusButton = (\n    <svg\n      t=\"1583216820149\"\n      className=\"icon\"\n      viewBox=\"0 0 1024 1024\"\n      version=\"1.1\"\n      xmlns=\"http://www.w3.org/2000/svg\"\n      p-id=\"1443\"\n      width={buttonSize}\n      height={buttonSize}\n      cursor=\"pointer\"\n    >\n      <path\n        d=\"M458.922667 503.210667H314.965333a41.6 41.6 0 1 0 0 83.2h143.957334v144a41.6 41.6 0 0 0 83.2 0v-144h144a41.6 41.6 0 0 0 0-83.2h-144V359.253333a41.6 41.6 0 0 0-83.2 0v143.957334zM502.186667 160.853333c211.968 0 384 172.032 384 384s-172.032 384-384 384-384-172.032-384-384 172.032-384 384-384z\"\n        p-id=\"1444\"\n      ></path>\n    </svg>\n  );\n\n  function handleMouseup() {\n    setDrag({ ...drag, start: null });\n  }\n\n  function handleMousemove(e) {\n    if (drag.start === null) return;\n    if (sliderRef.current === null) return;\n    const [mouseX] = mouse(e, sliderRef.current);\n    const maxMove = matrixWidth * (1 - matrixWidth / (days.length * cellWidth));\n    const move = Math.max(0, Math.min(maxMove, mouseX - drag.start));\n    setDrag({ ...drag, move });\n  }\n\n  function handleMousedown(e) {\n    const [mouseX] = mouse(e, sliderRef.current);\n    setDrag({\n      start: mouseX,\n      move: 0,\n    });\n  }\n\n  function hasSpecialLegend() {\n    return (\n      (treeData.data.title === \"中国\" && highlight.length === 0) ||\n      highlight.find((d) => d.data.title === \"湖北\") ||\n      highlight.find((d) => d.data.title === \"华中地区\")\n    );\n  }\n\n  function toggleHighlightNode(node) {\n    if (!node.parent) return;\n\n    const old = highlight.find((d) => d.data.title === node.data.title);\n    const hasChildren = highlight.some(\n      (d) => d.parent.data.title === node.data.title\n    );\n    if (old || hasChildren) {\n      const deleteNodes = node.hideChildren ? [node] : node.leaves();\n      for (let d of deleteNodes) {\n        const index = highlight.indexOf(d);\n        highlight.splice(index, 1);\n      }\n    } else {\n      node.hideChildren\n        ? highlight.push(node)\n        : highlight.push(...node.leaves());\n    }\n    setHighlight([...highlight]);\n    setSelectedRegion(node.data.title);\n  }\n\n  async function toggleNode(node) {\n    if (!node.children) return;\n    if (node.depth === 0) {\n      const range = node.data.title === \"全球\" ? \"china\" : \"world\";\n      handleChangeRange(range);\n      return;\n    }\n    // animation\n    const t = d3.transition().duration(250).ease(d3.easeExpOut);\n    node.hideChildren\n      ? animateShowChildren(node, t)\n      : animateHideChildren(node, t);\n    !node.hideChildren && node.depth === 0 && animateHideButton(t);\n    animateHideLegend(t);\n    await t.end();\n\n    // update data\n    node.hideChildren ? showChildren(node) : hideChildren(node);\n\n    // upadte view\n    const newTreeData = copyTree();\n    setTreeData(newTreeData);\n    setHighlight([]);\n  }\n\n  async function toggleNodes(nodes) {\n    // animation\n    const t = d3.transition().duration(250).ease(d3.easeExpOut);\n\n    const validNodes = nodes.filter((node) => node.children);\n    const allHide = validNodes.every((d) => d.hideChildren);\n    allHide\n      ? validNodes.forEach((d) => animateShowChildren(d, t))\n      : validNodes\n          .filter((d) => !d.hideChildren)\n          .forEach((d) => animateHideChildren(d, t));\n    animateHideLegend(t);\n    animateHideAxis(t);\n    await t.end();\n\n    // update data\n    allHide\n      ? validNodes.forEach(showChildren)\n      : validNodes.filter((d) => !d.hideChildren).forEach(hideChildren);\n\n    // update view\n    const newTreeData = copyTree();\n    setTreeData(newTreeData);\n    setHighlight([]);\n  }\n\n  function animateHideButton(t) {\n    d3.select(\".tree-btn\").transition(t).attr(\"fill-opacity\", 0);\n  }\n\n  function animateHideLegend(t) {\n    // 坐标轴和 legend\n    d3.selectAll(\".tree-legend, .tree-line, .tree-legend-special\")\n      .transition(t)\n      .attr(\"stroke-opacity\", 0)\n      .attr(\"fill-opacity\", 0);\n  }\n\n  function animateHideAxis(t) {\n    d3.select(\".tree-xAxis\")\n      .transition(t)\n      .attr(\"stroke-opacity\", 0)\n      .attr(\"fill-opacity\", 0);\n  }\n\n  function animateHideChildren(node, t) {\n    const text = d3.select(`#node-${node.data.title} text`).node();\n    const { width } = text.getBBox();\n    d3.select(`#node-${node.data.title} text`)\n      .transition(t)\n      .attr(\"x\", width + 8);\n\n    node.each((d) => {\n      if (node.data.title === d.data.title) return;\n\n      // node\n      d3.select(`#node-${d.data.title}`)\n        .attr(\"fill-opacity\", 1)\n        .transition(t)\n        .attr(\"transform\", `translate(${node.y}, ${node.x})`)\n        .attr(\"fill-opacity\", 0);\n\n      // link\n      d3.select(`#link-${d.data.title}`)\n        .transition(t)\n        .attr(\"d\", () => {\n          const o = { x: node.x, y: node.y };\n          return pathLink({ source: o, target: o });\n        });\n\n      // rect\n      d3.selectAll(`.grid-${d.data.title}`)\n        .transition(t)\n        .attr(\"stroke-opacity\", 0)\n        .attr(\"fill-opacity\", 0);\n    });\n  }\n\n  function animateShowChildren(node, t) {\n    const text = d3.select(`#node-${node.data.title} text`).node();\n    const { width } = text.getBBox();\n    d3.select(`#node-${node.data.title} text`)\n      .transition(t)\n      .attr(\"x\", -width - 8);\n\n    d3.selectAll(`.grid-${node.data.title} `)\n      .transition(t)\n      .attr(\"stroke-opacity\", 0)\n      .attr(\"fill-opacity\", 0);\n\n    // 移动到目的位置\n    node.each((d) => {\n      if (node.data.title === d.data.title) return;\n      d3.select(`#node-${d.data.title}`)\n        .transition(t)\n        .attr(\"transform\", `translate(${d.y}, ${d.x})`)\n        .attr(\"fill-opacity\", 1);\n\n      d3.select(`#link-${d.data.title}`)\n        .transition(t)\n        .attr(\"stroke-opacity\", 0.4)\n        .attr(\"d\", () => {\n          const o = { x: d.x, y: d.y };\n          const s = { x: d.parent.x, y: d.parent.y };\n          return pathLink({ source: s, target: o });\n        });\n    });\n  }\n\n  function hideChildren(node) {\n    setDrag({\n      move: 0,\n      start: null,\n    });\n    node.hideChildren = true;\n    node.each((child) => {\n      if (child.data.title === node.data.title) return;\n      child.hide = true;\n    });\n  }\n\n  function showChildren(node) {\n    setDrag({\n      move: 0,\n      start: null,\n    });\n    node.hideChildren = false;\n    node.eachBefore((child) => {\n      if (child.data.title === node.data.title) return;\n      child.hide = false;\n      child.hideChildren = false;\n    });\n  }\n\n  function copyTree() {\n    // 这里必须要拷贝一份，否者很麻烦\n    const newTreeData = d3.hierarchy(regionsData);\n    newTreeData.each((node) => {\n      const old = nodeByTitle.get(node.data.title);\n      node.hideChildren = old.hideChildren;\n      node.hide = old.hide;\n    });\n    return newTreeData;\n  }\n\n  function isSelect(d) {\n    return selectedRegion === d.region && selectedDate === d.date;\n  }\n\n  function handleClickRect({ region, date }) {\n    setSelectedRegion(region);\n    setSelectedDate(date);\n  }\n\n  function noData(data) {\n    return data.filter(({ value }) => !isNaN(value)).length === 0;\n  }\n\n  useEffect(() => {\n    // 绘制坐标轴\n    const scaleLegend = d3\n      .scaleLinear()\n      .domain(colorScale.domain())\n      .range([0, legendWidth]);\n\n    const specialScaleLegend = d3\n      .scaleSqrt()\n      .domain(specialColorScale.domain())\n      .range([0, legendWidth]);\n\n    const legendAxis = d3\n      .axisBottom(scaleLegend)\n      .ticks(legendWidth / 50)\n      .tickSizeOuter(0);\n\n    const specialLegendAxis = d3\n      .axisBottom(specialScaleLegend)\n      .ticks(legendWidth / 50)\n      .tickSizeOuter(0);\n\n    const xAxis = d3\n      .axisBottom(x)\n      .tickSizeOuter(0)\n      .tickFormat((time) => {\n        const date = new Date(time).getDate();\n        if (date !== 1) return date;\n        const month = new Date(time).getMonth();\n        return labels[month];\n      });\n\n    d3.select(\".tree-xAxis\")\n      .call(xAxis)\n      .call((g) =>\n        g\n          .selectAll(\"text\")\n          .filter(function () {\n            const label = d3.select(this).text();\n            return labels.indexOf(label) !== -1;\n          })\n          .attr(\"font-weight\", \"bold\")\n          .attr(\"dy\", \"2em\")\n      );\n\n    d3.select(\".tree-legend\").call(legendAxis);\n    d3.select(\".tree-legend-special\").call(specialLegendAxis);\n\n    // 监听事件\n    window.addEventListener(\"mouseup\", handleMouseup);\n    window.addEventListener(\"mousemove\", handleMousemove);\n\n    // animation\n    const t = d3.transition().duration(200);\n    d3.selectAll(\n      \".grid, .tree-legend, .tree-line, .tree-xAxis, .tree-xAxis, .tree-btn, .tree-legend-special\"\n    )\n      .transition(t)\n      .attr(\"stroke-opacity\", 1)\n      .attr(\"fill-opacity\", 1);\n\n    return () => {\n      window.removeEventListener(\"mouseup\", handleMouseup);\n      window.removeEventListener(\"mousemove\", handleMousemove);\n    };\n  });\n\n  return (\n    <Svg\n      viewBox={[0, 0, width, height]}\n      loading={loading && noData(data)}\n      nodata={noData(data)}\n      onClick={() => setHighlight([])}\n      onMouseEnter={() => setHover(true)}\n      onMouseLeave={() => setHover(false)}\n      onMouseOver={() => !hover && setHover(true)}\n      show={show}\n      title=\"树 + 热力图\"\n      introduction={introduction}\n    >\n      {th && (\n        <g\n          transform={`translate(${width - margin.right - legendWidth - 10}, ${\n            margin.top / 2\n          })`}\n        >\n          {d3.range(0, legendWidth).map((l) => (\n            <line\n              className=\"tree-line\"\n              key={l}\n              x1={l}\n              y1={-legendHeight / 2}\n              x2={l}\n              y2={legendHeight / 2}\n              stroke={stroke(l)}\n            />\n          ))}\n          <g\n            className=\"tree-legend\"\n            transform={`translate(0, ${legendHeight / 2})`}\n          ></g>\n          <text textAnchor=\"end\" fill=\"currentColor\" dy=\"0.31em\" dx={-10}>\n            {hasSpecialLegend() ? \"其他地区\" : \"所有地区\"}\n          </text>\n        </g>\n      )}\n      {hasSpecialLegend() && (\n        <g\n          transform={\n            th === 0\n              ? `translate(${width - margin.right - legendWidth - 10}, ${\n                  margin.top / 2\n                })`\n              : `translate(${\n                  width - margin.right - legendWidth - legendWidth - 100\n                }, ${margin.top / 2})`\n          }\n        >\n          {d3.range(0, legendWidth).map((l) => (\n            <line\n              className=\"tree-line\"\n              key={l}\n              x1={l}\n              y1={-legendHeight / 2}\n              x2={l}\n              y2={legendHeight / 2}\n              stroke={strokeSpecial(l)}\n            />\n          ))}\n          <g\n            className=\"tree-legend-special\"\n            transform={`translate(0, ${legendHeight / 2})`}\n          ></g>\n          <text textAnchor=\"end\" fill=\"currentColor\" dy=\"0.31em\" dx={-10}>\n            {th === 0 ? \"中国\" : th === 1 ? \"华中地区\" : \"湖北\"}\n          </text>\n        </g>\n      )}\n      {layers.map(([depth, data]) => (\n        <g\n          className=\"tree-btn\"\n          transform={`translate(${\n            margin.left + depth * nodeWidth - buttonSize / 2\n          }, ${height - margin.top + buttonSize / 2})`}\n          key={depth}\n          onClick={(e) => {\n            toggleNodes(data);\n            e.stopPropagation(); // 这行代码很关键\n          }}\n          fillOpacity={0}\n        >\n          {data.every((d) => d.hideChildren) ? plusButton : minusButton}\n        </g>\n      ))}\n      <g transform={`translate(${margin.left}, ${margin.top})`}>\n        {root.links().map((link, index) => (\n          <path\n            id={`link-${link.target.data.title}`}\n            key={index}\n            fill=\"none\"\n            stroke=\"#555\"\n            strokeOpacity={link.target.hide || link.source.hide ? 0 : 0.4}\n            strokeWidth={1.5}\n            d={pathLink(link)}\n          ></path>\n        ))}\n        {root\n          .descendants()\n          .reverse()\n          .map((node) => (\n            <g\n              key={node.data.title}\n              id={`node-${node.data.title}`}\n              transform={`translate(${node.y}, ${node.x})`}\n              fill={\n                selectedRegion === node.data.title\n                  ? highlightColor\n                  : normalColor\n              }\n              fillOpacity={node.hide ? 0 : 1}\n              cursor=\"pointer\"\n            >\n              {!node.children ? (\n                <circle r={3}></circle>\n              ) : (\n                <>\n                  <circle\n                    r={buttonSize / 2 - 5}\n                    fill=\"white\"\n                    onClick={(e) => {\n                      toggleNode(node);\n                      e.stopPropagation();\n                    }}\n                  ></circle>\n                  <g\n                    transform={`translate(${-buttonSize / 2}, ${\n                      -buttonSize / 2\n                    })`}\n                    onClick={(e) => {\n                      toggleNode(node);\n                      e.stopPropagation();\n                    }}\n                  >\n                    {!node.hideChildren ? minusButton : plusButton}\n                  </g>\n                </>\n              )}\n              <text\n                dy=\"0.31em\"\n                x={!node.children || node.hideChildren ? 8 : -8}\n                textAnchor={\n                  !node.children || node.hideChildren ? \"start\" : \"end\"\n                }\n                fontSize=\"12\"\n                onClick={(e) => {\n                  toggleHighlightNode(node);\n                  e.stopPropagation();\n                }}\n                onDoubleClick={(e) => {\n                  setSelectedRegion(node.data.title);\n                  setShow(false);\n                  e.stopPropagation();\n                }}\n              >\n                {node.data.title}\n              </text>\n            </g>\n          ))}\n      </g>\n      <g transform={`translate(${width - margin.right - matrixWidth}, ${0})`}>\n        <g clipPath=\"url(#maxtrix-ly)\">\n          <g\n            transform={`translate(${-drag.move}, ${\n              margin.top - cellHeight / 2\n            })`}\n          >\n            {data.map((d) => (\n              <rect\n                className={`grid-${d.region} grid`}\n                key={d.region + d.date.toString()}\n                x={x(d.date) - 1}\n                y={y(d.region) - 1}\n                width={x.bandwidth() - 2}\n                height={h(d.region) - 2}\n                fill={color(d)}\n                fillOpacity={0}\n                strokeOpacity={0}\n                cursor=\"pointer\"\n                onClick={(e) => {\n                  handleClickRect(d);\n                  e.stopPropagation();\n                }}\n                stroke={isSelect(d) ? highlightRectColor : \"none\"}\n                strokeWidth={isSelect(d) ? 3 : 0}\n              >\n                <title>{`${d.region}:${d.value}(${formatDate(\n                  new Date(d.date)\n                )})`}</title>\n              </rect>\n            ))}\n          </g>\n          <g\n            className=\"tree-xAxis\"\n            transform={`translate(${-drag.move}, ${height - margin.bottom})`}\n          ></g>\n        </g>\n        <defs>\n          <clipPath id=\"maxtrix-ly\">\n            <rect\n              x=\"0\"\n              y=\"0\"\n              width={matrixWidth}\n              height={height - margin.bottom + 30}\n            />\n          </clipPath>\n        </defs>\n        {hover && matrixWidth < days.length * cellWidth && (\n          <g transform={`translate(0, ${height - margin.bottom + 40})`}>\n            <rect\n              ref={sliderRef}\n              width={matrixWidth}\n              height={8}\n              x={0}\n              y={0}\n              rx={4}\n              ry={4}\n              fill=\"transparent\"\n            ></rect>\n            <rect\n              onMouseDown={handleMousedown}\n              width={matrixWidth * (matrixWidth / (days.length * cellWidth))}\n              height={8}\n              x={drag.move}\n              y={0}\n              rx={4}\n              ry={4}\n              fill=\"#bfbfbf\"\n              cursor=\"pointer\"\n            ></rect>\n          </g>\n        )}\n      </g>\n    </Svg>\n  );\n}\n","import React, { useEffect } from \"react\";\nimport Svg from \"./Svg\";\nimport styled from \"styled-components\";\nimport * as d3 from \"d3\";\nimport formatDate from \"../utils/formatDate\";\n\nconst Container = styled.div`\n  cursor: pointer;\n`;\n\nexport default function({\n  selectedDate,\n  setSelectedDate,\n  selectedType,\n  loading,\n  width,\n  height,\n  show,\n  setShow,\n  colors,\n  all,\n  selectedRegion,\n  highlightRectColor,\n  disabledColor,\n  legendWidth,\n  legendHeight\n}) {\n  const margin = { top: 30, right: 30, bottom: 30, left: 30 };\n  const data = all\n    .filter(d => d.region === selectedRegion)\n    .map(d => ({\n      value: d[selectedType],\n      date: new Date(d.date)\n    }))\n    .filter(({ value }) => !isNaN(value) && value !== \"\");\n\n  const countDay = d => d.getDay(),\n    formatDay = d => \"SMTWTFS\"[countDay(d)],\n    formatMonth = d3.timeFormat(\"%b\");\n\n  const timeWeek = d3.timeSunday,\n    timeMonth = d3.timeMonth,\n    timeDay = d3.timeDay,\n    [startDate, endDate] = d3.extent(data, d => d.date),\n    valueExtent = d3.extent(data, d => d.value),\n    startMonth = timeMonth(startDate),\n    endMonth = timeMonth.ceil(endDate),\n    totalWeek = timeWeek.count(startMonth, endMonth),\n    days = d3.range(7).map(i => new Date(1995, 0, i)),\n    months = d3.timeMonths(startMonth, endMonth),\n    padding = 4,\n    sw = 8,\n    sc = \"white\";\n\n  const valueByDate = d3.map(data, d => formatDate(d.date));\n  const dates = timeDay.range(startMonth, endMonth).map(d => {\n    const key = formatDate(d);\n    const value = valueByDate.get(key);\n    if (value) return value;\n    return {\n      date: d,\n      value: null\n    };\n  });\n\n  const cellSize = Math.min(\n    (width - margin.left - margin.right) / totalWeek,\n    40\n  );\n\n  const chartWidth = (cellSize * totalWeek) | 0,\n    chartHeight = (cellSize * 7) | 0;\n\n  const special = selectedRegion === \"湖北\" || selectedRegion === \"华中地区\";\n  const x = date => timeWeek.count(startMonth, date) * cellSize + 0.5,\n    y = date => countDay(date) * cellSize + 0.5,\n    colorScale = special\n      ? d3\n          .scaleSqrt()\n          .interpolate(() => colors.special)\n          .domain(valueExtent)\n      : d3.scaleSequential(colors[selectedType]).domain(valueExtent),\n    color = value => {\n      if (value === null) return disabledColor;\n      return colorScale(value);\n    },\n    stroke = special\n      ? d3\n          .scaleSqrt()\n          .interpolate(() => colors.special)\n          .domain([0, legendWidth])\n      : d3.scaleSequential(colors[selectedType]).domain([0, legendWidth]),\n    yDay = d => (countDay(d) + 0.5) * cellSize,\n    isSelect = date => formatDate(date) === selectedDate;\n\n  const pathMonth = t => {\n    const n = 7;\n    const d = countDay(t);\n    const w = timeWeek.count(startMonth, t);\n    return `${\n      d === 0\n        ? `M${w * cellSize},0`\n        : d === n\n        ? `M${(w + 1) * cellSize},0`\n        : `M${(w + 1) * cellSize},0V${d * cellSize}H${w * cellSize}`\n    }V${n * cellSize}`;\n  };\n\n  function noData(data) {\n    return data.filter(({ value }) => !isNaN(value)).length === 0;\n  }\n\n  const introduction = (\n    <div>\n      <h3>作用</h3>\n      <p>反映各个地区每天确诊、治愈或死亡人数相对前一天的变化情况。</p>\n      <h3>说明</h3>\n      <ul>\n        <li>\n          因为湖北和华中地区的数据远大于其他地区，所以选择了一种特殊的颜色范围。\n        </li>\n        <li>变化为 0 的格子不一定真的为 0 ，可能是因为数据缺失。</li>\n      </ul>\n      <h3>交互方法</h3>\n      <ul>\n        <li>\n          <b>双击</b>空白地方返回。\n        </li>\n      </ul>\n    </div>\n  );\n\n  useEffect(() => {\n    // 绘制坐标轴\n    const scaleLegend = special\n      ? d3\n          .scaleSqrt()\n          .domain(colorScale.domain())\n          .range([0, legendWidth])\n      : d3\n          .scaleLinear()\n          .domain(colorScale.domain())\n          .range([0, legendWidth]);\n\n    const legendAxis = d3\n      .axisBottom(scaleLegend)\n      .ticks(legendWidth / 50)\n      .tickSizeOuter(0);\n\n    d3.select(\".date-legend\").call(legendAxis);\n  });\n\n  return (\n    <Container onDoubleClick={() => setShow(true)}>\n      <Svg\n        viewBox={[0, 0, width, height]}\n        loading={loading}\n        nodata={noData(data)}\n        show={show}\n        introduction={introduction}\n        title=\"日历热图\"\n      >\n        <g\n          transform={`translate(${width - margin.right - legendWidth - 10}, ${\n            margin.top\n          })`}\n        >\n          {d3.range(0, legendWidth).map(l => (\n            <line\n              className=\"tree-line\"\n              key={l}\n              x1={l}\n              y1={-legendHeight / 2}\n              x2={l}\n              y2={legendHeight / 2}\n              stroke={stroke(l)}\n            />\n          ))}\n          <g\n            className=\"date-legend\"\n            transform={`translate(0, ${legendHeight / 2})`}\n          ></g>\n        </g>\n        <g\n          transform={`translate(${(width - chartWidth) / 2}, ${(height -\n            chartHeight) /\n            2})`}\n        >\n          {data.length !== 0 &&\n            months.map(d => (\n              <text fill=\"currentColor\" x={x(d)} dy=\"-1em\" key={d}>\n                {formatMonth(d)}\n              </text>\n            ))}\n          {data.length !== 0 &&\n            months\n              .slice(1, months.length)\n              .map(d => (\n                <path\n                  d={pathMonth(d)}\n                  stroke={sc}\n                  strokeWidth={sw}\n                  fill=\"none\"\n                  key={d}\n                />\n              ))}\n          {dates.map(({ date, value }) => (\n            <rect\n              key={date}\n              x={x(date)}\n              y={y(date)}\n              width={cellSize - padding}\n              height={cellSize - padding}\n              fill={color(value)}\n              stroke={isSelect(date) ? highlightRectColor : \"none\"}\n              strokeWidth={padding}\n              onClick={e => {\n                if (value !== null) setSelectedDate(formatDate(date));\n                e.stopPropagation();\n              }}\n            >\n              <title>{`${formatDate(date)}:${\n                value === null ? \"暂无数据\" : value\n              }`}</title>\n            </rect>\n          ))}\n          {data.length !== 0 &&\n            days.map(d => (\n              <text\n                key={d}\n                fill=\"currentColor\"\n                x={-cellSize}\n                y={yDay(d)}\n                dy=\"0.31em\"\n              >\n                {formatDay(d)}\n              </text>\n            ))}\n        </g>\n        {data.length && (\n          <g\n            transform={`translate(${width - 35}, ${height - 40})`}\n            textAnchor=\"end\"\n            fill=\"#777\"\n          >\n            <text fontSize={35} fontWeight=\"bold\">\n              {selectedRegion}\n            </text>\n            <text fontSize={15} dy=\"1.5em\">\n              {selectedDate}\n            </text>\n          </g>\n        )}\n      </Svg>\n    </Container>\n  );\n}\n","import React, { useState, useMemo } from \"react\";\nimport \"array-flat-polyfill\";\nimport TreeMatrix from \"./TreeMatrix\";\nimport HeatMap from \"./HeatMap\";\nimport * as d3 from \"d3\";\nexport default function ({\n  dataByRegion,\n  selectedRegion,\n  selectedDate,\n  setSelectedDate,\n  setSelectedRegion,\n  selectedType,\n  loading,\n  selectedRange,\n  setSelectedRange,\n  selectedCountries,\n  treeData,\n  setTreeData,\n  handleChangeRange,\n}) {\n  const [isTree, setIsTree] = useState(true);\n  const width = 1200,\n    height = 650,\n    legendWidth = 200,\n    legendHeight = 10;\n\n  const highlightColor = \"red\",\n    normalColor = \"black\",\n    highlightRectColor = \"red\",\n    disabledColor = \"#eeeeee\";\n\n  const all = useMemo(\n    () =>\n      dataByRegion\n        ? Array.from(dataByRegion).flatMap(([region, dataByDate]) =>\n            d3\n              .pairs(\n                Array.from(dataByDate)\n                  .map(([date, data]) => ({\n                    date: date,\n                    data: data.data,\n                  }))\n                  .sort((a, b) => new Date(a.date) - new Date(b.date))\n              )\n              .map(([a, b]) => ({\n                region,\n                date: b.date,\n                ...Object.keys(b.data).reduce(\n                  (obj, key) => ((obj[key] = b.data[key] - a.data[key]), obj),\n                  {}\n                ),\n              }))\n          )\n        : [],\n    [dataByRegion, selectedCountries.length]\n  );\n\n  const colors = {\n    dead: d3.interpolatePurples,\n    confirmed: d3.interpolateReds,\n    cured: d3.interpolateGreens,\n    special: d3.interpolatePuRd,\n  };\n\n  const treeProps = {\n    dataByRegion,\n    selectedRegion,\n    selectedDate,\n    setSelectedDate,\n    setSelectedRegion,\n    selectedType,\n    loading,\n    show: isTree,\n    setShow: setIsTree,\n    width,\n    height,\n    colors,\n    all,\n    highlightColor,\n    normalColor,\n    highlightRectColor,\n    disabledColor,\n    legendHeight,\n    legendWidth,\n    selectedRange,\n    setSelectedRange,\n    treeData,\n    setTreeData,\n    handleChangeRange,\n  };\n\n  const heatMapProps = {\n    width,\n    height,\n    show: !isTree,\n    setShow: setIsTree,\n    colors,\n    all,\n    selectedRegion,\n    selectedType,\n    loading: false,\n    selectedDate,\n    highlightRectColor,\n    disabledColor,\n    setSelectedDate,\n    legendWidth,\n    legendHeight,\n  };\n\n  return (\n    <div>\n      <TreeMatrix {...treeProps} />\n      <HeatMap {...heatMapProps} />\n    </div>\n  );\n}\n","import React, { useEffect, useState } from \"react\";\nimport moment from \"moment\";\nimport { connect } from \"dva\";\nimport { TreeSelect, DatePicker, Row, Col, Select } from \"antd\";\nimport styled from \"styled-components\";\nimport regions from \"../assets/data/region_options.json\";\n\nimport Shape from \"./Shape\";\nimport Piechart from \"./Piechart\";\nimport DateMap from \"./DateMap\";\nimport newsImage from \"../assets/images/news.jpg\";\n\nimport * as d3 from \"d3\";\n\nconst { Option } = Select;\nconst Container = styled.div`\n  position: relative;\n  margin-bottom: 4em;\n`;\n\nconst Control = styled.div`\n  display: flex;\n  margin: 2em 0 1em 0;\n\n  @media (max-width: 700px) {\n    flex-direction: column;\n\n    & .country {\n      margin-top: 1em;\n    }\n  }\n`;\n\nconst An = styled.div`\n  position: absolute;\n  top: -56px;\n`;\n\nconst MyRow = styled.div`\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  width: 100%;\n\n  @media (max-width: 768px) {\n    flex-direction: column;\n  }\n`;\n\nconst Intro = styled.div`\n  width: 60%;\n  & ul {\n    padding-left: 2em;\n  }\n  @media (max-width: 768px) {\n    width: 100%;\n  }\n`;\n\nconst NewsImage = styled.img`\n  width: 370px;\n  border-radius: 8px;\n`;\n\nfunction formTree(nodes) {\n  return {\n    title: \"全球\",\n    value: \"全球\",\n    children: nodes.map((d) => ({\n      title: d,\n      value: d,\n    })),\n  };\n}\n\nfunction NewsPanel({\n  selectedDate,\n  setSelectedDate,\n  dataByRegion,\n  dataByDate,\n  newsByRegion,\n  getNewsData,\n  getData,\n  loadingNews,\n  loadingNcov,\n  range,\n  countries,\n  selectedCountries,\n  setSelectedCountries,\n  widthData,\n  getCountryData,\n  total,\n}) {\n  const [selectedRegion, setSelectedRegion] = useState(\"湖北\");\n  const [selectedType, setSelectedType] = useState(\"confirmed\");\n  const [selectedRange, setSelectedRange] = useState(\"china\");\n  const [treeData, setTreeData] = useState(d3.hierarchy(regions));\n  const ranges = [\n    { name: \"全球\", key: \"world\" },\n    { name: \"全国\", key: \"china\" },\n  ];\n  const types = [\n    { name: \"确诊\", key: \"confirmed\" },\n    { name: \"治愈\", key: \"cured\" },\n    { name: \"死亡\", key: \"dead\" },\n  ];\n  const newsByDate = newsByRegion.get(selectedRegion);\n  const news = newsByDate && newsByDate.get(selectedDate);\n  const { words, tags } = news || {};\n  const shapeProps = {\n    data: words,\n    loading: loadingNews || loadingNcov,\n    selectedDate,\n    selectedRegion,\n  };\n\n  const pieProps = {\n    loading: loadingNews || loadingNcov,\n    data: tags,\n    selectedDate,\n    selectedRegion,\n  };\n\n  const dateProps = {\n    regions,\n    range,\n    selectedRegion,\n    selectedDate,\n    setSelectedDate,\n    setSelectedRegion,\n    selectedRange,\n    selectedType,\n    loading: loadingNcov,\n    dataByRegion,\n    selectedCountries,\n    treeData,\n    setTreeData,\n    handleChangeRange,\n  };\n\n  function handleCountryDataChange(keys) {\n    if (keys.length >= 30) {\n      alert(\"不能超过 30 个国家\");\n      return;\n    }\n    const newKeys = [];\n    for (let k of keys) {\n      if (widthData.has(k)) newKeys.push(k);\n      else getCountryData(k, dataByDate, dataByRegion, total, \"news\");\n    }\n    setSelectedCountries(\"news\", newKeys);\n    setTreeData(d3.hierarchy(formTree(keys)));\n  }\n\n  function handleChangeRange(value) {\n    if (value === \"world\")\n      setTreeData(d3.hierarchy(formTree(selectedCountries)));\n    else setTreeData(d3.hierarchy(regions));\n    setSelectedRange(value);\n  }\n\n  function disabledDate(current) {\n    if (range.length === 0) return true;\n    return current < moment(range[0]) || current > moment(range[1]);\n  }\n\n  useEffect(() => {\n    // 请求所有的数据\n    if (!dataByRegion.size) {\n      getData(\"中国\");\n      return;\n    }\n    // 如果有日期数据且 news 数据为空的话就请求\n    if (\n      news === undefined &&\n      selectedDate !== \"\" &&\n      selectedRegion !== \"中国\"\n    ) {\n      getNewsData(selectedRegion, `${selectedDate}`);\n    }\n  }, [getData, selectedDate, selectedRegion, getNewsData]);\n  return (\n    <Container>\n      <An id=\"news\" />\n      <h1>全国各地新闻都在报道些什么?</h1>\n      <MyRow>\n        <Intro>\n          <p>这里是和新闻相关的可视化，用来探索全国各地的新闻都在报道什么？</p>\n          <p>\n            首先我们从和疫情数据直接相关的可视化出发，也就下面第一张图：\n            <b>树 + 热力图</b>\n            ，该图其反应的是：\n            <b>各个地区每天确诊、治愈或死亡人数相对前一天的变化情况</b>。\n          </p>\n          <p>\n            下图中右边是<b>热力图</b>\n            ，其中每一个格子代表一个地区，该格子颜色越深，表示该地区当天相对前一天的变化越剧烈。在这里你不仅能看各个省份（湖北省、山东省等）和各个直辖市（北京市、上海市）的变化情况，还可以通过点击下图中右边的\n            <b>树</b>\n            ，来对区域进行合并，从而查看各个分区（华中地区、华南地区等），甚至全国的变化。\n          </p>\n          <p>\n            从第一张图我们可以找到一些感兴趣的日期和地区，这样我们有两种选择：\n          </p>\n          <ul>\n            <li>\n              <b>双击</b>地区的名字进入<b>日历热图</b>\n              去查看该地区的变化细节，并且<b>双击</b>空白区域返回。\n            </li>\n            <li>\n              <b>单击</b>热力图中对应的格子 或者通过<b>日期、地区下拉框</b>\n              选择该日期和地区，从而查看对应的新闻可视化。\n            </li>\n          </ul>\n          <p>\n            新闻可视化由两个图表构成。左边的图表是一个<b>饼状图</b>\n            ，用于对该地区和该日期的新闻数据有一个概览：\n            <b>不同种类的新闻报道数量的占比</b>。右边的图表就是上面提到的{\" \"}\n            <b>Shapewordle</b> ，用于展现该地区和该日期<b>新闻报道中的关键字</b>\n            。其中所有关键词构成的形状是该地区的地理形状，一方面将关键字和地区紧紧地联系在一起，另一方面更加具有美感，从而给人传递一种愉悦感。\n          </p>\n        </Intro>\n        <NewsImage src={newsImage} />\n      </MyRow>\n      <Control>\n        <div>\n          <span>\n            <b>范围</b>\n          </span>\n          &ensp;\n          <Select value={selectedRange} onChange={handleChangeRange}>\n            {ranges.map((d) => (\n              <Option key={d.key}>{d.name}</Option>\n            ))}\n          </Select>\n          &emsp;\n          <span>\n            <b>种类</b>\n          </span>\n          &ensp;\n          <Select\n            value={selectedType}\n            onChange={(value) => setSelectedType(value)}\n          >\n            {types.map((d) => (\n              <Option key={d.key}>{d.name}</Option>\n            ))}\n          </Select>\n          &emsp;\n        </div>\n        {selectedRange === \"world\" && (\n          <div className=\"country\">\n            <span>\n              <b>查看的国家</b>\n            </span>\n            &ensp;\n            <Select\n              mode=\"tags\"\n              value={selectedCountries}\n              onChange={handleCountryDataChange}\n              style={{\n                minWidth: 250,\n              }}\n            >\n              {countries.map((d) => (\n                <Option key={d}>{d}</Option>\n              ))}\n            </Select>\n          </div>\n        )}\n      </Control>\n      <Row>\n        <Col span={24}>\n          <DateMap {...dateProps} />\n        </Col>\n      </Row>\n      <Control>\n        <div>\n          <span>\n            <b>地区</b>\n          </span>\n          &ensp;\n          <TreeSelect\n            showSearch\n            value={selectedRegion}\n            treeData={regions}\n            dropdownStyle={{ maxHeight: 400, overflow: \"auto\" }}\n            treeDefaultExpandAll\n            onChange={setSelectedRegion}\n          />\n        </div>\n        &emsp;\n        <div>\n          <span>\n            <b>日期</b>\n          </span>\n          &ensp;\n          <DatePicker\n            value={selectedDate === \"\" ? null : moment(selectedDate)}\n            onChange={(date, string) => {\n              setSelectedDate(string);\n            }}\n            disabledDate={disabledDate}\n            showTody={false}\n          />\n        </div>\n      </Control>\n      <Row gutter={[16, 16]}>\n        <Col span={24} md={12}>\n          <Piechart {...pieProps} />\n        </Col>\n        <Col span={24} md={12}>\n          <Shape {...shapeProps} />\n        </Col>\n      </Row>\n    </Container>\n  );\n}\nexport default connect(\n  ({ news, ncov, loading }) => ({\n    newsByRegion: news.newsByRegion,\n    range: ncov.range,\n    total: ncov.total,\n    countries: ncov.countries,\n    selectedCountries: ncov.selectedCountries.news,\n    setSelectedRange: ncov.setSelectedCountries,\n    dataByRegion: ncov.dataByRegion,\n    dataByDate: ncov.dataByDate,\n    selectedDate: ncov.selectedDate,\n    widthData: ncov.widthData,\n    loadingNews: loading.models.news,\n    loadingNcov: loading.models.ncov,\n  }),\n  {\n    getCountryData: (country, dataByDate, dataByRegion, total, name) => ({\n      type: \"ncov/getCountryData\",\n      payload: { country, dataByDate, dataByRegion, total, name },\n    }),\n    setSelectedDate: (time) => ({\n      type: \"ncov/setSelectedDate\",\n      payload: time,\n    }),\n    getNewsData: (region, date) => ({\n      type: \"news/getNewsData\",\n      payload: { region, date },\n    }),\n    getData: (country) => ({ type: \"ncov/getData\", payload: { country } }),\n    setSelectedCountries: (name, keys) => ({\n      type: \"ncov/setSelectedCountries\",\n      payload: {\n        keys,\n        name,\n      },\n    }),\n  }\n)(NewsPanel);\n","import React, { useEffect, useState } from \"react\";\nimport styled from \"styled-components\";\nimport {\n  Drawer,\n  Form,\n  Button,\n  Col,\n  Row,\n  Input,\n  Skeleton,\n  Select,\n  Modal,\n  Switch,\n  Pagination,\n} from \"antd\";\nimport { connect } from \"dva\";\nimport { schemeTableau10, range } from \"d3\";\nimport str2num from \"../utils/str2num\";\n\nconst { Option } = Select;\n\nconst Container = styled.div`\n  position: relative;\n  margin: 1em 0 0 0;\n`;\n\nconst An = styled.div`\n  position: absolute;\n  top: -56px;\n`;\n\nconst MyRow = styled.div`\n  display: flex;\n`;\n\nconst Wrapper = styled.div`\n  position: relative;\n`;\n\nconst CardContainer = styled.div`\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  border-radius: 8px;\n  background: white;\n  padding: 20px;\n  margin: 20px 0;\n  width: 100%;\n  height: 200px;\n  cursor: pointer;\n  transition: all 0.5s;\n  &:hover {\n    box-shadow: 0px 0px 10px 2px rgba(0, 0, 0, 0.1);\n  }\n`;\n\nconst VoteButton = styled(Button)``;\n\nconst ContentWrapper = styled.div`\n  width: 100%;\n  height: 160px;\n  display: flex;\n  justify-content: space-between;\n`;\n\nconst Avatar = styled.div`\n  width: 32px;\n  height: 32px;\n  border-radius: 50%;\n  background: ${(props) => props.color || \"black\"};\n  color: white;\n  font-weight: bold;\n  font-family: siyuan;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  font-size: 20px;\n  line-height: 32px;\n\n  @media (max-width: 700px) {\n    display: none;\n  }\n`;\n\nconst Image = styled.div`\n  height: 160px;\n  background: black;\n  width: 300px;\n  border-radius: 8px;\n\n  @media (max-width: 700px) {\n    display: none;\n  }\n`;\n\nconst Main = styled.div`\n  overflow: auto;\n  width: 100%;\n  padding-left: 20px;\n`;\n\nconst Sub = styled.div`\n  margin-bottom: 1em;\n  font-size: 12px;\n\n  & .top {\n    display: inline-block;\n    background: orange;\n    text-align: center;\n    color: white;\n    width: 40px;\n    border-radius: 2px;\n  }\n\n  & span {\n    margin-right: 10px;\n  }\n`;\n\nconst Left = styled.div`\n  width: 70%;\n  display: flex;\n  justify-content: space-between;\n\n  @media (max-width: 700px) {\n    width: 100%;\n  }\n`;\n\nconst Control = styled.div`\n  display: flex;\n  align-items: center;\n  margin: 0.5em 0 1em 0;\n`;\n\nconst Preview = styled.div`\n  margin-left: 10px;\n`;\n\nconst Tool = styled.div`\n  position: absolute;\n  bottom: 0px;\n  left: 0px;\n  margin: 0 0 0.5em 0.5em;\n  display: flex;\n  align-items: center;\n\n  & > span {\n    background: black;\n    color: white;\n    display: inline-block;\n    text-align: center;\n    color: white;\n    width: 60px;\n    border-radius: 2px;\n  }\n`;\n\nconst CardButton = styled(Button)`\n  margin: 0 0.5em;\n`;\n\nconst Footer = styled.div`\n  display: flex;\n  flex-direction: row-reverse;\n  margin-bottom: 2em;\n`;\n\nconst Card = connect(null, {\n  deleteComment: (id) => ({ type: \"comment/deleteComment\", payload: { id } }),\n  setTop: (id) => ({ type: \"comment/setTop\", payload: { id } }),\n  setShow: (id) => ({ type: \"comment/setShow\", payload: { id } }),\n  readMore: (id) => ({ type: \"comment/readMore\", payload: { id } }),\n})(\n  ({\n    id,\n    title,\n    des,\n    url,\n    createTime,\n    isAdmin,\n    loading,\n    author,\n    isTop,\n    isShow,\n    deleteComment,\n    reading,\n    setTop,\n    preview,\n    setShow,\n    readMore,\n  }) => {\n    const [showDelete, setShowDelete] = useState(false);\n    const avatarColor = () =>\n      schemeTableau10[str2num(author) % schemeTableau10.length];\n    return (\n      <Wrapper>\n        <CardContainer\n          onClick={() => {\n            window.open(url);\n            readMore(id);\n          }}\n        >\n          {loading ? (\n            <Skeleton avatar />\n          ) : (\n            <ContentWrapper>\n              <Left>\n                <Avatar color={avatarColor(author)}>\n                  {author.slice(0, 1)}\n                </Avatar>\n                <Main>\n                  <h2>{title}</h2>\n                  <Sub>\n                    {isTop === 1 && <span className=\"top\">置顶</span>}\n                    <span>作者：{author}</span>\n                    <span>阅读：{reading}</span>\n                    <span>日期：{createTime.toLocaleString()}</span>\n                  </Sub>\n                  <p>{des}</p>\n                </Main>\n              </Left>\n              <Image />\n            </ContentWrapper>\n          )}\n        </CardContainer>\n        {isAdmin && !preview && (\n          <>\n            <Tool>\n              {!isShow && <span>未发布</span>}\n              <CardButton\n                onClick={(e) => {\n                  e.stopPropagation();\n                  setShow(id);\n                }}\n              >\n                {isShow ? \"撤回\" : \"发布\"}\n              </CardButton>\n              <CardButton\n                onClick={(e) => {\n                  e.stopPropagation();\n                  setTop(id);\n                }}\n              >\n                {isTop ? \"取消置顶\" : \"置顶\"}\n              </CardButton>\n              <CardButton\n                onClick={(e) => {\n                  setShowDelete(true);\n                  e.stopPropagation();\n                }}\n              >\n                删除\n              </CardButton>\n            </Tool>\n            <Modal\n              title=\"删除投稿\"\n              visible={showDelete}\n              onOk={(e) => {\n                e.stopPropagation();\n                deleteComment(id);\n                setShowDelete(false);\n              }}\n              onCancel={() => setShowDelete(false)}\n              okText=\"确定\"\n              cancelText=\"删除\"\n            >\n              <p>确定要删除？</p>\n            </Modal>\n          </>\n        )}\n      </Wrapper>\n    );\n  }\n);\n\nfunction CommentPanel({\n  form,\n  visible,\n  setVisible,\n  isAdmin,\n  getData,\n  data,\n  loading,\n  addComment,\n  pages,\n}) {\n  const { getFieldDecorator } = form;\n  const [selectedType, setSelectedType] = useState(\"reading\");\n  const [pageIndex, setPageIndex] = useState(1);\n  const [preview, setPreview] = useState(false);\n  const types = [\n    { name: \"最热\", key: \"reading\" },\n    { name: \"最新\", key: \"time\" },\n  ];\n\n  function handleSubmit(e) {\n    e.preventDefault();\n    form.validateFields((error, values) => {\n      if (!error) {\n        addComment(values);\n      }\n    });\n    setVisible(false);\n  }\n\n  useEffect(() => {\n    getData(pageIndex, selectedType);\n  }, [selectedType, pageIndex]);\n\n  return (\n    <Container>\n      <An id=\"story\" />\n      <h1>发现</h1>\n      <MyRow>\n        <p>\n          这里你可以通过投稿提出问题，或者回答问题；也可以看别人提出的问题和回答的问题。\n        </p>\n        <VoteButton type=\"primary\" onClick={() => setVisible(true)}>\n          我要投稿\n        </VoteButton>\n      </MyRow>\n      <Control>\n        <div>\n          <span>\n            <b>排序方式</b>\n          </span>\n          &ensp;\n          <Select\n            value={selectedType}\n            onChange={(value) => setSelectedType(value)}\n          >\n            {types.map((d) => (\n              <Option key={d.key}>{d.name}</Option>\n            ))}\n          </Select>\n        </div>\n        {isAdmin && (\n          <Preview>\n            <span>\n              <b>预览</b>\n            </span>\n            &ensp;\n            <Switch onChange={() => setPreview(!preview)} checked={preview} />\n          </Preview>\n        )}\n      </Control>\n      {loading\n        ? range(1).map((d) => <Card key={d} loading={true} />)\n        : data &&\n          data\n            .filter((d) => !preview || d.isShow)\n            .sort((a, b) => {\n              if (selectedType === \"reading\")\n                return (\n                  a.isShow - b.isShow ||\n                  b.isTop - a.isTop ||\n                  b.reading - a.reading\n                );\n              else return a.createTime - b.createTime;\n            })\n            .map((d) => (\n              <Card {...d} key={d.id} isAdmin={isAdmin} preview={preview} />\n            ))}\n      <Footer>\n        <Pagination\n          current={pageIndex}\n          total={pages}\n          pageSize={10}\n          hideOnSinglePage={true}\n          onChange={(page) => setPageIndex(page)}\n        />\n      </Footer>\n      <Drawer\n        title=\"投稿\"\n        width={360}\n        onClose={() => setVisible(false)}\n        visible={visible}\n        bodyStyle={{ paddingBottom: 80 }}\n        style={{ zIndex: 1010 }}\n      >\n        <Form layout=\"vertical\" hideRequiredMark>\n          <Row gutter={16}>\n            <Col span={24}>\n              <Form.Item label=\"昵称\">\n                {getFieldDecorator(\"author\", {\n                  rules: [\n                    { required: true, message: \"请输入显示文章时候的昵称\" },\n                  ],\n                })(<Input placeholder=\"请输入显示文章时候的昵称\" />)}\n              </Form.Item>\n            </Col>\n          </Row>\n          <Row gutter={16}>\n            <Col span={24}>\n              <Form.Item label=\"标题\">\n                {getFieldDecorator(\"title\", {\n                  rules: [{ required: true, message: \"请输入文章的标题\" }],\n                })(<Input placeholder=\"请输入文章的标题\" />)}\n              </Form.Item>\n            </Col>\n          </Row>\n          <Row gutter={16}>\n            <Col span={24}>\n              <Form.Item label=\"文章链接\">\n                {getFieldDecorator(\"url\", {\n                  rules: [{ required: true, message: \"请输入文章的链接\" }],\n                })(<Input placeholder=\"请输入文章的链接\" />)}\n              </Form.Item>\n            </Col>\n          </Row>\n          <Row gutter={16}>\n            <Col span={24}>\n              <Form.Item label=\"介绍\">\n                {getFieldDecorator(\"des\", {\n                  rules: [\n                    {\n                      required: true,\n                      message: \"请输入文章介绍\",\n                    },\n                  ],\n                })(\n                  <Input.TextArea\n                    rows={4}\n                    placeholder=\"用一段简短的文字介绍一下文章吧\"\n                  />\n                )}\n              </Form.Item>\n            </Col>\n          </Row>\n        </Form>\n        <div\n          style={{\n            position: \"absolute\",\n            right: 0,\n            bottom: 0,\n            width: \"100%\",\n            borderTop: \"1px solid #e9e9e9\",\n            padding: \"10px 16px\",\n            background: \"#fff\",\n            textAlign: \"right\",\n          }}\n        >\n          <Button onClick={() => setVisible(false)} style={{ marginRight: 8 }}>\n            取消\n          </Button>\n          <Button onClick={handleSubmit} type=\"primary\">\n            提交\n          </Button>\n        </div>\n      </Drawer>\n    </Container>\n  );\n}\n\nexport default connect(\n  ({ comment, loading }) => ({\n    visible: comment.openForm,\n    isAdmin: comment.isAdmin,\n    data: comment.data,\n    pages: comment.pages,\n    loading: loading.models.comment,\n  }),\n  {\n    addComment: (options) => ({\n      type: \"comment/addComment\",\n      payload: options,\n    }),\n    setVisible: (value) => ({\n      type: \"comment/setOpenForm\",\n      payload: { value },\n    }),\n    getData: (index, type) => ({\n      type: \"comment/getData\",\n      payload: {\n        index,\n        type,\n      },\n    }),\n  }\n)(Form.create()(CommentPanel));\n","export default function (str) {\n  const num = Array.from(str).reduce(\n    (total, ch) => total + ch.codePointAt(0),\n    0\n  );\n  return num;\n}\n","import React, { useState } from \"react\";\nimport styled from \"styled-components\";\nimport { Button, Dropdown, Menu } from \"antd\";\nimport { connect } from \"dva\";\n\nconst Container = styled.div`\n  height: 56px;\n  line-height: 56px;\n  background: ${(props) => props.theme.header};\n  position: fixed;\n  width: 100%;\n  top: 0px;\n  z-index: 1001;\n  box-shadow: 0px 1px 5px rgba(0, 0, 0, 0.1);\n`;\n\nconst Logo = styled.span`\n  font-size: 25px;\n  font-family: \"Titan One\", cursive;\n`;\n\nconst Left = styled.span`\n  font-weight: bold;\n`;\n\nconst Lab = styled.a`\n  font-size: 16px;\n  margin-left: 10px;\n  font-family: \"webfont\" !important;\n  color: ${(props) => props.theme.font};\n  text-decoration: none;\n\n  &:hover {\n    color: ${(props) => props.theme.font};\n  }\n`;\n\nconst HeaderWrapper = styled.header`\n  margin: 0 auto;\n  max-width: 1200px;\n  background: ${(props) => props.theme.header};\n  width: 90%;\n  height: 100%;\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  color: ${(props) => props.theme.font};\n`;\n\nconst Nav = styled.nav`\n  & ul {\n    margin-bottom: 0;\n  }\n  & li {\n    display: inline-block;\n    margin-left: 1em;\n    list-style-type: none;\n  }\n  & a {\n    color: ${(props) => props.theme.font};\n    font-weight: bold;\n    padding: 0.5em 0;\n  }\n\n  & a:hover {\n    border-bottom: 1px solid white;\n  }\n\n  @media (max-width: 700px) {\n    display: ${(props) => (props.show ? \"block\" : \"none\")};\n    position: absolute;\n    top: 100%;\n    right: 0;\n    z-index: 10;\n\n    & ul {\n      background: black;\n      padding: 0 2.5em 0 2em;\n    }\n    & li {\n      display: block;\n    }\n  }\n`;\n\nconst ToggleButton = styled(Button)`\n  display: none;\n  transform: rotate(${(props) => props.angle}deg);\n  @media (max-width: 700px) {\n    display: block;\n  }\n`;\n\nconst Overlayer = styled.div`\n  position: fixed;\n  width: 100%;\n  height: 100%;\n  left: 0;\n  top: 0;\n  background: rgba(0, 0, 0, 0.5);\n  z-index: 2;\n`;\n\nfunction Header({ setOpenForm }) {\n  const [show, setShow] = useState(false);\n  const navs = [\n    {\n      name: \"概览\",\n      id: \"overview\",\n    },\n    {\n      name: \"介绍\",\n      id: \"introduction\",\n    },\n    {\n      name: \"舆论可视化\",\n      id: \"hots\",\n    },\n    {\n      name: \"新闻可视化\",\n      id: \"news\",\n    },\n    // {\n    //   name: \"发现\",\n    //   id: \"story\",\n    // },\n  ];\n\n  const menu = (\n    <Menu>\n      <Menu.Item>\n        <a\n          target=\"_blank\"\n          rel=\"noopener noreferrer\"\n          href=\"https://github.com/pearmini\"\n        >\n          前端可视化\n        </a>\n      </Menu.Item>\n      <Menu.Item>\n        <a\n          target=\"_blank\"\n          rel=\"noopener noreferrer\"\n          href=\"https://github.com/vivym\"\n        >\n          后端爬虫\n        </a>\n      </Menu.Item>\n      <Menu.Item>\n        <a\n          target=\"_blank\"\n          rel=\"noopener noreferrer\"\n          href=\"https://github.com/Kaiyiwing\"\n        >\n          数据处理\n        </a>\n      </Menu.Item>\n    </Menu>\n  );\n  return (\n    <>\n      <Container>\n        <HeaderWrapper>\n          <Left>\n            <Logo>nCoVIS</Logo>\n            <Lab href=\"https://vislab.wang/\" target=\"_blank\">\n              山东大学 VisLab\n            </Lab>\n          </Left>\n          <Nav show={show}>\n            <ul>\n              {navs.map((nav) => (\n                <li key={nav.name}>\n                  <a onClick={() => setShow(false)} href={\"#\" + nav.id}>\n                    {nav.name}\n                  </a>\n                </li>\n              ))}\n              {/* <li>\n                <a\n                  onClick={(e) => {\n                    e.preventDefault();\n                    setOpenForm(true);\n                  }}\n                >\n                  投稿\n                </a>\n              </li> */}\n              <li>\n                <Dropdown overlay={menu}>\n                  <a onClick={(e) => e.preventDefault()}>联系我们</a>\n                </Dropdown>\n              </li>\n            </ul>\n          </Nav>\n          <ToggleButton\n            icon=\"menu\"\n            ghost\n            onClick={() => setShow(!show)}\n            angle={show ? 90 : 0}\n          />\n        </HeaderWrapper>\n      </Container>\n      {show && <Overlayer onClick={() => setShow(false)} />}\n    </>\n  );\n}\nexport default connect(null, {\n  setOpenForm: (value) => ({\n    type: \"comment/setOpenForm\",\n    payload: { value },\n  }),\n})(Header);\n","import React from \"react\";\nimport styled from \"styled-components\";\nconst Container = styled.div`\n  background: black;\n  height: 300px;\n  width: 100%;\n`;\n\nexport default function () {\n  return <Container></Container>;\n}\n","import React from \"react\";\nimport \"antd/dist/antd.css\";\nimport styled, { ThemeProvider } from \"styled-components\";\n\nimport OverviewPanel from \"./components/OverviewPanel\";\nimport IntroductionPanel from \"./components/IntroductionPanel\";\nimport HotsPanel from \"./components/HotsPanel\";\nimport NewsPanel from \"./components/NewsPanel\";\nimport DiscoveryPanel from \"./components/DiscoveryPanel\";\nimport Header from \"./components/Header\";\nimport Footer from \"./components/Footer\";\n\nconst Content = styled.div`\n  margin: 0 auto;\n  width: 90%;\n  max-width: 1200px;\n`;\n\nfunction App() {\n  const theme = {\n    header: \"black\",\n    content: \"#f9f9f9\",\n    font: \"white\",\n  };\n  return (\n    <ThemeProvider theme={theme}>\n      <Header />\n      <Content>\n        <OverviewPanel />\n        <IntroductionPanel />\n        <HotsPanel />\n        <NewsPanel />\n        {/* <DiscoveryPanel /> */}\n      </Content>\n      {/* <Footer /> */}\n    </ThemeProvider>\n  );\n}\n\nexport default App;\n","import * as d3All from \"d3\";\nimport * as d3Array from \"d3-array\";\nimport ApolloClient from \"apollo-boost\";\nimport { gql } from \"apollo-boost\";\nimport { InMemoryCache } from \"apollo-cache-inmemory\";\nimport { persistCache } from \"apollo-cache-persist\";\nimport cloud from \"d3-cloud\";\nimport \"array-flat-polyfill\";\n\nconst d3 = {\n  ...d3All,\n  ...d3Array,\n};\n\nconst cache = new InMemoryCache({});\n\n(async () =>\n  await persistCache({\n    cache,\n    storage: window.localStorage,\n    maxSize: false,\n  }))();\n\nconst client = new ApolloClient({\n  cache,\n  uri:\n    \"https://api.ncovis.mllab.cn/graphql?token=fuBwv4pYedUUaHycszp21pMmloRf1TQS\",\n});\n\nfunction getHots({ name, from, limit = 10 }) {\n  return client.query({\n    query: gql`\n      {\n        ${name}(\n          limit:${limit}, \n          ${from ? `from:${from}` : \"\"}\n        ){\n          paging{\n            total\n            nextCursor\n          }\n          data {\n            time\n            keywords {\n              name\n              weight\n            }\n            topics {\n              heat\n              title\n            }\n          }\n        }\n      }\n    `,\n  });\n}\n\nfunction getTimeRange(platform = \"zhihu\") {\n  return client.query({\n    query: gql`{\n      ${platform} {\n        data{\n          time\n        }\n      }\n    }`,\n  });\n}\n\nfunction getWordsOfTopics({ name, time }) {\n  return client.query({\n    query: gql`\n      {\n        ${name}(\n          time:${time}\n        ){\n          data {\n            topics {\n              keywords {\n                name\n                weight\n              }\n              heat\n              title\n            }\n          }\n        }\n      }\n    `,\n  });\n}\n\nfunction words(data, n = 20) {\n  const w = new Set([\n    \"没有\",\n    \"知道\",\n    \"可能\",\n    \"觉得\",\n    \"时候\",\n    \"应该\",\n    \"还有\",\n    \"出来\",\n    \"需要\",\n    \"事情\",\n    \"大家\",\n    \"还有\",\n    \"看到\",\n  ]);\n  return data\n    .map((d) => ({\n      text: d.name,\n      value: d.weight || d.value,\n    }))\n    .filter((d) => !w.has(d.text))\n    .sort((a, b) => b.value - a.value)\n    .slice(0, n);\n}\n\nfunction computeWordCloud(data, get) {\n  return new Promise((resolve) => {\n    cloud()\n      .size([900, 600])\n      .words(data)\n      .padding(5)\n      .rotate(0)\n      .fontSize((d) => Math.sqrt(d.value) * 80)\n      .on(\"end\", (words) => resolve(get(words)))\n      .start();\n  });\n}\n\nfunction computePreFramesWordsCloud(data) {\n  return Promise.all(\n    data.map(({ keywords, title }) =>\n      computeWordCloud(words(keywords), (words) => ({\n        keywords: words,\n        title,\n      }))\n    )\n  );\n}\n\nfunction computeFramesWordCloud(data) {\n  return Promise.all(\n    data.map(([date, d]) =>\n      computeWordCloud(words(d), (words) => [date, words])\n    )\n  );\n}\n\nfunction preprocess(raw, start, interval) {\n  const data = raw.map(({ time, ...rest }) => ({ time: time * 1000, ...rest }));\n  const range = d3.extent(data, (d) => d.time);\n  const begin = start + (((range[0] - start) / interval) | 0) * interval;\n  const end = begin + Math.ceil((range[1] - begin) / interval) * interval + 1;\n  const listTicks = d3.range(begin, end, interval);\n  const wordTicks = d3.range(begin, end, interval * 5);\n  const words = new Set(data.flatMap((d) => d.keywords.map((d) => d.name)));\n  const topics = new Set(data.flatMap((d) => d.topics.map((d) => d.title)));\n\n  const datewords = Array.from(\n    d3.rollup(\n      data,\n      ([d]) =>\n        d3.rollup(\n          d.keywords,\n          ([{ weight }]) => weight,\n          (d) => d.name\n        ),\n      (d) => d.time\n    )\n  );\n\n  const datetopics = Array.from(\n    d3.rollup(\n      data,\n      ([d]) =>\n        d3.rollup(\n          d.topics,\n          ([{ heat }]) => heat,\n          (d) => d.title\n        ),\n      (d) => d.time\n    )\n  ).sort(([a], [b]) => a - b);\n\n  return {\n    listKeyframes: listTicks\n      .map((tick) => interploate(datetopics, topics, tick))\n      .map(([date, data]) => [\n        date,\n        data.map((d, index) => ({ ...d, rank: index })).slice(0, 10),\n      ]),\n    wordsKeyframes: wordTicks.map((tick) =>\n      interploate(datewords, words, tick)\n    ),\n  };\n}\n\nfunction interploate(data, names, time) {\n  const bisect = d3.bisector((d) => d[0]).left;\n  const i = bisect(data, time, 0, data.length - 1),\n    a = data[i];\n  if (!i) return [time, interpolateValues(names, (key) => a[1].get(key))];\n\n  const b = data[i - 1],\n    t = (time - a[0]) / (b[0] - a[0]);\n  return [\n    time,\n    interpolateValues(names, (key) => {\n      const v1 = a[1].get(key) || 0;\n      const v2 = b[1].get(key) || 0;\n      return v1 * (1 - t) + v2 * t;\n    }),\n  ];\n}\n\nfunction interpolateValues(names, value) {\n  const data = Array.from(names, (name) => ({\n    name,\n    value: value(name) || 0,\n  }));\n  data.sort((a, b) => d3.descending(a.value, b.value));\n  return data;\n}\n\nfunction unique(data, key) {\n  return data\n    .map((d, index) => {\n      if (index === 0 || key(data[index - 1]) !== key(d)) return [...d, true];\n      else return [...d, false];\n    })\n    .filter((d) => d[2])\n    .map(([date, data]) => [date, data]);\n}\n\nexport default {\n  namespace: \"hots\",\n  state: {\n    dataByName: d3.map(),\n    timeByName: d3.map(),\n    wordsByTime: d3.map(),\n    selectedWords: [],\n    loading: false,\n  },\n  reducers: {\n    setSelectedCountries(state, action) {\n      const keys = action.payload;\n      return { ...state, selectedCountries: keys };\n    },\n    addWords: (state, action) => {\n      const { words, time } = action.payload;\n      const { wordsByTime } = state;\n      wordsByTime.set(time, words);\n      return { ...state, wordsByTime };\n    },\n    setSelectedWords: (state, action) => ({\n      ...state,\n      selectedWords: action.payload,\n    }),\n    addTimeRange: (state, action) => {\n      const { range, name } = action.payload;\n      const { timeByName } = state;\n      timeByName.set(name, range);\n      return { ...state, timeByName };\n    },\n    updateDataByTime: (state, action) => {\n      const { name, from, to } = action.payload;\n      const { timeByName } = state;\n      const oldRange = timeByName.get(name);\n      const newRange = oldRange.map((d, i) => ({\n        ...d,\n        request: i >= from && i < to ? true : d.request,\n      }));\n      timeByName.set(name, newRange);\n      return { ...state, timeByName };\n    },\n    addFrames: (state, action) => {\n      const { name, listKeyframes, cloudsKeyframes } = action.payload;\n      const { dataByName } = state;\n      const value = dataByName.get(name);\n      if (!value) {\n        dataByName.set(name, {\n          listKeyframes,\n          cloudsKeyframes,\n        });\n      } else {\n        const newListKeyframes = unique(\n          [...value.listKeyframes, ...listKeyframes].sort(\n            (a, b) => a[0] - b[0]\n          ),\n          (d) => d[0]\n        );\n        const newCloudsKeyframes = unique(\n          [...value.cloudsKeyframes, ...cloudsKeyframes].sort(\n            (a, b) => a[0] - b[0]\n          ),\n          (d) => d[0]\n        );\n\n        dataByName.set(name, {\n          listKeyframes: newListKeyframes,\n          cloudsKeyframes: newCloudsKeyframes,\n        });\n      }\n\n      return { ...state, dataByName };\n    },\n  },\n  effects: {\n    *getWords(action, { call, put }) {\n      try {\n        const { time, name, title } = action.payload;\n        const data = yield call(getWordsOfTopics, { name, time });\n        const words = data.data[name].data[0].topics;\n        const wordsWithLayout = yield call(computePreFramesWordsCloud, words);\n        const selectedWords = wordsWithLayout.find((d) => d.title === title);\n        const keywords = selectedWords ? selectedWords.keywords : [];\n        yield put({ type: \"addWords\", payload: { wordsWithLayout, time } });\n        yield put({ type: \"setSelectedWords\", payload: keywords });\n      } catch (e) {\n        console.error(e);\n      }\n    },\n    *getTime(action, { call, put }) {\n      try {\n        const { name } = action.payload;\n        const timeData = yield call(getTimeRange, name);\n        const range = timeData.data[name].data\n          .map(({ time }) => time * 1000)\n          .map((d) => ({ time: d, request: false }))\n          .sort((a, b) => a.time - b.time);\n\n        yield put({ type: \"addTimeRange\", payload: { range, name } });\n      } catch (e) {\n        console.error(e);\n      }\n    },\n    *getData(action, { call, put }) {\n      const { name, interval, tick, limit, start } = action.payload;\n      console.log(tick.time);\n      try {\n        const result = yield call(getHots, {\n          name,\n          from: ((tick.time / 1000) | 0) - 1, // 这里的 from 是大于当前时刻，所以需要减少 1\n          limit: limit + 1,\n        });\n        const data = result.data[name].data;\n        const { listKeyframes, wordsKeyframes } = preprocess(\n          data,\n          start,\n          interval\n        );\n        const cloudsKeyframes = yield call(\n          computeFramesWordCloud,\n          wordsKeyframes\n        );\n\n        // 加入关键帧\n        yield put({\n          type: \"addFrames\",\n          payload: { name, listKeyframes, cloudsKeyframes },\n        });\n      } catch (e) {\n        console.error(e);\n      }\n    },\n  },\n};\n","import ApolloClient from \"apollo-boost\";\nimport { gql } from \"apollo-boost\";\nimport { InMemoryCache } from \"apollo-cache-inmemory\";\nimport { persistCache } from \"apollo-cache-persist\";\nimport \"array-flat-polyfill\";\n\nconst cache = new InMemoryCache({});\n\n(async () =>\n  await persistCache({\n    cache,\n    storage: window.localStorage,\n  }))();\n\nconst client = new ApolloClient({\n  cache,\n  uri:\n    \"https://api.ncovis.mllab.cn/graphql?token=fuBwv4pYedUUaHycszp21pMmloRf1TQS\",\n});\n\nfunction getNews(region, date) {\n  return client.query({\n    query: gql`\n      {\n        news(region: \"${region}\", date: \"${date}T16:00:00Z\") {\n          news {\n            date\n            tags {\n              name\n              count\n            }\n            keywords {\n              name\n              color\n              fontSize\n              transX\n              transY\n              fillX\n              fillY\n              rotate\n            }\n            fillingWords {\n              name\n              color\n              fontSize\n              transX\n              transY\n              fillX\n              fillY\n              rotate\n            }\n          }\n        }\n      }\n    `,\n  });\n}\n\nexport default {\n  namespace: \"news\",\n  state: {\n    newsByRegion: new Map(),\n  },\n  reducers: {\n    addNews: (state, action) => {\n      const { region, dataByDate } = action.payload;\n      const { newsByRegion } = state;\n      newsByRegion.set(region, dataByDate);\n      return { ...state, newsByRegion };\n    },\n  },\n  effects: {\n    *getNewsData(action, { call, put }) {\n      try {\n        // 这里要处理一下时间的问题\n        const { region, date } = action.payload;\n        const result = yield call(getNews, region, date);\n        const { tags, keywords, fillingWords } = result.data.news.news[0];\n        const data = {\n          tags,\n          words: {\n            keywords,\n            fillingWords,\n          },\n        };\n        const dataByDate = new Map([[date, data]]);\n        yield put({\n          type: \"addNews\",\n          payload: { region, dataByDate },\n        });\n      } catch (e) {\n        console.error(e);\n      }\n    },\n  },\n};\n","import ApolloClient from \"apollo-boost\";\nimport { gql } from \"apollo-boost\";\nimport { InMemoryCache } from \"apollo-cache-inmemory\";\nimport { persistCache } from \"apollo-cache-persist\";\nimport * as d3 from \"d3-array\";\nconst cache = new InMemoryCache({});\n\n(async () =>\n  await persistCache({\n    cache,\n    storage: window.localStorage,\n  }))();\n\nconst client = new ApolloClient({\n  cache,\n  uri:\n    \"https://api.ncovis.mllab.cn/graphql?token=fuBwv4pYedUUaHycszp21pMmloRf1TQS\",\n});\n\nfunction getTotal() {\n  return client.query({\n    query: gql`\n      {\n        ncovOverall {\n          time\n          confirmed\n          confirmedIncr\n          cured\n          curedIncr\n          deadIncr\n          dead\n          remainingConfirmed\n          remainingConfirmedIncr\n          global {\n            confirmed\n            confirmedIncr\n            cured\n            curedIncr\n            deadIncr\n            dead\n            remainingConfirmed\n            remainingConfirmedIncr\n          }\n        }\n      }\n    `,\n  });\n}\n\nfunction preprocess(data) {\n  const { global, time, ...china } = data;\n  const format = (\n    {\n      confirmed,\n      confirmedIncr,\n      cured,\n      curedIncr,\n      deadIncr,\n      dead,\n      remainingConfirmed,\n      remainingConfirmedIncr,\n    },\n    name\n  ) => ({\n    name,\n    data: [\n      {\n        name: \"累计确诊\",\n        value: confirmed,\n        change: confirmedIncr,\n      },\n      {\n        name: \"现存确诊\",\n        value: remainingConfirmed,\n        change: remainingConfirmedIncr,\n      },\n      {\n        name: \"累计治愈\",\n        value: cured,\n        change: curedIncr,\n      },\n      { name: \"累计死亡\", value: dead, change: deadIncr },\n    ],\n  });\n  return {\n    time: time * 1000,\n    data: [format(global, \"全球\"), format(china, \"全国\")],\n  };\n}\n\nexport default {\n  namespace: \"total\",\n  state: {\n    time: new Date().getTime(),\n    data: [\n      {\n        name: \"全球\",\n        data: [\n          {\n            name: \"累计确诊\",\n            value: 0,\n            change: 0,\n          },\n          {\n            name: \"现存确诊\",\n            value: 0,\n            change: 0,\n          },\n          {\n            name: \"累计治愈\",\n            value: 0,\n            change: 0,\n          },\n          { name: \"累计死亡\", value: 0, change: 0 },\n        ],\n      },\n      {\n        name: \"全国\",\n        data: [\n          {\n            name: \"累计确诊\",\n            value: 0,\n            change: 0,\n          },\n          {\n            name: \"现存确诊\",\n            value: 0,\n            change: 0,\n          },\n          {\n            name: \"累计治愈\",\n            value: 0,\n            change: 0,\n          },\n          { name: \"累计死亡\", value: 0, change: 0 },\n        ],\n      },\n    ],\n  },\n  reducers: {\n    setData: (state, action) => ({ ...state, ...action.payload }),\n  },\n  effects: {\n    *getData(action, { call, put }) {\n      try {\n        const result = yield call(getTotal);\n        const ncovOverall = result.data.ncovOverall;\n        const data = preprocess(ncovOverall);\n        yield put({\n          type: \"setData\",\n          payload: data,\n        });\n      } catch (e) {\n        console.error(e);\n      }\n    },\n  },\n};\n","function requestData({ code, type, index }) {\n  return new Promise((resolve) => {\n    setTimeout(() => {\n      resolve({\n        isAdmin: true,\n        pages: 20,\n        data: [\n          {\n            id: 1,\n            title: \"Vue\",\n            url: \"https://www.baidu.com\",\n            des:\n              \"下图中右边是热力图，其中每一个格子代表一个地区，该格子颜色越深，表示该地区当天相对前一天的变化越剧烈。在这里你不仅能看各个省份（湖北省、山东省等）和各个直辖市（北京市、上海市）的变化情况，还可以通过点击下图中右边的树，来对区域进行合并，从而查看各个分区（华中地区、华南地区等），甚至全国的变化。\",\n            createTime: new Date(\"2020-03-16\"),\n            author: \"尤小溪\",\n            reading: 2,\n            isTop: 1,\n            isShow: 1,\n            words: [],\n          },\n          {\n            id: 2,\n            title: \"React\",\n            url: \"https://www.baidu.com\",\n            des:\n              \"下图中右边是热力图，其中每一个格子代表一个地区，该格子颜色越深，表示该地区当天相对前一天的变化越剧烈。在这里你不仅能看各个省份（湖北省、山东省等）和各个直辖市（北京市、上海市）的变化情况，还可以通过点击下图中右边的树，来对区域进行合并，从而查看各个分区（华中地区、华南地区等），甚至全国的变化。\",\n            createTime: new Date(\"2020-03-11\"),\n            reading: 10,\n            isTop: 0,\n            isShow: 1,\n            author: \"Facebook\",\n          },\n          {\n            id: 3,\n            title: \"Angular\",\n            url: \"https://www.baidu.com\",\n            des:\n              \"下图中右边是热力图，其中每一个格子代表一个地区，该格子颜色越深，表示该地区当天相对前一天的变化越剧烈。在这里你不仅能看各个省份（湖北省、山东省等）和各个直辖市（北京市、上海市）的变化情况，还可以通过点击下图中右边的树，来对区域进行合并，从而查看各个分区（华中地区、华南地区等），甚至全国的变化。\",\n            createTime: new Date(\"2020-03-13\"),\n            reading: 5,\n            isTop: 0,\n            isShow: 0,\n            author: \"不晓得\",\n          },\n        ],\n      });\n    }, 1000);\n  });\n}\n\nexport default {\n  namespace: \"comment\",\n  state: {\n    openForm: false,\n    isAdmin: false,\n    data: [],\n    pages: 0,\n  },\n  reducers: {\n    setOpenForm(state, action) {\n      const { value } = action.payload;\n      return { ...state, openForm: value };\n    },\n    setAdmin(state) {\n      return { ...state, isAdmin: true };\n    },\n    setData(state, action) {\n      return { ...state, ...action.payload };\n    },\n    readMore(state, action) {\n      const { id } = action.payload;\n      const data = state.data.slice();\n      const c = data.find((d) => d.id === id);\n      c && c.reading++;\n      // 同步数据\n      return { ...state, data };\n    },\n    addComment(state, action) {\n      const { data } = state;\n      const c = {\n        ...action.payload,\n        createTime: new Date(),\n        reading: 0,\n        isTop: 0,\n        isShow: 0,\n      };\n      data.push(c);\n\n      // 同步数据\n      return { ...state, data };\n    },\n    setShow(state, action) {\n      const { id } = action.payload;\n      const data = state.data.slice();\n      const c = data.find((d) => d.id === id);\n      c && (c.isShow = c.isShow === 1 ? 0 : 1);\n\n      // 同步数据\n      return { ...state, data };\n    },\n    setTop(state, action) {\n      const { id } = action.payload;\n      const data = state.data.slice();\n      const c = data.find((d) => d.id === id);\n      c && (c.isTop = c.isTop === 1 ? 0 : 1);\n\n      // 同步数据\n      return { ...state, data };\n    },\n    deleteComment(state, action) {\n      const { id } = action.payload;\n      const c = state.data.find((d) => d.id === id);\n      const index = state.data.indexOf(c);\n      const data = state.data.slice();\n      data.splice(index, 1);\n\n      // 同步数据\n      return { ...state, data };\n    },\n  },\n  effects: {\n    *getData(action, { call, put }) {\n      try {\n        const { index, type } = action.payload;\n        const code = localStorage.getItem(\"ncovis\");\n        const res = yield call(requestData, {\n          code,\n          index,\n          type,\n        });\n        if (res.isAdmin) yield put({ type: \"setAdmin\" });\n        yield put({\n          type: \"setData\",\n          payload: {\n            data: res.data || [],\n            pages: res.pages,\n          },\n        });\n      } catch (e) {\n        console.error(e);\n      }\n    },\n  },\n};\n","import regionTree from \"../assets/data/region_options.json\";\nimport * as d3All from \"d3\";\nimport * as d3Array from \"d3-array\";\nimport ApolloClient from \"apollo-boost\";\nimport { gql } from \"apollo-boost\";\nimport { InMemoryCache } from \"apollo-cache-inmemory\";\nimport { persistCache } from \"apollo-cache-persist\";\nimport \"array-flat-polyfill\";\n\nconst d3 = {\n  ...d3All,\n  ...d3Array,\n};\n\nconst cache = new InMemoryCache({});\n\n(async () =>\n  await persistCache({\n    cache,\n    storage: window.localStorage,\n  }))();\n\nconst client = new ApolloClient({\n  cache,\n  uri:\n    \"https://api.ncovis.mllab.cn/graphql?token=fuBwv4pYedUUaHycszp21pMmloRf1TQS\",\n});\n\nfunction getNcov(country = \"中国\") {\n  return client.query({\n    query: gql`\n      {\n        ncov(country:\"${country}\") {\n          date\n          confirmed\n          dead\n          cured\n          region\n        }\n      }\n    `,\n  });\n}\n\nfunction getAllCountry() {\n  return client.query({\n    query: gql`\n      {\n        ncov(date: \"2020-04-07\") {\n          country\n        }\n      }\n    `,\n  });\n}\n\nfunction preprocess(data, days, country = \"中国\") {\n  const root = d3.hierarchy(regionTree);\n  const regionvalues = d3\n    .rollups(\n      data,\n      ([d]) => d,\n      (d) => d.region,\n      (d) => d.date\n    )\n    .filter(([region]) => region !== \"中国\") // 这里有点奇怪\n    .map(([region, data]) => [\n      region,\n      data.sort((a, b) => new Date(a[0]) - new Date(b[0])),\n    ])\n    .map(([region, data]) => [\n      region,\n      days.map((d) => interpolateValues(data, d)),\n    ]);\n\n  if (country === \"中国\") {\n    root.eachAfter((node) => {\n      if (!node.children) return;\n      const newRegion = sum(\n        node.children.map((d) => d.data.title),\n        regionvalues,\n        node.data.title,\n        days\n      );\n      regionvalues.push(newRegion);\n    });\n  }\n\n  return regionvalues.flatMap(([, data]) => data);\n}\n\nfunction interpolateValues(values, date) {\n  const bisect = d3.bisector(([time]) => new Date(time)).left;\n  const i = bisect(values, new Date(date), 0, values.length - 1),\n    a = values[i];\n  if (!i)\n    return {\n      region: a[1].region,\n      date,\n      data: {\n        confirmed: a[1].confirmed,\n        dead: a[1].dead,\n        cured: a[1].cured,\n      },\n    };\n  const b = values[i - 1],\n    t = (new Date(date) - new Date(a[0])) / (new Date(b[0]) - new Date(a[0]));\n\n  const interpolate = (key) => Math.ceil(a[1][key] * (1 - t) + b[1][key] * t);\n  return {\n    region: b[1].region,\n    date,\n    data: {\n      confirmed: interpolate(\"confirmed\"),\n      dead: interpolate(\"dead\"),\n      cured: interpolate(\"cured\"),\n    },\n  };\n}\n\nfunction sum(regions, values, title, days) {\n  const data = days.map((day) => ({\n    region: title,\n    date: day,\n    data: {\n      confirmed: 0,\n      cured: 0,\n      dead: 0,\n    },\n  }));\n\n  const dataByDate = d3.rollup(\n    data,\n    ([d]) => d,\n    (d) => d.date\n  );\n  for (let r of regions) {\n    const [, value] = values.find(([region]) => region === r);\n    for (let { date, data } of value) {\n      const d = dataByDate.get(date);\n      d.data.confirmed += data.confirmed;\n      d.data.cured += data.cured;\n      d.data.dead += data.dead;\n    }\n  }\n  return [title, data];\n}\n\nexport default {\n  namespace: \"ncov\",\n  state: {\n    dataByRegion: new Map(),\n    dataByDate: new Map(),\n    selectedDate: \"\",\n    range: [],\n    countries: [],\n    widthData: new Set(),\n    total: [],\n    selectedCountries: {\n      hots: [],\n      news: [],\n    },\n  },\n  reducers: {\n    addCountryData(state, action) {\n      const { dataByDate, dataByRegion, country, name } = action.payload;\n      const { selectedCountries, widthData } = state;\n      selectedCountries[name].push(country);\n      widthData.add(country);\n      return { ...state, dataByDate, dataByRegion, selectedCountries };\n    },\n    setSelectedCountries(state, action) {\n      const { keys, name } = action.payload;\n      const { selectedCountries } = state;\n      selectedCountries[name] = keys;\n      return { ...state, selectedCountries };\n    },\n    init(state, action) {\n      return { ...state, ...action.payload };\n    },\n    setSelectedTime: (state, action) => ({\n      ...state,\n      selectedTime: action.payload,\n    }),\n    setSelectedDate: (state, action) => ({\n      ...state,\n      selectedDate: action.payload,\n    }),\n  },\n  effects: {\n    *getCountryData(action, { call, put }) {\n      const { country, total, dataByDate, dataByRegion, name } = action.payload;\n      const result = yield call(getNcov, country);\n      const news = result.data.ncov;\n      const data = preprocess(news, total, country);\n      const countryByDate = d3.rollup(\n        data,\n        ([d]) => d.data,\n        (d) => d.date\n      );\n      const countryByRegion = d3.rollup(\n        data,\n        ([d]) => d,\n        (d) => d.region,\n        (d) => d.date\n      );\n\n      for (let [key, value] of dataByDate.entries()) {\n        const d = countryByDate.get(key);\n        value.push({ region: country, data: d });\n        dataByDate.set(key, value);\n      }\n\n      dataByRegion.set(country, countryByRegion.get(country));\n\n      yield put({\n        type: \"addCountryData\",\n        payload: {\n          dataByDate,\n          dataByRegion,\n          country,\n          name,\n        },\n      });\n    },\n    *getData(action, { call, put }) {\n      try {\n        const country = \"中国\";\n        const ncovResult = yield call(getNcov, country);\n        const countryResult = yield call(getAllCountry);\n        const news = ncovResult.data.ncov;\n        const countries = Array.from(\n          new Set(\n            countryResult.data.ncov\n              .map((d) => d.country)\n              .filter((d) => d !== \"\")\n          )\n        );\n        const total = Array.from(new Set(news.map((d) => d.date)));\n        const data = preprocess(news, total, country),\n          dataByRegion = d3.rollup(\n            data,\n            ([d]) => d,\n            (d) => d.region,\n            (d) => d.date\n          ),\n          range = d3.extent(total).map((d) => new Date(d)),\n          dataByDate = d3.rollup(\n            data,\n            (data) =>\n              data.map((d) => ({\n                region: d.region,\n                data: d.data,\n              })),\n            (d) => d.date\n          ),\n          selectedTime = new Date(range[0]).getTime(),\n          selectedCountries = {\n            hots: [\"中国\"],\n            news: [\"中国\"],\n          },\n          widthData = new Set([\"中国\"]),\n          selectedDate = \"2020-03-27\";\n\n        yield put({\n          type: \"init\",\n          payload: {\n            dataByRegion,\n            dataByDate,\n            selectedDate,\n            selectedTime,\n            country,\n            range,\n            selectedCountries,\n            total,\n            widthData,\n            countries,\n          },\n        });\n      } catch (e) {\n        console.error(e);\n      }\n    },\n  },\n};\n","import React from \"react\";\nimport * as serviceWorker from \"./serviceWorker\";\n\nimport createLoading from \"dva-loading\";\nimport dva from \"dva\";\n\nimport App from \"./App\";\nimport hotsModel from \"./models/hots\";\nimport newsModel from \"./models/news\";\nimport totalModel from \"./models/total\";\nimport commentModel from \"./models/comment\";\nimport ncovModel from \"./models/ncov\";\nimport \"./index.css\";\n\nconst app = new dva();\n\napp.use(createLoading());\napp.model(ncovModel);\napp.model(hotsModel);\napp.model(newsModel);\napp.model(totalModel);\napp.model(commentModel);\n\napp.router(() => <App />);\n\napp.start(\"#root\");\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}