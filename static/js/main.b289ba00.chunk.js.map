{"version":3,"sources":["assets/images/china.png","assets/images/zhihu.png","assets/images/talk.jpg","assets/images/news.jpg","assets/images/hots.jpg","assets/images/article/1.png","assets/images/article/2.png","assets/images/article/3.png","assets/images/article/4.png","assets/images/article/5.png","assets/images/article/6.png","serviceWorker.js","components/Header.js","components/Footer.js","pages/overview/index.js","pages/introduction/index.js","utils/formatDate.js","pages/comment/index.js","utils/str2num.js","utils/mouse.js","components/Card.js","hooks/useSize.js","utils/download.js","components/Svg.js","pages/ncovis/banner/TreeMatrix.js","pages/ncovis/banner/HeatMap.js","pages/ncovis/banner/DateMap.js","pages/ncovis/banner/Tooltip.js","pages/ncovis/banner/Areachart.js","utils/tree.js","pages/ncovis/index.js","pages/hotsvis/banner/Timeline.js","pages/hotsvis/banner/BarRace.js","components/Canvas.js","pages/hotsvis/banner/StoryTelling.js","pages/hotsvis/index.js","utils/memorizedColor.js","utils/randomColor.js","pages/newsvis/banner/Shape.js","pages/newsvis/banner/Piechart.js","pages/newsvis/index.js","pages/vis/index.js","hooks/useAnimation.js","App.js","pages/overview/service.js","pages/overview/model.js","pages/comment/model.js","pages/comment/service.js","utils/request.js","pages/vis/service.js","pages/vis/model.js","pages/ncovis/service.js","pages/ncovis/model.js","pages/hotsvis/service.js","pages/hotsvis/model.js","pages/newsvis/service.js","model.js","pages/newsvis/model.js","index.js"],"names":["module","exports","Boolean","window","location","hostname","match","Container","styled","div","props","theme","header","Logo","span","Left","Lab","a","font","HeaderWrapper","Nav","nav","show","ToggleButton","Button","angle","Overlayer","connect","setOpen","value","type","payload","useState","setShow","menu","Item","target","rel","href","name","id","map","key","onClick","e","preventDefault","overlay","icon","ghost","TabPane","Tabs","height","An","Title","h1","Row","China","img","Zhihu","Time","Box","CardContainer","Card","Change","color","Value","Name","DashBoard","overview","loading","models","getOverview","useWindowSize","tab","setTab","data","time","colorByName","累计确诊","累计死亡","累计治愈","现存确诊","useEffect","onChange","activeKey","style","width","maxWidth","d","change","Math","abs","date","Date","getFullYear","getMonth","getDate","formate","src","zhihuURL","chinaURL","Intro","TalkImage","IntroductionPanel","talkImage","wrapper","year","month","VisImage","Wrapper","VoteButton","ContentWrapper","Avatar","Image","Main","Sub","Right","List","title","des","url","createTime","author","isTop","imageUrl","open","schemeTableau10","str","Array","from","reduce","total","ch","codePointAt","length","avatarColor","slice","className","formatDate","comment","list","isOpen","newsImage","sort","b","onClose","visible","bodyStyle","paddingBottom","zIndex","evevt","SVGelement","clientX","clientY","getBoundingClientRect","left","top","realWidth","realHeight","mouseX","mouseY","getBBox","x","d3","y","attrs","zoom","position","transform","marginTop","Layer","MiddleSpin","Spin","MiddleEmpty","Empty","Content","ul","StyledDrawer","Drawer","Header","Slot","StyledIcon","Icon","ZoomIcon","State","description","image","PRESENTED_IMAGE_SIMPLE","children","onDownload","onDownloadPng","onDownloadSvg","nodata","introduction","slot","hasZoom","rest","ref","useRef","size","setSize","ResizeObserver","entry","contentRect","observer","node","current","observe","disconnect","useSize","setZoom","more","setMore","pop","setPop","content","onClickItem","cb","placement","trigger","arrowPointAtCenter","stopPropagation","closable","getContainer","serialize","svg","xmlns","cloneNode","fragment","walker","document","createTreeWalker","NodeFilter","SHOW_ELEMENT","nextNode","currentNode","attributes","attr","includes","replace","setAttributeNS","string","XMLSerializer","serializeToString","Blob","blob","filename","URL","createObjectURL","createElement","download","click","WhiteSvg","background","cardProps","resolve","reject","promise","Promise","n","onerror","onload","rect","canvas","context","getContext","scale","drawImage","toBlob","rasterize","then","fontFamily","d3All","d3Array","dataByRegion","selectedRegion","selectedDate","setSelectedDate","setSelectedRegion","selectedType","setFocusRegion","colors","all","highlightColor","normalColor","highlightRectColor","disabledColor","legendWidth","legendHeight","treeData","setTreeData","handleChangeLevel","highlight","setHighlight","Svg","viewBox","start","move","drag","setDrag","hover","setHover","sliderRef","eachAfter","visableH","hideChildren","max","descendants","visableRegions","Set","filter","hide","layers","groups","depth","every","th","region","isNaN","has","days","hset","colorData","margin","timeFormat","labels","treeH","matrixWidth","root","tree","separation","parent","allLeaves","leaves","cellHeight","pairs","min","Infinity","cellWidth","nodeByTitle","rollup","scaleBand","domain","range","get","x0","each","h","x1","colorScale","scaleSequential","extent","specialColorScale","scaleSqrt","interpolate","special","pathLink","linkHorizontal","stroke","strokeSpecial","minusButton","t","version","p-id","cursor","plusButton","handleMouseup","handleMousemove","mouse","maxMove","hasSpecialLegend","find","toggleNode","level","transition","duration","ease","easeExpOut","animateShowChildren","animateHideChildren","animateHideButton","animateHideLegend","end","showChildren","newTreeData","copyTree","nodes","validNodes","allHide","forEach","animateHideAxis","select","selectAll","o","source","s","child","eachBefore","hierarchy","regionsData","old","isSelect","noData","scaleLegend","scaleLinear","specialScaleLegend","legendAxis","axisBottom","ticks","tickSizeOuter","specialLegendAxis","xAxis","tickFormat","call","g","label","this","text","indexOf","addEventListener","removeEventListener","onMouseEnter","onMouseLeave","onMouseOver","l","y1","x2","y2","textAnchor","fill","dy","dx","buttonSize","toggleNodes","fillOpacity","links","link","index","strokeOpacity","strokeWidth","reverse","r","fontSize","hasChildren","some","deleteNodes","splice","push","toggleHighlightNode","onDoubleClick","clipPath","toString","handleClickRect","rx","ry","onMouseDown","focusRegion","countDay","getDay","formatMonth","timeWeek","timeMonth","timeDay","startDate","endDate","valueExtent","startMonth","endMonth","ceil","totalWeek","count","i","months","valueByDate","dates","cellSize","chartWidth","chartHeight","yDay","pathMonth","w","formatDay","fontWeight","selectedCountries","highlightRegions","setHighlightRegions","useMemo","flatMap","dataByDate","Object","keys","obj","dead","confirmed","cured","treeProps","heatMapProps","TreeMatrix","HeatMap","pos","y0","ofx","contentW","rightY","rightX","selectedTime","selectedLevel","setSelectedTime","countries","bisect","secondLevelSet","countriesSet","tip","setTip","hovered","setHovered","first","tipCnt","tw","tipW","tipH","series","nice","legendX","legendY","tipX","tipY","lineX","area","set","remove","onMouseMove","invert","getTime","darker","strokeLinecap","newHighlightRegions","cx","cy","Tooltip","formTree","Option","Select","Control","ncov","getCountryData","country","getNewsData","getData","setSelectedCountries","widthData","setSelectedType","setSelectedLevel","areaPros","dateProps","regions","topLevelSet","findLevel","undefined","mode","isValid","k","alert","newKeys","minWidth","gutter","Areachart","DateMap","Slider","Dot","circle","running","toggleAnimation","changeValue","finish","totalDuration","dragging","dotRef","foramtTime","m","startButton","pauseButton","restartButton","handleMouseUp","handleMouseMove","keyframes","selectedName","showWordsOfTopic","hideWordsOfTopic","selectedTopic","fullTitle","setFullTitle","checked","padding","barSize","bandwidth","bars","rank","textWidth","offset","names","cur","pre","axis","tickSizeInner","Canvas","dependcies","canvasProps","restore","save","selectedWords","draw","interpolateAttrs","initWord","word","words","disappear","interpolateData","fillStyle","fillRect","translate","textAlign","fillText","drawText","textBaseline","drawLabel","message","config","maxCount","hots","loadingHots","loadingCommon","common","setSelectedWords","getWords","options","setSelectedName","updateDataByTime","dataByName","timeByName","wordsByTime","totalTimeRange","computingLayout","setRunning","requestAnimation","setFrame","timeScale","interpolateInterval","stopAnimation","setSelectedTopic","pause","setPause","barColor","colorByKey","Map","c","rc","dk","pk","ck","dc","delete","_","arguments","mc","wordColor","random","newColor","listKeyframes","cloudsKeyframes","hotTimeRange","barsProps","search","sw","keywords","storyProps","timeProps","startAnimation","error","validValue","startDuartion","request","to","tick","limit","interval","requestData","md","BarRace","StoryTelling","Timeline","Shape","fillingWords","transX","transY","rotate","fillX","fillY","console","outerRadius","arc","innerRadius","pie","startAngle","endAngle","PI","arcs","news","loadingNews","newsByRegion","defaultRegion","regionList","regionTree","newsByDate","tags","shapeProps","pieProps","Piechart","timeRange","frameRate","timer","setInterval","step","cancelAnimation","clearInterval","pauseAnimation","useAnimation","ncovProps","hotProps","hour","newsPros","visImage","defaultActiveKey","onTabClick","moment","disabledDate","showTody","App","Footer","cache","InMemoryCache","persistCache","storage","localStorage","client","ApolloClient","uri","query","gql","namespace","state","reducers","action","effects","put","overviewApi","result","ncovOverall","preprocess","global","china","format","confirmedIncr","curedIncr","deadIncr","remainingConfirmed","remainingConfirmedIncr","p1","p2","p3","p4","p5","p6","maxSize","commonApi","res","timeTicks","getNcov","getAllCountry","addCountryData","add","ncovisApi","countryByDate","countryByRegion","entries","countryResult","ncovResult","restCountries","regionvalues","rollups","interpolateValues","newRegion","sum","values","bisector","day","getHots","getTimeRange","platform","getWordsOfTopics","setComputingLayout","addWords","addTimeRange","newRange","addFrames","newListKeyframes","unique","newCloudsKeyframes","hotApi","topics","computePreFramesWordsCloud","wordsWithLayout","timeData","combine","wordsKeyframes","computeFramesWordCloud","weight","computeWordCloud","cloud","sqrt","on","raw","begin","listTicks","wordTicks","datewords","datetopics","heat","interploate","v1","v2","descending","getNews","vis","ncovis","hot","addNews","newsApi","app","dva","use","createLoading","model","router","navigator","serviceWorker","ready","registration","unregister","catch"],"mappings":"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","file":"static/js/main.b289ba00.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/china.6d888cb3.png\";","module.exports = __webpack_public_path__ + \"static/media/zhihu.9e85bbdf.png\";","module.exports = __webpack_public_path__ + \"static/media/talk.1ad6cd23.jpg\";","module.exports = __webpack_public_path__ + \"static/media/news.0f6ed5a1.jpg\";","module.exports = __webpack_public_path__ + \"static/media/hots.a9e67241.jpg\";","module.exports = __webpack_public_path__ + \"static/media/1.d2d2ad01.png\";","module.exports = __webpack_public_path__ + \"static/media/2.39c1bd14.png\";","module.exports = __webpack_public_path__ + \"static/media/3.98b331a4.png\";","module.exports = __webpack_public_path__ + \"static/media/4.36d3cb06.png\";","module.exports = __webpack_public_path__ + \"static/media/5.849ab46f.png\";","module.exports = __webpack_public_path__ + \"static/media/6.4e131bab.png\";","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' }\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React, { useState } from \"react\";\nimport styled from \"styled-components\";\nimport { Button, Dropdown, Menu } from \"antd\";\nimport { connect } from \"dva\";\n\nconst Container = styled.div`\n  height: 56px;\n  line-height: 56px;\n  background: ${(props) => props.theme.header};\n  position: fixed;\n  width: 100%;\n  top: 0px;\n  z-index: 1001;\n  box-shadow: 0px 1px 5px rgba(0, 0, 0, 0.1);\n`;\n\nconst Logo = styled.span`\n  font-size: 25px;\n  font-family: \"Titan One\", cursive;\n`;\n\nconst Left = styled.span`\n  font-weight: bold;\n`;\n\nconst Lab = styled.a`\n  font-size: 16px;\n  margin-left: 10px;\n  font-family: \"webfont\" !important;\n  color: ${(props) => props.theme.font};\n  text-decoration: none;\n\n  &:hover {\n    color: ${(props) => props.theme.font};\n  }\n`;\n\nconst HeaderWrapper = styled.header`\n  margin: 0 auto;\n  max-width: 1200px;\n  background: ${(props) => props.theme.header};\n  width: 90%;\n  height: 100%;\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  color: ${(props) => props.theme.font};\n`;\n\nconst Nav = styled.nav`\n  & ul {\n    margin-bottom: 0;\n  }\n  & li {\n    display: inline-block;\n    margin-left: 1em;\n    list-style-type: none;\n  }\n  & a,\n  & span {\n    color: ${(props) => props.theme.font};\n    font-weight: bold;\n    padding: 0.5em 0;\n    cursor: pointer;\n  }\n\n  & a:hover,\n  & span:hover {\n    cursor: pointer;\n    border-bottom: 1px solid white;\n  }\n\n  @media (max-width: 700px) {\n    display: ${(props) => (props.show ? \"block\" : \"none\")};\n    position: absolute;\n    top: 100%;\n    right: 0;\n    z-index: 10;\n\n    & ul {\n      background: black;\n      padding: 0 2.5em 0 2em;\n    }\n    & li {\n      display: block;\n    }\n  }\n`;\n\nconst ToggleButton = styled(Button)`\n  display: none;\n  transform: rotate(${(props) => props.angle}deg);\n  @media (max-width: 700px) {\n    display: block;\n  }\n`;\n\nconst Overlayer = styled.div`\n  position: fixed;\n  width: 100%;\n  height: 100%;\n  left: 0;\n  top: 0;\n  background: rgba(0, 0, 0, 0.5);\n  z-index: 2;\n`;\n\nfunction Header({ setOpen }) {\n  const [show, setShow] = useState(false);\n  const navs = [\n    {\n      name: \"概览\",\n      id: \"overview\",\n    },\n    {\n      name: \"介绍\",\n      id: \"introduction\",\n    },\n    {\n      name: \"可视化\",\n      id: \"vis\",\n    },\n    {\n      name: \"发现\",\n      id: \"story\",\n    },\n  ];\n\n  const menu = (\n    <Menu>\n      <Menu.Item>\n        <a\n          target=\"_blank\"\n          rel=\"noopener noreferrer\"\n          href=\"https://github.com/pearmini\"\n        >\n          前端可视化\n        </a>\n      </Menu.Item>\n      <Menu.Item>\n        <a\n          target=\"_blank\"\n          rel=\"noopener noreferrer\"\n          href=\"https://github.com/vivym\"\n        >\n          后端爬虫\n        </a>\n      </Menu.Item>\n      <Menu.Item>\n        <a\n          target=\"_blank\"\n          rel=\"noopener noreferrer\"\n          href=\"https://github.com/Kaiyiwing\"\n        >\n          数据处理\n        </a>\n      </Menu.Item>\n    </Menu>\n  );\n  return (\n    <>\n      <Container>\n        <HeaderWrapper>\n          <Left>\n            <Logo>nCoVIS</Logo>\n            <Lab href=\"https://vislab.wang/\" target=\"_blank\">\n              山东大学 VisLab\n            </Lab>\n          </Left>\n          <Nav show={show}>\n            <ul>\n              {navs.map((nav) => (\n                <li key={nav.name}>\n                  <a onClick={() => setShow(false)} href={\"#\" + nav.id}>\n                    {nav.name}\n                  </a>\n                </li>\n              ))}\n              <li>\n                <span\n                  onClick={(e) => {\n                    e.preventDefault();\n                    setOpen(true);\n                  }}\n                  href=\"#\"\n                >\n                  投稿\n                </span>\n              </li>\n              <li>\n                <Dropdown overlay={menu}>\n                  <span onClick={(e) => e.preventDefault()}>联系我们</span>\n                </Dropdown>\n              </li>\n              <li>\n                <a\n                  href=\"https://github.com/pearmini/ncovis-2020\"\n                  target=\"_blank\"\n                  rel=\"noopener noreferrer\"\n                >\n                  github\n                </a>\n              </li>\n            </ul>\n          </Nav>\n          <ToggleButton\n            icon=\"menu\"\n            ghost\n            onClick={() => setShow(!show)}\n            angle={show ? 90 : 0}\n          />\n        </HeaderWrapper>\n      </Container>\n      {show && <Overlayer onClick={() => setShow(false)} />}\n    </>\n  );\n}\nexport default connect(null, {\n  setOpen: (value) => ({\n    type: \"comment/setOpen\",\n    payload: { value },\n  }),\n})(Header);\n","import React from \"react\";\nimport styled from \"styled-components\";\nconst Container = styled.div`\n  background: black;\n  height: 300px;\n  width: 100%;\n`;\n\nexport default function () {\n  return <Container></Container>;\n}\n","import React, { useEffect, useState } from \"react\";\nimport styled from \"styled-components\";\nimport { useWindowSize } from \"react-use\";\nimport { connect } from \"dva\";\nimport { Tabs } from \"antd\";\n\nimport chinaURL from \"../../assets/images/china.png\";\nimport zhihuURL from \"../../assets/images/zhihu.png\";\n\nconst { TabPane } = Tabs;\n\nconst Container = styled.div`\n  padding: 56px 0;\n  position: relative;\n  height: ${(props) => props.height}px;\n  width: 100%;\n  justify-content: space-around;\n  align-items: center;\n  display: flex;\n  flex-direction: column;\n`;\n\nconst An = styled.div`\n  position: absolute;\n  top: -56px;\n`;\n\nconst Title = styled.h1`\n  margin-top: 1em;\n  font-size: 60px;\n  font-weight: bold;\n\n  @media (max-width: 992px) {\n    font-size: 40px;\n  }\n\n  @media (max-width: 768px) {\n    font-size: 40px;\n  }\n\n  @media (max-width: 576px) {\n    font-size: 25px;\n  }\n`;\n\nconst Row = styled.div`\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  width: 100%;\n\n  @media (max-width: 768px) {\n    flex-direction: column;\n    height: 50%;\n  }\n`;\n\nconst China = styled.img`\n  width: 50%;\n  @media (max-width: 768px) {\n    height: 50%;\n    width: initial;\n  }\n`;\n\nconst Zhihu = styled.img`\n  width: 50%;\n  @media (max-width: 768px) {\n    height: 50%;\n    width: initial;\n  }\n`;\n\nconst Time = styled.div`\n  margin: 1em auto;\n  color: #bfbfbf;\n  font-size: 11px;\n  display: flex;\n  flex-direction: row-reverse;\n`;\n\nconst Box = styled.div`\n  background: white;\n  border-radius: 8px;\n  padding: 0.5em 1em;\n  width: 500px;\n  max-width: 100%;\n`;\n\nconst CardContainer = styled.div`\n  display: flex;\n  margin-top: 1em;\n  justify-content: space-around;\n`;\n\nconst Card = styled.div`\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n`;\n\nconst Change = styled.div`\n  color: #999999;\n  line-height: 22px;\n  font-size: 12px;\n  & span {\n    margin-left: 2px;\n    color: ${(props) => props.color};\n  }\n  @media (max-width: 600px) {\n    font-size: 10px;\n  }\n`;\n\nconst Value = styled.div`\n  font-size: 19px;\n  color: ${(props) => props.color};\n  font-weight: bold;\n\n  @media (max-width: 700px) {\n    font-size: 14px;\n  }\n\n  @media (max-width: 600px) {\n    font-size: 12px;\n  }\n`;\n\nconst Name = styled.div`\n  font-weight: bold;\n  color: #444444;\n\n  @media (max-width: 700px) {\n    font-size: 10px;\n  }\n`;\n\nconst DashBoard = styled.div`\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  width: 100%;\n`;\n\nfunction Overview({ overview, getOverview }) {\n  const { height } = useWindowSize();\n  const [tab, setTab] = useState(\"全球\");\n  const { data, time } = overview;\n  const formate = (time) => {\n    const date = new Date(time);\n    return `${date.getFullYear()}年${date.getMonth() + 1}月${date.getDate()}日`;\n  };\n\n  const colorByName = {\n    累计确诊: \"#F9345e\",\n    累计死亡: \"#6236ff\",\n    累计治愈: \"#1cb142\",\n    现存确诊: \"#fa6400\",\n  };\n\n  useEffect(() => {\n    getOverview();\n  }, [getOverview]);\n\n  return (\n    <Container height={height}>\n      <An id=\"overview\" />\n      <DashBoard>\n        <Title>COVID-19 舆论新闻可视化</Title>\n        <Tabs\n          onChange={setTab}\n          activeKey={tab}\n          style={{ width: 500, maxWidth: \"100%\" }}\n        >\n          {data.map((d) => (\n            <TabPane tab={d.name} key={d.name}>\n              <Box>\n                <CardContainer>\n                  {d.data.map(({ name, value, change }) => (\n                    <Card key={name}>\n                      <Change color={colorByName[name]}>\n                        {change >= 0 ? \"新增\" : \"减少\"}\n                        <span>\n                          {change >= 0 ? \"+\" : \"-\"}\n                          {Math.abs(change)}\n                        </span>\n                      </Change>\n                      <Value color={colorByName[name]}>{value}</Value>\n                      <Name>{d.name + name}</Name>\n                    </Card>\n                  ))}\n                </CardContainer>\n                <Time>{`截至${formate(time)}, ${\n                  d.name === \"全国\" ? \"全国累计（含港澳台地区）\" : \"全球数据\"\n                }`}</Time>\n              </Box>\n            </TabPane>\n          ))}\n        </Tabs>\n      </DashBoard>\n      <Row>\n        <Zhihu src={zhihuURL} />\n        <China src={chinaURL} />\n      </Row>\n    </Container>\n  );\n}\n\nexport default connect(\n  ({ overview, loading }) => ({\n    overview,\n    loading: loading.models.overview,\n  }),\n  {\n    getOverview: () => ({ type: \"overview/getData\" }),\n  }\n)(Overview);\n","import React from \"react\";\nimport styled from \"styled-components\";\nimport talkImage from \"../../assets/images/talk.jpg\";\n\nconst Container = styled.div`\n  position: relative;\n  margin-bottom: 4em;\n`;\n\nconst An = styled.div`\n  position: absolute;\n  top: -56px;\n`;\n\nconst Row = styled.div`\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  width: 100%;\n\n  @media (max-width: 768px) {\n    flex-direction: column;\n  }\n`;\n\nconst Intro = styled.div`\n  width: 60%;\n  & ul {\n    padding-left: 2em;\n  }\n  @media (max-width: 768px) {\n    width: 100%;\n  }\n`;\n\nconst TalkImage = styled.img`\n  border-radius: 8px;\n`;\n\nfunction IntroductionPanel() {\n  return (\n    <Container>\n      <An id=\"introduction\" />\n      <h1>介绍</h1>\n      <Row>\n        <Intro>\n          <p>\n            <b>nCoVIS</b> 是山东大学{\" \"}\n            <a\n              href=\"https://vislab.wang/\"\n              target=\"_blank\"\n              rel=\"noopener noreferrer\"\n            >\n              VisLab\n            </a>{\" \"}\n            实验室为大众提供的一个在线可视化分析平台，旨在探索从 COVID-19\n            疫情出现直到现在：\n          </p>\n          <ul>\n            <li>人们在网络上讨论什么？</li>\n            <li>各地区新闻在报道什么？</li>\n            <li>上面两者的关系以及对控制疫情有什么指导意义？</li>\n          </ul>\n          <p>\n            <b>COVID-19</b> 是人类历史上第一次在高度发达的\n            <b>自媒体、全媒体时代</b>\n            遇到的高传染性病毒。面对病毒，我们不能只关心患者的患病情况，同时也要关心群众们在讨论什么，防止出现恐慌。\n          </p>\n          <p>\n            在病毒传播初期，武汉曾出现过因为恐慌导致大量常规感冒、发烧患者挤兑医院，在医院造成大规模传染。并且因为恐慌效应在自媒体时代各种社交软件上的二次传播，加剧了人们对病毒的恐惧，促使大量疫情严重地区的人开始向其他地区逃离，进一步加大了空坠疫情的难度。\n          </p>\n          <p>\n            <b>新闻报道控制舆论导向，而舆论反过来也影响新闻报道。</b>\n            所以我们除了提供和疫情直接相关的数据（来自\n            <a\n              target=\"_blank\"\n              rel=\"noopener noreferrer\"\n              href=\"https://github.com/BlankerL/DXY-COVID-19-Crawler?spm=5176.12282029.0.0.480b56f5rDZFu0\"\n            >\n              丁香园\n            </a>\n            ）可视化以外，还爬取了\n            <a\n              target=\"_blank\"\n              href=\"https://www.chinanews.com/\"\n              rel=\"noopener noreferrer\"\n            >\n              中国新闻网\n            </a>\n            各地区的新闻数据和\n            <a\n              target=\"_blank\"\n              href=\"https://www.zhihu.com/\"\n              rel=\"noopener noreferrer\"\n            >\n              知乎\n            </a>\n            的热搜数据（感谢{\" \"}\n            <a\n              href=\"https://github.com/mjrao/hotso\"\n              target=\"_blank\"\n              rel=\"noopener noreferrer\"\n            >\n              mjrao 先生\n            </a>\n            提供的部分知乎热搜数据)，并提供相关的可视化。\n          </p>\n          <p>\n            在可视化技术方面，因为面对的对象是大众，所以我们并没有使用比较复杂的技术。一方面我们使用了一些常见的可视化技术：面积图、条形图、饼状图等，另一方面使用了我们实验室在去年{\" \"}\n            <b>InfoVis2019</b> 发表的论文所提到的技术\n            <a\n              target=\"_blank\"\n              rel=\"noopener noreferrer\"\n              href=\"https://vislab.wang/post/shapewordle:-tailoring-wordles-using-shape-aware-archimedean-spirals\"\n            >\n              {\" \"}\n              ShapeWordle{\" \"}\n            </a>\n            ，让我们的可视化结果更加生动和有人情味。\n          </p>\n          <p>\n            最后，我们希望这场灾难早点过去，祝愿病人们早日康复，也向奋斗在一线的白衣天使和科学家们致以最崇高的敬意。\n            <b>中国加油，世界加油，那些不能打到我们的，只能让我们更强大！</b>\n          </p>\n        </Intro>\n        <TalkImage src={talkImage} />\n      </Row>\n    </Container>\n  );\n}\n\nexport default IntroductionPanel;","const wrapper = d => (d < 10 ? \"0\" + d : d);\nexport default function(time) {\n  const year = time.getFullYear(),\n    month = time.getMonth() + 1,\n    date = time.getDate();\n  return `${year}-${wrapper(month)}-${wrapper(date)}`;\n}\n","import React from \"react\";\nimport styled from \"styled-components\";\nimport { Drawer, Button } from \"antd\";\nimport { connect } from \"dva\";\nimport { schemeTableau10 } from \"d3\";\n\nimport formatDate from \"../../utils/formatDate\";\nimport str2num from \"../../utils/str2num\";\nimport newsImage from \"../../assets/images/news.jpg\";\n\nconst Container = styled.div`\n  position: relative;\n  margin: 1em 0 2em 0;\n`;\n\nconst An = styled.div`\n  position: absolute;\n  top: -56px;\n`;\n\nconst Row = styled.div`\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  width: 100%;\n\n  @media (max-width: 768px) {\n    flex-direction: column;\n  }\n`;\n\nconst Intro = styled.div`\n  width: 60%;\n  & ul {\n    padding-left: 2em;\n  }\n  @media (max-width: 768px) {\n    width: 100%;\n  }\n`;\n\nconst VisImage = styled.img`\n  width: 360px;\n  border-radius: 8px;\n`;\n\nconst Wrapper = styled.div`\n  position: relative;\n`;\n\nconst CardContainer = styled.div`\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  border-radius: 8px;\n  background: white;\n  padding: 20px;\n  margin: 20px 0;\n  width: 100%;\n  height: 200px;\n  cursor: pointer;\n  transition: all 0.5s;\n  &:hover {\n    box-shadow: 0px 0px 10px 2px rgba(0, 0, 0, 0.1);\n  }\n`;\n\nconst VoteButton = styled(Button)`\n  margin-bottom: 2em;\n`;\n\nconst ContentWrapper = styled.div`\n  width: 100%;\n  height: 140px;\n  display: flex;\n  justify-content: space-between;\n`;\n\nconst Avatar = styled.div`\n  width: 32px;\n  height: 32px;\n  border-radius: 50%;\n  background: ${(props) => props.color || \"black\"};\n  color: white;\n  font-weight: bold;\n  font-family: siyuan;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  font-size: 20px;\n  line-height: 32px;\n\n  @media (max-width: 700px) {\n    display: none;\n  }\n`;\n\nconst Image = styled.img`\n  margin-left: 100px;\n  height: 100%;\n  border-radius: 8px;\n`;\n\nconst Main = styled.div`\n  overflow: auto;\n  width: 100%;\n  padding-left: 20px;\n`;\n\nconst Sub = styled.div`\n  margin-bottom: 1em;\n  font-size: 12px;\n\n  & .top {\n    display: inline-block;\n    background: orange;\n    text-align: center;\n    color: white;\n    width: 40px;\n    border-radius: 2px;\n  }\n\n  & span {\n    margin-right: 10px;\n  }\n`;\n\nconst Left = styled.div`\n  width: 60%;\n  display: flex;\n  justify-content: space-between;\n\n  @media (max-width: 700px) {\n    width: 100%;\n  }\n`;\n\nconst Right = styled.div`\n  width: 60%;\n  display: flex;\n  align-items: center;\n  justify-content: flex-start;\n  @media (max-width: 700px) {\n    display: none;\n  }\n`;\n\nconst List = styled.div`\n  margin-top: 1em;\n`;\n\nfunction Card({ title, des, url, createTime, author, isTop, imageUrl }) {\n  const avatarColor = () =>\n    schemeTableau10[str2num(author) % schemeTableau10.length];\n  return (\n    <Wrapper>\n      <CardContainer\n        onClick={() => {\n          window.open(url);\n        }}\n      >\n        <ContentWrapper>\n          <Left>\n            <Avatar color={avatarColor(author)}>{author.slice(0, 1)}</Avatar>\n            <Main>\n              <h2>{title}</h2>\n              <Sub>\n                {isTop === 1 && <span className=\"top\">置顶</span>}\n                <span>作者：{author}</span>\n                <span>日期：{formatDate(createTime)}</span>\n              </Sub>\n              <p>{des}</p>\n            </Main>\n          </Left>\n          <Right>\n            <Image src={imageUrl} />\n          </Right>\n        </ContentWrapper>\n      </CardContainer>\n    </Wrapper>\n  );\n}\n\nfunction CommentPanel({ list, isOpen, setOpen }) {\n  return (\n    <Container>\n      <An id=\"story\" />\n      <h1>发现</h1>\n      <Row>\n        <Intro>\n          <p>\n            通过该分析系统你可以短时间内就了解这段时间发生的一些和疫情有关的事。同时能找到很多有意思的现象和问题，比如下面的这些：\n          </p>\n          <ul>\n            <li>\n              在疫情发展的过程中，可能是因为人们无聊，出现了哪些奇葩话题?\n              <ul>\n                <li> 拉屎拉到干净是一种怎样的体验？</li>\n                <li>\n                  加入有一个按钮，按下去会获得 10 亿元，但是 500\n                  年后人类会毁灭，你按吗?\n                </li>\n              </ul>\n            </li>\n            <li>\n              有哪些热度特别高的超级话题?\n              <ul>\n                <li>科比去世:该话题的热度超过了4月4号全国哀悼日的热度</li>\n                <li>美股熔断</li>\n                <li>肖战事件</li>\n                <li>塞尔维亚总统哽咽着请求中国援助</li>\n                <li>孙杨事件</li>\n              </ul>\n            </li>\n            <li>\n              人们对疫情变化的认识的变化情况：蝙蝠 -{\">\"} 双⻩连 -{\">\"} 中药 -\n              {\">\"}\n              推测来自于美国\n            </li>\n            <li>\n              中国疫情发展的重要阶段和关键时间点：天津大学宣布研制出口服疫苗 -\n              {\">\"}\n              新冠对中国发展对意义\n            </li>\n            <li>其他国家的疫情发展情况和关键时间点、关键事件。</li>\n          </ul>\n          <p>\n            下面有一些用该平台分析出的文章。你可以自己去发现问题，也可以回答上面问题中的任何一个。注意问题不用太大，可以很小，\n            但是一定要和疫情有关。这里你可以通过投稿提出问题和自己的看法，通过审核的文章我们会放在该网站上。\n          </p>\n          <VoteButton type=\"primary\" onClick={() => setOpen(true)}>\n            我要投稿\n          </VoteButton>\n        </Intro>\n        <VisImage src={newsImage} />\n      </Row>\n      <List>\n        {list\n          .sort((a, b) => b.createTime - a.createTime)\n          .map((d) => (\n            <Card {...d} key={d.id} />\n          ))}\n      </List>\n      <Drawer\n        title=\"投稿\"\n        width={360}\n        onClose={() => setOpen(false)}\n        visible={isOpen}\n        bodyStyle={{ paddingBottom: 80 }}\n        style={{ zIndex: 1010 }}\n      >\n        <p>你需要通过邮件发送以下的信息：</p>\n        <ul>\n          <li>文章标题</li>\n          <li>一小段文章介绍</li>\n          <li>文章链接</li>\n          <li>笔名</li>\n        </ul>\n        <p>收件地址为：subairui@icloud.com</p>\n        <p>当你发送文章，我们会尽快对其进行审核，请耐心等待！</p>\n      </Drawer>\n    </Container>\n  );\n}\n\nexport default connect(\n  ({ comment }) => ({\n    ...comment,\n  }),\n  {\n    setOpen: (value) => ({\n      type: \"comment/setOpen\",\n      payload: { value },\n    }),\n  }\n)(CommentPanel);\n","export default function (str) {\n  const num = Array.from(str).reduce(\n    (total, ch) => total + ch.codePointAt(0),\n    0\n  );\n  return num;\n}\n","import * as d3 from \"d3\";\n// 获取 SVG 元素的 mouseX 和 mouseY 和普通 DOM 元素有一点不同，因为它会缩放\nexport default function(evevt, SVGelement) {\n  const { clientX, clientY } = evevt;\n  const {\n    left,\n    top,\n    width: realWidth,\n    height: realHeight\n  } = SVGelement.getBoundingClientRect();\n  const mouseX = clientX - left,\n    mouseY = clientY - top;\n  const { width, height } = SVGelement.getBBox();\n  const x = d3.scaleLinear([0, realWidth], [0, width]),\n    y = d3.scaleLinear([0, realHeight], [0, height]);\n  return [x(mouseX), y(mouseY)];\n}\n","import React, { useState, useRef } from \"react\";\nimport styled from \"styled-components\";\nimport useSize from \"../hooks/useSize\";\nimport { Popover, Empty, Spin, Icon, Drawer } from \"antd\";\n\nconst Container = styled.div.attrs(\n  (props) =>\n    props.zoom && {\n      style: {\n        position: \"fixed\",\n        zIndex: 999,\n        left: \"50%\",\n        top: \"50%\",\n        transform: \"translate(-50%, -50%)\",\n        marginTop: 28,\n        width: \"90%\",\n        maxWidth: 1200,\n      },\n    }\n)`\n  display: ${(props) => (props.show ? \"block\" : \"none\")};\n  position: relative;\n  border-radius: 8px;\n  overflow: hidden;\n  transition: all 0.5s;\n  background: white;\n  &:hover {\n    box-shadow: 0px 0px 10px 3px rgba(0, 0, 0, 0.1);\n  }\n`;\n\nconst Layer = styled.div`\n  position: fixed;\n  left: 0;\n  top: 0;\n  z-index: 5;\n  width: 100%;\n  height: 100%;\n  background: rgba(0, 0, 0, 0.7);\n`;\n\nconst Box = styled.div`\n  width: ${(props) => props.width}px;\n  height: ${(props) => props.height}px;\n  line-height: ${(props) => props.height}px;\n  z-index: 10;\n  background: ${(props) =>\n    props.type === \"loading \" ? \"transparent\" : \"white\"};\n  position: absolute;\n  left: 0;\n  top: 0;\n`;\n\nconst MiddleSpin = styled(Spin)`\n  position: absolute;\n  left: 50%;\n  top: 50%;\n  transform: translate(-50%, -50%);\n`;\n\nconst MiddleEmpty = styled(Empty)`\n  position: absolute;\n  left: 50%;\n  top: 50%;\n  transform: translate(-50%, -50%);\n  margin: 0;\n`;\n\nconst Content = styled.ul`\n  padding: 0;\n  margin: 0;\n  cursor: pointer;\n\n  & li {\n    list-style: none;\n    padding: 0.5em;\n    border-bottom: 1px solid transparent;\n  }\n\n  & li:hover {\n    border-bottom: 1px solid #efefef;\n  }\n`;\n\nconst StyledDrawer = styled(Drawer)`\n  position: absolute;\n`;\n\nconst Header = styled.div`\n  display: flex;\n  margin: 0.5em 1em 0 1em;\n  padding-bottom: 0.5em;\n  border-bottom: 1px solid #efefef;\n  align-items: center;\n  justify-content: space-between;\n`;\n\nconst Left = styled.div`\n  & > span {\n    margin-left: 8px;\n  }\n`;\n\nconst Slot = styled.div`\n  margin-right: 8px;\n\n  & span {\n    font-size: 12px;\n    margin-right: 4px;\n  }\n`;\n\nconst Right = styled.div`\n  display: flex;\n  align-items: center;\n`;\n\nconst StyledIcon = styled(Icon)`\n  cursor: pointer;\n`;\n\nconst ZoomIcon = styled(StyledIcon)`\n  margin-right: 8px;\n`;\n\nfunction State({ type, width, height }) {\n  return (\n    <Box width={width} height={height} type={type}>\n      {type === \"loading\" ? (\n        <MiddleSpin />\n      ) : (\n        <MiddleEmpty\n          description=\"暂无数据\"\n          image={Empty.PRESENTED_IMAGE_SIMPLE}\n        />\n      )}\n    </Box>\n  );\n}\n\nfunction Card({\n  children,\n  onDownload,\n  onDownloadPng,\n  onDownloadSvg,\n  loading,\n  nodata,\n  title = \"title\",\n  introduction,\n  slot,\n  show = true,\n  hasZoom = true,\n  ...rest\n}) {\n  const ref = useRef(null);\n  const { width, height } = useSize(ref);\n  const [zoom, setZoom] = useState(false);\n  const [more, setMore] = useState(false);\n  const [pop, setPop] = useState(false);\n\n  const content = (\n    <Content>\n      <li onClick={() => onClickItem(onDownload ? onDownload : onDownloadPng)}>\n        <span>PNG</span>\n      </li>\n      {onDownloadSvg && (\n        <li onClick={() => onClickItem(onDownloadSvg)}>\n          <span>SVG</span>\n        </li>\n      )}\n    </Content>\n  );\n\n  function onClickItem(cb) {\n    cb && cb();\n    setPop(false);\n  }\n\n  return (\n    <>\n      <Container\n        ref={ref}\n        show={show}\n        {...rest}\n        zoom={zoom}\n        onClick={() => setPop(false)}\n      >\n        {loading ? (\n          <State width={width} height={height} type=\"loading\" />\n        ) : (\n          nodata && <State width={width} height={height} />\n        )}\n        <Header>\n          <Left>\n            <StyledIcon\n              type=\"question-circle\"\n              onClick={() => onClickItem(() => setMore(true))}\n            />\n            <span>{title}</span>\n          </Left>\n          <Right>\n            <Slot>{slot}</Slot>\n            {hasZoom && (\n              <ZoomIcon\n                type={zoom ? \"fullscreen-exit\" : \"fullscreen\"}\n                onClick={() => onClickItem(() => setZoom(!zoom))}\n              />\n            )}\n            <Popover\n              placement=\"bottomRight\"\n              content={content}\n              trigger=\"click\"\n              arrowPointAtCenter\n              visible={pop}\n            >\n              <StyledIcon\n                type=\"download\"\n                onClick={(e) => {\n                  setPop(!pop);\n                  e.stopPropagation();\n                }}\n              />\n            </Popover>\n          </Right>\n        </Header>\n        {children}\n        <StyledDrawer\n          title={title}\n          placement=\"right\"\n          closable={true}\n          onClose={() => setMore(false)}\n          visible={more}\n          getContainer={false}\n        >\n          {introduction}\n        </StyledDrawer>\n      </Container>\n      {zoom && <Layer onClick={() => setZoom(false)} />}\n    </>\n  );\n}\n\nexport default Card;\n","import { useEffect, useState } from \"react\";\nimport ResizeObserver from \"resize-observer-polyfill\";\n\nexport default function(ref) {\n  const [size, setSize] = useState({\n    width: 0,\n    height: 0\n  });\n\n  const [observer] = useState(\n    new ResizeObserver(([entry]) => {\n      if (entry) {\n        const { width, height } = entry.contentRect;\n        setSize({ width, height });\n      }\n    })\n  );\n  useEffect(() => {\n    const node = ref.current;\n    observer.observe(node);\n    return () => observer.disconnect();\n  }, [ref, observer]);\n  return size;\n}\n","// https://observablehq.com/@mbostock/saving-svg\n\nexport function serialize(svg) {\n  const xmlns = \"http://www.w3.org/2000/xmlns/\";\n  const xlinkns = \"http://www.w3.org/1999/xlink\";\n  const svgns = \"http://www.w3.org/2000/svg\";\n  svg = svg.cloneNode(true);\n  const fragment = window.location.href + \"#\";\n  const walker = document.createTreeWalker(\n    svg,\n    NodeFilter.SHOW_ELEMENT,\n    null,\n    false\n  );\n  while (walker.nextNode()) {\n    for (const attr of walker.currentNode.attributes) {\n      if (attr.value.includes(fragment)) {\n        attr.value = attr.value.replace(fragment, \"#\");\n      }\n    }\n  }\n  svg.setAttributeNS(xmlns, \"xmlns\", svgns);\n  svg.setAttributeNS(xmlns, \"xmlns:xlink\", xlinkns);\n  const serializer = new window.XMLSerializer();\n  const string = serializer.serializeToString(svg);\n  return new Blob([string], { type: \"image/svg+xml\" });\n}\n\nexport function rasterize(svg) {\n  let resolve, reject;\n  // eslint-disable-next-line\n  const promise = new Promise((y, n) => ((resolve = y), (reject = n)));\n  const image = new Image();\n  image.onerror = reject;\n  image.onload = () => {\n    const rect = svg.getBoundingClientRect();\n    const canvas = document.createElement(\"canvas\");\n    canvas.width = rect.width * 2;\n    canvas.height = rect.height * 2;\n    const context = canvas.getContext(\"2d\");\n    context.scale(2, 2);\n    context.drawImage(image, 0, 0, rect.width, rect.height);\n    context.canvas.toBlob(resolve);\n  };\n  image.src = URL.createObjectURL(serialize(svg));\n  return promise;\n}\n\nexport default function(blob, filename) {\n  const url = URL.createObjectURL(blob);\n  const a = document.createElement(\"a\");\n  a.href = url;\n  a.download = filename || \"nCov-vis\";\n  a.click();\n}\n","import React, { useRef } from \"react\";\nimport styled from \"styled-components\";\nimport Card from \"./Card\";\nimport download, { serialize, rasterize } from \"../utils/download\";\n\n// 背景颜色必须要写成内联样式的形式\nconst WhiteSvg = styled.svg.attrs((props) => ({\n  style: {\n    background: \"white\",\n  },\n}))``;\n\nexport default function ({\n  style,\n  className,\n  id,\n  loading,\n  nodata,\n  show = true,\n  children,\n  introduction,\n  title,\n  slot,\n  hasZoom = true,\n  ...rest\n}) {\n  const ref = useRef(null);\n  function onDownloadSvg() {\n    const blob = serialize(ref.current);\n    download(blob);\n  }\n\n  function onDownloadPng() {\n    rasterize(ref.current).then(download);\n  }\n\n  const cardProps = {\n    onDownloadPng,\n    onDownloadSvg,\n    id,\n    style,\n    className,\n    loading,\n    nodata,\n    show,\n    introduction,\n    title,\n    slot,\n    hasZoom,\n  };\n\n  return (\n    <Card {...cardProps}>\n      <WhiteSvg ref={ref} {...rest} fontFamily=\"siyuan\">\n        {children}\n      </WhiteSvg>\n    </Card>\n  );\n}\n","import React, { useState, useEffect, useRef } from \"react\";\nimport * as d3All from \"d3\";\nimport * as d3Array from \"d3-array\";\n\nimport mouse from \"../../../utils/mouse\";\nimport Svg from \"../../../components/Svg\";\nimport regionsData from \"../../../assets/data/region_options.json\";\n\nconst d3 = {\n  ...d3All,\n  ...d3Array,\n};\n\nexport default function ({\n  dataByRegion,\n  selectedRegion,\n  selectedDate,\n  setSelectedDate,\n  setSelectedRegion,\n  selectedType,\n  loading,\n  show,\n  setFocusRegion,\n  width,\n  height,\n  colors,\n  all,\n  highlightColor,\n  normalColor,\n  highlightRectColor,\n  disabledColor,\n  legendWidth,\n  legendHeight,\n  treeData,\n  setTreeData,\n  handleChangeLevel,\n  highlight,\n  setHighlight,\n}) {\n  if (!dataByRegion.size || !treeData.children)\n    return (\n      <Svg\n        viewBox={[0, 0, width, height]}\n        loading={loading}\n        nodata={true}\n        show={show}\n      ></Svg>\n    );\n\n  const [drag, setDrag] = useState({\n    start: null,\n    move: 0,\n  });\n  const [hover, setHover] = useState(false);\n  const sliderRef = useRef(null);\n  treeData.eachAfter((node) => {\n    node.visableH =\n      node.children && !node.hideChildren\n        ? d3.max(node.children, (d) => d.visableH) + 1\n        : 0;\n  });\n  const descendants = treeData.descendants(),\n    visableRegions = new Set(\n      descendants\n        .filter((d) => !d.hide && (!d.children || d.hideChildren))\n        .map((d) => d.data.title)\n    ),\n    layers = d3\n      .groups(descendants, (d) => d.depth)\n      .filter(\n        ([depth, data]) =>\n          depth !== treeData.height && depth !== 0 && data.every((d) => !d.hide)\n      ),\n    th = treeData.visableH;\n\n  const data = all\n      .map((d) => ({\n        date: d.date,\n        region: d.region,\n        value: d[selectedType],\n      }))\n      .filter(({ value }) => !isNaN(value) && value !== \"\")\n      .filter((d) => visableRegions.has(d.region)),\n    days = Array.from(new Set(data.map((d) => d.date)));\n\n  const title = (d) => (typeof d === \"object\" ? d.data.title : d);\n  const hset = new Set(highlight.map((d) => title(d)));\n  const colorData = highlight.length\n    ? data.filter((d) => hset.has(d.region))\n    : data;\n\n  const margin = { top: 55, right: 30, bottom: 60, left: 60 },\n    chartPadding = 75,\n    nodeWidth = 75,\n    buttonSize = 15,\n    axisPadding = 5,\n    formatDate = d3.timeFormat(\"%x\"),\n    labels = [\n      \"Jan\",\n      \"Feb\",\n      \"Mar\",\n      \"Apr\",\n      \"May\",\n      \"June\",\n      \"July\",\n      \"Aug\",\n      \"Sept\",\n      \"Oct\",\n      \"Nov\",\n      \"Dec\",\n    ],\n    treeW = nodeWidth * th,\n    treeH = height - margin.top - margin.bottom - axisPadding,\n    matrixWidth = width - margin.left - margin.right - chartPadding - treeW;\n\n  const tree = d3\n      .tree()\n      .size([treeH, treeData.height * nodeWidth])\n      .separation((a, b) => (a.parent === b.parent ? 1 : 1.5)),\n    root = tree(treeData),\n    allLeaves = root.leaves(),\n    cellHeight =\n      allLeaves.length === 1\n        ? allLeaves[0].x\n        : d3\n            .pairs(allLeaves)\n            .reduce(\n              (total, [a, b]) => Math.min(total, Math.abs(a.x - b.x)),\n              Infinity\n            ),\n    cellWidth = Math.max(matrixWidth / days.length, 12.5),\n    nodeByTitle = d3.rollup(\n      root.descendants(),\n      ([d]) => d,\n      (d) => d.data.title\n    );\n\n  const x = d3\n    .scaleBand()\n    .domain(days)\n    .range([0, cellWidth * days.length]);\n\n  const y = (title) => {\n    const node = nodeByTitle.get(title);\n    if (!node.children) return node.x;\n    let x0 = Infinity;\n    node.each((d) => {\n      if (d.x < x0) x0 = d.x;\n    });\n    return x0;\n  };\n\n  const h = (title) => {\n    const node = nodeByTitle.get(title);\n    if (!node.children) return cellHeight;\n    let x0 = Infinity;\n    let x1 = -x0;\n    node.each((d) => {\n      if (d.x > x1) x1 = d.x;\n      if (d.x < x0) x0 = d.x;\n    });\n    return x1 - x0 + cellHeight;\n  };\n\n  const colorScale = d3.scaleSequential(colors[selectedType]).domain(\n    d3.extent(\n      colorData.filter((d) => d.region !== \"湖北\" && d.region !== \"华中地区\"),\n      (d) => d.value\n    )\n  );\n\n  const specialColorScale = d3\n    .scaleSqrt()\n    .interpolate(() => colors.special)\n    .domain(\n      d3.extent(\n        colorData.filter((d) => d.region === \"湖北\" || d.region === \"华中地区\"),\n        (d) => d.value\n      )\n    );\n\n  const color = (node) => {\n    if (highlight.length && !hset.has(node.region)) return disabledColor;\n    if (node.region === \"湖北\" || node.region === \"华中地区\")\n      return specialColorScale(node.value);\n    return colorScale(node.value);\n  };\n\n  const pathLink = d3\n    .linkHorizontal()\n    .x((d) => d.y)\n    .y((d) => d.x);\n\n  const stroke = d3\n    .scaleSequential(colors[selectedType])\n    .domain([0, legendWidth]);\n\n  const strokeSpecial = d3\n    .scaleSqrt()\n    .interpolate(() => colors.special)\n    .domain([0, legendWidth]);\n\n  const introduction = (\n    <div>\n      <h3>作用</h3>\n      <p>反映各个地区每天确诊、治愈或死亡人数相对前一天的变化情况。</p>\n      <h3>说明</h3>\n      <ul>\n        <li>\n          因为湖北和华中地区的数据远大于其他地区，所以选择了一种特殊的颜色范围。\n        </li>\n        <li>变化为 0 的格子不一定真的为 0 ，可能是因为数据缺失。</li>\n      </ul>\n      <h3>使用方法</h3>\n      <ul>\n        <li>\n          鼠标<b>移动到</b>到<b>热力图</b>\n          任意格子并停留一会儿，会显示地区、时间以及变化人数。\n        </li>\n        <li>\n          <b>单击“热力图”</b>中的任意格子，会高亮并且选择对应的日期和地区。\n        </li>\n        <li>\n          <b>点击“树”</b>中地区的名字后面的<b>按钮</b>会收缩或者展开该地区。\n        </li>\n        <li>\n          <b>单击“树”</b>中地区的<b>名字</b>\n          会选择该地区，并且可视化已经选择的地区；再\n          <b>单击</b>一次，取消选择。\n        </li>\n        <li>\n          <b>双击“树”</b>中地区的<b>名字</b>会进入<b>日历热图</b>\n          ，只可视化该地区的数据；\n          <b>双击</b>空白地方返回。\n        </li>\n      </ul>\n    </div>\n  );\n\n  const minusButton = (\n    <svg\n      t=\"1583216776327\"\n      className=\"icon\"\n      viewBox=\"0 0 1024 1024\"\n      version=\"1.1\"\n      xmlns=\"http://www.w3.org/2000/svg\"\n      p-id=\"1313\"\n      width={buttonSize}\n      height={buttonSize}\n      cursor=\"pointer\"\n    >\n      <path\n        d=\"M512 128c211.968 0 384 172.032 384 384s-172.032 384-384 384-384-172.032-384-384 172.032-384 384-384z m-187.221333 425.6h371.2a41.6 41.6 0 1 0 0-83.2h-371.2a41.6 41.6 0 0 0 0 83.2z\"\n        p-id=\"1314\"\n      ></path>\n    </svg>\n  );\n\n  const plusButton = (\n    <svg\n      t=\"1583216820149\"\n      className=\"icon\"\n      viewBox=\"0 0 1024 1024\"\n      version=\"1.1\"\n      xmlns=\"http://www.w3.org/2000/svg\"\n      p-id=\"1443\"\n      width={buttonSize}\n      height={buttonSize}\n      cursor=\"pointer\"\n    >\n      <path\n        d=\"M458.922667 503.210667H314.965333a41.6 41.6 0 1 0 0 83.2h143.957334v144a41.6 41.6 0 0 0 83.2 0v-144h144a41.6 41.6 0 0 0 0-83.2h-144V359.253333a41.6 41.6 0 0 0-83.2 0v143.957334zM502.186667 160.853333c211.968 0 384 172.032 384 384s-172.032 384-384 384-384-172.032-384-384 172.032-384 384-384z\"\n        p-id=\"1444\"\n      ></path>\n    </svg>\n  );\n\n  function handleMouseup() {\n    setDrag({ ...drag, start: null });\n  }\n\n  function handleMousemove(e) {\n    if (drag.start === null) return;\n    if (sliderRef.current === null) return;\n    const [mouseX] = mouse(e, sliderRef.current);\n    const maxMove = matrixWidth * (1 - matrixWidth / (days.length * cellWidth));\n    const move = Math.max(\n      0,\n      Math.min(maxMove, drag.move + (mouseX - drag.start))\n    );\n    setDrag({ ...drag, move });\n  }\n\n  function handleMousedown(e) {\n    const [mouseX] = mouse(e, sliderRef.current);\n    setDrag({\n      ...drag,\n      start: mouseX,\n    });\n  }\n\n  function hasSpecialLegend() {\n    return (\n      (treeData.data.title === \"中国\" && highlight.length === 0) ||\n      highlight.find((d) => title(d) === \"湖北\") ||\n      highlight.find((d) => title(d) === \"华中地区\")\n    );\n  }\n\n  function toggleHighlightNode(node) {\n    if (!node.parent) return;\n\n    const old = highlight.find((d) => d.data.title === node.data.title);\n    const hasChildren = highlight.some(\n      (d) => d.parent.data.title === node.data.title\n    );\n    if (old || hasChildren) {\n      const deleteNodes = node.hideChildren ? [node] : node.leaves();\n      for (let d of deleteNodes) {\n        const index = highlight.indexOf(d);\n        highlight.splice(index, 1);\n      }\n    } else {\n      node.hideChildren\n        ? highlight.push(node)\n        : highlight.push(...node.leaves());\n    }\n    setHighlight([...highlight]);\n    setSelectedRegion(node.data.title);\n  }\n\n  async function toggleNode(node) {\n    if (!node.children) return;\n    if (node.depth === 0) {\n      const level = node.data.title === \"全球\" ? \"second\" : \"top\";\n      handleChangeLevel(level);\n      return;\n    }\n    // animation\n    const t = d3.transition().duration(250).ease(d3.easeExpOut);\n    node.hideChildren\n      ? animateShowChildren(node, t)\n      : animateHideChildren(node, t);\n    !node.hideChildren && node.depth === 0 && animateHideButton(t);\n    animateHideLegend(t);\n    await t.end();\n\n    // update data\n    node.hideChildren ? showChildren(node) : hideChildren(node);\n\n    // upadte view\n    const newTreeData = copyTree();\n    setTreeData(newTreeData);\n    setHighlight([]);\n  }\n\n  async function toggleNodes(nodes) {\n    // animation\n    const t = d3.transition().duration(250).ease(d3.easeExpOut);\n\n    const validNodes = nodes.filter((node) => node.children);\n    const allHide = validNodes.every((d) => d.hideChildren);\n    allHide\n      ? validNodes.forEach((d) => animateShowChildren(d, t))\n      : validNodes\n          .filter((d) => !d.hideChildren)\n          .forEach((d) => animateHideChildren(d, t));\n    animateHideLegend(t);\n    animateHideAxis(t);\n    await t.end();\n\n    // update data\n    allHide\n      ? validNodes.forEach(showChildren)\n      : validNodes.filter((d) => !d.hideChildren).forEach(hideChildren);\n\n    // update view\n    const newTreeData = copyTree();\n    allHide\n      ? handleChangeLevel(\"third\", newTreeData)\n      : handleChangeLevel(\"second\", newTreeData);\n    setHighlight([]);\n  }\n\n  function animateHideButton(t) {\n    d3.select(\".tree-btn\").transition(t).attr(\"fill-opacity\", 0);\n  }\n\n  function animateHideLegend(t) {\n    // 坐标轴和 legend\n    d3.selectAll(\".tree-legend, .tree-line, .tree-legend-special\")\n      .transition(t)\n      .attr(\"stroke-opacity\", 0)\n      .attr(\"fill-opacity\", 0);\n  }\n\n  function animateHideAxis(t) {\n    d3.select(\".tree-xAxis\")\n      .transition(t)\n      .attr(\"stroke-opacity\", 0)\n      .attr(\"fill-opacity\", 0);\n  }\n\n  function animateHideChildren(node, t) {\n    const text = d3.select(`#node-${node.data.title} text`).node();\n    const { width } = text.getBBox();\n    d3.select(`#node-${node.data.title} text`)\n      .transition(t)\n      .attr(\"x\", width + 8);\n\n    node.each((d) => {\n      if (node.data.title === d.data.title) return;\n\n      // node\n      d3.select(`#node-${d.data.title}`)\n        .attr(\"fill-opacity\", 1)\n        .transition(t)\n        .attr(\"transform\", `translate(${node.y}, ${node.x})`)\n        .attr(\"fill-opacity\", 0);\n\n      // link\n      d3.select(`#link-${d.data.title}`)\n        .transition(t)\n        .attr(\"d\", () => {\n          const o = { x: node.x, y: node.y };\n          return pathLink({ source: o, target: o });\n        });\n\n      // rect\n      d3.selectAll(`.grid-${d.data.title}`)\n        .transition(t)\n        .attr(\"stroke-opacity\", 0)\n        .attr(\"fill-opacity\", 0);\n    });\n  }\n\n  function animateShowChildren(node, t) {\n    const text = d3.select(`#node-${node.data.title} text`).node();\n    const { width } = text.getBBox();\n    d3.select(`#node-${node.data.title} text`)\n      .transition(t)\n      .attr(\"x\", -width - 8);\n\n    d3.selectAll(`.grid-${node.data.title} `)\n      .transition(t)\n      .attr(\"stroke-opacity\", 0)\n      .attr(\"fill-opacity\", 0);\n\n    // 移动到目的位置\n    node.each((d) => {\n      if (node.data.title === d.data.title) return;\n      d3.select(`#node-${d.data.title}`)\n        .transition(t)\n        .attr(\"transform\", `translate(${d.y}, ${d.x})`)\n        .attr(\"fill-opacity\", 1);\n\n      d3.select(`#link-${d.data.title}`)\n        .transition(t)\n        .attr(\"stroke-opacity\", 0.4)\n        .attr(\"d\", () => {\n          const o = { x: d.x, y: d.y };\n          const s = { x: d.parent.x, y: d.parent.y };\n          return pathLink({ source: s, target: o });\n        });\n    });\n  }\n\n  function hideChildren(node) {\n    setDrag({\n      move: 0,\n      start: null,\n    });\n    node.hideChildren = true;\n    node.each((child) => {\n      if (child.data.title === node.data.title) return;\n      child.hide = true;\n    });\n  }\n\n  function showChildren(node) {\n    setDrag({\n      move: 0,\n      start: null,\n    });\n    node.hideChildren = false;\n    node.eachBefore((child) => {\n      if (child.data.title === node.data.title) return;\n      child.hide = false;\n      child.hideChildren = false;\n    });\n  }\n\n  function copyTree() {\n    // 这里必须要拷贝一份，否者很麻烦\n    const newTreeData = d3.hierarchy(regionsData);\n    newTreeData.each((node) => {\n      const old = nodeByTitle.get(node.data.title);\n      node.hideChildren = old.hideChildren;\n      node.hide = old.hide;\n    });\n    return newTreeData;\n  }\n\n  function isSelect(d) {\n    return selectedRegion === d.region && selectedDate === d.date;\n  }\n\n  function handleClickRect({ region, date }) {\n    setSelectedRegion(region);\n    setSelectedDate(date);\n  }\n\n  function noData(data) {\n    return data.filter(({ value }) => !isNaN(value)).length === 0;\n  }\n\n  useEffect(() => {\n    // 绘制坐标轴\n    const scaleLegend = d3\n      .scaleLinear()\n      .domain(colorScale.domain())\n      .range([0, legendWidth]);\n\n    const specialScaleLegend = d3\n      .scaleSqrt()\n      .domain(specialColorScale.domain())\n      .range([0, legendWidth]);\n\n    const legendAxis = d3\n      .axisBottom(scaleLegend)\n      .ticks(legendWidth / 50)\n      .tickSizeOuter(0);\n\n    const specialLegendAxis = d3\n      .axisBottom(specialScaleLegend)\n      .ticks(legendWidth / 50)\n      .tickSizeOuter(0);\n\n    const xAxis = d3\n      .axisBottom(x)\n      .tickSizeOuter(0)\n      .tickFormat((time) => {\n        const date = new Date(time).getDate();\n        if (date !== 1) return date;\n        const month = new Date(time).getMonth();\n        return labels[month];\n      });\n\n    d3.select(\".tree-xAxis\")\n      .call(xAxis)\n      .call((g) =>\n        g\n          .selectAll(\"text\")\n          .filter(function () {\n            const label = d3.select(this).text();\n            return labels.indexOf(label) !== -1;\n          })\n          .attr(\"font-weight\", \"bold\")\n          .attr(\"dy\", \"2em\")\n      );\n\n    d3.select(\".tree-legend\").call(legendAxis);\n    d3.select(\".tree-legend-special\").call(specialLegendAxis);\n\n    // 监听事件\n    window.addEventListener(\"mouseup\", handleMouseup);\n    window.addEventListener(\"mousemove\", handleMousemove);\n\n    // animation\n    const t = d3.transition().duration(200);\n    d3.selectAll(\n      \".grid, .tree-legend, .tree-line, .tree-xAxis, .tree-xAxis, .tree-btn, .tree-legend-special\"\n    )\n      .transition(t)\n      .attr(\"stroke-opacity\", 1)\n      .attr(\"fill-opacity\", 1);\n\n    return () => {\n      window.removeEventListener(\"mouseup\", handleMouseup);\n      window.removeEventListener(\"mousemove\", handleMousemove);\n    };\n  });\n\n  return (\n    <Svg\n      viewBox={[0, 0, width, height]}\n      loading={loading && noData(data)}\n      nodata={noData(data)}\n      onClick={() => setHighlight([])}\n      onMouseEnter={() => setHover(true)}\n      onMouseLeave={() => setHover(false)}\n      onMouseOver={() => !hover && setHover(true)}\n      show={show}\n      title=\"树 + 热力图\"\n      introduction={introduction}\n    >\n      {th && (\n        <g\n          transform={`translate(${width - margin.right - legendWidth - 10}, ${\n            margin.top / 2\n          })`}\n        >\n          {d3.range(0, legendWidth).map((l) => (\n            <line\n              className=\"tree-line\"\n              key={l}\n              x1={l}\n              y1={-legendHeight / 2}\n              x2={l}\n              y2={legendHeight / 2}\n              stroke={stroke(l)}\n            />\n          ))}\n          <g\n            className=\"tree-legend\"\n            transform={`translate(0, ${legendHeight / 2})`}\n          ></g>\n          <text textAnchor=\"end\" fill=\"currentColor\" dy=\"0.31em\" dx={-10}>\n            {hasSpecialLegend() ? \"其他地区\" : \"所有地区\"}\n          </text>\n        </g>\n      )}\n      {hasSpecialLegend() && (\n        <g\n          transform={\n            th === 0\n              ? `translate(${width - margin.right - legendWidth - 10}, ${\n                  margin.top / 2\n                })`\n              : `translate(${\n                  width - margin.right - legendWidth - legendWidth - 100\n                }, ${margin.top / 2})`\n          }\n        >\n          {d3.range(0, legendWidth).map((l) => (\n            <line\n              className=\"tree-line\"\n              key={l}\n              x1={l}\n              y1={-legendHeight / 2}\n              x2={l}\n              y2={legendHeight / 2}\n              stroke={strokeSpecial(l)}\n            />\n          ))}\n          <g\n            className=\"tree-legend-special\"\n            transform={`translate(0, ${legendHeight / 2})`}\n          ></g>\n          <text textAnchor=\"end\" fill=\"currentColor\" dy=\"0.31em\" dx={-10}>\n            {th === 0 ? \"中国\" : th === 1 ? \"华中地区\" : \"湖北\"}\n          </text>\n        </g>\n      )}\n      {layers.map(([depth, data]) => (\n        <g\n          className=\"tree-btn\"\n          transform={`translate(${\n            margin.left + depth * nodeWidth - buttonSize / 2\n          }, ${height - margin.top + buttonSize / 2})`}\n          key={depth}\n          onClick={(e) => {\n            toggleNodes(data);\n            e.stopPropagation(); // 这行代码很关键\n          }}\n          fillOpacity={0}\n        >\n          {data.every((d) => d.hideChildren) ? plusButton : minusButton}\n        </g>\n      ))}\n      <g transform={`translate(${margin.left}, ${margin.top})`}>\n        {root.links().map((link, index) => (\n          <path\n            id={`link-${link.target.data.title}`}\n            key={index}\n            fill=\"none\"\n            stroke=\"#555\"\n            strokeOpacity={link.target.hide || link.source.hide ? 0 : 0.4}\n            strokeWidth={1.5}\n            d={pathLink(link)}\n          ></path>\n        ))}\n        {root\n          .descendants()\n          .reverse()\n          .map((node) => (\n            <g\n              key={node.data.title}\n              id={`node-${node.data.title}`}\n              transform={`translate(${node.y}, ${node.x})`}\n              fill={\n                selectedRegion === node.data.title\n                  ? highlightColor\n                  : normalColor\n              }\n              fillOpacity={node.hide ? 0 : 1}\n              cursor=\"pointer\"\n            >\n              {!node.children ? (\n                <circle r={3}></circle>\n              ) : (\n                <>\n                  <circle\n                    r={buttonSize / 2 - 5}\n                    fill=\"white\"\n                    onClick={(e) => {\n                      toggleNode(node);\n                      e.stopPropagation();\n                    }}\n                  ></circle>\n                  <g\n                    transform={`translate(${-buttonSize / 2}, ${\n                      -buttonSize / 2\n                    })`}\n                    onClick={(e) => {\n                      toggleNode(node);\n                      e.stopPropagation();\n                    }}\n                  >\n                    {!node.hideChildren ? minusButton : plusButton}\n                  </g>\n                </>\n              )}\n              <text\n                dy=\"0.31em\"\n                x={!node.children || node.hideChildren ? 8 : -8}\n                textAnchor={\n                  !node.children || node.hideChildren ? \"start\" : \"end\"\n                }\n                fontSize=\"12\"\n                onClick={(e) => {\n                  toggleHighlightNode(node);\n                  e.stopPropagation();\n                }}\n                onDoubleClick={(e) => {\n                  setSelectedRegion(node.data.title);\n                  setFocusRegion(node.data.title);\n                  e.stopPropagation();\n                }}\n              >\n                {node.data.title}\n              </text>\n            </g>\n          ))}\n      </g>\n      <g transform={`translate(${width - margin.right - matrixWidth}, ${0})`}>\n        <g clipPath=\"url(#maxtrix-ly)\">\n          <g\n            transform={`translate(${\n              -drag.move * ((days.length * cellWidth) / matrixWidth)\n            }, ${margin.top - cellHeight / 2})`}\n          >\n            {data.map((d) => (\n              <rect\n                className={`grid-${d.region} grid`}\n                key={d.region + d.date.toString()}\n                x={x(d.date) + 1}\n                y={y(d.region) + 1}\n                width={cellWidth - 2}\n                height={h(d.region) - 2}\n                fill={color(d)}\n                fillOpacity={0}\n                strokeOpacity={0}\n                cursor=\"pointer\"\n                onClick={(e) => {\n                  handleClickRect(d);\n                  e.stopPropagation();\n                }}\n                stroke={isSelect(d) ? highlightRectColor : \"none\"}\n                strokeWidth={isSelect(d) ? 2 : 0}\n              >\n                <title>{`${d.region}:${d.value}(${formatDate(\n                  new Date(d.date)\n                )})`}</title>\n              </rect>\n            ))}\n          </g>\n          <g\n            className=\"tree-xAxis\"\n            transform={`translate(${\n              -drag.move * ((days.length * cellWidth) / matrixWidth)\n            }, ${height - margin.bottom})`}\n          ></g>\n        </g>\n        <defs>\n          <clipPath id=\"maxtrix-ly\">\n            <rect\n              x={-2}\n              y=\"0\"\n              width={matrixWidth}\n              height={height - margin.bottom + 30}\n            />\n          </clipPath>\n        </defs>\n        {hover && matrixWidth < days.length * cellWidth && (\n          <g transform={`translate(0, ${height - margin.bottom + 40})`}>\n            <rect\n              ref={sliderRef}\n              width={matrixWidth}\n              height={8}\n              x={0}\n              y={0}\n              rx={4}\n              ry={4}\n              fill=\"transparent\"\n            ></rect>\n            <rect\n              onMouseDown={handleMousedown}\n              width={matrixWidth * (matrixWidth / (days.length * cellWidth))}\n              height={8}\n              x={drag.move}\n              y={0}\n              rx={4}\n              ry={4}\n              fill=\"#bfbfbf\"\n              cursor=\"pointer\"\n            ></rect>\n          </g>\n        )}\n      </g>\n    </Svg>\n  );\n}\n","import React, { useEffect } from \"react\";\nimport styled from \"styled-components\";\nimport * as d3 from \"d3\";\n\nimport Svg from \"../../../components/Svg\";\nimport formatDate from \"../../../utils/formatDate\";\n\nconst Container = styled.div`\n  cursor: pointer;\n`;\n\nexport default function ({\n  selectedDate,\n  setSelectedDate,\n  selectedType,\n  loading,\n  width,\n  height,\n  show,\n  setFocusRegion,\n  focusRegion,\n  colors,\n  all,\n  highlightRectColor,\n  disabledColor,\n  legendWidth,\n  legendHeight,\n}) {\n  const margin = { top: 30, right: 30, bottom: 30, left: 30 };\n  const data = all\n    .filter((d) => d.region === focusRegion)\n    .map((d) => ({\n      value: d[selectedType],\n      date: new Date(d.date),\n    }))\n    .filter(({ value }) => !isNaN(value) && value !== \"\");\n\n  const countDay = (d) => d.getDay(),\n    formatDay = (d) => \"SMTWTFS\"[countDay(d)],\n    formatMonth = d3.timeFormat(\"%b\");\n\n  const timeWeek = d3.timeSunday,\n    timeMonth = d3.timeMonth,\n    timeDay = d3.timeDay,\n    [startDate, endDate] = d3.extent(data, (d) => d.date),\n    valueExtent = d3.extent(data, (d) => d.value),\n    startMonth = timeMonth(startDate),\n    endMonth = timeMonth.ceil(endDate),\n    totalWeek = timeWeek.count(startMonth, endMonth),\n    days = d3.range(7).map((i) => new Date(1995, 0, i)),\n    months = d3.timeMonths(startMonth, endMonth),\n    padding = 4,\n    sw = 8,\n    sc = \"white\";\n\n  const valueByDate = d3.map(data, (d) => formatDate(d.date));\n  const dates = timeDay.range(startMonth, endMonth).map((d) => {\n    const key = formatDate(d);\n    const value = valueByDate.get(key);\n    if (value) return value;\n    return {\n      date: d,\n      value: null,\n    };\n  });\n\n  const cellSize = Math.min(\n    (width - margin.left - margin.right) / totalWeek,\n    40\n  );\n\n  const chartWidth = (cellSize * totalWeek) | 0,\n    chartHeight = (cellSize * 7) | 0;\n\n  const special = focusRegion === \"湖北\" || focusRegion === \"华中地区\";\n  const x = (date) => timeWeek.count(startMonth, date) * cellSize + 0.5,\n    y = (date) => countDay(date) * cellSize + 0.5,\n    colorScale = special\n      ? d3\n          .scaleSqrt()\n          .interpolate(() => colors.special)\n          .domain(valueExtent)\n      : d3.scaleSequential(colors[selectedType]).domain(valueExtent),\n    color = (value) => {\n      if (value === null) return disabledColor;\n      return colorScale(value);\n    },\n    stroke = special\n      ? d3\n          .scaleSqrt()\n          .interpolate(() => colors.special)\n          .domain([0, legendWidth])\n      : d3.scaleSequential(colors[selectedType]).domain([0, legendWidth]),\n    yDay = (d) => (countDay(d) + 0.5) * cellSize,\n    isSelect = (date) => formatDate(date) === selectedDate;\n\n  const pathMonth = (t) => {\n    const n = 7;\n    const d = countDay(t);\n    const w = timeWeek.count(startMonth, t);\n    return `${\n      d === 0\n        ? `M${w * cellSize},0`\n        : d === n\n        ? `M${(w + 1) * cellSize},0`\n        : `M${(w + 1) * cellSize},0V${d * cellSize}H${w * cellSize}`\n    }V${n * cellSize}`;\n  };\n\n  function noData(data) {\n    return data.filter(({ value }) => !isNaN(value)).length === 0;\n  }\n\n  const introduction = (\n    <div>\n      <h3>作用</h3>\n      <p>反映各个地区每天确诊、治愈或死亡人数相对前一天的变化情况。</p>\n      <h3>说明</h3>\n      <ul>\n        <li>\n          因为湖北和华中地区的数据远大于其他地区，所以选择了一种特殊的颜色范围。\n        </li>\n        <li>变化为 0 的格子不一定真的为 0 ，可能是因为数据缺失。</li>\n      </ul>\n      <h3>交互方法</h3>\n      <ul>\n        <li>\n          <b>双击</b>空白地方返回。\n        </li>\n      </ul>\n    </div>\n  );\n\n  useEffect(() => {\n    // 绘制坐标轴\n    const scaleLegend = special\n      ? d3.scaleSqrt().domain(colorScale.domain()).range([0, legendWidth])\n      : d3.scaleLinear().domain(colorScale.domain()).range([0, legendWidth]);\n\n    const legendAxis = d3\n      .axisBottom(scaleLegend)\n      .ticks(legendWidth / 50)\n      .tickSizeOuter(0);\n\n    d3.select(\".date-legend\").call(legendAxis);\n  });\n\n  return (\n    <Container onDoubleClick={() => setFocusRegion(\"\")}>\n      <Svg\n        viewBox={[0, 0, width, height]}\n        loading={loading}\n        nodata={noData(data)}\n        show={show}\n        introduction={introduction}\n        title=\"日历热图\"\n      >\n        <g\n          transform={`translate(${width - margin.right - legendWidth - 10}, ${\n            margin.top\n          })`}\n        >\n          {d3.range(0, legendWidth).map((l) => (\n            <line\n              className=\"tree-line\"\n              key={l}\n              x1={l}\n              y1={-legendHeight / 2}\n              x2={l}\n              y2={legendHeight / 2}\n              stroke={stroke(l)}\n            />\n          ))}\n          <g\n            className=\"date-legend\"\n            transform={`translate(0, ${legendHeight / 2})`}\n          ></g>\n        </g>\n        <g\n          transform={`translate(${(width - chartWidth) / 2}, ${\n            (height - chartHeight) / 2\n          })`}\n        >\n          {data.length !== 0 &&\n            months.map((d) => (\n              <text fill=\"currentColor\" x={x(d)} dy=\"-1em\" key={d}>\n                {formatMonth(d)}\n              </text>\n            ))}\n          {data.length !== 0 &&\n            months\n              .slice(1, months.length)\n              .map((d) => (\n                <path\n                  d={pathMonth(d)}\n                  stroke={sc}\n                  strokeWidth={sw}\n                  fill=\"none\"\n                  key={d}\n                />\n              ))}\n          {dates.map(({ date, value }) => (\n            <rect\n              key={date}\n              x={x(date)}\n              y={y(date)}\n              width={cellSize - padding}\n              height={cellSize - padding}\n              fill={color(value)}\n              stroke={isSelect(date) ? highlightRectColor : \"none\"}\n              strokeWidth={padding}\n              onClick={(e) => {\n                if (value !== null) setSelectedDate(formatDate(date));\n                e.stopPropagation();\n              }}\n            >\n              <title>{`${formatDate(date)}:${\n                value === null ? \"暂无数据\" : value\n              }`}</title>\n            </rect>\n          ))}\n          {data.length !== 0 &&\n            days.map((d) => (\n              <text\n                key={d}\n                fill=\"currentColor\"\n                x={-cellSize}\n                y={yDay(d)}\n                dy=\"0.31em\"\n              >\n                {formatDay(d)}\n              </text>\n            ))}\n        </g>\n        {data.length && (\n          <g\n            transform={`translate(${width - 35}, ${height - 40})`}\n            textAnchor=\"end\"\n            fill=\"#777\"\n          >\n            <text fontSize={35} fontWeight=\"bold\">\n              {focusRegion}\n            </text>\n            <text fontSize={15} dy=\"1.5em\">\n              {selectedDate}\n            </text>\n          </g>\n        )}\n      </Svg>\n    </Container>\n  );\n}\n","import React, { useMemo } from \"react\";\nimport * as d3 from \"d3\";\nimport \"array-flat-polyfill\";\n\nimport TreeMatrix from \"./TreeMatrix\";\nimport HeatMap from \"./HeatMap\";\n\nexport default function ({\n  dataByRegion,\n  selectedRegion,\n  selectedDate,\n  setSelectedDate,\n  setSelectedRegion,\n  selectedType,\n  loading,\n  selectedCountries,\n  treeData,\n  setTreeData,\n  handleChangeLevel,\n  focusRegion,\n  setFocusRegion,\n  highlightRegions,\n  setHighlightRegions,\n}) {\n  const width = 1200,\n    height = 650,\n    legendWidth = 200,\n    legendHeight = 10;\n\n  const highlightColor = \"red\",\n    normalColor = \"black\",\n    highlightRectColor = \"red\",\n    disabledColor = \"#eeeeee\";\n\n  const all = useMemo(\n    () =>\n      dataByRegion\n        ? Array.from(dataByRegion).flatMap(([region, dataByDate]) =>\n            d3\n              .pairs(\n                Array.from(dataByDate)\n                  .map(([date, data]) => ({\n                    date: date,\n                    data: data.data,\n                  }))\n                  .sort((a, b) => new Date(a.date) - new Date(b.date))\n              )\n              .map(([a, b]) => ({\n                region,\n                date: b.date,\n                ...Object.keys(b.data).reduce(\n                  // eslint-disable-next-line\n                  (obj, key) => ((obj[key] = b.data[key] - a.data[key]), obj),\n                  {}\n                ),\n              }))\n          )\n        : [],\n    // eslint-disable-next-line\n    [dataByRegion, selectedCountries.length]\n  );\n\n  const colors = {\n    dead: d3.interpolatePurples,\n    confirmed: d3.interpolateReds,\n    cured: d3.interpolateGreens,\n    special: d3.interpolatePuRd,\n  };\n\n  const treeProps = {\n    dataByRegion,\n    selectedRegion,\n    selectedDate,\n    setSelectedDate,\n    setSelectedRegion,\n    selectedType,\n    loading,\n    show: focusRegion === \"\",\n    setFocusRegion,\n    width,\n    height,\n    colors,\n    all,\n    highlightColor,\n    normalColor,\n    highlightRectColor,\n    disabledColor,\n    legendHeight,\n    legendWidth,\n    treeData,\n    setTreeData,\n    handleChangeLevel,\n    highlight: highlightRegions,\n    setHighlight: setHighlightRegions,\n  };\n\n  const heatMapProps = {\n    width,\n    height,\n    show: focusRegion !== \"\",\n    setFocusRegion,\n    focusRegion,\n    colors,\n    all,\n    selectedType,\n    loading: false,\n    selectedDate,\n    highlightRectColor,\n    disabledColor,\n    setSelectedDate,\n    legendWidth,\n    legendHeight,\n  };\n\n  return (\n    <div>\n      <TreeMatrix {...treeProps} />\n      <HeatMap {...heatMapProps} />\n    </div>\n  );\n}\n","import React from \"react\";\n\nexport default function({ extent, pos, size, children }) {\n  const [x0, y0, width, height] = extent;\n  const [x, ofx] = pos;\n  const [contentW, contentH] = size;\n  const rightY = (y0 + height - contentH) / 2;\n  let rightX = x;\n  if (x + contentW + ofx > x0 + width) {\n    rightX -= contentW + ofx;\n  } else {\n    rightX += ofx;\n  }\n  return <>{children && children(rightX, rightY)}</>;\n}\n","import React, { useEffect, useMemo, useRef, useState } from \"react\";\nimport * as d3 from \"d3\";\n\nimport Svg from \"../../../components/Svg\";\nimport mouse from \"../../../utils/mouse\";\nimport Tooltip from \"./Tooltip\";\n\nexport default function ({\n  loading,\n  dataByDate,\n  selectedTime,\n  selectedType,\n  selectedLevel,\n  setSelectedTime,\n  focusRegion,\n  setFocusRegion,\n  selectedCountries,\n  countries,\n  highlightRegions,\n  setHighlightRegions,\n  selectedRegion,\n  setSelectedRegion,\n}) {\n  const ref = useRef(null);\n  const width = 1200,\n    height = 350,\n    margin = { top: 75, right: 40, bottom: 25, left: 90 },\n    formatDate = d3.timeFormat(\"%x\"),\n    bisect = d3.bisector((d) => d.date).left;\n\n  const secondLevelSet = new Set([\n    \"华北地区\",\n    \"西北地区\",\n    \"东北地区\",\n    \"华东地区\",\n    \"华中地区\",\n    \"西南地区\",\n    \"华南地区\",\n    \"港澳台地区\",\n  ]);\n\n  const countriesSet = new Set(countries);\n\n  const [tip, setTip] = useState(null),\n    [hovered, setHovered] = useState(false);\n\n  const all = useMemo(\n      () =>\n        Array.from(dataByDate).map(([date, data]) => ({\n          date: new Date(date),\n          ...data\n            .filter(({ region }) => {\n              if (selectedLevel === \"top\") {\n                const s = new Set(selectedCountries);\n                return s.has(region);\n              } else if (selectedLevel === \"second\") {\n                return secondLevelSet.has(region);\n              } else {\n                return !countriesSet.has(region) && !secondLevelSet.has(region);\n              }\n            })\n            // eslint-disable-next-line\n            .reduce((obj, { region, data }) => ((obj[region] = data), obj), {}),\n        })),\n      [\n        dataByDate,\n        selectedLevel,\n        countriesSet,\n        secondLevelSet,\n        selectedCountries,\n      ]\n    ),\n    data = useMemo(\n      () =>\n        all\n          .map((d) =>\n            Object.keys(d).reduce((obj, key) => {\n              if (key === \"date\") {\n                obj[key] = d[key];\n              } else if (focusRegion === \"\" || focusRegion === key) {\n                obj[key] = d[key][selectedType];\n              }\n              return obj;\n            }, {})\n          )\n          .sort((a, b) => a.date - b.date),\n      [all, selectedType, focusRegion]\n    ),\n    [first] = data,\n    keys = first ? Object.keys(first).filter((d) => d !== \"date\") : [],\n    cnt = 2,\n    tipCnt = selectedLevel === \"second\" ? 4 : 6,\n    legendWidth = selectedLevel === \"third\" ? 55 : 75,\n    legendHeight = 25,\n    disableColor = \"#efefef\",\n    tw = selectedLevel === \"second\" ? 100 : 70,\n    th = 20,\n    tipW = Math.max(tw * Math.ceil(keys.length / tipCnt), 100),\n    tipH = Math.min(keys.length, tipCnt) * th + 30;\n\n  const series = d3.stack().keys(keys)(data);\n\n  const x = d3\n    .scaleTime()\n    .domain(d3.extent(data, (d) => new Date(d.date)))\n    .range([0, width - margin.right - margin.left]);\n\n  const y = d3\n    .scaleLinear()\n    .domain([0, d3.max(series, (d) => d3.max(d, (d) => d[1]))])\n    .nice()\n    .range([height - margin.bottom - margin.top, 0]);\n\n  const legendX = (index) => ((index / cnt) | 0) * legendWidth;\n  const legendY = (index) => (index % cnt) * legendHeight;\n  const tipX = (index) => ((index / tipCnt) | 0) * tw;\n  const tipY = (index) => (index % tipCnt) * th;\n\n  const lineX = () => {\n    if (!hovered) return x(new Date(selectedTime));\n    if (tip) return x(tip.time);\n  };\n\n  const area = d3\n    .area()\n    .x((d) => x(d.data.date))\n    .y0((d) => y(d[0]))\n    .y1((d) => y(d[1]));\n\n  const colorScale =\n    keys.length === 1\n      ? () => \"#61d4b3\"\n      : d3\n          .scaleOrdinal()\n          .domain(keys)\n          .range(d3.quantize(d3.interpolateSpectral, keys.length).reverse());\n\n  const title = (d) => (typeof d === \"object\" ? d.data.title : d);\n  const color = (key) => {\n    const set = new Set(highlightRegions.map((d) => title(d)));\n    if (highlightRegions.length === 0) return colorScale(key);\n    return set.has(key) ? colorScale(key) : disableColor;\n  };\n\n  const stroke = (key) =>\n    selectedLevel === \"top\" ? d3.color(color(key)).darker() : \"none\";\n\n  const id = (key) => `a-${key}`;\n\n  const introduction = (\n    <div>\n      <h3>作用</h3>\n      <p>反映各个地区每天确诊、治愈或死亡的总人数随着时间的变化。</p>\n      <h3>说明</h3>\n      <p>如果某个地区的数据长时间没有变化，可能是因为数据缺失。</p>\n      <h3>使用方法</h3>\n      <ul>\n        <li>\n          <b>鼠标点击</b>某个地区的名字，会高亮该地区所对应的“带子”。\n          <b>鼠标点击空白区域</b>会取消高亮。\n        </li>\n        <li>\n          <b>双击</b>某个地区的名字，进入该地区所对应的<b>普通面积图</b>。\n          <b>双击</b>空白部分返回。\n        </li>\n      </ul>\n    </div>\n  );\n\n  function handleChangeSelectedTime(e) {\n    const [mouseX] = mouse(e, ref.current);\n    const time = x.invert(mouseX).getTime();\n    setSelectedTime(time);\n  }\n\n  function handleChangeTip(e) {\n    const [mouseX, mouseY] = mouse(e, ref.current);\n    const time = x.invert(mouseX).getTime();\n    const i = bisect(data, new Date(time), 0, data.length - 1),\n      a = data[i];\n    setTip({ ...a, time, x: mouseX, y: mouseY });\n  }\n\n  useEffect(() => {\n    const xAxis = d3.axisBottom(x);\n    const yAxis = (g) =>\n      g.call(d3.axisLeft(y)).call((g) => g.select(\".domain\").remove());\n    d3.select(\".area-xAxis\").call(xAxis);\n    d3.select(\".area-yAxis\").call(yAxis);\n  }, [data, x, y]);\n\n  return (\n    <>\n      {series.length === 0 ? (\n        <Svg\n          viewBox={[0, 0, width, height]}\n          loading={loading}\n          nodata={true}\n        ></Svg>\n      ) : (\n        <Svg\n          viewBox={[0, 0, width, height]}\n          loading={loading}\n          onDoubleClick={() => setFocusRegion(\"\")}\n          onClick={(e) => {\n            setHighlightRegions([]);\n            e.stopPropagation();\n          }}\n          introduction={introduction}\n          title=\"堆叠面积图\"\n          onMouseEnter={(e) => setHovered(true)}\n          onMouseLeave={(e) => setHovered(false)}\n          onMouseOver={(e) => !hovered && setHovered(true)}\n        >\n          <g\n            cursor=\"pointer\"\n            ref={ref}\n            transform={`translate(${margin.left}, ${margin.top})`}\n            onMouseLeave={() => setTip(null)}\n          >\n            <g onMouseMove={handleChangeTip} onClick={handleChangeSelectedTime}>\n              {series.map((s) => (\n                <path\n                  key={s.key}\n                  fill={color(s.key)}\n                  d={area(s)}\n                  stroke={stroke(s.key)}\n                  strokeWidth={2}\n                  strokeLinecap=\"round\"\n                />\n              ))}\n            </g>\n            <line\n              x1={lineX()}\n              y1={0}\n              x2={lineX()}\n              y2={height - margin.bottom - margin.top}\n              stroke=\"currentColor\"\n            />\n            <g transform={`translate(${10},${-legendHeight * cnt + 10})`}>\n              <rect\n                x={-10}\n                y={-10}\n                fill=\"transparent\"\n                width={legendWidth * Math.ceil(keys.length / cnt)}\n                height={Math.min(keys.length, cnt) * legendHeight}\n              ></rect>\n              {keys.map((key, index) => (\n                <g\n                  key={key}\n                  transform={`translate(${legendX(index)}, ${legendY(index)})`}\n                  onDoubleClick={(e) => {\n                    setFocusRegion(key);\n                    setHighlightRegions([]);\n                    e.stopPropagation();\n                  }}\n                  onClick={(e) => {\n                    const newHighlightRegions = highlightRegions.slice();\n                    const old = highlightRegions.find((d) => title(d) === key);\n                    if (old) {\n                      const index = highlightRegions.indexOf(old);\n                      newHighlightRegions.splice(index, 1);\n                    } else {\n                      newHighlightRegions.push(key);\n                    }\n                    setHighlightRegions(newHighlightRegions);\n                    setSelectedRegion(key);\n                    e.stopPropagation();\n                  }}\n                >\n                  <circle fill={color(key)} cx={0} cy={0} r={5}></circle>\n                  <text\n                    dy={5}\n                    dx={10}\n                    fill={key === selectedRegion ? \"red\" : \"currentColor\"}\n                    fontSize=\"12\"\n                    clipPath={`url(#${id(key)})`}\n                  >\n                    {key}\n                    <title>{key}</title>\n                  </text>\n                  <defs>\n                    <clipPath id={id(key)}>\n                      <rect\n                        x={0}\n                        y={-legendHeight / 2}\n                        width={legendWidth - 5}\n                        height={legendHeight}\n                      />\n                    </clipPath>\n                  </defs>\n                </g>\n              ))}\n            </g>\n            {tip && (\n              <Tooltip\n                extent={[\n                  0,\n                  0,\n                  width - margin.left - margin.right,\n                  height - margin.top - margin.bottom,\n                ]}\n                size={[tipW, tipH]}\n                pos={[tip.x, 10]}\n              >\n                {(x, y) => (\n                  <g transform={`translate(${x}, ${y})`}>\n                    <rect\n                      width={tipW}\n                      height={tipH}\n                      rx={10}\n                      ry={10}\n                      fill=\"white\"\n                      stroke=\"currentColor\"\n                    ></rect>\n                    <text dx={10} dy={20}>\n                      {formatDate(tip.date)}\n                    </text>\n                    <g transform={`translate(10, 40)`}>\n                      {Object.keys(tip)\n                        .filter(\n                          (d) =>\n                            d !== \"time\" &&\n                            d !== \"x\" &&\n                            d !== \"y\" &&\n                            d !== \"date\"\n                        )\n                        .sort((a, b) => tip[b] - tip[a])\n                        .map((key, index) => (\n                          <text\n                            fontSize=\"10\"\n                            key={key}\n                            x={tipX(index)}\n                            y={tipY(index)}\n                          >{`${key}: ${tip[key]}`}</text>\n                        ))}\n                    </g>\n                  </g>\n                )}\n              </Tooltip>\n            )}\n          </g>\n          <g\n            className=\"area-xAxis\"\n            transform={`translate(${margin.left}, ${height - margin.bottom})`}\n          />\n          <g\n            className=\"area-yAxis\"\n            transform={`translate(${margin.left}, ${margin.top})`}\n          />\n        </Svg>\n      )}\n    </>\n  );\n}\n","import * as d3 from \"d3\";\n\nexport function find(source, cb) {\n  let target;\n  eachBefore(source, (d) => {\n    if (cb(d)) target = d;\n  });\n  return target;\n}\n\nexport function eachBefore(node, cb) {\n  node.children && node.children.forEach((d) => eachBefore(d, cb));\n  cb(node);\n}\n\nexport function eachAfter(node, cb) {\n  cb(node);\n  node.children && node.children.forEach((d) => eachBefore(d, cb));\n}\n\nexport function filter(root, cb) {\n  let nodes = [];\n  eachBefore(root, (node) => {\n    if (cb(node)) nodes.push(node);\n  });\n  return nodes;\n}\n\nexport function treeHeight(root) {\n  eachBefore(root, (node) => {\n    node.height = hasChildren(node, (d) => !d.hide)\n      ? d3.max(node.children, (d) => d.height) + 1\n      : 0;\n  });\n  return root.height;\n}\n\nexport function hasChildren(node, cb = () => true) {\n  return node.children && node.children.every((d) => cb(d));\n}\n\nexport function descendant(root) {\n  let nodes = [];\n  eachBefore(root, (node) => nodes.push(node));\n  return nodes;\n}\n\nexport function formTree(nodes) {\n  return {\n    title: \"全球\",\n    value: \"全球\",\n    children: nodes.map((d) => ({\n      title: d,\n      value: d,\n    })),\n  };\n}\n","import React, { useEffect, useState } from \"react\";\nimport { connect } from \"dva\";\nimport { Row, Col, Select } from \"antd\";\nimport * as d3 from \"d3\";\nimport styled from \"styled-components\";\n\nimport DateMap from \"./banner/DateMap\";\nimport Areachart from \"./banner/Areachart\";\nimport regions from \"../../assets/data/region_options.json\";\nimport { formTree } from \"../../utils/tree\";\nimport formatDate from \"../../utils/formatDate\";\n\nconst { Option } = Select;\n\nconst Container = styled.div`\n  position: relative;\n  margin-bottom: 4em;\n  padding: 0 10px;\n`;\n\nconst Control = styled.div`\n  display: flex;\n  margin: 1em 0 1em 0;\n\n  @media (max-width: 700px) {\n    flex-direction: column;\n  }\n`;\n\nfunction NcovPanel({\n  dataByRegion,\n  dataByDate,\n  getData,\n  countries,\n  selectedCountries,\n  setSelectedCountries,\n  widthData,\n  getCountryData,\n  total,\n  selectedTime,\n  setSelectedTime,\n  loading,\n  treeData,\n  setTreeData,\n  selectedRegion,\n  setSelectedRegion,\n}) {\n  const [focusRegion, setFocusRegion] = useState(\"\");\n  const [selectedType, setSelectedType] = useState(\"confirmed\");\n  const [selectedLevel, setSelectedLevel] = useState(\"top\");\n  const [highlightRegions, setHighlightRegions] = useState([]);\n  const selectedDate = formatDate(new Date(selectedTime));\n  const setSelectedDate = (date) => setSelectedTime(new Date(date).getTime());\n\n  const levels = [\n    { name: \"国家\", key: \"top\" },\n    { name: \"分区\", key: \"second\" },\n    { name: \"省份\", key: \"third\" },\n  ];\n\n  const types = [\n    { name: \"确诊\", key: \"confirmed\" },\n    { name: \"治愈\", key: \"cured\" },\n    { name: \"死亡\", key: \"dead\" },\n  ];\n\n  const areaPros = {\n    loading,\n    dataByDate,\n    selectedTime,\n    setSelectedTime,\n    selectedType,\n    selectedLevel,\n    focusRegion,\n    setFocusRegion,\n    selectedCountries,\n    countries,\n    highlightRegions,\n    setHighlightRegions,\n    selectedRegion,\n    setSelectedRegion,\n  };\n\n  const dateProps = {\n    regions,\n    selectedRegion,\n    setSelectedRegion,\n    selectedDate,\n    setSelectedDate,\n    setSelectedLevel,\n    selectedLevel,\n    selectedType,\n    loading,\n    dataByRegion,\n    selectedCountries,\n    treeData,\n    setTreeData,\n    handleChangeLevel,\n    focusRegion,\n    setFocusRegion: handleFocusChange,\n    highlightRegions,\n    setHighlightRegions,\n  };\n\n  function handleFocusChange(value) {\n    const level = findLevel(value);\n    if (level !== selectedLevel) handleChangeLevel(level);\n    setFocusRegion(value);\n  }\n\n  function findLevel(value) {\n    const secondLevelSet = new Set([\n      \"华北地区\",\n      \"西北地区\",\n      \"东北地区\",\n      \"华东地区\",\n      \"华中地区\",\n      \"西南地区\",\n      \"华南地区\",\n      \"港澳台地区\",\n    ]);\n    const topLevelSet = new Set(selectedCountries);\n    if (secondLevelSet.has(value)) return \"second\";\n    if (topLevelSet.has(value)) return \"top\";\n    return \"third\";\n  }\n\n  function handleCountryDataChange(keys) {\n    // 验证一下\n    const countriesSet = new Set(countries);\n    let isValid = true;\n    keys.forEach((k) => !countriesSet.has(k) && (isValid = false));\n    if (!isValid) {\n      alert(\"输入无效\");\n      return;\n    }\n    if (keys.length >= 30) {\n      alert(\"不能超过 30 个国家\");\n      return;\n    }\n\n    const newKeys = [];\n    for (let k of keys) {\n      if (widthData.has(k)) newKeys.push(k);\n      else getCountryData(k, dataByDate, dataByRegion, total);\n    }\n    setSelectedCountries(newKeys);\n    setTreeData(d3.hierarchy(formTree(keys)));\n  }\n\n  function handleChangeLevel(value, tree) {\n    if (value === \"top\") {\n      setTreeData(d3.hierarchy(formTree(selectedCountries)));\n    } else if (value === \"second\") {\n      const root =\n        tree !== undefined\n          ? tree\n          : d3.hierarchy(regions).each((d) => {\n              d.depth === 1\n                ? (d.hideChildren = true)\n                : d.depth === 2 && (d.hide = true);\n            });\n      setTreeData(root);\n    } else {\n      const root = tree !== undefined ? tree : d3.hierarchy(regions);\n      setTreeData(root);\n    }\n    setSelectedLevel(value);\n    setFocusRegion(\"\");\n  }\n\n  useEffect(() => {\n    getData([\"美国\", \"英国\", \"意大利\"]);\n  }, [getData]);\n\n  return (\n    <Container>\n      <Control>\n        <div>\n          <span>\n            <b>级别</b>\n          </span>\n          &ensp;\n          <Select\n            value={selectedLevel}\n            onChange={(value) => handleChangeLevel(value)}\n          >\n            {levels.map((d) => (\n              <Option key={d.key}>{d.name}</Option>\n            ))}\n          </Select>\n          &emsp;\n          <span>\n            <b>种类</b>\n          </span>\n          &ensp;\n          <Select\n            value={selectedType}\n            onChange={(value) => setSelectedType(value)}\n          >\n            {types.map((d) => (\n              <Option key={d.key}>{d.name}</Option>\n            ))}\n          </Select>\n          &emsp;\n        </div>\n        {selectedLevel === \"top\" && (\n          <div className=\"country\">\n            <span>\n              <b>查看的国家</b>\n            </span>\n            &ensp;\n            <Select\n              mode=\"tags\"\n              value={selectedCountries}\n              onChange={handleCountryDataChange}\n              style={{\n                minWidth: 250,\n              }}\n            >\n              {countries.map((d) => (\n                <Option key={d}>{d}</Option>\n              ))}\n            </Select>\n          </div>\n        )}\n      </Control>\n      <Row gutter={[16, 16]}>\n        <Col span={24}>\n          <Areachart {...areaPros} />\n        </Col>\n        <Col span={24}>\n          <DateMap {...dateProps} />\n        </Col>\n      </Row>\n    </Container>\n  );\n}\nexport default connect(\n  ({ ncov, loading }) => ({\n    loading: loading.models.ncov,\n    ...ncov,\n  }),\n  {\n    setTreeData: (data) => ({ type: \"ncov/setTreeData\", payload: data }),\n    getCountryData: (country, dataByDate, dataByRegion, total) => ({\n      type: \"ncov/getCountryData\",\n      payload: { country, dataByDate, dataByRegion, total },\n    }),\n    getNewsData: (region, date) => ({\n      type: \"news/getNewsData\",\n      payload: { region, date },\n    }),\n    getData: (selectedCountries) => ({\n      type: \"ncov/getData\",\n      payload: selectedCountries,\n    }),\n    setSelectedCountries: (keys) => ({\n      type: \"ncov/setSelectedCountries\",\n      payload: {\n        keys,\n      },\n    }),\n  }\n)(NcovPanel);\n","import React, { useRef, useEffect, useState } from \"react\";\nimport styled from \"styled-components\";\nimport * as d3 from \"d3\";\n\nimport mouse from \"../../../utils/mouse\";\nimport formatDate from \"../../../utils/formatDate\";\n\n\nconst Svg = styled.svg`\n  background: #f9f9f9;\n`;\n\nconst Button = styled.g`\n  cursor: pointer;\n`;\n\nconst Slider = styled.rect`\n  cursor: pointer;\n`;\n\nconst Dot = styled.circle`\n  cursor: pointer;\n`;\n\nexport default function({\n  selectedTime,\n  running,\n  toggleAnimation,\n  changeValue,\n  range,\n  finish,\n  totalDuration,\n  duration\n}) {\n  const dragging = useRef(false);\n  const sliderRef = useRef(null);\n  const dotRef = useRef(null);\n  const [tip, setTip] = useState({\n    time: -1,\n    duration: -1\n  });\n  const width = 1200,\n    height = 50,\n    margin = { top: 20, right: 40, bottom: 20, left: 90 };\n\n  const x = d3\n    .scaleLinear()\n    .domain(range)\n    .range([margin.left, width - margin.right]);\n\n  const d = d3\n    .scaleLinear()\n    .domain([margin.left, width - margin.right])\n    .range([0, totalDuration]);\n\n  const foramtTime = t => {\n    const d = (t / 1000) | 0;\n    const m = Math.max((d / 60) | 0, 0);\n    const s = Math.max(d % 60, 0);\n    return `${m < 10 ? \"0\" + m : m}:${s < 10 ? \"0\" + s : s}`;\n  };\n\n  const startButton = (\n    <svg\n      t=\"1583152510891\"\n      className=\"icon\"\n      viewBox=\"0 0 1024 1024\"\n      version=\"1.1\"\n      xmlns=\"http://www.w3.org/2000/svg\"\n      p-id=\"2302\"\n      width=\"30\"\n      height=\"30\"\n    >\n      <path\n        d=\"M149.989688 874.093352a509.948138 509.948138 0 1 0-109.714286-162.700613 513.206978 513.206978 0 0 0 109.714286 162.700613z\"\n        fill=\"#4D4D4D\"\n        p-id=\"2303\"\n      ></path>\n      <path\n        d=\"M429.646454 687.977369a57.331447 57.331447 0 0 0 27.277699 7.000472 60.348892 60.348892 0 0 0 32.829797-10.017916l175.977369-115.990571a68.677039 68.677039 0 0 0 30.777935-58.055634 66.504479 66.504479 0 0 0-29.812353-56.486563l-177.54644-115.749175a57.934936 57.934936 0 0 0-60.348892-3.017445 67.832155 67.832155 0 0 0-33.312588 60.348893V627.628477a67.470061 67.470061 0 0 0 34.157473 60.348892z\"\n        fill=\"#FFFFFF\"\n        p-id=\"2304\"\n      ></path>\n    </svg>\n  );\n\n  const pauseButton = (\n    <svg\n      t=\"1583152894415\"\n      className=\"icon\"\n      viewBox=\"0 0 1024 1024\"\n      version=\"1.1\"\n      xmlns=\"http://www.w3.org/2000/svg\"\n      p-id=\"1002\"\n      width=\"30\"\n      height=\"30\"\n    >\n      <path\n        d=\"M874.058005 149.941995a510.06838 510.06838 0 1 0 109.740156 162.738976 511.396369 511.396369 0 0 0-109.740156-162.738976z\"\n        fill=\"#4D4D4D\"\n        p-id=\"1003\"\n      ></path>\n      <path\n        d=\"M417.954256 281.533601a41.046923 41.046923 0 0 0-41.77128 40.201839v385.116718a41.892007 41.892007 0 0 0 83.663287 0v-385.116718a41.167649 41.167649 0 0 0-41.892007-40.201839zM606.045744 281.533601a41.046923 41.046923 0 0 0-41.77128 40.201839v385.116718a41.892007 41.892007 0 0 0 83.663287 0v-385.116718a41.167649 41.167649 0 0 0-41.892007-40.201839z\"\n        fill=\"#FFFFFF\"\n        p-id=\"1004\"\n      ></path>\n    </svg>\n  );\n\n  const restartButton = (\n    <svg\n      t=\"1583294650370\"\n      className=\"icon\"\n      viewBox=\"0 0 1024 1024\"\n      version=\"1.1\"\n      xmlns=\"http://www.w3.org/2000/svg\"\n      p-id=\"1815\"\n      width=\"30\"\n      height=\"30\"\n    >\n      <path d=\"M471.616 361.728\" p-id=\"1816\"></path>\n      <path\n        d=\"M512 0C229.248 0 0 229.248 0 512s229.248 512 512 512 512-229.248 512-512S794.752 0 512 0zM534.976 860.672c-100.992 0-191.616-44.48-253.312-114.944l63.36-55.424c3.712 4.224 7.488 8.32 11.52 12.288 47.68 47.68 111.104 73.92 178.56 73.92 67.456 0 130.816-26.304 178.56-73.92 47.68-47.68 73.92-111.104 73.92-178.56s-26.304-130.816-73.92-178.56c-47.68-47.68-111.104-73.92-178.56-73.92-67.456 0-130.816 26.304-178.56 73.92l94.4 94.4L198.336 439.872 198.336 187.328 296.96 285.952c60.928-60.928 145.088-98.624 238.016-98.624 185.92 0 336.64 150.72 336.64 336.64C871.616 709.888 720.896 860.672 534.976 860.672z\"\n        p-id=\"1817\"\n      ></path>\n    </svg>\n  );\n\n  function handleClick(e) {\n    const [mouseX] = mouse(e, sliderRef.current);\n    const time = x.invert(mouseX + margin.left);\n    changeValue(time);\n  }\n\n  function handleMouseMove(e) {\n    const [mouseX] = mouse(e, sliderRef.current);\n    const duration = d(mouseX + margin.left);\n    const time = x.invert(mouseX + margin.left);\n    setTip({\n      time,\n      duration\n    });\n  }\n\n  function handleMouseOver(e) {\n    const [mouseX] = mouse(e, sliderRef.current);\n    const duration = d(mouseX + margin.left);\n    const time = x.invert(mouseX + margin.left);\n    setTip({\n      time,\n      duration\n    });\n  }\n\n  useEffect(() => {\n    const handleMouseUp = () => (dragging.current = false);\n    const handleMouseMove = e => {\n      if (!dragging.current) return;\n      const [mouseX] = mouse(e, sliderRef.current);\n      const t = x.invert(mouseX + margin.left);\n      changeValue(t);\n    };\n\n    window.addEventListener(\"mouseup\", handleMouseUp);\n    window.addEventListener(\"mousemove\", handleMouseMove);\n\n    return () => {\n      window.removeEventListener(\"mouseup\", handleMouseUp);\n      window.removeEventListener(\"mousemove\", handleMouseMove);\n    };\n  });\n\n  return (\n    <Svg viewBox={[0, 0, width, height]} fontSize=\"12\">\n      <Button transform={`translate(${10}, ${10})`} onClick={toggleAnimation}>\n        {running ? pauseButton : finish ? restartButton : startButton}\n      </Button>\n      <g transform={`translate(${margin.left - 10}, ${height / 2})`}>\n        <text textAnchor=\"end\" dy=\"0.5em\">\n          {foramtTime(duration)}\n        </text>\n      </g>\n      <Slider\n        ref={sliderRef}\n        x={margin.left}\n        y={margin.top}\n        width={width - margin.left - margin.right}\n        height={10}\n        fill=\"#eee\"\n        rx={5}\n        onClick={handleClick}\n        onMouseMove={handleMouseMove}\n        onMouseOver={handleMouseOver}\n      >\n        <title>{`[${foramtTime(tip.duration)}] ${formatDate(\n          new Date(tip.time)\n        )}`}</title>\n      </Slider>\n      <Dot\n        ref={dotRef}\n        cx={x(selectedTime) || margin.left}\n        cy={height / 2}\n        r={7}\n        onMouseDown={() => (dragging.current = true)}\n      ></Dot>\n      <g transform={`translate(${width}, ${height / 2})`}>\n        <text textAnchor=\"end\" color=\"black\" dy=\"0.5em\">\n          {foramtTime(totalDuration)}\n        </text>\n      </g>\n    </Svg>\n  );\n}\n","import React, { useState, useEffect } from \"react\";\nimport { Switch } from \"antd\";\nimport * as d3 from \"d3\";\n\nimport Svg from \"../../../components/Svg\";\nimport formatDate from \"../../../utils/formatDate\";\n\nexport default function ({\n  loading,\n  keyframes,\n  selectedTime,\n  running,\n  color,\n  selectedName,\n  showWordsOfTopic,\n  hideWordsOfTopic,\n  selectedTopic,\n}) {\n  const width = 600,\n    height = 400,\n    margin = { top: 30, right: 35, bottom: 20, left: 40 };\n\n  if (keyframes === undefined) {\n    return (\n      <Svg\n        viewBox={[0, 0, width, height]}\n        loading={loading}\n        nodata={true}\n      ></Svg>\n    );\n  }\n\n  const [fullTitle, setFullTitle] = useState(false);\n  const slot = (\n    <>\n      <span>标题模式</span>\n      <Switch onChange={setFullTitle} checked={fullTitle} size=\"small\" />\n    </>\n  );\n  const n = 10;\n  const bisect = d3.bisector((d) => d[0]);\n  const y = d3\n    .scaleBand()\n    .domain(d3.range(n + 1))\n    .padding(0.1)\n    .range([margin.top, ((height - margin.bottom) / n) * (n + 1)]);\n  const barSize = y.bandwidth();\n  const bars = interpolate(keyframes, selectedTime);\n\n  const x = d3\n    .scaleLinear()\n    .domain([0, d3.max(bars, (d) => d.value)])\n    .range([margin.left, width - margin.right]);\n\n  const textWidth = (d, index) => {\n    const offset = index < 8 ? 0 : 90;\n    const full = fullTitle\n      ? x.range()[1] - x(0) - offset\n      : Math.max(x(d.value) - x(0) - 8, 0);\n    return full;\n  };\n\n  const names = bars.map((d) => d.name);\n  const id = (d) => `t-${d.value}`;\n  const colorScale = (name) =>\n    selectedTopic !== null && selectedTopic !== name ? \"#efefef\" : color(name);\n\n  const introduction = (\n    <div>\n      <h3>作用</h3>\n      <p>反映知乎热榜前10的话题的热度变化情况。</p>\n      <h3>说明</h3>\n      <p>目前只有 2020-02-27 之后的数据。前面的数据会尽快补上。</p>\n      <h3>交互</h3>\n      <ul>\n        <li>\n          <b>单击</b>任意热搜话题，旁边的词云会只展示当前话题下回答中的热词。\n        </li>\n        <li>\n          <b>鼠标移动到</b>任意热搜话题上面，会显示完整的标题。\n        </li>\n      </ul>\n    </div>\n  );\n\n  color.cur(names);\n\n  function interpolate(data, time) {\n    const i = bisect.left(data, time, 0, data.length - 1),\n      a = data[i];\n    if (!i || !running) return a[1].map((d) => ({ ...d, y: y(d.rank) }));\n    const b = data[i - 1],\n      t = (time - a[0]) / (b[0] - a[0]);\n\n    return a[1].map((d) => {\n      const { value, rank } = b[1].find(({ name }) => d.name === name) || {\n        value: d.value,\n        rank: n,\n      };\n      return {\n        ...d,\n        y: y(d.rank) * (1 - t) + y(rank) * t,\n        value: d.value * (1 - t) + value * t,\n      };\n    });\n  }\n\n  useEffect(() => {\n    // 保存上一帧的颜色\n    color.pre(names);\n\n    // 绘制坐标轴\n    const axis = d3\n      .axisTop(x)\n      .ticks(width / 160)\n      .tickSizeOuter(0)\n      .tickSizeInner(-barSize * (n + 1 + y.padding()));\n\n    const g = d3.select(\"#bar-axis\").call(axis);\n    g.select(\".tick:first-of-type text\").remove();\n    g.selectAll(\".tick:not(:first-of-type) line\").attr(\"stroke\", \"white\");\n    g.select(\".domain\").remove();\n  });\n\n  return (\n    <Svg\n      viewBox={[0, 0, width, height]}\n      loading={loading}\n      onClick={hideWordsOfTopic}\n      title=\"动态条形图\"\n      introduction={introduction}\n      slot={slot}\n    >\n      {bars.map((d) => (\n        <g\n          transform={`translate(${margin.left}, ${running ? d.y : y(d.rank)})`}\n          key={d.name}\n        >\n          <rect\n            width={fullTitle ? x.range()[1] - x(0) : x(d.value) - x(0)}\n            height={barSize}\n            fill={colorScale(d.name)}\n            cursor=\"pointer\"\n            fillOpacity={0.7}\n            onClick={(e) => {\n              showWordsOfTopic(d.name);\n              e.stopPropagation();\n            }}\n          >\n            <title>{d.name}</title>\n          </rect>\n        </g>\n      ))}\n      <g id=\"bar-axis\" transform={`translate(${0}, ${margin.top})`}></g>\n      {bars.map((d, index) => (\n        <g\n          transform={`translate(${margin.left}, ${running ? d.y : y(d.rank)})`}\n          key={d.name}\n        >\n          <text\n            dx=\"8\"\n            dy=\"1.1em\"\n            clipPath={`url(#${id(d)})`}\n            fontWeight=\"bold\"\n            fontSize=\"13\"\n            cursor=\"pointer\"\n            onClick={(e) => {\n              showWordsOfTopic(d.name);\n              e.stopPropagation();\n            }}\n          >\n            {d.name}\n            <title>{d.name}</title>\n          </text>\n          <text\n            dx=\"8\"\n            y={barSize}\n            dy=\"-0.33em\"\n            clipPath={`url(#${id(d)})`}\n            fontSize=\"10\"\n            fill=\"currentColor\"\n          >\n            {d.value | 0}\n          </text>\n          <defs>\n            <clipPath id={id(d)}>\n              <rect x=\"0\" y=\"0\" width={textWidth(d, index)} height={barSize} />\n            </clipPath>\n          </defs>\n        </g>\n      ))}\n      <g\n        transform={`translate(${width - margin.right - 5}, ${height - 50})`}\n        textAnchor=\"end\"\n        fill={fullTitle ? \"black\" : \"#777\"}\n      >\n        <text fontSize={35} fontWeight=\"bold\">\n          {selectedName}\n        </text>\n        <text fontSize={15} dy=\"1.5em\">\n          {formatDate(new Date(selectedTime))}\n        </text>\n      </g>\n    </Svg>\n  );\n}\n","import React, { useRef, useEffect } from \"react\";\nimport styled from \"styled-components\";\nimport Card from \"./Card\";\nimport download from \"../utils/download\";\n\nconst Canvas = styled.canvas`\n  width: 100%;\n  height: 100%;\n`;\n\nexport default function ({\n  loading,\n  nodata,\n  style,\n  className,\n  id,\n  dependcies = [],\n  children,\n  width,\n  height,\n  filename = \"words\",\n  introduction,\n  title,\n  hasZoom = true,\n  ...rest\n}) {\n  const ratio = 4;\n  function onDownload() {\n    const canvas = ref.current;\n    canvas.toBlob((blob) => {\n      download(blob, filename);\n    });\n  }\n\n  const ref = useRef(null);\n\n  const cardProps = {\n    onDownload,\n    id,\n    style,\n    className,\n    loading,\n    nodata,\n    introduction,\n    title,\n  };\n\n  const canvasProps = {\n    ref,\n    width: width * ratio,\n    height: height * ratio,\n    hasZoom,\n    ...rest,\n  };\n\n  useEffect(() => {\n    const canvas = ref.current;\n    const context = canvas.getContext(\"2d\");\n    context.restore();\n    context.save();\n    context.scale(ratio, ratio);\n    children && children(context);\n  // eslint-disable-next-line\n  }, [...dependcies, children]);\n\n  return (\n    <Card {...cardProps}>\n      <Canvas {...canvasProps}></Canvas>\n    </Card>\n  );\n}\n","import React from \"react\";\nimport * as d3 from \"d3\";\n\nimport Canvas from \"../../../components/Canvas\";\nimport formatDate from \"../../../utils/formatDate\";\n\nexport default function ({\n  loading,\n  selectedTime,\n  keyframes,\n  running,\n  selectedName,\n  colorScale,\n  color,\n  selectedWords,\n  selectedTopic,\n}) {\n  const width = 900,\n    height = 600,\n    marginRight = 50,\n    marginBottom = 60;\n\n  if (keyframes === undefined || keyframes.length === 0)\n    return (\n      <Canvas\n        width={width}\n        height={height}\n        loading={loading}\n        dependcies={[selectedTime, draw]}\n        nodata={keyframes === undefined}\n      ></Canvas>\n    );\n\n  const interpolateAttrs = new Set([\"x\", \"y\", \"size\"]);\n\n  const initWord = (word) => ({\n    ...word,\n    size: 0,\n  });\n  const text = (d) => d.text;\n  const words =\n    selectedTopic === null ? interpolateData(selectedTime) : selectedWords;\n\n  const introduction = (\n    <div>\n      <h3>作用</h3>\n      <p>反映当前知乎热门话题下回答中的热词变化情况。</p>\n      <h3>说明</h3>\n      <p>目前只有 2020-02-27 之后的数据。前面的数据会尽快补上。</p>\n      <h3>交互</h3>\n      <p>无</p>\n    </div>\n  );\n\n  function interpolateData(time) {\n    const bisect = d3.bisector((d) => d[0]).left;\n    const i = bisect(keyframes, time, 0, keyframes.length - 1),\n      a = keyframes[i];\n    if (!i || !running || time > a[0]) return a[1];\n    const b = keyframes[i - 1],\n      t = d3.easeCircleInOut((time - a[0]) / (b[0] - a[0]));\n\n    // 找出消失的\n    const disappear = b[1]\n      .filter((word) => !a[1].find((d) => text(d) === text(word)))\n      .map(initWord);\n    const all = [...disappear, ...a[1]];\n    return all.map((word) => {\n      const pre = b[1].find((d) => text(d) === text(word)) || initWord(word);\n      return Object.keys(word).reduce((obj, key) => {\n        if (interpolateAttrs.has(key)) {\n          obj[key] = word[key] * (1 - t) + pre[key] * t;\n        } else {\n          obj[key] = word[key];\n        }\n        return obj;\n      }, {});\n    });\n  }\n\n  function drawLabel(context) {\n    context.save();\n    // region\n    context.translate(width - marginRight - 5, height - marginBottom - 10);\n    context.fillStyle = \"#777\";\n    context.textAlign = \"end\";\n    context.textBaseline = \"bottom\";\n    context.font = `bold 50px siyuan`;\n    context.fillText(selectedName, 0, 0);\n\n    // date\n    context.font = \"normal 25px 微软雅黑\";\n    context.fillText(formatDate(new Date(selectedTime)), 0, 35);\n\n    context.restore();\n  }\n\n  function drawText(context) {\n    context.save();\n    context.translate(width / 2, height / 2);\n    context.textAlign = \"center\";\n    for (let word of words) {\n      const fill = selectedTopic === null ? colorScale(text(word)) : color;\n      // const fill = color(word.title);\n      context.fillStyle = `${fill}`;\n      context.font = `${word.size}px siyuan`;\n      context.fillText(text(word), word.x, word.y);\n    }\n    context.restore();\n  }\n\n  function draw(context) {\n    context.fillStyle = \"white\";\n    context.fillRect(0, 0, width, height);\n    drawText(context);\n    drawLabel(context);\n  }\n\n  return (\n    <Canvas\n      width={width}\n      height={height}\n      dependcies={[selectedTime, draw]}\n      loading={loading}\n      nodata={words.length === 0}\n      title=\"动态词云\"\n      introduction={introduction}\n    >\n      {draw}\n    </Canvas>\n  );\n}\n","import React, { useEffect, useRef, useState } from \"react\";\nimport styled from \"styled-components\";\nimport { connect } from \"dva\";\nimport { Row, Col, message } from \"antd\";\n\nimport Timeline from \"./banner/Timeline\";\nimport BarRace from \"./banner/BarRace\";\nimport StoryTelling from \"./banner/StoryTelling\";\nimport mc from \"../../utils/memorizedColor\";\nimport rc from \"../../utils/randomColor\";\nimport * as d3 from \"d3\";\n\nmessage.config({\n  maxCount: 1,\n});\n\nconst Container = styled.div`\n  position: relative;\n  padding: 0 10px;\n`;\n\nfunction Hot({\n  dataByName,\n  getData,\n  loadingHots,\n  loadingCommon,\n  timeByName,\n  getTime,\n  selectedTime,\n  setSelectedTime,\n  updateDataByTime,\n  getWords,\n  selectedWords,\n  setSelectedWords,\n  wordsByTime,\n  totalTimeRange,\n  computingLayout,\n  running,\n  setRunning,\n  requestAnimation,\n  setFrame,\n  timeScale,\n  duration,\n  interpolateInterval,\n  totalDuration,\n  stopAnimation,\n}) {\n  const [selectedTopic, setSelectedTopic] = useState(null);\n  const [pause, setPause] = useState(false); // 是否应为 loading data 而暂停\n  const barColor = useRef(\n    mc([...d3.schemeTableau10, \"#634294\", \"#d54087\"], 10)\n  );\n  const wordColor = useRef(rc(d3.schemeTableau10));\n\n  const selectedName = \"zhihu\";\n  const namevalues = dataByName.get(selectedName);\n  const { listKeyframes, cloudsKeyframes } = namevalues || {};\n\n  const hotTimeRange = timeByName.get(selectedName);\n\n  const barsProps = {\n    width: 600,\n    height: 400,\n    keyframes: listKeyframes,\n    selectedTime,\n    color: barColor.current,\n    running,\n    loading: loadingHots || loadingCommon || computingLayout,\n    selectedName: \"知乎\",\n    showWordsOfTopic,\n    hideWordsOfTopic: () => setSelectedTopic(null),\n    selectedTopic,\n    interpolateInterval,\n  };\n\n  const storyProps = {\n    width: 600,\n    height: 400,\n    keyframes: cloudsKeyframes,\n    selectedWords,\n    selectedTopic,\n    selectedTime,\n    color: barColor.current(selectedTopic),\n    colorScale: wordColor.current,\n    loading: loadingHots || loadingCommon || computingLayout,\n    running: running || pause,\n    selectedName: \"知乎\",\n  };\n\n  const timeProps = {\n    selectedTime,\n    running,\n    toggleAnimation,\n    changeValue,\n    range: totalTimeRange || [0, 0],\n    finish: duration >= totalDuration,\n    totalDuration,\n    duration,\n  };\n\n  if (running && loadingHots && !pause) {\n    stopAnimation();\n    setPause(true);\n  }\n\n  if (pause && !loadingHots && !running) {\n    startAnimation();\n    setPause(false);\n  }\n\n  function startAnimation() {\n    if (running) return;\n    if (selectedTopic !== null) setSelectedTopic(null);\n    setRunning(true);\n    if (duration >= totalDuration) {\n      const start = totalTimeRange[0],\n        startDuartion = timeScale.invert(start);\n      requestAnimation(startDuartion);\n    } else {\n      requestAnimation(duration);\n    }\n  }\n\n  function toggleAnimation() {\n    if (running) stopAnimation();\n    else startAnimation();\n  }\n\n  function changeValue(value) {\n    if (!hotTimeRange) return;\n    const start = totalTimeRange[0],\n      end = hotTimeRange[hotTimeRange.length - 1].time;\n    if (value < start || value > end) message.error(\"该时间段暂时没有数据!!!\");\n    const validValue = Math.max(start, Math.min(value, end));\n    setFrame(timeScale.invert(validValue));\n    setSelectedTime(validValue);\n  }\n\n  function showWordsOfTopic(title) {\n    setSelectedTopic(title);\n    stopAnimation();\n    const i = search(selectedTime),\n      time = hotTimeRange[i].time / 1000,\n      words = wordsByTime.get(time);\n    if (words) {\n      const sw = words.find((d) => d.title === title);\n      const w = sw ? sw.keywords : [];\n      setSelectedWords(w);\n    } else getWords(selectedName, time, title);\n  }\n\n  function search(time) {\n    const bisect = d3.bisector((d) => d.time);\n    const i = bisect.left(hotTimeRange, time);\n    return Math.max(0, i - 1);\n  }\n\n  function requestData(index) {\n    // 一直向后找，找到没有请求的地方\n    const limit = 10;\n    let i = 1;\n    for (i = 1; i < limit && index + i < hotTimeRange.length - 1; i++) {\n      const tick = hotTimeRange[index + i];\n      if (tick.request) break;\n    }\n\n    updateDataByTime({\n      name: selectedName,\n      from: index,\n      to: index + i,\n    });\n\n    getData({\n      name: selectedName,\n      tick: hotTimeRange[index],\n      start: hotTimeRange[0].time,\n      limit: i,\n      interval: interpolateInterval,\n    });\n  }\n\n  useEffect(() => {\n    // 获得时间范围\n    if (!hotTimeRange) {\n      getTime(selectedName);\n      return;\n    }\n\n    const index = search(selectedTime),\n      tick = hotTimeRange[index];\n    if (tick.request) return;\n    requestData(index);\n\n    // eslint-disable-next-line\n  }, [getTime, selectedName, hotTimeRange, selectedTime]);\n\n  return (\n    <Container>\n      <Row gutter={[16, 16]}>\n        <Col span={24} md={12}>\n          <BarRace {...barsProps} />\n        </Col>\n        <Col span={24} md={12}>\n          <StoryTelling {...storyProps} />\n        </Col>\n      </Row>\n      <Row>\n        <Col span={24}>\n          <Timeline {...timeProps} />\n        </Col>\n      </Row>\n    </Container>\n  );\n}\n\nexport default connect(\n  ({ hots, loading }) => ({\n    ...hots,\n    loadingHots: loading.models.hots,\n    loadingCommon: loading.models.common,\n  }),\n  {\n    setSelectedTime: (time) => ({\n      type: \"common/setSelectedTime\",\n      payload: time,\n    }),\n    setSelectedWords: (words) => ({\n      type: \"hots/setSelectedWords\",\n      payload: words,\n    }),\n    getWords: (name, time, title) => ({\n      type: \"hots/getWords\",\n      payload: {\n        name,\n        time,\n        title,\n      },\n    }),\n    getData: (options) => ({\n      type: \"hots/getData\",\n      payload: options,\n    }),\n    setSelectedName: (name) => ({\n      type: \"hots/setSelectedName\",\n      payload: name,\n    }),\n    getTime: (name) => ({ type: \"hots/getTime\", payload: { name } }),\n    updateDataByTime: (options) => ({\n      type: \"hots/updateDataByTime\",\n      payload: options,\n    }),\n  }\n)(Hot);\n","export default function(domain) {\n  const colorByKey = new Map();\n  let pre = [],\n    cur = [];\n\n  color.pre = function(_) {\n    return arguments.length ? ((pre = _), color) : pre;\n  };\n\n  color.cur = function(_) {\n    return arguments.length ? ((cur = _), color) : cur;\n  };\n\n  function color(key) {\n    const c = colorByKey.get(key);\n    if (c) return c;\n    const [rc] = domain.splice(0, 1);\n    colorByKey.set(key, rc);\n    if (!domain.length) {\n      // 找到一个之前没有且有对应颜色的 key\n      // 因为在调用 pre 方法之前，之前没有的颜色可能已经被删除过了\n      const dk = pre.find(\n        pk => !cur.find(ck => ck === pk) && colorByKey.get(pk)\n      );\n      const dc = colorByKey.get(dk);\n      domain.push(dc);\n      colorByKey.delete(dk);\n    }\n    return rc;\n  }\n  return color;\n}\n","export default function(colors) {\n  const colorByKey = new Map();\n  function color(key) {\n    const c = colorByKey.get(key);\n    if (c) return c;\n    const i = (Math.random() * colors.length) | 0,\n      newColor = colors[i];\n    colorByKey.set(key, newColor);\n    return newColor;\n  }\n  return color;\n}\n","import React from \"react\";\nimport Canvas from \"../../../components/Canvas\";\n\nfunction Shape({ data, loading, selectedDate, selectedRegion }) {\n  const width = 900,\n    height = 600,\n    marginRight = 40,\n    marginBottom = 40,\n    { keywords, fillingWords } = data || {};\n\n  // 在 edge 没有 FontFace 对象\n\n  function drawText(context, words, { fillStyle, textAlign, textBaseline }) {\n    context.textAlign = textAlign;\n    context.textBaseline = textBaseline;\n    context.fillStyle = fillStyle;\n    for (let word of words) {\n      const { name, transX, transY, rotate, fontSize, fillX, fillY } = word;\n      context.save();\n      context.font = `${fontSize}px siyuan`;\n      context.translate(transX, transY);\n      context.rotate(rotate);\n      context.fillText(name, fillX, fillY);\n      context.restore();\n    }\n  }\n\n  function drawLabel(context) {\n    context.save();\n    // region\n    context.translate(width - marginRight, height - marginBottom);\n    context.fillStyle = \"#777\";\n    context.textAlign = \"end\";\n    context.textBaseline = \"bottom\";\n    context.font = `bold 35px siyuan`;\n    context.fillText(selectedRegion, 0, 0);\n\n    context.font = \"normal 15px siyuan\";\n    context.fillText(selectedDate, 0, 25);\n    // date\n    context.restore();\n  }\n\n  async function draw(context) {\n    try {\n      if (!keywords || !fillingWords) return;\n\n      // 绘制背景\n      context.fillStyle = \"white\";\n      context.fillRect(0, 0, width, height);\n\n      // 绘制地区和时间信息\n      drawLabel(context);\n\n      // 绘制词云\n      drawText(context, keywords, {\n        fillStyle: \"#59569d\",\n        textAlign: \"center\",\n        textBaseline: \"alphabet\",\n      });\n\n      drawText(context, fillingWords, {\n        fillStyle: \"#f25292\",\n        textAlign: \"start\",\n        textBaseline: \"middle\",\n      });\n    } catch (e) {\n      console.error(e);\n    }\n  }\n\n  const introduction = (\n    <div>\n      <h3>作用</h3>\n      <p>展示该地区和该日期新闻报道中的关键字。</p>\n      <h3>说明</h3>\n      <p>目前只有省份和直辖市的数据，同时数据可能出现缺失的情况。</p>\n      <h3>交互</h3>\n      <p>无</p>\n    </div>\n  );\n\n  return (\n    <Canvas\n      width={width}\n      height={height}\n      loading={loading}\n      nodata={data === undefined}\n      dependcies={[data]}\n      introduction={introduction}\n      title=\"Shapewordle\"\n    >\n      {draw}\n    </Canvas>\n  );\n}\n\nexport default Shape;\n","import React from \"react\";\nimport Svg from \"../../../components/Svg\";\nimport * as d3 from \"d3\";\nexport default function ({ loading, selectedRegion, selectedDate, data = [] }) {\n  const width = 300,\n    height = 620,\n    margin = { top: 50, right: 40, bottom: 40, left: 20 },\n    legendHeight = 25,\n    outerRadius =\n      Math.min(\n        width - margin.left - margin.right,\n        height - margin.top - margin.bottom\n      ) /\n        2 -\n      1;\n\n  const arc = d3.arc().innerRadius(0).outerRadius(outerRadius);\n\n  data.sort((a, b) => b.count - a.count);\n\n  const names = data.map((d) => d.name);\n  const pie = d3\n    .pie()\n    .sort(null)\n    .value((d) => d.count);\n\n  const color =\n    data.length === 1\n      ? () => \"#61d4b3\"\n      : d3\n          .scaleOrdinal()\n          .domain(names)\n          .range(\n            d3\n              .quantize(\n                (t) => d3.interpolateSpectral(t * 0.8 + 0.1),\n                data.length\n              )\n              .reverse()\n          );\n\n  const text = (d) =>\n    ((((d.endAngle - d.startAngle) / Math.PI) * 50) | 0) + \"%\";\n\n  const angle = (a) => (180 * (a.startAngle + a.endAngle)) / (2 * Math.PI) - 90;\n  const arcs = pie(data);\n  const introduction = (\n    <div>\n      <h3>作用</h3>\n      <p>展示该地区，该日期不同种类的新闻报道数量的占比。</p>\n      <h3>说明</h3>\n      <p>目前只有省份和直辖市的数据，同时数据可能出现缺失的情况。</p>\n      <h3>交互</h3>\n      <p>无</p>\n    </div>\n  );\n\n  return (\n    <Svg\n      viewBox={[0, 0, width, height]}\n      loading={loading}\n      nodata={data.length === 0}\n      introduction={introduction}\n      title=\"饼状图\"\n      hasZoom={false}\n    >\n      {data.length && (\n        <g\n          transform={`translate(${width - margin.right}, ${\n            height - margin.bottom\n          })`}\n          textAnchor=\"end\"\n          fill=\"#777\"\n        >\n          <text fontSize={35} fontWeight=\"bold\">\n            {selectedRegion}\n          </text>\n          <text fontSize={15} dy=\"1.5em\">\n            {selectedDate}\n          </text>\n        </g>\n      )}\n      <g transform={`translate(${margin.left}, ${margin.top})`}>\n        {names.slice(0, 5).map((d, index) => (\n          <g key={d} transform={`translate(${0}, ${legendHeight * index})`}>\n            <circle fill={color(d)} r={5}></circle>\n            <text fill=\"currentColor\" dx={10} dy=\"0.31em\">\n              {d}\n            </text>\n          </g>\n        ))}\n      </g>\n      <g transform={`translate(${width / 2}, ${height / 2})`}>\n        {arcs.map((a) => (\n          <path key={a.data.name} d={arc(a)} fill={color(a.data.name)} />\n        ))}\n        {arcs.map((a) => (\n          <g\n            key={a.data.name}\n            transform={`rotate(${angle(a)}) translate(${outerRadius - 20})`}\n            textAnchor=\"middle\"\n          >\n            <text\n              fill=\"currentColor\"\n              fontSize={11}\n              fontWeight=\"bold\"\n              transform={`rotate(${-angle(a)})`}\n            >\n              {text(a)}\n            </text>\n          </g>\n        ))}\n      </g>\n    </Svg>\n  );\n}\n","import React, { useEffect } from \"react\";\nimport styled from \"styled-components\";\nimport { connect } from \"dva\";\nimport { Row, Col, Select } from \"antd\";\n\nimport Shape from \"./banner/Shape\";\nimport Piechart from \"./banner/Piechart\";\nimport regionTree from \"../../assets/data/region_options.json\";\nimport { filter } from \"../../utils/tree\";\n\nconst { Option } = Select;\n\nconst Container = styled.div`\n  position: relative;\n  margin-bottom: 4em;\n  padding: 0 10px;\n`;\n\nconst Control = styled.div`\n  display: flex;\n  margin: 0.5em 0 1em 0;\n`;\n\nfunction News({\n  getNewsData,\n  newsByRegion,\n  selectedRegion: defaultRegion,\n  setSelectedRegion,\n  loadingNews,\n  selectedDate,\n}) {\n  const regionList = filter(regionTree, (d) => d.depth === 2).map(\n    (d) => d.title\n  );\n  const regionSet = new Set(regionList);\n  const selectedRegion = regionSet.has(defaultRegion) ? defaultRegion : \"湖北\";\n  const newsByDate = newsByRegion.get(selectedRegion);\n  const news = newsByDate && newsByDate.get(selectedDate);\n  const { words, tags } = news || {};\n\n  const shapeProps = {\n    data: words,\n    loading: loadingNews,\n    selectedDate,\n    selectedRegion,\n  };\n\n  const pieProps = {\n    loading: loadingNews,\n    data: tags,\n    selectedDate,\n    selectedRegion,\n  };\n\n  useEffect(() => {\n    // 如果有日期数据且 news 数据为空的话就请求\n    if (\n      news === undefined &&\n      selectedDate !== \"\" &&\n      selectedRegion !== \"中国\"\n    ) {\n      getNewsData(selectedRegion, `${selectedDate}`);\n    }\n  }, [getNewsData, selectedDate, selectedRegion, news]);\n\n  return (\n    <Container>\n      <Control>\n        <div>\n          <span>\n            <b>地区</b>\n          </span>\n          &ensp;\n          <Select\n            style={{ width: 120 }}\n            onChange={setSelectedRegion}\n            value={selectedRegion}\n          >\n            {regionList.map((d) => (\n              <Option key={d} value={d}>\n                {d}\n              </Option>\n            ))}\n          </Select>\n        </div>\n      </Control>\n      <Row gutter={[16, 16]}>\n        <Col md={6} span={24}>\n          <Piechart {...pieProps} />\n        </Col>\n        <Col md={18} span={24}>\n          <Shape {...shapeProps} />\n        </Col>\n      </Row>\n    </Container>\n  );\n}\n\nexport default connect(\n  ({ loading, news }) => ({\n    ...news,\n    loadingNews: loading.models.news,\n  }),\n  {\n    getNewsData: (region, date) => ({\n      type: \"news/getNewsData\",\n      payload: { region, date },\n    }),\n  }\n)(News);\n","import React, { useEffect, useState } from \"react\";\nimport { connect } from \"dva\";\nimport styled from \"styled-components\";\nimport { Tabs } from \"antd\";\nimport moment from \"moment\";\nimport { DatePicker } from \"antd\";\nimport * as d3 from \"d3\";\n\nimport formatDate from \"../../utils/formatDate\";\nimport Ncov from \"../ncovis\";\nimport Hot from \"../hotsvis\";\nimport News from \"../newsvis\";\nimport visImage from \"../../assets/images/hots.jpg\";\nimport useAnimation from \"../../hooks/useAnimation\";\n\nconst { TabPane } = Tabs;\nconst Container = styled.div`\n  position: relative;\n`;\n\nconst An = styled.div`\n  position: absolute;\n  top: -56px;\n`;\n\nconst Row = styled.div`\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  width: 100%;\n  margin-bottom: 2em;\n\n  @media (max-width: 768px) {\n    flex-direction: column;\n  }\n`;\n\nconst Intro = styled.div`\n  width: 60%;\n  & ul {\n    padding-left: 2em;\n  }\n  @media (max-width: 768px) {\n    width: 100%;\n  }\n`;\n\nconst VisImage = styled.img`\n  width: 360px;\n  border-radius: 8px;\n`;\n\nconst Control = styled.div`\n  display: flex;\n  margin: 0.5em 0 1em 1em;\n`;\n\nfunction VisPanel({\n  getTime,\n  timeRange,\n  selectedTime,\n  selectedRegion,\n  setSelectedRegion,\n  setSelectedTime,\n}) {\n  const [running, setRunning] = useState(false); // 用户是否点击播放\n\n  const { requestAnimation, pauseAnimation, setFrame } = useAnimation(step);\n  const selectedDate = formatDate(new Date(selectedTime));\n  const setSelectedDate = (date) => setSelectedTime(new Date(date).getTime());\n  const hour = 12,\n    ticks = d3.timeHour\n      .every(hour) // 每隔 12 小时获取一下数据\n      .range(timeRange[0], timeRange[1])\n      .map((d) => d.getTime()),\n    totalDuration = ticks.length * 5000,\n    interpolateInterval = hour * 60 * 60 * 50; // 1小时 0.75秒\n\n  const timeScale = d3\n      .scaleLinear()\n      .domain([0, totalDuration])\n      .range(timeRange || [0, 0]),\n    duration = timeScale.invert(selectedTime);\n\n  const ncovProps = {\n    selectedRegion,\n    setSelectedRegion,\n    selectedTime,\n    setSelectedTime,\n  };\n\n  const hotProps = {\n    selectedTime,\n    setSelectedTime,\n    running,\n    totalDuration,\n    totalTimeRange: timeRange,\n    timeScale,\n    duration,\n    interpolateInterval,\n    setRunning,\n    requestAnimation,\n    setFrame,\n    stopAnimation,\n  };\n\n  const newsPros = {\n    selectedRegion,\n    setSelectedRegion,\n    selectedDate,\n  };\n\n  function step(duration) {\n    // 不能超过最大的时间\n    const t = Math.min(timeScale(duration), timeRange[1]);\n    setSelectedTime(t);\n    if (duration > totalDuration) {\n      setRunning(false);\n      return false;\n    }\n  }\n\n  function disabledDate(current) {\n    if (timeRange.length === 0) return true;\n    const [start, end] = timeRange;\n    return current < moment(start) || current > moment(end);\n  }\n\n  function stopAnimation() {\n    if (!running) return;\n    setRunning(false);\n    setSelectedTime(selectedTime + 1); // 防止出现过渡效果\n    pauseAnimation();\n  }\n\n  useEffect(() => {\n    getTime();\n  }, [getTime]);\n  return (\n    <Container>\n      <An id=\"vis\" />\n      <h1>可视化</h1>\n      <Row>\n        <Intro>\n          <p>\n            这里是疫情数据和舆论新闻数据的可视化。你可以先疫情数据出发，找到一些感兴趣的日期，然后去舆论新闻数据可视化看看当时人们在讨论什么、新闻在报道什么；当然你也可以先寻找感兴趣的话题和新闻，然后在去看看当时的疫情发展到什么地步了。\n          </p>\n          <p>\n            在<b>疫情数据</b>\n            面板，我们提供了全球各个国家、中国各个分区和省份确诊、治愈和死亡的总人数和每天变化人数。你可以这个面板探索各个地区确诊、治愈和死亡人数总的变化趋势，或者探索每天的增加或减少趋势，从而了解该地区疫情的总体的发展情况。\n          </p>\n          <p>\n            在<b>舆论新闻</b>面板，一方面我们提供了<b>知乎的热榜</b>\n            前10以及对应回答关键词的可视化，另一方面我们提供了<b>中国新闻网</b>\n            各个地区报道新闻关键词的可视化。你可以找到一些和疫情相关的话题和新闻，然后结合疫情数据去找原因。\n          </p>\n          <p>\n            对于每一种可视化图表，你都可以点击<b>左上角的问号</b>\n            了解更多的使用方法。\n          </p>\n        </Intro>\n        <VisImage src={visImage} />\n      </Row>\n      <Tabs\n        defaultActiveKey=\"1\"\n        onTabClick={(key) => +key === 2 && stopAnimation()}\n      >\n        <TabPane tab=\"舆论新闻\" key=\"1\">\n          <Control>\n            <div>\n              <span>\n                <b>日期</b>\n              </span>\n              &ensp;\n              <DatePicker\n                value={selectedDate === \"\" ? null : moment(selectedDate)}\n                onChange={(_, string) => {\n                  setSelectedDate(string);\n                }}\n                disabledDate={disabledDate}\n                showTody={false}\n              />\n            </div>\n          </Control>\n          <Hot {...hotProps} />\n          <News {...newsPros} />\n        </TabPane>\n        <TabPane tab=\"疫情数据\" key=\"2\">\n          <Ncov {...ncovProps} />\n        </TabPane>\n      </Tabs>\n    </Container>\n  );\n}\n\nexport default connect(({ common }) => ({ ...common }), {\n  getTime: () => ({ type: \"common/getTime\" }),\n  setSelectedRegion: (region) => ({\n    type: \"common/setSelectedRegion\",\n    payload: region,\n  }),\n  setSelectedTime: (time) => ({\n    type: \"common/setSelectedTime\",\n    payload: time,\n  }),\n})(VisPanel);\n","import { useRef } from \"react\";\nexport default function(cb, frameRate = 60) {\n  const timer = useRef();\n  const duration = useRef(0);\n  const pre = useRef();\n\n  const requestAnimation = start => {\n    start && (duration.current = start);\n    timer.current = setInterval(step, 1000 / frameRate);\n  };\n\n  const cancelAnimation = () => {\n    pre.current = undefined;\n    duration.current = 0;\n    clearInterval(timer.current);\n  };\n\n  const setFrame = time => {\n    duration.current = time;\n  };\n\n  const pauseAnimation = () => {\n    pre.current = undefined;\n    clearInterval(timer.current);\n  };\n\n  function step() {\n    const time = new Date().getTime();\n    if (pre.current === undefined) pre.current = time;\n    duration.current += time - pre.current;\n    pre.current = time;\n    const end = cb(duration.current);\n\n    if (end === false) {\n      cancelAnimation();\n      return;\n    }\n  }\n\n  return {\n    requestAnimation,\n    pauseAnimation,\n    setFrame\n  };\n}\n","import React from \"react\";\nimport styled, { ThemeProvider } from \"styled-components\";\n\nimport Header from \"./components/Header\";\nimport Footer from \"./components/Footer\";\n\nimport Overview from \"./pages/overview\";\nimport Introduction from \"./pages/introduction\";\nimport Comment from \"./pages/comment\";\nimport Vis from \"./pages/vis\";\n\n\nconst Content = styled.div`\n  margin: 0 auto;\n  width: 90%;\n  max-width: 1200px;\n`;\n\nfunction App() {\n  \n  const theme = {\n    header: \"black\",\n    content: \"#f9f9f9\",\n    font: \"white\",\n  };\n\n  return (\n    <ThemeProvider theme={theme}>\n      <Header />\n      <Content>\n        <Overview />\n        <Introduction />\n        <Vis />\n        <Comment />\n      </Content>\n      <Footer />\n    </ThemeProvider>\n  );\n}\n\nexport default App;\n","import ApolloClient from \"apollo-boost\";\nimport { gql } from \"apollo-boost\";\nimport { InMemoryCache } from \"apollo-cache-inmemory\";\nimport { persistCache } from \"apollo-cache-persist\";\nconst cache = new InMemoryCache({});\n\n(async () =>\n  await persistCache({\n    cache,\n    storage: window.localStorage,\n  }))();\n\nconst client = new ApolloClient({\n  cache,\n  uri:\n    \"https://api.ncovis.mllab.cn/graphql?token=fuBwv4pYedUUaHycszp21pMmloRf1TQS\",\n});\n\nexport const get = () =>\n  client.query({\n    query: gql`\n      {\n        ncovOverall {\n          time\n          confirmed\n          confirmedIncr\n          cured\n          curedIncr\n          deadIncr\n          dead\n          remainingConfirmed\n          remainingConfirmedIncr\n          global {\n            confirmed\n            confirmedIncr\n            cured\n            curedIncr\n            deadIncr\n            dead\n            remainingConfirmed\n            remainingConfirmedIncr\n          }\n        }\n      }\n    `,\n  });\n","import * as overviewApi from \"./service\";\n\nexport default {\n  namespace: \"overview\",\n  state: {\n    time: new Date().getTime(),\n    data: [\n      {\n        name: \"全球\",\n        data: [\n          {\n            name: \"累计确诊\",\n            value: 0,\n            change: 0,\n          },\n          {\n            name: \"现存确诊\",\n            value: 0,\n            change: 0,\n          },\n          {\n            name: \"累计治愈\",\n            value: 0,\n            change: 0,\n          },\n          { name: \"累计死亡\", value: 0, change: 0 },\n        ],\n      },\n      {\n        name: \"全国\",\n        data: [\n          {\n            name: \"累计确诊\",\n            value: 0,\n            change: 0,\n          },\n          {\n            name: \"现存确诊\",\n            value: 0,\n            change: 0,\n          },\n          {\n            name: \"累计治愈\",\n            value: 0,\n            change: 0,\n          },\n          { name: \"累计死亡\", value: 0, change: 0 },\n        ],\n      },\n    ],\n  },\n  reducers: {\n    save: (state, action) => ({ ...state, ...action.payload }),\n  },\n  effects: {\n    *getData(_, { call, put }) {\n      try {\n        const result = yield call(overviewApi.get);\n        const ncovOverall = result.data.ncovOverall;\n        const data = preprocess(ncovOverall);\n        yield put({\n          type: \"save\",\n          payload: data,\n        });\n      } catch (e) {\n        console.error(e);\n      }\n    },\n  },\n};\n\nfunction preprocess(data) {\n  const { global, time, ...china } = data;\n  const format = (\n    {\n      confirmed,\n      confirmedIncr,\n      cured,\n      curedIncr,\n      deadIncr,\n      dead,\n      remainingConfirmed,\n      remainingConfirmedIncr,\n    },\n    name\n  ) => ({\n    name,\n    data: [\n      {\n        name: \"累计确诊\",\n        value: confirmed,\n        change: confirmedIncr,\n      },\n      {\n        name: \"现存确诊\",\n        value: remainingConfirmed,\n        change: remainingConfirmedIncr,\n      },\n      {\n        name: \"累计治愈\",\n        value: cured,\n        change: curedIncr,\n      },\n      { name: \"累计死亡\", value: dead, change: deadIncr },\n    ],\n  });\n  return {\n    time: time * 1000,\n    data: [format(global, \"全球\"), format(china, \"全国\")],\n  };\n}\n","import * as commentApi from \"./service\";\n\nexport default {\n  namespace: \"comment\",\n  state: {\n    list: commentApi.get(),\n    isOpen: false,\n  },\n  reducers: {\n    setOpen(state, action) {\n      const { value } = action.payload;\n      return { ...state, isOpen: value };\n    },\n  },\n};\n","import p1 from \"../../assets/images/article/1.png\";\nimport p2 from \"../../assets/images/article/2.png\";\nimport p3 from \"../../assets/images/article/3.png\";\nimport p4 from \"../../assets/images/article/4.png\";\nimport p5 from \"../../assets/images/article/5.png\";\nimport p6 from \"../../assets/images/article/6.png\";\n\nexport const get = () => [\n  {\n    id: 1,\n    title: \"疫情期间，有哪些和网课相关的有趣话题？\",\n    url: \"https://zhuanlan.zhihu.com/p/129089330\",\n    des:\n      \"通过山东大学VisLab的疫情可视化工具中的动态条形图，我发现了一些与网课有关的有趣话题，综合时间线分析话题的产生原因和印象。\",\n    createTime: new Date(\"2020-04-12\"),\n    author: \"wxw\",\n    imageUrl: p1,\n  },\n  {\n    id: 2,\n    title: \"nCoVIS: 一个新冠疫情可视化分析平台\",\n    url:\n      \"https://medium.com/@zcy201420752/ncovis-visualization-platform-for-covid-19-d3f255d5ce79\",\n    des:\n      \"本篇博客旨在使用nCoVIS提供的种种功能对疫情的期间的文本和数值数据作出分析，并对于分析结果给出我一些见解。\",\n    createTime: new Date(\"2020-04-12\"),\n    author: \"Chuyang\",\n    imageUrl: p2,\n  },\n  {\n    id: 3,\n    title: \"疫情期间福建省舆论变化\",\n    url: \"https://www.jianshu.com/p/27b71bfa92c2\",\n    des: \"分析1月底至4月初，福建省新闻报道关键词的变化情况。\",\n    createTime: new Date(\"2020-04-12\"),\n    author: \"N7wings\",\n    imageUrl: p3,\n  },\n  {\n    id: 4,\n    title: \"分析疫情期间有哪些热度特别高的超级话题\",\n    url:\n      \"https://www.yuque.com/docs/share/22dbc894-176e-40c1-b44d-f8032b094d6e?#\",\n    des:\n      \"具有突发性、小概率事件，对多数用户而言是非常有吸引力的一些话题，无论是什么时间，这样的新闻也会是热点。\",\n    createTime: new Date(\"2020-04-12\"),\n    author: \"yjq\",\n    imageUrl: p4,\n  },\n  {\n    id: 5,\n    title: \"疫情新闻舆论数据可视化工具的使用\",\n    url: \"https://blog.csdn.net/weixin_43913977/article/details/105428347\",\n    des: \"这里分析了从疫情爆发到现在新闻热搜变化的趋势和其中的原因。\",\n    createTime: new Date(\"2020-04-12\"),\n    author: \"一只南极的熊\",\n    imageUrl: p5,\n  },\n  {\n    id: 6,\n    title: \"英国抗疫\",\n    url: \"https://www.lofter.com/lpost/1f439172_1c999146b\",\n    des: \"英国停止对轻症患者进行检测，公共卫生官员未能制定大规模检测计划。\",\n    createTime: new Date(\"2020-04-12\"),\n    author: \"Higgins011\",\n    imageUrl: p6,\n  },\n];\n","import ApolloClient from \"apollo-boost\";\nimport { gql } from \"apollo-boost\";\nimport { InMemoryCache } from \"apollo-cache-inmemory\";\nimport { persistCache } from \"apollo-cache-persist\";\n\nconst cache = new InMemoryCache({});\n\n(async () =>\n  await persistCache({\n    cache,\n    storage: window.localStorage,\n    maxSize: false,\n  }))();\n\nconst client = new ApolloClient({\n  cache,\n  uri:\n    \"https://api.ncovis.mllab.cn/graphql?token=fuBwv4pYedUUaHycszp21pMmloRf1TQS\",\n});\n\nexport { client, gql };\n","import { client, gql } from \"../../utils/request\";\n\nexport const get = () =>\n  client.query({\n    query: gql`\n      {\n        ncov(country: \"中国\") {\n          date\n        }\n      }\n    `,\n  });\n","import * as d3 from \"d3\";\nimport * as commonApi from \"./service\";\nexport default {\n  namespace: \"common\",\n  state: {\n    selectedTime: 1579564800000,\n    selectedRegion: \"中国\",\n    timeRange: [],\n  },\n  effects: {\n    *getTime(_, { call, put }) {\n      const res = yield call(commonApi.get);\n      const ncov = res.data.ncov;\n      const timeTicks = Array.from(new Set(ncov.map((d) => d.date))),\n        timeRange = d3.extent(timeTicks).map((d) => new Date(d)),\n        selectedTime = new Date(timeRange[0]).getTime();\n      yield put({\n        type: \"save\",\n        payload: { timeRange, selectedTime },\n      });\n    },\n  },\n  reducers: {\n    save: (state, action) => ({ ...state, ...action.payload }),\n    setSelectedRegion: (state, action) => ({\n      ...state,\n      selectedRegion: action.payload,\n    }),\n    setSelectedTime: (state, action) => ({\n      ...state,\n      selectedTime: action.payload,\n    }),\n  },\n};\n","import { client, gql } from \"../../utils/request\";\n\nexport const getNcov = (country = \"中国\") =>\n  client.query({\n    query: gql`\n      {\n        ncov(country:\"${country}\") {\n          date\n          confirmed\n          dead\n          cured\n          region\n        }\n      }\n    `,\n  });\n\nexport const getAllCountry = () =>\n  client.query({\n    query: gql`\n      {\n        ncov(date: \"2020-04-07\") {\n          country\n        }\n      }\n    `,\n  });\n","import * as d3All from \"d3\";\nimport * as d3Array from \"d3-array\";\nimport \"array-flat-polyfill\";\n\nimport { formTree } from \"../../utils/tree\";\nimport regionTree from \"../../assets/data/region_options.json\";\nimport * as ncovisApi from \"./service\";\n\nconst d3 = {\n  ...d3All,\n  ...d3Array,\n};\n\nexport default {\n  namespace: \"ncov\",\n  state: {\n    dataByRegion: new Map(),\n    dataByDate: new Map(),\n    selectedDate: \"2020-02-10\",\n    countries: [],\n    widthData: new Set(),\n    total: [],\n    selectedCountries: [],\n    treeData: d3.hierarchy({\n      name: \"empty\",\n      children: [],\n    }),\n  },\n  reducers: {\n    addCountryData(state, action) {\n      const { dataByDate, dataByRegion, country } = action.payload;\n      const { selectedCountries, widthData } = state;\n      selectedCountries.push(country);\n      widthData.add(country);\n      return {\n        ...state,\n        dataByDate,\n        dataByRegion,\n        selectedCountries,\n        treeData: d3.hierarchy(formTree(selectedCountries)),\n      };\n    },\n    setSelectedCountries(state, action) {\n      const { keys } = action.payload;\n      return { ...state, selectedCountries: keys };\n    },\n    save(state, action) {\n      return { ...state, ...action.payload };\n    },\n    setSelectedTime: (state, action) => ({\n      ...state,\n      selectedTime: action.payload,\n    }),\n    setSelectedDate: (state, action) => ({\n      ...state,\n      selectedDate: action.payload,\n    }),\n    setTreeData: (state, action) => ({\n      ...state,\n      treeData: action.payload,\n    }),\n  },\n  effects: {\n    *getCountryData(action, { call, put }) {\n      const { country, total, dataByDate, dataByRegion } = action.payload;\n      const result = yield call(ncovisApi.getNcov, country);\n      const ncov = result.data.ncov;\n      const data = preprocess(ncov, total, country);\n      const countryByDate = d3.rollup(\n        data,\n        ([d]) => d.data,\n        (d) => d.date\n      );\n      const countryByRegion = d3.rollup(\n        data,\n        ([d]) => d,\n        (d) => d.region,\n        (d) => d.date\n      );\n\n      for (let [key, value] of dataByDate.entries()) {\n        const d = countryByDate.get(key);\n        value.push({ region: country, data: d });\n        dataByDate.set(key, value);\n      }\n\n      dataByRegion.set(country, countryByRegion.get(country));\n\n      yield put({\n        type: \"addCountryData\",\n        payload: {\n          dataByDate,\n          dataByRegion,\n          country,\n        },\n      });\n    },\n    *getData(action, { call, put }) {\n      try {\n        // 获得所有的城市列表\n        const countryResult = yield call(ncovisApi.getAllCountry);\n        const countries = Array.from(\n          new Set(\n            countryResult.data.ncov\n              .map((d) => d.country)\n              .filter((d) => d !== \"\")\n          )\n        );\n\n        // 获得中国的数据\n        const country = \"中国\";\n        const ncovResult = yield call(ncovisApi.getNcov, country);\n        const ncov = ncovResult.data.ncov;\n        const total = Array.from(new Set(ncov.map((d) => d.date)));\n        const data = preprocess(ncov, total, country),\n          dataByRegion = d3.rollup(\n            data,\n            ([d]) => d,\n            (d) => d.region,\n            (d) => d.date\n          ),\n          dataByDate = d3.rollup(\n            data,\n            (data) =>\n              data.map((d) => ({\n                region: d.region,\n                data: d.data,\n              })),\n            (d) => d.date\n          ),\n          selectedCountries = [\"中国\"],\n          widthData = new Set([\"中国\"]),\n          treeData = d3.hierarchy(formTree([country]));\n\n        yield put({\n          type: \"save\",\n          payload: {\n            dataByRegion,\n            dataByDate,\n            country,\n            selectedCountries,\n            total,\n            widthData,\n            countries,\n            treeData,\n          },\n        });\n\n        // 获得其他城市的数据\n        const restCountries = action.payload;\n        for (let country of restCountries) {\n          yield put.resolve({\n            type: \"getCountryData\",\n            payload: { country, total, dataByDate, dataByRegion },\n          });\n        }\n      } catch (e) {\n        console.error(e);\n      }\n    },\n  },\n};\n\nfunction preprocess(data, days, country = \"中国\") {\n  const root = d3.hierarchy(regionTree);\n  const regionvalues = d3\n    .rollups(\n      data,\n      ([d]) => d,\n      (d) => d.region,\n      (d) => d.date\n    )\n    .filter(([region]) => region !== \"中国\") // 这里有点奇怪\n    .map(([region, data]) => [\n      region,\n      data.sort((a, b) => new Date(a[0]) - new Date(b[0])),\n    ])\n    .map(([region, data]) => [\n      region,\n      days.map((d) => interpolateValues(data, d)),\n    ]);\n\n  if (country === \"中国\") {\n    root.eachAfter((node) => {\n      if (!node.children) return;\n      const newRegion = sum(\n        node.children.map((d) => d.data.title),\n        regionvalues,\n        node.data.title,\n        days\n      );\n      regionvalues.push(newRegion);\n    });\n  }\n\n  return regionvalues.flatMap(([, data]) => data);\n}\n\nfunction interpolateValues(values, date) {\n  const bisect = d3.bisector(([time]) => new Date(time)).left;\n  const i = bisect(values, new Date(date), 0, values.length - 1),\n    a = values[i];\n  if (!i)\n    return {\n      region: a[1].region,\n      date,\n      data: {\n        confirmed: a[1].confirmed,\n        dead: a[1].dead,\n        cured: a[1].cured,\n      },\n    };\n  const b = values[i - 1],\n    t = (new Date(date) - new Date(a[0])) / (new Date(b[0]) - new Date(a[0]));\n\n  const interpolate = (key) => Math.ceil(a[1][key] * (1 - t) + b[1][key] * t);\n  return {\n    region: b[1].region,\n    date,\n    data: {\n      confirmed: interpolate(\"confirmed\"),\n      dead: interpolate(\"dead\"),\n      cured: interpolate(\"cured\"),\n    },\n  };\n}\n\nfunction sum(regions, values, title, days) {\n  const data = days.map((day) => ({\n    region: title,\n    date: day,\n    data: {\n      confirmed: 0,\n      cured: 0,\n      dead: 0,\n    },\n  }));\n\n  const dataByDate = d3.rollup(\n    data,\n    ([d]) => d,\n    (d) => d.date\n  );\n  for (let r of regions) {\n    const [, value] = values.find(([region]) => region === r);\n    for (let { date, data } of value) {\n      const d = dataByDate.get(date);\n      d.data.confirmed += data.confirmed;\n      d.data.cured += data.cured;\n      d.data.dead += data.dead;\n    }\n  }\n  return [title, data];\n}\n","import { client, gql } from \"../../utils/request\";\n\nexport const getHots = ({ name, from, limit = 10 }) => {\n  return client.query({\n    query: gql`\n      {\n        ${name}(\n          numWords:3\n          limit:${limit}, \n          ${from ? `from:${from}` : \"\"}\n        ){\n          paging{\n            total\n            nextCursor\n          }\n          data {\n            time\n            topics {\n              heat\n              title\n              keywords{\n                name\n                weight\n              }\n            }\n          }\n        }\n      }\n    `,\n  });\n};\n\nexport const getTimeRange = (platform = \"zhihu\") =>\n  client.query({\n    query: gql`{\n      ${platform} {\n        data{\n          time\n        }\n      }\n    }`,\n  });\n\nexport const getWordsOfTopics = ({ name, time }) =>\n  client.query({\n    query: gql`\n      {\n        ${name}(\n          time:${time}\n        ){\n          data {\n            topics {\n              keywords {\n                name\n                weight\n              }\n              heat\n              title\n            }\n          }\n        }\n      }\n    `,\n  });\n","import * as d3All from \"d3\";\nimport * as d3Array from \"d3-array\";\nimport cloud from \"d3-cloud\";\nimport \"array-flat-polyfill\";\n\nimport * as hotApi from \"./service\";\n\nconst d3 = {\n  ...d3All,\n  ...d3Array,\n};\n\nexport default {\n  namespace: \"hots\",\n  state: {\n    dataByName: d3.map(),\n    timeByName: d3.map(),\n    wordsByTime: d3.map(),\n    selectedWords: [],\n    computingLayout: false,\n  },\n  reducers: {\n    setComputingLayout(state, action) {\n      return { ...state, computingLayout: action.payload };\n    },\n    setSelectedCountries(state, action) {\n      const keys = action.payload;\n      return { ...state, selectedCountries: keys };\n    },\n    addWords: (state, action) => {\n      const { words, time } = action.payload;\n      const { wordsByTime } = state;\n      wordsByTime.set(time, words);\n      return { ...state, wordsByTime };\n    },\n    setSelectedWords: (state, action) => ({\n      ...state,\n      selectedWords: action.payload,\n    }),\n    addTimeRange: (state, action) => {\n      const { range, name } = action.payload;\n      const { timeByName } = state;\n      timeByName.set(name, range);\n      return { ...state, timeByName };\n    },\n    updateDataByTime: (state, action) => {\n      const { name, from, to } = action.payload;\n      const { timeByName } = state;\n      const oldRange = timeByName.get(name);\n      const newRange = oldRange.map((d, i) => ({\n        ...d,\n        request: i >= from && i < to ? true : d.request,\n      }));\n      timeByName.set(name, newRange);\n      return { ...state, timeByName };\n    },\n    addFrames: (state, action) => {\n      const { name, listKeyframes, cloudsKeyframes } = action.payload;\n      const { dataByName } = state;\n      const value = dataByName.get(name);\n      if (!value) {\n        dataByName.set(name, {\n          listKeyframes,\n          cloudsKeyframes,\n        });\n      } else {\n        const newListKeyframes = unique(\n          [...value.listKeyframes, ...listKeyframes].sort(\n            (a, b) => a[0] - b[0]\n          ),\n          (d) => d[0]\n        );\n        const newCloudsKeyframes = unique(\n          [...value.cloudsKeyframes, ...cloudsKeyframes].sort(\n            (a, b) => a[0] - b[0]\n          ),\n          (d) => d[0]\n        );\n\n        dataByName.set(name, {\n          listKeyframes: newListKeyframes,\n          cloudsKeyframes: newCloudsKeyframes,\n        });\n      }\n\n      return { ...state, dataByName, computingLayout: false };\n    },\n  },\n  effects: {\n    *getWords(action, { call, put }) {\n      try {\n        const { time, name, title } = action.payload;\n        const data = yield call(hotApi.getWordsOfTopics, { name, time });\n        const words = data.data[name].data[0].topics;\n        const wordsWithLayout = yield call(computePreFramesWordsCloud, words);\n        const selectedWords = wordsWithLayout.find((d) => d.title === title);\n        const keywords = selectedWords ? selectedWords.keywords : [];\n        yield put({ type: \"addWords\", payload: { wordsWithLayout, time } });\n        yield put({ type: \"setSelectedWords\", payload: keywords });\n      } catch (e) {\n        console.error(e);\n      }\n    },\n    *getTime(action, { call, put }) {\n      try {\n        const { name } = action.payload;\n        const timeData = yield call(hotApi.getTimeRange, name);\n        const range = timeData.data[name].data\n          .map(({ time }) => time * 1000)\n          .map((d) => ({ time: d, request: false }))\n          .sort((a, b) => a.time - b.time);\n\n        yield put({ type: \"addTimeRange\", payload: { range, name } });\n      } catch (e) {\n        console.error(e);\n      }\n    },\n    *getData(action, { call, put }) {\n      const { name, interval, tick, limit, start } = action.payload;\n      try {\n        yield put({ type: \"setComputingLayout\", payload: true });\n        const result = yield call(hotApi.getHots, {\n          name,\n          from: ((tick.time / 1000) | 0) - 1, // 这里的 from 是大于当前时刻，所以需要减少 1\n          limit: limit + 1,\n        });\n        const data = combine(result.data[name].data);\n        const { listKeyframes, wordsKeyframes } = preprocess(\n          data,\n          start,\n          interval\n        );\n        const cloudsKeyframes = yield call(\n          computeFramesWordCloud,\n          wordsKeyframes\n        );\n\n        yield put({\n          type: \"addFrames\",\n          payload: { name, listKeyframes, cloudsKeyframes },\n        });\n      } catch (e) {\n        console.error(e);\n      }\n    },\n  },\n};\n\nfunction combine(data) {\n  return data.map(({ time, topics }) => {\n    const keywords = topics.flatMap((t, index) =>\n      t.keywords.map((k) => ({\n        title: t.title,\n        weight: k.weight * (1 - index * 0.05),\n        name: k.name,\n      }))\n    );\n    return { time, keywords: Array.from(new Set(keywords)), topics };\n  });\n}\n\nfunction words(data, n = 20) {\n  const w = new Set([\n    \"没有\",\n    \"知道\",\n    \"可能\",\n    \"觉得\",\n    \"时候\",\n    \"应该\",\n    \"还有\",\n    \"出来\",\n    \"需要\",\n    \"事情\",\n    \"大家\",\n    \"还有\",\n    \"看到\",\n  ]);\n  return data\n    .map((d) => ({\n      text: d.name,\n      value: d.weight || d.value,\n    }))\n    .filter((d) => !w.has(d.text))\n    .sort((a, b) => b.value - a.value)\n    .slice(0, n);\n}\n\nfunction computeWordCloud(data, get) {\n  return new Promise((resolve) => {\n    cloud()\n      .size([900, 600])\n      .words(data)\n      .padding(5)\n      .rotate(0)\n      .fontSize((d) => Math.sqrt(d.value) * 80)\n      .on(\"end\", (words) => resolve(get(words)))\n      .start();\n  });\n}\n\nfunction computePreFramesWordsCloud(data) {\n  return Promise.all(\n    data.map(({ keywords, title }) =>\n      computeWordCloud(words(keywords), (words) => ({\n        keywords: words,\n        title,\n      }))\n    )\n  );\n}\n\nfunction computeFramesWordCloud(data) {\n  return Promise.all(\n    data.map(([date, d]) =>\n      computeWordCloud(words(d), (words) => [date, words])\n    )\n  );\n}\n\nfunction preprocess(raw, start, interval) {\n  const data = raw.map(({ time, ...rest }) => ({ time: time * 1000, ...rest }));\n  const range = d3.extent(data, (d) => d.time);\n  const begin = start + (((range[0] - start) / interval) | 0) * interval;\n  const end = begin + Math.ceil((range[1] - begin) / interval) * interval + 1;\n  const listTicks = d3.range(begin, end, interval);\n  const wordTicks = d3.range(begin, end, interval * 5);\n  const words = new Set(data.flatMap((d) => d.keywords.map((d) => d.name)));\n  const topics = new Set(data.flatMap((d) => d.topics.map((d) => d.title)));\n\n  const datewords = Array.from(\n    d3.rollup(\n      data,\n      ([d]) =>\n        d3.rollup(\n          d.keywords,\n          ([{ weight }]) => weight,\n          (d) => d.name\n        ),\n      (d) => d.time\n    )\n  );\n\n  const datetopics = Array.from(\n    d3.rollup(\n      data,\n      ([d]) =>\n        d3.rollup(\n          d.topics,\n          ([{ heat }]) => heat,\n          (d) => d.title\n        ),\n      (d) => d.time\n    )\n  ).sort(([a], [b]) => a - b);\n\n  return {\n    listKeyframes: listTicks\n      .map((tick) => interploate(datetopics, topics, tick))\n      .map(([date, data]) => [\n        date,\n        data.map((d, index) => ({ ...d, rank: index })).slice(0, 10),\n      ]),\n    wordsKeyframes: wordTicks.map((tick) =>\n      interploate(datewords, words, tick)\n    ),\n  };\n}\n\nfunction interploate(data, names, time) {\n  const bisect = d3.bisector((d) => d[0]).left;\n  const i = bisect(data, time, 0, data.length - 1),\n    a = data[i];\n  if (!i) return [time, interpolateValues(names, (key) => a[1].get(key))];\n\n  const b = data[i - 1],\n    t = (time - a[0]) / (b[0] - a[0]);\n  return [\n    time,\n    interpolateValues(names, (key) => {\n      const v1 = a[1].get(key) || 0;\n      const v2 = b[1].get(key) || 0;\n      return v1 * (1 - t) + v2 * t;\n    }),\n  ];\n}\n\nfunction interpolateValues(names, value) {\n  const data = Array.from(names, (name) => ({\n    name,\n    value: value(name) || 0,\n  }));\n  data.sort((a, b) => d3.descending(a.value, b.value));\n  return data;\n}\n\nfunction unique(data, key) {\n  return data\n    .map((d, index) => {\n      if (index === 0 || key(data[index - 1]) !== key(d)) return [...d, true];\n      else return [...d, false];\n    })\n    .filter((d) => d[2])\n    .map(([date, data]) => [date, data]);\n}\n","import { client, gql } from \"../../utils/request\";\n\nexport const getNews = (region, date) =>\n  client.query({\n    query: gql`\n      {\n        news(region: \"${region}\", date: \"${date}T16:00:00Z\") {\n          news {\n            date\n            tags {\n              name\n              count\n            }\n            keywords {\n              name\n              color\n              fontSize\n              transX\n              transY\n              fillX\n              fillY\n              rotate\n            }\n            fillingWords {\n              name\n              color\n              fontSize\n              transX\n              transY\n              fillX\n              fillY\n              rotate\n            }\n          }\n        }\n      }\n    `,\n  });\n","import overview from \"./pages/overview/model\";\nimport comment from \"./pages/comment/model\";\nimport vis from \"./pages/vis/model\";\nimport ncovis from \"./pages/ncovis/model\";\nimport hot from \"./pages/hotsvis/model\";\nimport news from \"./pages/newsvis/model\";\n\nexport default [overview, comment, vis, ncovis, hot, news];\n","import * as newsApi from \"./service\";\n\nexport default {\n  namespace: \"news\",\n  state: {\n    newsByRegion: new Map(),\n  },\n  reducers: {\n    addNews: (state, action) => {\n      const { region, dataByDate } = action.payload;\n      const { newsByRegion } = state;\n      newsByRegion.set(region, dataByDate);\n      return { ...state, newsByRegion };\n    },\n  },\n  effects: {\n    *getNewsData(action, { call, put }) {\n      try {\n        // 这里要处理一下时间的问题\n        const { region, date } = action.payload;\n        const result = yield call(newsApi.getNews, region, date);\n        const { tags, keywords, fillingWords } = result.data.news.news[0];\n        const data = {\n          tags,\n          words: {\n            keywords,\n            fillingWords,\n          },\n        };\n        const dataByDate = new Map([[date, data]]);\n        yield put({\n          type: \"addNews\",\n          payload: { region, dataByDate },\n        });\n      } catch (e) {\n        console.error(e);\n      }\n    },\n  },\n};\n","import React from \"react\";\nimport * as serviceWorker from \"./serviceWorker\";\n\nimport createLoading from \"dva-loading\";\nimport dva from \"dva\";\n\nimport App from \"./App\";\nimport models from \"./model\";\n\nimport \"antd/dist/antd.css\";\nimport \"./index.css\";\n\nconst app = new dva();\n\napp.use(createLoading());\n\nmodels.forEach((model) => app.model(model));\n\napp.router(() => <App />);\n\napp.start(\"#root\");\n\nserviceWorker.unregister();\n"],"sourceRoot":""}