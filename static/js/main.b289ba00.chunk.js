(this["webpackJsonpncovis-2020"]=this["webpackJsonpncovis-2020"]||[]).push([[0],{197:function(e,t,n){e.exports=n.p+"static/media/china.6d888cb3.png"},198:function(e,t,n){e.exports=n.p+"static/media/zhihu.9e85bbdf.png"},199:function(e,t,n){e.exports=n.p+"static/media/talk.1ad6cd23.jpg"},200:function(e,t,n){e.exports=n.p+"static/media/news.0f6ed5a1.jpg"},202:function(e,t,n){e.exports=n.p+"static/media/hots.a9e67241.jpg"},206:function(e,t,n){e.exports=n.p+"static/media/1.d2d2ad01.png"},207:function(e,t,n){e.exports=n.p+"static/media/2.39c1bd14.png"},208:function(e,t,n){e.exports=n.p+"static/media/3.98b331a4.png"},209:function(e,t,n){e.exports=n.p+"static/media/4.36d3cb06.png"},210:function(e,t,n){e.exports=n.p+"static/media/5.849ab46f.png"},211:function(e,t,n){e.exports=n.p+"static/media/6.4e131bab.png"},220:function(e,t,n){e.exports=n(375)},270:function(e,t){},373:function(e,t,n){},375:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var i=n(213),c=n(32),l=n.n(c),o=n(4),u=n(5),s=n(8),d=n(123),m=n(385),f=n(386);function h(){var e=Object(o.a)(["\n  position: fixed;\n  width: 100%;\n  height: 100%;\n  left: 0;\n  top: 0;\n  background: rgba(0, 0, 0, 0.5);\n  z-index: 2;\n"]);return h=function(){return e},e}function p(){var e=Object(o.a)(["\n  display: none;\n  transform: rotate(","deg);\n  @media (max-width: 700px) {\n    display: block;\n  }\n"]);return p=function(){return e},e}function g(){var e=Object(o.a)(["\n  & ul {\n    margin-bottom: 0;\n  }\n  & li {\n    display: inline-block;\n    margin-left: 1em;\n    list-style-type: none;\n  }\n  & a,\n  & span {\n    color: ",";\n    font-weight: bold;\n    padding: 0.5em 0;\n    cursor: pointer;\n  }\n\n  & a:hover,\n  & span:hover {\n    cursor: pointer;\n    border-bottom: 1px solid white;\n  }\n\n  @media (max-width: 700px) {\n    display: ",";\n    position: absolute;\n    top: 100%;\n    right: 0;\n    z-index: 10;\n\n    & ul {\n      background: black;\n      padding: 0 2.5em 0 2em;\n    }\n    & li {\n      display: block;\n    }\n  }\n"]);return g=function(){return e},e}function v(){var e=Object(o.a)(["\n  margin: 0 auto;\n  max-width: 1200px;\n  background: ",";\n  width: 90%;\n  height: 100%;\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  color: ",";\n"]);return v=function(){return e},e}function b(){var e=Object(o.a)(['\n  font-size: 16px;\n  margin-left: 10px;\n  font-family: "webfont" !important;\n  color: ',";\n  text-decoration: none;\n\n  &:hover {\n    color: ",";\n  }\n"]);return b=function(){return e},e}function y(){var e=Object(o.a)(["\n  font-weight: bold;\n"]);return y=function(){return e},e}function E(){var e=Object(o.a)(['\n  font-size: 25px;\n  font-family: "Titan One", cursive;\n']);return E=function(){return e},e}function x(){var e=Object(o.a)(["\n  height: 56px;\n  line-height: 56px;\n  background: ",";\n  position: fixed;\n  width: 100%;\n  top: 0px;\n  z-index: 1001;\n  box-shadow: 0px 1px 5px rgba(0, 0, 0, 0.1);\n"]);return x=function(){return e},e}var w=u.b.div(x(),(function(e){return e.theme.header})),O=u.b.span(E()),j=u.b.span(y()),k=u.b.a(b(),(function(e){return e.theme.font}),(function(e){return e.theme.font})),S=u.b.header(v(),(function(e){return e.theme.header}),(function(e){return e.theme.font})),D=u.b.nav(g(),(function(e){return e.theme.font}),(function(e){return e.show?"block":"none"})),C=Object(u.b)(d.a)(p(),(function(e){return e.angle})),T=u.b.div(h());var R=Object(c.connect)(null,{setOpen:function(e){return{type:"comment/setOpen",payload:{value:e}}}})((function(e){var t=e.setOpen,n=Object(a.useState)(!1),i=Object(s.a)(n,2),c=i[0],l=i[1],o=r.a.createElement(m.a,null,r.a.createElement(m.a.Item,null,r.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"https://github.com/pearmini"},"\u524d\u7aef\u53ef\u89c6\u5316")),r.a.createElement(m.a.Item,null,r.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"https://github.com/vivym"},"\u540e\u7aef\u722c\u866b")),r.a.createElement(m.a.Item,null,r.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"https://github.com/Kaiyiwing"},"\u6570\u636e\u5904\u7406")));return r.a.createElement(r.a.Fragment,null,r.a.createElement(w,null,r.a.createElement(S,null,r.a.createElement(j,null,r.a.createElement(O,null,"nCoVIS"),r.a.createElement(k,{href:"https://vislab.wang/",target:"_blank"},"\u5c71\u4e1c\u5927\u5b66 VisLab")),r.a.createElement(D,{show:c},r.a.createElement("ul",null,[{name:"\u6982\u89c8",id:"overview"},{name:"\u4ecb\u7ecd",id:"introduction"},{name:"\u53ef\u89c6\u5316",id:"vis"},{name:"\u53d1\u73b0",id:"story"}].map((function(e){return r.a.createElement("li",{key:e.name},r.a.createElement("a",{onClick:function(){return l(!1)},href:"#"+e.id},e.name))})),r.a.createElement("li",null,r.a.createElement("span",{onClick:function(e){e.preventDefault(),t(!0)},href:"#"},"\u6295\u7a3f")),r.a.createElement("li",null,r.a.createElement(f.a,{overlay:o},r.a.createElement("span",{onClick:function(e){return e.preventDefault()}},"\u8054\u7cfb\u6211\u4eec"))),r.a.createElement("li",null,r.a.createElement("a",{href:"https://github.com/pearmini/ncovis-2020",target:"_blank",rel:"noopener noreferrer"},"github")))),r.a.createElement(C,{icon:"menu",ghost:!0,onClick:function(){return l(!c)},angle:c?90:0}))),c&&r.a.createElement(T,{onClick:function(){return l(!1)}}))}));function B(){var e=Object(o.a)(["\n  background: black;\n  height: 300px;\n  width: 100%;\n"]);return B=function(){return e},e}var z=u.b.div(B()),M=function(){return r.a.createElement(z,null)},N=n(387),A=n(383),L=n(197),W=n.n(L),F=n(198),q=n.n(F);function I(){var e=Object(o.a)(["\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  width: 100%;\n"]);return I=function(){return e},e}function P(){var e=Object(o.a)(["\n  font-weight: bold;\n  color: #444444;\n\n  @media (max-width: 700px) {\n    font-size: 10px;\n  }\n"]);return P=function(){return e},e}function H(){var e=Object(o.a)(["\n  font-size: 19px;\n  color: ",";\n  font-weight: bold;\n\n  @media (max-width: 700px) {\n    font-size: 14px;\n  }\n\n  @media (max-width: 600px) {\n    font-size: 12px;\n  }\n"]);return H=function(){return e},e}function K(){var e=Object(o.a)(["\n  color: #999999;\n  line-height: 22px;\n  font-size: 12px;\n  & span {\n    margin-left: 2px;\n    color: ",";\n  }\n  @media (max-width: 600px) {\n    font-size: 10px;\n  }\n"]);return K=function(){return e},e}function V(){var e=Object(o.a)(["\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n"]);return V=function(){return e},e}function _(){var e=Object(o.a)(["\n  display: flex;\n  margin-top: 1em;\n  justify-content: space-around;\n"]);return _=function(){return e},e}function U(){var e=Object(o.a)(["\n  background: white;\n  border-radius: 8px;\n  padding: 0.5em 1em;\n  width: 500px;\n  max-width: 100%;\n"]);return U=function(){return e},e}function Y(){var e=Object(o.a)(["\n  margin: 1em auto;\n  color: #bfbfbf;\n  font-size: 11px;\n  display: flex;\n  flex-direction: row-reverse;\n"]);return Y=function(){return e},e}function Z(){var e=Object(o.a)(["\n  width: 50%;\n  @media (max-width: 768px) {\n    height: 50%;\n    width: initial;\n  }\n"]);return Z=function(){return e},e}function X(){var e=Object(o.a)(["\n  width: 50%;\n  @media (max-width: 768px) {\n    height: 50%;\n    width: initial;\n  }\n"]);return X=function(){return e},e}function J(){var e=Object(o.a)(["\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  width: 100%;\n\n  @media (max-width: 768px) {\n    flex-direction: column;\n    height: 50%;\n  }\n"]);return J=function(){return e},e}function G(){var e=Object(o.a)(["\n  margin-top: 1em;\n  font-size: 60px;\n  font-weight: bold;\n\n  @media (max-width: 992px) {\n    font-size: 40px;\n  }\n\n  @media (max-width: 768px) {\n    font-size: 40px;\n  }\n\n  @media (max-width: 576px) {\n    font-size: 25px;\n  }\n"]);return G=function(){return e},e}function Q(){var e=Object(o.a)(["\n  position: absolute;\n  top: -56px;\n"]);return Q=function(){return e},e}function $(){var e=Object(o.a)(["\n  padding: 56px 0;\n  position: relative;\n  height: ","px;\n  width: 100%;\n  justify-content: space-around;\n  align-items: center;\n  display: flex;\n  flex-direction: column;\n"]);return $=function(){return e},e}var ee=A.a.TabPane,te=u.b.div($(),(function(e){return e.height})),ne=u.b.div(Q()),ae=u.b.h1(G()),re=u.b.div(J()),ie=u.b.img(X()),ce=u.b.img(Z()),le=u.b.div(Y()),oe=u.b.div(U()),ue=u.b.div(_()),se=u.b.div(V()),de=u.b.div(K(),(function(e){return e.color})),me=u.b.div(H(),(function(e){return e.color})),fe=u.b.div(P()),he=u.b.div(I());var pe=Object(c.connect)((function(e){return{overview:e.overview,loading:e.loading.models.overview}}),{getOverview:function(){return{type:"overview/getData"}}})((function(e){var t=e.overview,n=e.getOverview,i=Object(N.a)().height,c=Object(a.useState)("\u5168\u7403"),l=Object(s.a)(c,2),o=l[0],u=l[1],d=t.data,m=t.time,f={"\u7d2f\u8ba1\u786e\u8bca":"#F9345e","\u7d2f\u8ba1\u6b7b\u4ea1":"#6236ff","\u7d2f\u8ba1\u6cbb\u6108":"#1cb142","\u73b0\u5b58\u786e\u8bca":"#fa6400"};return Object(a.useEffect)((function(){n()}),[n]),r.a.createElement(te,{height:i},r.a.createElement(ne,{id:"overview"}),r.a.createElement(he,null,r.a.createElement(ae,null,"COVID-19 \u8206\u8bba\u65b0\u95fb\u53ef\u89c6\u5316"),r.a.createElement(A.a,{onChange:u,activeKey:o,style:{width:500,maxWidth:"100%"}},d.map((function(e){return r.a.createElement(ee,{tab:e.name,key:e.name},r.a.createElement(oe,null,r.a.createElement(ue,null,e.data.map((function(t){var n=t.name,a=t.value,i=t.change;return r.a.createElement(se,{key:n},r.a.createElement(de,{color:f[n]},i>=0?"\u65b0\u589e":"\u51cf\u5c11",r.a.createElement("span",null,i>=0?"+":"-",Math.abs(i))),r.a.createElement(me,{color:f[n]},a),r.a.createElement(fe,null,e.name+n))}))),r.a.createElement(le,null,"\u622a\u81f3".concat(function(e){var t=new Date(e);return"".concat(t.getFullYear(),"\u5e74").concat(t.getMonth()+1,"\u6708").concat(t.getDate(),"\u65e5")}(m),", ").concat("\u5168\u56fd"===e.name?"\u5168\u56fd\u7d2f\u8ba1\uff08\u542b\u6e2f\u6fb3\u53f0\u5730\u533a\uff09":"\u5168\u7403\u6570\u636e"))))})))),r.a.createElement(re,null,r.a.createElement(ce,{src:q.a}),r.a.createElement(ie,{src:W.a})))})),ge=n(199),ve=n.n(ge);function be(){var e=Object(o.a)(["\n  border-radius: 8px;\n"]);return be=function(){return e},e}function ye(){var e=Object(o.a)(["\n  width: 60%;\n  & ul {\n    padding-left: 2em;\n  }\n  @media (max-width: 768px) {\n    width: 100%;\n  }\n"]);return ye=function(){return e},e}function Ee(){var e=Object(o.a)(["\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  width: 100%;\n\n  @media (max-width: 768px) {\n    flex-direction: column;\n  }\n"]);return Ee=function(){return e},e}function xe(){var e=Object(o.a)(["\n  position: absolute;\n  top: -56px;\n"]);return xe=function(){return e},e}function we(){var e=Object(o.a)(["\n  position: relative;\n  margin-bottom: 4em;\n"]);return we=function(){return e},e}var Oe=u.b.div(we()),je=u.b.div(xe()),ke=u.b.div(Ee()),Se=u.b.div(ye()),De=u.b.img(be());var Ce=function(){return r.a.createElement(Oe,null,r.a.createElement(je,{id:"introduction"}),r.a.createElement("h1",null,"\u4ecb\u7ecd"),r.a.createElement(ke,null,r.a.createElement(Se,null,r.a.createElement("p",null,r.a.createElement("b",null,"nCoVIS")," \u662f\u5c71\u4e1c\u5927\u5b66"," ",r.a.createElement("a",{href:"https://vislab.wang/",target:"_blank",rel:"noopener noreferrer"},"VisLab")," ","\u5b9e\u9a8c\u5ba4\u4e3a\u5927\u4f17\u63d0\u4f9b\u7684\u4e00\u4e2a\u5728\u7ebf\u53ef\u89c6\u5316\u5206\u6790\u5e73\u53f0\uff0c\u65e8\u5728\u63a2\u7d22\u4ece COVID-19 \u75ab\u60c5\u51fa\u73b0\u76f4\u5230\u73b0\u5728\uff1a"),r.a.createElement("ul",null,r.a.createElement("li",null,"\u4eba\u4eec\u5728\u7f51\u7edc\u4e0a\u8ba8\u8bba\u4ec0\u4e48\uff1f"),r.a.createElement("li",null,"\u5404\u5730\u533a\u65b0\u95fb\u5728\u62a5\u9053\u4ec0\u4e48\uff1f"),r.a.createElement("li",null,"\u4e0a\u9762\u4e24\u8005\u7684\u5173\u7cfb\u4ee5\u53ca\u5bf9\u63a7\u5236\u75ab\u60c5\u6709\u4ec0\u4e48\u6307\u5bfc\u610f\u4e49\uff1f")),r.a.createElement("p",null,r.a.createElement("b",null,"COVID-19")," \u662f\u4eba\u7c7b\u5386\u53f2\u4e0a\u7b2c\u4e00\u6b21\u5728\u9ad8\u5ea6\u53d1\u8fbe\u7684",r.a.createElement("b",null,"\u81ea\u5a92\u4f53\u3001\u5168\u5a92\u4f53\u65f6\u4ee3"),"\u9047\u5230\u7684\u9ad8\u4f20\u67d3\u6027\u75c5\u6bd2\u3002\u9762\u5bf9\u75c5\u6bd2\uff0c\u6211\u4eec\u4e0d\u80fd\u53ea\u5173\u5fc3\u60a3\u8005\u7684\u60a3\u75c5\u60c5\u51b5\uff0c\u540c\u65f6\u4e5f\u8981\u5173\u5fc3\u7fa4\u4f17\u4eec\u5728\u8ba8\u8bba\u4ec0\u4e48\uff0c\u9632\u6b62\u51fa\u73b0\u6050\u614c\u3002"),r.a.createElement("p",null,"\u5728\u75c5\u6bd2\u4f20\u64ad\u521d\u671f\uff0c\u6b66\u6c49\u66fe\u51fa\u73b0\u8fc7\u56e0\u4e3a\u6050\u614c\u5bfc\u81f4\u5927\u91cf\u5e38\u89c4\u611f\u5192\u3001\u53d1\u70e7\u60a3\u8005\u6324\u5151\u533b\u9662\uff0c\u5728\u533b\u9662\u9020\u6210\u5927\u89c4\u6a21\u4f20\u67d3\u3002\u5e76\u4e14\u56e0\u4e3a\u6050\u614c\u6548\u5e94\u5728\u81ea\u5a92\u4f53\u65f6\u4ee3\u5404\u79cd\u793e\u4ea4\u8f6f\u4ef6\u4e0a\u7684\u4e8c\u6b21\u4f20\u64ad\uff0c\u52a0\u5267\u4e86\u4eba\u4eec\u5bf9\u75c5\u6bd2\u7684\u6050\u60e7\uff0c\u4fc3\u4f7f\u5927\u91cf\u75ab\u60c5\u4e25\u91cd\u5730\u533a\u7684\u4eba\u5f00\u59cb\u5411\u5176\u4ed6\u5730\u533a\u9003\u79bb\uff0c\u8fdb\u4e00\u6b65\u52a0\u5927\u4e86\u7a7a\u5760\u75ab\u60c5\u7684\u96be\u5ea6\u3002"),r.a.createElement("p",null,r.a.createElement("b",null,"\u65b0\u95fb\u62a5\u9053\u63a7\u5236\u8206\u8bba\u5bfc\u5411\uff0c\u800c\u8206\u8bba\u53cd\u8fc7\u6765\u4e5f\u5f71\u54cd\u65b0\u95fb\u62a5\u9053\u3002"),"\u6240\u4ee5\u6211\u4eec\u9664\u4e86\u63d0\u4f9b\u548c\u75ab\u60c5\u76f4\u63a5\u76f8\u5173\u7684\u6570\u636e\uff08\u6765\u81ea",r.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"https://github.com/BlankerL/DXY-COVID-19-Crawler?spm=5176.12282029.0.0.480b56f5rDZFu0"},"\u4e01\u9999\u56ed"),"\uff09\u53ef\u89c6\u5316\u4ee5\u5916\uff0c\u8fd8\u722c\u53d6\u4e86",r.a.createElement("a",{target:"_blank",href:"https://www.chinanews.com/",rel:"noopener noreferrer"},"\u4e2d\u56fd\u65b0\u95fb\u7f51"),"\u5404\u5730\u533a\u7684\u65b0\u95fb\u6570\u636e\u548c",r.a.createElement("a",{target:"_blank",href:"https://www.zhihu.com/",rel:"noopener noreferrer"},"\u77e5\u4e4e"),"\u7684\u70ed\u641c\u6570\u636e\uff08\u611f\u8c22"," ",r.a.createElement("a",{href:"https://github.com/mjrao/hotso",target:"_blank",rel:"noopener noreferrer"},"mjrao \u5148\u751f"),"\u63d0\u4f9b\u7684\u90e8\u5206\u77e5\u4e4e\u70ed\u641c\u6570\u636e)\uff0c\u5e76\u63d0\u4f9b\u76f8\u5173\u7684\u53ef\u89c6\u5316\u3002"),r.a.createElement("p",null,"\u5728\u53ef\u89c6\u5316\u6280\u672f\u65b9\u9762\uff0c\u56e0\u4e3a\u9762\u5bf9\u7684\u5bf9\u8c61\u662f\u5927\u4f17\uff0c\u6240\u4ee5\u6211\u4eec\u5e76\u6ca1\u6709\u4f7f\u7528\u6bd4\u8f83\u590d\u6742\u7684\u6280\u672f\u3002\u4e00\u65b9\u9762\u6211\u4eec\u4f7f\u7528\u4e86\u4e00\u4e9b\u5e38\u89c1\u7684\u53ef\u89c6\u5316\u6280\u672f\uff1a\u9762\u79ef\u56fe\u3001\u6761\u5f62\u56fe\u3001\u997c\u72b6\u56fe\u7b49\uff0c\u53e6\u4e00\u65b9\u9762\u4f7f\u7528\u4e86\u6211\u4eec\u5b9e\u9a8c\u5ba4\u5728\u53bb\u5e74"," ",r.a.createElement("b",null,"InfoVis2019")," \u53d1\u8868\u7684\u8bba\u6587\u6240\u63d0\u5230\u7684\u6280\u672f",r.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"https://vislab.wang/post/shapewordle:-tailoring-wordles-using-shape-aware-archimedean-spirals"}," ","ShapeWordle"," "),"\uff0c\u8ba9\u6211\u4eec\u7684\u53ef\u89c6\u5316\u7ed3\u679c\u66f4\u52a0\u751f\u52a8\u548c\u6709\u4eba\u60c5\u5473\u3002"),r.a.createElement("p",null,"\u6700\u540e\uff0c\u6211\u4eec\u5e0c\u671b\u8fd9\u573a\u707e\u96be\u65e9\u70b9\u8fc7\u53bb\uff0c\u795d\u613f\u75c5\u4eba\u4eec\u65e9\u65e5\u5eb7\u590d\uff0c\u4e5f\u5411\u594b\u6597\u5728\u4e00\u7ebf\u7684\u767d\u8863\u5929\u4f7f\u548c\u79d1\u5b66\u5bb6\u4eec\u81f4\u4ee5\u6700\u5d07\u9ad8\u7684\u656c\u610f\u3002",r.a.createElement("b",null,"\u4e2d\u56fd\u52a0\u6cb9\uff0c\u4e16\u754c\u52a0\u6cb9\uff0c\u90a3\u4e9b\u4e0d\u80fd\u6253\u5230\u6211\u4eec\u7684\uff0c\u53ea\u80fd\u8ba9\u6211\u4eec\u66f4\u5f3a\u5927\uff01"))),r.a.createElement(De,{src:ve.a})))},Te=n(16),Re=n(388),Be=n(6),ze=function(e){return e<10?"0"+e:e},Me=function(e){var t=e.getFullYear(),n=e.getMonth()+1,a=e.getDate();return"".concat(t,"-").concat(ze(n),"-").concat(ze(a))},Ne=n(200),Ae=n.n(Ne);function Le(){var e=Object(o.a)(["\n  margin-top: 1em;\n"]);return Le=function(){return e},e}function We(){var e=Object(o.a)(["\n  width: 60%;\n  display: flex;\n  align-items: center;\n  justify-content: flex-start;\n  @media (max-width: 700px) {\n    display: none;\n  }\n"]);return We=function(){return e},e}function Fe(){var e=Object(o.a)(["\n  width: 60%;\n  display: flex;\n  justify-content: space-between;\n\n  @media (max-width: 700px) {\n    width: 100%;\n  }\n"]);return Fe=function(){return e},e}function qe(){var e=Object(o.a)(["\n  margin-bottom: 1em;\n  font-size: 12px;\n\n  & .top {\n    display: inline-block;\n    background: orange;\n    text-align: center;\n    color: white;\n    width: 40px;\n    border-radius: 2px;\n  }\n\n  & span {\n    margin-right: 10px;\n  }\n"]);return qe=function(){return e},e}function Ie(){var e=Object(o.a)(["\n  overflow: auto;\n  width: 100%;\n  padding-left: 20px;\n"]);return Ie=function(){return e},e}function Pe(){var e=Object(o.a)(["\n  margin-left: 100px;\n  height: 100%;\n  border-radius: 8px;\n"]);return Pe=function(){return e},e}function He(){var e=Object(o.a)(["\n  width: 32px;\n  height: 32px;\n  border-radius: 50%;\n  background: ",";\n  color: white;\n  font-weight: bold;\n  font-family: siyuan;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  font-size: 20px;\n  line-height: 32px;\n\n  @media (max-width: 700px) {\n    display: none;\n  }\n"]);return He=function(){return e},e}function Ke(){var e=Object(o.a)(["\n  width: 100%;\n  height: 140px;\n  display: flex;\n  justify-content: space-between;\n"]);return Ke=function(){return e},e}function Ve(){var e=Object(o.a)(["\n  margin-bottom: 2em;\n"]);return Ve=function(){return e},e}function _e(){var e=Object(o.a)(["\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  border-radius: 8px;\n  background: white;\n  padding: 20px;\n  margin: 20px 0;\n  width: 100%;\n  height: 200px;\n  cursor: pointer;\n  transition: all 0.5s;\n  &:hover {\n    box-shadow: 0px 0px 10px 2px rgba(0, 0, 0, 0.1);\n  }\n"]);return _e=function(){return e},e}function Ue(){var e=Object(o.a)(["\n  position: relative;\n"]);return Ue=function(){return e},e}function Ye(){var e=Object(o.a)(["\n  width: 360px;\n  border-radius: 8px;\n"]);return Ye=function(){return e},e}function Ze(){var e=Object(o.a)(["\n  width: 60%;\n  & ul {\n    padding-left: 2em;\n  }\n  @media (max-width: 768px) {\n    width: 100%;\n  }\n"]);return Ze=function(){return e},e}function Xe(){var e=Object(o.a)(["\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  width: 100%;\n\n  @media (max-width: 768px) {\n    flex-direction: column;\n  }\n"]);return Xe=function(){return e},e}function Je(){var e=Object(o.a)(["\n  position: absolute;\n  top: -56px;\n"]);return Je=function(){return e},e}function Ge(){var e=Object(o.a)(["\n  position: relative;\n  margin: 1em 0 2em 0;\n"]);return Ge=function(){return e},e}var Qe=u.b.div(Ge()),$e=u.b.div(Je()),et=u.b.div(Xe()),tt=u.b.div(Ze()),nt=u.b.img(Ye()),at=u.b.div(Ue()),rt=u.b.div(_e()),it=Object(u.b)(d.a)(Ve()),ct=u.b.div(Ke()),lt=u.b.div(He(),(function(e){return e.color||"black"})),ot=u.b.img(Pe()),ut=u.b.div(Ie()),st=u.b.div(qe()),dt=u.b.div(Fe()),mt=u.b.div(We()),ft=u.b.div(Le());function ht(e){var t=e.title,n=e.des,a=e.url,i=e.createTime,c=e.author,l=e.isTop,o=e.imageUrl;return r.a.createElement(at,null,r.a.createElement(rt,{onClick:function(){window.open(a)}},r.a.createElement(ct,null,r.a.createElement(dt,null,r.a.createElement(lt,{color:function(){return Be.schemeTableau10[(e=c,Array.from(e).reduce((function(e,t){return e+t.codePointAt(0)}),0)%Be.schemeTableau10.length)];var e}()},c.slice(0,1)),r.a.createElement(ut,null,r.a.createElement("h2",null,t),r.a.createElement(st,null,1===l&&r.a.createElement("span",{className:"top"},"\u7f6e\u9876"),r.a.createElement("span",null,"\u4f5c\u8005\uff1a",c),r.a.createElement("span",null,"\u65e5\u671f\uff1a",Me(i))),r.a.createElement("p",null,n))),r.a.createElement(mt,null,r.a.createElement(ot,{src:o})))))}var pt=Object(c.connect)((function(e){var t=e.comment;return Object(Te.a)({},t)}),{setOpen:function(e){return{type:"comment/setOpen",payload:{value:e}}}})((function(e){var t=e.list,n=e.isOpen,a=e.setOpen;return r.a.createElement(Qe,null,r.a.createElement($e,{id:"story"}),r.a.createElement("h1",null,"\u53d1\u73b0"),r.a.createElement(et,null,r.a.createElement(tt,null,r.a.createElement("p",null,"\u901a\u8fc7\u8be5\u5206\u6790\u7cfb\u7edf\u4f60\u53ef\u4ee5\u77ed\u65f6\u95f4\u5185\u5c31\u4e86\u89e3\u8fd9\u6bb5\u65f6\u95f4\u53d1\u751f\u7684\u4e00\u4e9b\u548c\u75ab\u60c5\u6709\u5173\u7684\u4e8b\u3002\u540c\u65f6\u80fd\u627e\u5230\u5f88\u591a\u6709\u610f\u601d\u7684\u73b0\u8c61\u548c\u95ee\u9898\uff0c\u6bd4\u5982\u4e0b\u9762\u7684\u8fd9\u4e9b\uff1a"),r.a.createElement("ul",null,r.a.createElement("li",null,"\u5728\u75ab\u60c5\u53d1\u5c55\u7684\u8fc7\u7a0b\u4e2d\uff0c\u53ef\u80fd\u662f\u56e0\u4e3a\u4eba\u4eec\u65e0\u804a\uff0c\u51fa\u73b0\u4e86\u54ea\u4e9b\u5947\u8469\u8bdd\u9898?",r.a.createElement("ul",null,r.a.createElement("li",null," \u62c9\u5c4e\u62c9\u5230\u5e72\u51c0\u662f\u4e00\u79cd\u600e\u6837\u7684\u4f53\u9a8c\uff1f"),r.a.createElement("li",null,"\u52a0\u5165\u6709\u4e00\u4e2a\u6309\u94ae\uff0c\u6309\u4e0b\u53bb\u4f1a\u83b7\u5f97 10 \u4ebf\u5143\uff0c\u4f46\u662f 500 \u5e74\u540e\u4eba\u7c7b\u4f1a\u6bc1\u706d\uff0c\u4f60\u6309\u5417?"))),r.a.createElement("li",null,"\u6709\u54ea\u4e9b\u70ed\u5ea6\u7279\u522b\u9ad8\u7684\u8d85\u7ea7\u8bdd\u9898?",r.a.createElement("ul",null,r.a.createElement("li",null,"\u79d1\u6bd4\u53bb\u4e16:\u8be5\u8bdd\u9898\u7684\u70ed\u5ea6\u8d85\u8fc7\u4e864\u67084\u53f7\u5168\u56fd\u54c0\u60bc\u65e5\u7684\u70ed\u5ea6"),r.a.createElement("li",null,"\u7f8e\u80a1\u7194\u65ad"),r.a.createElement("li",null,"\u8096\u6218\u4e8b\u4ef6"),r.a.createElement("li",null,"\u585e\u5c14\u7ef4\u4e9a\u603b\u7edf\u54fd\u54bd\u7740\u8bf7\u6c42\u4e2d\u56fd\u63f4\u52a9"),r.a.createElement("li",null,"\u5b59\u6768\u4e8b\u4ef6"))),r.a.createElement("li",null,"\u4eba\u4eec\u5bf9\u75ab\u60c5\u53d8\u5316\u7684\u8ba4\u8bc6\u7684\u53d8\u5316\u60c5\u51b5\uff1a\u8759\u8760 -",">"," \u53cc\u2ee9\u8fde -",">"," \u4e2d\u836f -",">","\u63a8\u6d4b\u6765\u81ea\u4e8e\u7f8e\u56fd"),r.a.createElement("li",null,"\u4e2d\u56fd\u75ab\u60c5\u53d1\u5c55\u7684\u91cd\u8981\u9636\u6bb5\u548c\u5173\u952e\u65f6\u95f4\u70b9\uff1a\u5929\u6d25\u5927\u5b66\u5ba3\u5e03\u7814\u5236\u51fa\u53e3\u670d\u75ab\u82d7 -",">","\u65b0\u51a0\u5bf9\u4e2d\u56fd\u53d1\u5c55\u5bf9\u610f\u4e49"),r.a.createElement("li",null,"\u5176\u4ed6\u56fd\u5bb6\u7684\u75ab\u60c5\u53d1\u5c55\u60c5\u51b5\u548c\u5173\u952e\u65f6\u95f4\u70b9\u3001\u5173\u952e\u4e8b\u4ef6\u3002")),r.a.createElement("p",null,"\u4e0b\u9762\u6709\u4e00\u4e9b\u7528\u8be5\u5e73\u53f0\u5206\u6790\u51fa\u7684\u6587\u7ae0\u3002\u4f60\u53ef\u4ee5\u81ea\u5df1\u53bb\u53d1\u73b0\u95ee\u9898\uff0c\u4e5f\u53ef\u4ee5\u56de\u7b54\u4e0a\u9762\u95ee\u9898\u4e2d\u7684\u4efb\u4f55\u4e00\u4e2a\u3002\u6ce8\u610f\u95ee\u9898\u4e0d\u7528\u592a\u5927\uff0c\u53ef\u4ee5\u5f88\u5c0f\uff0c \u4f46\u662f\u4e00\u5b9a\u8981\u548c\u75ab\u60c5\u6709\u5173\u3002\u8fd9\u91cc\u4f60\u53ef\u4ee5\u901a\u8fc7\u6295\u7a3f\u63d0\u51fa\u95ee\u9898\u548c\u81ea\u5df1\u7684\u770b\u6cd5\uff0c\u901a\u8fc7\u5ba1\u6838\u7684\u6587\u7ae0\u6211\u4eec\u4f1a\u653e\u5728\u8be5\u7f51\u7ad9\u4e0a\u3002"),r.a.createElement(it,{type:"primary",onClick:function(){return a(!0)}},"\u6211\u8981\u6295\u7a3f")),r.a.createElement(nt,{src:Ae.a})),r.a.createElement(ft,null,t.sort((function(e,t){return t.createTime-e.createTime})).map((function(e){return r.a.createElement(ht,Object.assign({},e,{key:e.id}))}))),r.a.createElement(Re.a,{title:"\u6295\u7a3f",width:360,onClose:function(){return a(!1)},visible:n,bodyStyle:{paddingBottom:80},style:{zIndex:1010}},r.a.createElement("p",null,"\u4f60\u9700\u8981\u901a\u8fc7\u90ae\u4ef6\u53d1\u9001\u4ee5\u4e0b\u7684\u4fe1\u606f\uff1a"),r.a.createElement("ul",null,r.a.createElement("li",null,"\u6587\u7ae0\u6807\u9898"),r.a.createElement("li",null,"\u4e00\u5c0f\u6bb5\u6587\u7ae0\u4ecb\u7ecd"),r.a.createElement("li",null,"\u6587\u7ae0\u94fe\u63a5"),r.a.createElement("li",null,"\u7b14\u540d")),r.a.createElement("p",null,"\u6536\u4ef6\u5730\u5740\u4e3a\uff1asubairui@icloud.com"),r.a.createElement("p",null,"\u5f53\u4f60\u53d1\u9001\u6587\u7ae0\uff0c\u6211\u4eec\u4f1a\u5c3d\u5feb\u5bf9\u5176\u8fdb\u884c\u5ba1\u6838\uff0c\u8bf7\u8010\u5fc3\u7b49\u5f85\uff01")))})),gt=n(19),vt=n.n(gt),bt=n(382),yt=n(384),Et=n(390),xt=n(391),wt=(n(145),n(21)),Ot=n.n(wt),jt=n(53),kt=n(30),St=n(81),Dt=function(e,t){var n=e.clientX,a=e.clientY,r=t.getBoundingClientRect(),i=r.left,c=r.top,l=r.width,o=r.height,u=n-i,s=a-c,d=t.getBBox(),m=d.width,f=d.height,h=Be.scaleLinear([0,l],[0,m]),p=Be.scaleLinear([0,o],[0,f]);return[h(u),p(s)]},Ct=n(45),Tt=n(80),Rt=n(379),Bt=n(83),zt=n(20),Mt=n(380);function Nt(){var e=Object(o.a)(["\n  margin-right: 8px;\n"]);return Nt=function(){return e},e}function At(){var e=Object(o.a)(["\n  cursor: pointer;\n"]);return At=function(){return e},e}function Lt(){var e=Object(o.a)(["\n  display: flex;\n  align-items: center;\n"]);return Lt=function(){return e},e}function Wt(){var e=Object(o.a)(["\n  margin-right: 8px;\n\n  & span {\n    font-size: 12px;\n    margin-right: 4px;\n  }\n"]);return Wt=function(){return e},e}function Ft(){var e=Object(o.a)(["\n  & > span {\n    margin-left: 8px;\n  }\n"]);return Ft=function(){return e},e}function qt(){var e=Object(o.a)(["\n  display: flex;\n  margin: 0.5em 1em 0 1em;\n  padding-bottom: 0.5em;\n  border-bottom: 1px solid #efefef;\n  align-items: center;\n  justify-content: space-between;\n"]);return qt=function(){return e},e}function It(){var e=Object(o.a)(["\n  position: absolute;\n"]);return It=function(){return e},e}function Pt(){var e=Object(o.a)(["\n  padding: 0;\n  margin: 0;\n  cursor: pointer;\n\n  & li {\n    list-style: none;\n    padding: 0.5em;\n    border-bottom: 1px solid transparent;\n  }\n\n  & li:hover {\n    border-bottom: 1px solid #efefef;\n  }\n"]);return Pt=function(){return e},e}function Ht(){var e=Object(o.a)(["\n  position: absolute;\n  left: 50%;\n  top: 50%;\n  transform: translate(-50%, -50%);\n  margin: 0;\n"]);return Ht=function(){return e},e}function Kt(){var e=Object(o.a)(["\n  position: absolute;\n  left: 50%;\n  top: 50%;\n  transform: translate(-50%, -50%);\n"]);return Kt=function(){return e},e}function Vt(){var e=Object(o.a)(["\n  width: ","px;\n  height: ","px;\n  line-height: ","px;\n  z-index: 10;\n  background: ",";\n  position: absolute;\n  left: 0;\n  top: 0;\n"]);return Vt=function(){return e},e}function _t(){var e=Object(o.a)(["\n  position: fixed;\n  left: 0;\n  top: 0;\n  z-index: 5;\n  width: 100%;\n  height: 100%;\n  background: rgba(0, 0, 0, 0.7);\n"]);return _t=function(){return e},e}function Ut(){var e=Object(o.a)(["\n  display: ",";\n  position: relative;\n  border-radius: 8px;\n  overflow: hidden;\n  transition: all 0.5s;\n  background: white;\n  &:hover {\n    box-shadow: 0px 0px 10px 3px rgba(0, 0, 0, 0.1);\n  }\n"]);return Ut=function(){return e},e}var Yt=u.b.div.attrs((function(e){return e.zoom&&{style:{position:"fixed",zIndex:999,left:"50%",top:"50%",transform:"translate(-50%, -50%)",marginTop:28,width:"90%",maxWidth:1200}}}))(Ut(),(function(e){return e.show?"block":"none"})),Zt=u.b.div(_t()),Xt=u.b.div(Vt(),(function(e){return e.width}),(function(e){return e.height}),(function(e){return e.height}),(function(e){return"loading "===e.type?"transparent":"white"})),Jt=Object(u.b)(Rt.a)(Kt()),Gt=Object(u.b)(Bt.a)(Ht()),Qt=u.b.ul(Pt()),$t=Object(u.b)(Re.a)(It()),en=u.b.div(qt()),tn=u.b.div(Ft()),nn=u.b.div(Wt()),an=u.b.div(Lt()),rn=Object(u.b)(zt.a)(At()),cn=Object(u.b)(rn)(Nt());function ln(e){var t=e.type,n=e.width,a=e.height;return r.a.createElement(Xt,{width:n,height:a,type:t},"loading"===t?r.a.createElement(Jt,null):r.a.createElement(Gt,{description:"\u6682\u65e0\u6570\u636e",image:Bt.a.PRESENTED_IMAGE_SIMPLE}))}var on=function(e){var t=e.children,n=e.onDownload,i=e.onDownloadPng,c=e.onDownloadSvg,l=e.loading,o=e.nodata,u=e.title,d=void 0===u?"title":u,m=e.introduction,f=e.slot,h=e.show,p=void 0===h||h,g=e.hasZoom,v=void 0===g||g,b=Object(Ct.a)(e,["children","onDownload","onDownloadPng","onDownloadSvg","loading","nodata","title","introduction","slot","show","hasZoom"]),y=Object(a.useRef)(null),E=function(e){var t=Object(a.useState)({width:0,height:0}),n=Object(s.a)(t,2),r=n[0],i=n[1],c=Object(a.useState)(new Tt.a((function(e){var t=Object(s.a)(e,1)[0];if(t){var n=t.contentRect,a=n.width,r=n.height;i({width:a,height:r})}}))),l=Object(s.a)(c,1)[0];return Object(a.useEffect)((function(){var t=e.current;return l.observe(t),function(){return l.disconnect()}}),[e,l]),r}(y),x=E.width,w=E.height,O=Object(a.useState)(!1),j=Object(s.a)(O,2),k=j[0],S=j[1],D=Object(a.useState)(!1),C=Object(s.a)(D,2),T=C[0],R=C[1],B=Object(a.useState)(!1),z=Object(s.a)(B,2),M=z[0],N=z[1],A=r.a.createElement(Qt,null,r.a.createElement("li",{onClick:function(){return L(n||i)}},r.a.createElement("span",null,"PNG")),c&&r.a.createElement("li",{onClick:function(){return L(c)}},r.a.createElement("span",null,"SVG")));function L(e){e&&e(),N(!1)}return r.a.createElement(r.a.Fragment,null,r.a.createElement(Yt,Object.assign({ref:y,show:p},b,{zoom:k,onClick:function(){return N(!1)}}),l?r.a.createElement(ln,{width:x,height:w,type:"loading"}):o&&r.a.createElement(ln,{width:x,height:w}),r.a.createElement(en,null,r.a.createElement(tn,null,r.a.createElement(rn,{type:"question-circle",onClick:function(){return L((function(){return R(!0)}))}}),r.a.createElement("span",null,d)),r.a.createElement(an,null,r.a.createElement(nn,null,f),v&&r.a.createElement(cn,{type:k?"fullscreen-exit":"fullscreen",onClick:function(){return L((function(){return S(!k)}))}}),r.a.createElement(Mt.a,{placement:"bottomRight",content:A,trigger:"click",arrowPointAtCenter:!0,visible:M},r.a.createElement(rn,{type:"download",onClick:function(e){N(!M),e.stopPropagation()}})))),t,r.a.createElement($t,{title:d,placement:"right",closable:!0,onClose:function(){return R(!1)},visible:T,getContainer:!1},m)),k&&r.a.createElement(Zt,{onClick:function(){return S(!1)}}))};function un(e){var t="http://www.w3.org/2000/xmlns/";e=e.cloneNode(!0);for(var n=window.location.href+"#",a=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,null,!1);a.nextNode();){var r=!0,i=!1,c=void 0;try{for(var l,o=a.currentNode.attributes[Symbol.iterator]();!(r=(l=o.next()).done);r=!0){var u=l.value;u.value.includes(n)&&(u.value=u.value.replace(n,"#"))}}catch(d){i=!0,c=d}finally{try{r||null==o.return||o.return()}finally{if(i)throw c}}}e.setAttributeNS(t,"xmlns","http://www.w3.org/2000/svg"),e.setAttributeNS(t,"xmlns:xlink","http://www.w3.org/1999/xlink");var s=(new window.XMLSerializer).serializeToString(e);return new Blob([s],{type:"image/svg+xml"})}var sn=function(e,t){var n=URL.createObjectURL(e),a=document.createElement("a");a.href=n,a.download=t||"nCov-vis",a.click()};function dn(){var e=Object(o.a)([""]);return dn=function(){return e},e}var mn=u.b.svg.attrs((function(e){return{style:{background:"white"}}}))(dn()),fn=function(e){var t=e.style,n=e.className,i=e.id,c=e.loading,l=e.nodata,o=e.show,u=void 0===o||o,s=e.children,d=e.introduction,m=e.title,f=e.slot,h=e.hasZoom,p=void 0===h||h,g=Object(Ct.a)(e,["style","className","id","loading","nodata","show","children","introduction","title","slot","hasZoom"]),v=Object(a.useRef)(null);var b={onDownloadPng:function(){(function(e){var t,n,a=new Promise((function(e,a){return t=e,n=a})),r=new Image;return r.onerror=n,r.onload=function(){var n=e.getBoundingClientRect(),a=document.createElement("canvas");a.width=2*n.width,a.height=2*n.height;var i=a.getContext("2d");i.scale(2,2),i.drawImage(r,0,0,n.width,n.height),i.canvas.toBlob(t)},r.src=URL.createObjectURL(un(e)),a})(v.current).then(sn)},onDownloadSvg:function(){var e=un(v.current);sn(e)},id:i,style:t,className:n,loading:c,nodata:l,show:u,introduction:d,title:m,slot:f,hasZoom:p};return r.a.createElement(on,b,r.a.createElement(mn,Object.assign({ref:v},g,{fontFamily:"siyuan"}),s))},hn=n(46),pn=Object(Te.a)({},Be,{},St),gn=function(e){var t=e.dataByRegion,n=e.selectedRegion,i=e.selectedDate,c=e.setSelectedDate,l=e.setSelectedRegion,o=e.selectedType,u=e.loading,d=e.show,m=e.setFocusRegion,f=e.width,h=e.height,p=e.colors,g=e.all,v=e.highlightColor,b=e.normalColor,y=e.highlightRectColor,E=e.disabledColor,x=e.legendWidth,w=e.legendHeight,O=e.treeData,j=e.setTreeData,k=e.handleChangeLevel,S=e.highlight,D=e.setHighlight;if(!t.size||!O.children)return r.a.createElement(fn,{viewBox:[0,0,f,h],loading:u,nodata:!0,show:d});var C=Object(a.useState)({start:null,move:0}),T=Object(s.a)(C,2),R=T[0],B=T[1],z=Object(a.useState)(!1),M=Object(s.a)(z,2),N=M[0],A=M[1],L=Object(a.useRef)(null);O.eachAfter((function(e){e.visableH=e.children&&!e.hideChildren?pn.max(e.children,(function(e){return e.visableH}))+1:0}));var W=O.descendants(),F=new Set(W.filter((function(e){return!e.hide&&(!e.children||e.hideChildren)})).map((function(e){return e.data.title}))),q=pn.groups(W,(function(e){return e.depth})).filter((function(e){var t=Object(s.a)(e,2),n=t[0],a=t[1];return n!==O.height&&0!==n&&a.every((function(e){return!e.hide}))})),I=O.visableH,P=g.map((function(e){return{date:e.date,region:e.region,value:e[o]}})).filter((function(e){var t=e.value;return!isNaN(t)&&""!==t})).filter((function(e){return F.has(e.region)})),H=Array.from(new Set(P.map((function(e){return e.date})))),K=function(e){return"object"===typeof e?e.data.title:e},V=new Set(S.map((function(e){return K(e)}))),_=S.length?P.filter((function(e){return V.has(e.region)})):P,U=55,Y=30,Z=60,X=60,J=pn.timeFormat("%x"),G=["Jan","Feb","Mar","Apr","May","June","July","Aug","Sept","Oct","Nov","Dec"],Q=h-U-Z-5,$=f-X-Y-75-75*I,ee=pn.tree().size([Q,75*O.height]).separation((function(e,t){return e.parent===t.parent?1:1.5}))(O),te=ee.leaves(),ne=1===te.length?te[0].x:pn.pairs(te).reduce((function(e,t){var n=Object(s.a)(t,2),a=n[0],r=n[1];return Math.min(e,Math.abs(a.x-r.x))}),1/0),ae=Math.max($/H.length,12.5),re=pn.rollup(ee.descendants(),(function(e){return Object(s.a)(e,1)[0]}),(function(e){return e.data.title})),ie=pn.scaleBand().domain(H).range([0,ae*H.length]),ce=function(e){var t=re.get(e);if(!t.children)return t.x;var n=1/0;return t.each((function(e){e.x<n&&(n=e.x)})),n},le=function(e){var t=re.get(e);if(!t.children)return ne;var n=1/0,a=-n;return t.each((function(e){e.x>a&&(a=e.x),e.x<n&&(n=e.x)})),a-n+ne},oe=pn.scaleSequential(p[o]).domain(pn.extent(_.filter((function(e){return"\u6e56\u5317"!==e.region&&"\u534e\u4e2d\u5730\u533a"!==e.region})),(function(e){return e.value}))),ue=pn.scaleSqrt().interpolate((function(){return p.special})).domain(pn.extent(_.filter((function(e){return"\u6e56\u5317"===e.region||"\u534e\u4e2d\u5730\u533a"===e.region})),(function(e){return e.value}))),se=pn.linkHorizontal().x((function(e){return e.y})).y((function(e){return e.x})),de=pn.scaleSequential(p[o]).domain([0,x]),me=pn.scaleSqrt().interpolate((function(){return p.special})).domain([0,x]),fe=r.a.createElement("div",null,r.a.createElement("h3",null,"\u4f5c\u7528"),r.a.createElement("p",null,"\u53cd\u6620\u5404\u4e2a\u5730\u533a\u6bcf\u5929\u786e\u8bca\u3001\u6cbb\u6108\u6216\u6b7b\u4ea1\u4eba\u6570\u76f8\u5bf9\u524d\u4e00\u5929\u7684\u53d8\u5316\u60c5\u51b5\u3002"),r.a.createElement("h3",null,"\u8bf4\u660e"),r.a.createElement("ul",null,r.a.createElement("li",null,"\u56e0\u4e3a\u6e56\u5317\u548c\u534e\u4e2d\u5730\u533a\u7684\u6570\u636e\u8fdc\u5927\u4e8e\u5176\u4ed6\u5730\u533a\uff0c\u6240\u4ee5\u9009\u62e9\u4e86\u4e00\u79cd\u7279\u6b8a\u7684\u989c\u8272\u8303\u56f4\u3002"),r.a.createElement("li",null,"\u53d8\u5316\u4e3a 0 \u7684\u683c\u5b50\u4e0d\u4e00\u5b9a\u771f\u7684\u4e3a 0 \uff0c\u53ef\u80fd\u662f\u56e0\u4e3a\u6570\u636e\u7f3a\u5931\u3002")),r.a.createElement("h3",null,"\u4f7f\u7528\u65b9\u6cd5"),r.a.createElement("ul",null,r.a.createElement("li",null,"\u9f20\u6807",r.a.createElement("b",null,"\u79fb\u52a8\u5230"),"\u5230",r.a.createElement("b",null,"\u70ed\u529b\u56fe"),"\u4efb\u610f\u683c\u5b50\u5e76\u505c\u7559\u4e00\u4f1a\u513f\uff0c\u4f1a\u663e\u793a\u5730\u533a\u3001\u65f6\u95f4\u4ee5\u53ca\u53d8\u5316\u4eba\u6570\u3002"),r.a.createElement("li",null,r.a.createElement("b",null,"\u5355\u51fb\u201c\u70ed\u529b\u56fe\u201d"),"\u4e2d\u7684\u4efb\u610f\u683c\u5b50\uff0c\u4f1a\u9ad8\u4eae\u5e76\u4e14\u9009\u62e9\u5bf9\u5e94\u7684\u65e5\u671f\u548c\u5730\u533a\u3002"),r.a.createElement("li",null,r.a.createElement("b",null,"\u70b9\u51fb\u201c\u6811\u201d"),"\u4e2d\u5730\u533a\u7684\u540d\u5b57\u540e\u9762\u7684",r.a.createElement("b",null,"\u6309\u94ae"),"\u4f1a\u6536\u7f29\u6216\u8005\u5c55\u5f00\u8be5\u5730\u533a\u3002"),r.a.createElement("li",null,r.a.createElement("b",null,"\u5355\u51fb\u201c\u6811\u201d"),"\u4e2d\u5730\u533a\u7684",r.a.createElement("b",null,"\u540d\u5b57"),"\u4f1a\u9009\u62e9\u8be5\u5730\u533a\uff0c\u5e76\u4e14\u53ef\u89c6\u5316\u5df2\u7ecf\u9009\u62e9\u7684\u5730\u533a\uff1b\u518d",r.a.createElement("b",null,"\u5355\u51fb"),"\u4e00\u6b21\uff0c\u53d6\u6d88\u9009\u62e9\u3002"),r.a.createElement("li",null,r.a.createElement("b",null,"\u53cc\u51fb\u201c\u6811\u201d"),"\u4e2d\u5730\u533a\u7684",r.a.createElement("b",null,"\u540d\u5b57"),"\u4f1a\u8fdb\u5165",r.a.createElement("b",null,"\u65e5\u5386\u70ed\u56fe"),"\uff0c\u53ea\u53ef\u89c6\u5316\u8be5\u5730\u533a\u7684\u6570\u636e\uff1b",r.a.createElement("b",null,"\u53cc\u51fb"),"\u7a7a\u767d\u5730\u65b9\u8fd4\u56de\u3002"))),he=r.a.createElement("svg",{t:"1583216776327",className:"icon",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"1313",width:15,height:15,cursor:"pointer"},r.a.createElement("path",{d:"M512 128c211.968 0 384 172.032 384 384s-172.032 384-384 384-384-172.032-384-384 172.032-384 384-384z m-187.221333 425.6h371.2a41.6 41.6 0 1 0 0-83.2h-371.2a41.6 41.6 0 0 0 0 83.2z","p-id":"1314"})),pe=r.a.createElement("svg",{t:"1583216820149",className:"icon",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"1443",width:15,height:15,cursor:"pointer"},r.a.createElement("path",{d:"M458.922667 503.210667H314.965333a41.6 41.6 0 1 0 0 83.2h143.957334v144a41.6 41.6 0 0 0 83.2 0v-144h144a41.6 41.6 0 0 0 0-83.2h-144V359.253333a41.6 41.6 0 0 0-83.2 0v143.957334zM502.186667 160.853333c211.968 0 384 172.032 384 384s-172.032 384-384 384-384-172.032-384-384 172.032-384 384-384z","p-id":"1444"}));function ge(){B(Object(Te.a)({},R,{start:null}))}function ve(e){if(null!==R.start&&null!==L.current){var t=Dt(e,L.current),n=Object(s.a)(t,1)[0],a=$*(1-$/(H.length*ae)),r=Math.max(0,Math.min(a,R.move+(n-R.start)));B(Object(Te.a)({},R,{move:r}))}}function be(){return"\u4e2d\u56fd"===O.data.title&&0===S.length||S.find((function(e){return"\u6e56\u5317"===K(e)}))||S.find((function(e){return"\u534e\u4e2d\u5730\u533a"===K(e)}))}function ye(e){return Ee.apply(this,arguments)}function Ee(){return(Ee=Object(jt.a)(Ot.a.mark((function e(t){var n,a,r;return Ot.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.children){e.next=2;break}return e.abrupt("return");case 2:if(0!==t.depth){e.next=6;break}return n="\u5168\u7403"===t.data.title?"second":"top",k(n),e.abrupt("return");case 6:return a=pn.transition().duration(250).ease(pn.easeExpOut),t.hideChildren?Se(t,a):ke(t,a),!t.hideChildren&&0===t.depth&&we(a),Oe(a),e.next=12,a.end();case 12:t.hideChildren?Ce(t):De(t),r=Re(),j(r),D([]);case 16:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function xe(){return(xe=Object(jt.a)(Ot.a.mark((function e(t){var n,a,r,i;return Ot.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=pn.transition().duration(250).ease(pn.easeExpOut),a=t.filter((function(e){return e.children})),(r=a.every((function(e){return e.hideChildren})))?a.forEach((function(e){return Se(e,n)})):a.filter((function(e){return!e.hideChildren})).forEach((function(e){return ke(e,n)})),Oe(n),je(n),e.next=8,n.end();case 8:r?a.forEach(Ce):a.filter((function(e){return!e.hideChildren})).forEach(De),i=Re(),k(r?"third":"second",i),D([]);case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function we(e){pn.select(".tree-btn").transition(e).attr("fill-opacity",0)}function Oe(e){pn.selectAll(".tree-legend, .tree-line, .tree-legend-special").transition(e).attr("stroke-opacity",0).attr("fill-opacity",0)}function je(e){pn.select(".tree-xAxis").transition(e).attr("stroke-opacity",0).attr("fill-opacity",0)}function ke(e,t){var n=pn.select("#node-".concat(e.data.title," text")).node().getBBox().width;pn.select("#node-".concat(e.data.title," text")).transition(t).attr("x",n+8),e.each((function(n){e.data.title!==n.data.title&&(pn.select("#node-".concat(n.data.title)).attr("fill-opacity",1).transition(t).attr("transform","translate(".concat(e.y,", ").concat(e.x,")")).attr("fill-opacity",0),pn.select("#link-".concat(n.data.title)).transition(t).attr("d",(function(){var t={x:e.x,y:e.y};return se({source:t,target:t})})),pn.selectAll(".grid-".concat(n.data.title)).transition(t).attr("stroke-opacity",0).attr("fill-opacity",0))}))}function Se(e,t){var n=pn.select("#node-".concat(e.data.title," text")).node().getBBox().width;pn.select("#node-".concat(e.data.title," text")).transition(t).attr("x",-n-8),pn.selectAll(".grid-".concat(e.data.title," ")).transition(t).attr("stroke-opacity",0).attr("fill-opacity",0),e.each((function(n){e.data.title!==n.data.title&&(pn.select("#node-".concat(n.data.title)).transition(t).attr("transform","translate(".concat(n.y,", ").concat(n.x,")")).attr("fill-opacity",1),pn.select("#link-".concat(n.data.title)).transition(t).attr("stroke-opacity",.4).attr("d",(function(){var e={x:n.x,y:n.y},t={x:n.parent.x,y:n.parent.y};return se({source:t,target:e})})))}))}function De(e){B({move:0,start:null}),e.hideChildren=!0,e.each((function(t){t.data.title!==e.data.title&&(t.hide=!0)}))}function Ce(e){B({move:0,start:null}),e.hideChildren=!1,e.eachBefore((function(t){t.data.title!==e.data.title&&(t.hide=!1,t.hideChildren=!1)}))}function Re(){var e=pn.hierarchy(hn);return e.each((function(e){var t=re.get(e.data.title);e.hideChildren=t.hideChildren,e.hide=t.hide})),e}function Be(e){return n===e.region&&i===e.date}function ze(e){return 0===e.filter((function(e){var t=e.value;return!isNaN(t)})).length}return Object(a.useEffect)((function(){var e=pn.scaleLinear().domain(oe.domain()).range([0,x]),t=pn.scaleSqrt().domain(ue.domain()).range([0,x]),n=pn.axisBottom(e).ticks(x/50).tickSizeOuter(0),a=pn.axisBottom(t).ticks(x/50).tickSizeOuter(0),r=pn.axisBottom(ie).tickSizeOuter(0).tickFormat((function(e){var t=new Date(e).getDate();if(1!==t)return t;var n=new Date(e).getMonth();return G[n]}));pn.select(".tree-xAxis").call(r).call((function(e){return e.selectAll("text").filter((function(){var e=pn.select(this).text();return-1!==G.indexOf(e)})).attr("font-weight","bold").attr("dy","2em")})),pn.select(".tree-legend").call(n),pn.select(".tree-legend-special").call(a),window.addEventListener("mouseup",ge),window.addEventListener("mousemove",ve);var i=pn.transition().duration(200);return pn.selectAll(".grid, .tree-legend, .tree-line, .tree-xAxis, .tree-xAxis, .tree-btn, .tree-legend-special").transition(i).attr("stroke-opacity",1).attr("fill-opacity",1),function(){window.removeEventListener("mouseup",ge),window.removeEventListener("mousemove",ve)}})),r.a.createElement(fn,{viewBox:[0,0,f,h],loading:u&&ze(P),nodata:ze(P),onClick:function(){return D([])},onMouseEnter:function(){return A(!0)},onMouseLeave:function(){return A(!1)},onMouseOver:function(){return!N&&A(!0)},show:d,title:"\u6811 + \u70ed\u529b\u56fe",introduction:fe},I&&r.a.createElement("g",{transform:"translate(".concat(f-Y-x-10,", ").concat(U/2,")")},pn.range(0,x).map((function(e){return r.a.createElement("line",{className:"tree-line",key:e,x1:e,y1:-w/2,x2:e,y2:w/2,stroke:de(e)})})),r.a.createElement("g",{className:"tree-legend",transform:"translate(0, ".concat(w/2,")")}),r.a.createElement("text",{textAnchor:"end",fill:"currentColor",dy:"0.31em",dx:-10},be()?"\u5176\u4ed6\u5730\u533a":"\u6240\u6709\u5730\u533a")),be()&&r.a.createElement("g",{transform:0===I?"translate(".concat(f-Y-x-10,", ").concat(U/2,")"):"translate(".concat(f-Y-x-x-100,", ").concat(U/2,")")},pn.range(0,x).map((function(e){return r.a.createElement("line",{className:"tree-line",key:e,x1:e,y1:-w/2,x2:e,y2:w/2,stroke:me(e)})})),r.a.createElement("g",{className:"tree-legend-special",transform:"translate(0, ".concat(w/2,")")}),r.a.createElement("text",{textAnchor:"end",fill:"currentColor",dy:"0.31em",dx:-10},0===I?"\u4e2d\u56fd":1===I?"\u534e\u4e2d\u5730\u533a":"\u6e56\u5317")),q.map((function(e){var t=Object(s.a)(e,2),n=t[0],a=t[1];return r.a.createElement("g",{className:"tree-btn",transform:"translate(".concat(X+75*n-7.5,", ").concat(h-U+7.5,")"),key:n,onClick:function(e){!function(e){xe.apply(this,arguments)}(a),e.stopPropagation()},fillOpacity:0},a.every((function(e){return e.hideChildren}))?pe:he)})),r.a.createElement("g",{transform:"translate(".concat(X,", ").concat(U,")")},ee.links().map((function(e,t){return r.a.createElement("path",{id:"link-".concat(e.target.data.title),key:t,fill:"none",stroke:"#555",strokeOpacity:e.target.hide||e.source.hide?0:.4,strokeWidth:1.5,d:se(e)})})),ee.descendants().reverse().map((function(e){return r.a.createElement("g",{key:e.data.title,id:"node-".concat(e.data.title),transform:"translate(".concat(e.y,", ").concat(e.x,")"),fill:n===e.data.title?v:b,fillOpacity:e.hide?0:1,cursor:"pointer"},e.children?r.a.createElement(r.a.Fragment,null,r.a.createElement("circle",{r:2.5,fill:"white",onClick:function(t){ye(e),t.stopPropagation()}}),r.a.createElement("g",{transform:"translate(".concat(-7.5,", ").concat(-7.5,")"),onClick:function(t){ye(e),t.stopPropagation()}},e.hideChildren?pe:he)):r.a.createElement("circle",{r:3}),r.a.createElement("text",{dy:"0.31em",x:!e.children||e.hideChildren?8:-8,textAnchor:!e.children||e.hideChildren?"start":"end",fontSize:"12",onClick:function(t){!function(e){if(e.parent){var t=S.find((function(t){return t.data.title===e.data.title})),n=S.some((function(t){return t.parent.data.title===e.data.title}));if(t||n){var a=e.hideChildren?[e]:e.leaves(),r=!0,i=!1,c=void 0;try{for(var o,u=a[Symbol.iterator]();!(r=(o=u.next()).done);r=!0){var s=o.value,d=S.indexOf(s);S.splice(d,1)}}catch(m){i=!0,c=m}finally{try{r||null==u.return||u.return()}finally{if(i)throw c}}}else e.hideChildren?S.push(e):S.push.apply(S,Object(kt.a)(e.leaves()));D(Object(kt.a)(S)),l(e.data.title)}}(e),t.stopPropagation()},onDoubleClick:function(t){l(e.data.title),m(e.data.title),t.stopPropagation()}},e.data.title))}))),r.a.createElement("g",{transform:"translate(".concat(f-Y-$,", ",0,")")},r.a.createElement("g",{clipPath:"url(#maxtrix-ly)"},r.a.createElement("g",{transform:"translate(".concat(-R.move*(H.length*ae/$),", ").concat(U-ne/2,")")},P.map((function(e){return r.a.createElement("rect",{className:"grid-".concat(e.region," grid"),key:e.region+e.date.toString(),x:ie(e.date)+1,y:ce(e.region)+1,width:ae-2,height:le(e.region)-2,fill:(t=e,S.length&&!V.has(t.region)?E:"\u6e56\u5317"===t.region||"\u534e\u4e2d\u5730\u533a"===t.region?ue(t.value):oe(t.value)),fillOpacity:0,strokeOpacity:0,cursor:"pointer",onClick:function(t){!function(e){var t=e.region,n=e.date;l(t),c(n)}(e),t.stopPropagation()},stroke:Be(e)?y:"none",strokeWidth:Be(e)?2:0},r.a.createElement("title",null,"".concat(e.region,":").concat(e.value,"(").concat(J(new Date(e.date)),")")));var t}))),r.a.createElement("g",{className:"tree-xAxis",transform:"translate(".concat(-R.move*(H.length*ae/$),", ").concat(h-Z,")")})),r.a.createElement("defs",null,r.a.createElement("clipPath",{id:"maxtrix-ly"},r.a.createElement("rect",{x:-2,y:"0",width:$,height:h-Z+30}))),N&&$<H.length*ae&&r.a.createElement("g",{transform:"translate(0, ".concat(h-Z+40,")")},r.a.createElement("rect",{ref:L,width:$,height:8,x:0,y:0,rx:4,ry:4,fill:"transparent"}),r.a.createElement("rect",{onMouseDown:function(e){var t=Dt(e,L.current),n=Object(s.a)(t,1)[0];B(Object(Te.a)({},R,{start:n}))},width:$*($/(H.length*ae)),height:8,x:R.move,y:0,rx:4,ry:4,fill:"#bfbfbf",cursor:"pointer"}))))};function vn(){var e=Object(o.a)(["\n  cursor: pointer;\n"]);return vn=function(){return e},e}var bn=u.b.div(vn()),yn=function(e){var t=e.selectedDate,n=e.setSelectedDate,i=e.selectedType,c=e.loading,l=e.width,o=e.height,u=e.show,d=e.setFocusRegion,m=e.focusRegion,f=e.colors,h=e.all,p=e.highlightRectColor,g=e.disabledColor,v=e.legendWidth,b=e.legendHeight,y=30,E=30,x=30,w=h.filter((function(e){return e.region===m})).map((function(e){return{value:e[i],date:new Date(e.date)}})).filter((function(e){var t=e.value;return!isNaN(t)&&""!==t})),O=function(e){return e.getDay()},j=Be.timeFormat("%b"),k=Be.timeSunday,S=Be.timeMonth,D=Be.timeDay,C=Be.extent(w,(function(e){return e.date})),T=Object(s.a)(C,2),R=T[0],B=T[1],z=Be.extent(w,(function(e){return e.value})),M=S(R),N=S.ceil(B),A=k.count(M,N),L=Be.range(7).map((function(e){return new Date(1995,0,e)})),W=Be.timeMonths(M,N),F=Be.map(w,(function(e){return Me(e.date)})),q=D.range(M,N).map((function(e){var t=Me(e),n=F.get(t);return n||{date:e,value:null}})),I=Math.min((l-x-E)/A,40),P=I*A|0,H=7*I|0,K="\u6e56\u5317"===m||"\u534e\u4e2d\u5730\u533a"===m,V=function(e){return k.count(M,e)*I+.5},_=function(e){return O(e)*I+.5},U=K?Be.scaleSqrt().interpolate((function(){return f.special})).domain(z):Be.scaleSequential(f[i]).domain(z),Y=function(e){return null===e?g:U(e)},Z=K?Be.scaleSqrt().interpolate((function(){return f.special})).domain([0,v]):Be.scaleSequential(f[i]).domain([0,v]),X=function(e){return(O(e)+.5)*I},J=function(e){return Me(e)===t},G=function(e){var t=O(e),n=k.count(M,e);return"".concat(0===t?"M".concat(n*I,",0"):7===t?"M".concat((n+1)*I,",0"):"M".concat((n+1)*I,",0V").concat(t*I,"H").concat(n*I),"V").concat(7*I)};var Q=r.a.createElement("div",null,r.a.createElement("h3",null,"\u4f5c\u7528"),r.a.createElement("p",null,"\u53cd\u6620\u5404\u4e2a\u5730\u533a\u6bcf\u5929\u786e\u8bca\u3001\u6cbb\u6108\u6216\u6b7b\u4ea1\u4eba\u6570\u76f8\u5bf9\u524d\u4e00\u5929\u7684\u53d8\u5316\u60c5\u51b5\u3002"),r.a.createElement("h3",null,"\u8bf4\u660e"),r.a.createElement("ul",null,r.a.createElement("li",null,"\u56e0\u4e3a\u6e56\u5317\u548c\u534e\u4e2d\u5730\u533a\u7684\u6570\u636e\u8fdc\u5927\u4e8e\u5176\u4ed6\u5730\u533a\uff0c\u6240\u4ee5\u9009\u62e9\u4e86\u4e00\u79cd\u7279\u6b8a\u7684\u989c\u8272\u8303\u56f4\u3002"),r.a.createElement("li",null,"\u53d8\u5316\u4e3a 0 \u7684\u683c\u5b50\u4e0d\u4e00\u5b9a\u771f\u7684\u4e3a 0 \uff0c\u53ef\u80fd\u662f\u56e0\u4e3a\u6570\u636e\u7f3a\u5931\u3002")),r.a.createElement("h3",null,"\u4ea4\u4e92\u65b9\u6cd5"),r.a.createElement("ul",null,r.a.createElement("li",null,r.a.createElement("b",null,"\u53cc\u51fb"),"\u7a7a\u767d\u5730\u65b9\u8fd4\u56de\u3002")));return Object(a.useEffect)((function(){var e=K?Be.scaleSqrt().domain(U.domain()).range([0,v]):Be.scaleLinear().domain(U.domain()).range([0,v]),t=Be.axisBottom(e).ticks(v/50).tickSizeOuter(0);Be.select(".date-legend").call(t)})),r.a.createElement(bn,{onDoubleClick:function(){return d("")}},r.a.createElement(fn,{viewBox:[0,0,l,o],loading:c,nodata:function(e){return 0===e.filter((function(e){var t=e.value;return!isNaN(t)})).length}(w),show:u,introduction:Q,title:"\u65e5\u5386\u70ed\u56fe"},r.a.createElement("g",{transform:"translate(".concat(l-E-v-10,", ").concat(y,")")},Be.range(0,v).map((function(e){return r.a.createElement("line",{className:"tree-line",key:e,x1:e,y1:-b/2,x2:e,y2:b/2,stroke:Z(e)})})),r.a.createElement("g",{className:"date-legend",transform:"translate(0, ".concat(b/2,")")})),r.a.createElement("g",{transform:"translate(".concat((l-P)/2,", ").concat((o-H)/2,")")},0!==w.length&&W.map((function(e){return r.a.createElement("text",{fill:"currentColor",x:V(e),dy:"-1em",key:e},j(e))})),0!==w.length&&W.slice(1,W.length).map((function(e){return r.a.createElement("path",{d:G(e),stroke:"white",strokeWidth:8,fill:"none",key:e})})),q.map((function(e){var t=e.date,a=e.value;return r.a.createElement("rect",{key:t,x:V(t),y:_(t),width:I-4,height:I-4,fill:Y(a),stroke:J(t)?p:"none",strokeWidth:4,onClick:function(e){null!==a&&n(Me(t)),e.stopPropagation()}},r.a.createElement("title",null,"".concat(Me(t),":").concat(null===a?"\u6682\u65e0\u6570\u636e":a)))})),0!==w.length&&L.map((function(e){return r.a.createElement("text",{key:e,fill:"currentColor",x:-I,y:X(e),dy:"0.31em"},function(e){return"SMTWTFS"[O(e)]}(e))}))),w.length&&r.a.createElement("g",{transform:"translate(".concat(l-35,", ").concat(o-40,")"),textAnchor:"end",fill:"#777"},r.a.createElement("text",{fontSize:35,fontWeight:"bold"},m),r.a.createElement("text",{fontSize:15,dy:"1.5em"},t))))},En=function(e){var t=e.dataByRegion,n=e.selectedRegion,i=e.selectedDate,c=e.setSelectedDate,l=e.setSelectedRegion,o=e.selectedType,u=e.loading,d=e.selectedCountries,m=e.treeData,f=e.setTreeData,h=e.handleChangeLevel,p=e.focusRegion,g=e.setFocusRegion,v=e.highlightRegions,b=e.setHighlightRegions,y=Object(a.useMemo)((function(){return t?Array.from(t).flatMap((function(e){var t=Object(s.a)(e,2),n=t[0],a=t[1];return Be.pairs(Array.from(a).map((function(e){var t=Object(s.a)(e,2);return{date:t[0],data:t[1].data}})).sort((function(e,t){return new Date(e.date)-new Date(t.date)}))).map((function(e){var t=Object(s.a)(e,2),a=t[0],r=t[1];return Object(Te.a)({region:n,date:r.date},Object.keys(r.data).reduce((function(e,t){return e[t]=r.data[t]-a.data[t],e}),{}))}))})):[]}),[t,d.length]),E={dead:Be.interpolatePurples,confirmed:Be.interpolateReds,cured:Be.interpolateGreens,special:Be.interpolatePuRd},x={dataByRegion:t,selectedRegion:n,selectedDate:i,setSelectedDate:c,setSelectedRegion:l,selectedType:o,loading:u,show:""===p,setFocusRegion:g,width:1200,height:650,colors:E,all:y,highlightColor:"red",normalColor:"black",highlightRectColor:"red",disabledColor:"#eeeeee",legendHeight:10,legendWidth:200,treeData:m,setTreeData:f,handleChangeLevel:h,highlight:v,setHighlight:b},w={width:1200,height:650,show:""!==p,setFocusRegion:g,focusRegion:p,colors:E,all:y,selectedType:o,loading:!1,selectedDate:i,highlightRectColor:"red",disabledColor:"#eeeeee",setSelectedDate:c,legendWidth:200,legendHeight:10};return r.a.createElement("div",null,r.a.createElement(gn,x),r.a.createElement(yn,w))},xn=function(e){var t=e.extent,n=e.pos,a=e.size,i=e.children,c=Object(s.a)(t,4),l=c[0],o=c[1],u=c[2],d=c[3],m=Object(s.a)(n,2),f=m[0],h=m[1],p=Object(s.a)(a,2),g=p[0],v=(o+d-p[1])/2,b=f;return f+g+h>l+u?b-=g+h:b+=h,r.a.createElement(r.a.Fragment,null,i&&i(b,v))},wn=function(e){var t=e.loading,n=e.dataByDate,i=e.selectedTime,c=e.selectedType,l=e.selectedLevel,o=e.setSelectedTime,u=e.focusRegion,d=e.setFocusRegion,m=e.selectedCountries,f=e.countries,h=e.highlightRegions,p=e.setHighlightRegions,g=e.selectedRegion,v=e.setSelectedRegion,b=Object(a.useRef)(null),y=75,E=40,x=25,w=90,O=Be.timeFormat("%x"),j=Be.bisector((function(e){return e.date})).left,k=new Set(["\u534e\u5317\u5730\u533a","\u897f\u5317\u5730\u533a","\u4e1c\u5317\u5730\u533a","\u534e\u4e1c\u5730\u533a","\u534e\u4e2d\u5730\u533a","\u897f\u5357\u5730\u533a","\u534e\u5357\u5730\u533a","\u6e2f\u6fb3\u53f0\u5730\u533a"]),S=new Set(f),D=Object(a.useState)(null),C=Object(s.a)(D,2),T=C[0],R=C[1],B=Object(a.useState)(!1),z=Object(s.a)(B,2),M=z[0],N=z[1],A=Object(a.useMemo)((function(){return Array.from(n).map((function(e){var t=Object(s.a)(e,2),n=t[0],a=t[1];return Object(Te.a)({date:new Date(n)},a.filter((function(e){var t=e.region;return"top"===l?new Set(m).has(t):"second"===l?k.has(t):!S.has(t)&&!k.has(t)})).reduce((function(e,t){var n=t.region,a=t.data;return e[n]=a,e}),{}))}))}),[n,l,S,k,m]),L=Object(a.useMemo)((function(){return A.map((function(e){return Object.keys(e).reduce((function(t,n){return"date"===n?t[n]=e[n]:""!==u&&u!==n||(t[n]=e[n][c]),t}),{})})).sort((function(e,t){return e.date-t.date}))}),[A,c,u]),W=Object(s.a)(L,1)[0],F=W?Object.keys(W).filter((function(e){return"date"!==e})):[],q="second"===l?4:6,I="third"===l?55:75,P="second"===l?100:70,H=Math.max(P*Math.ceil(F.length/q),100),K=20*Math.min(F.length,q)+30,V=Be.stack().keys(F)(L),_=Be.scaleTime().domain(Be.extent(L,(function(e){return new Date(e.date)}))).range([0,1200-E-w]),U=Be.scaleLinear().domain([0,Be.max(V,(function(e){return Be.max(e,(function(e){return e[1]}))}))]).nice().range([350-x-y,0]),Y=function(e){return(e/2|0)*I},Z=function(e){return e%2*25},X=function(e){return(e/q|0)*P},J=function(e){return e%q*20},G=function(){return M?T?_(T.time):void 0:_(new Date(i))},Q=Be.area().x((function(e){return _(e.data.date)})).y0((function(e){return U(e[0])})).y1((function(e){return U(e[1])})),$=1===F.length?function(){return"#61d4b3"}:Be.scaleOrdinal().domain(F).range(Be.quantize(Be.interpolateSpectral,F.length).reverse()),ee=function(e){return"object"===typeof e?e.data.title:e},te=function(e){var t=new Set(h.map((function(e){return ee(e)})));return 0===h.length?$(e):t.has(e)?$(e):"#efefef"},ne=function(e){return"a-".concat(e)},ae=r.a.createElement("div",null,r.a.createElement("h3",null,"\u4f5c\u7528"),r.a.createElement("p",null,"\u53cd\u6620\u5404\u4e2a\u5730\u533a\u6bcf\u5929\u786e\u8bca\u3001\u6cbb\u6108\u6216\u6b7b\u4ea1\u7684\u603b\u4eba\u6570\u968f\u7740\u65f6\u95f4\u7684\u53d8\u5316\u3002"),r.a.createElement("h3",null,"\u8bf4\u660e"),r.a.createElement("p",null,"\u5982\u679c\u67d0\u4e2a\u5730\u533a\u7684\u6570\u636e\u957f\u65f6\u95f4\u6ca1\u6709\u53d8\u5316\uff0c\u53ef\u80fd\u662f\u56e0\u4e3a\u6570\u636e\u7f3a\u5931\u3002"),r.a.createElement("h3",null,"\u4f7f\u7528\u65b9\u6cd5"),r.a.createElement("ul",null,r.a.createElement("li",null,r.a.createElement("b",null,"\u9f20\u6807\u70b9\u51fb"),"\u67d0\u4e2a\u5730\u533a\u7684\u540d\u5b57\uff0c\u4f1a\u9ad8\u4eae\u8be5\u5730\u533a\u6240\u5bf9\u5e94\u7684\u201c\u5e26\u5b50\u201d\u3002",r.a.createElement("b",null,"\u9f20\u6807\u70b9\u51fb\u7a7a\u767d\u533a\u57df"),"\u4f1a\u53d6\u6d88\u9ad8\u4eae\u3002"),r.a.createElement("li",null,r.a.createElement("b",null,"\u53cc\u51fb"),"\u67d0\u4e2a\u5730\u533a\u7684\u540d\u5b57\uff0c\u8fdb\u5165\u8be5\u5730\u533a\u6240\u5bf9\u5e94\u7684",r.a.createElement("b",null,"\u666e\u901a\u9762\u79ef\u56fe"),"\u3002",r.a.createElement("b",null,"\u53cc\u51fb"),"\u7a7a\u767d\u90e8\u5206\u8fd4\u56de\u3002")));return Object(a.useEffect)((function(){var e=Be.axisBottom(_);Be.select(".area-xAxis").call(e),Be.select(".area-yAxis").call((function(e){return e.call(Be.axisLeft(U)).call((function(e){return e.select(".domain").remove()}))}))}),[L,_,U]),r.a.createElement(r.a.Fragment,null,0===V.length?r.a.createElement(fn,{viewBox:[0,0,1200,350],loading:t,nodata:!0}):r.a.createElement(fn,{viewBox:[0,0,1200,350],loading:t,onDoubleClick:function(){return d("")},onClick:function(e){p([]),e.stopPropagation()},introduction:ae,title:"\u5806\u53e0\u9762\u79ef\u56fe",onMouseEnter:function(e){return N(!0)},onMouseLeave:function(e){return N(!1)},onMouseOver:function(e){return!M&&N(!0)}},r.a.createElement("g",{cursor:"pointer",ref:b,transform:"translate(".concat(w,", ").concat(y,")"),onMouseLeave:function(){return R(null)}},r.a.createElement("g",{onMouseMove:function(e){var t=Dt(e,b.current),n=Object(s.a)(t,2),a=n[0],r=n[1],i=_.invert(a).getTime(),c=j(L,new Date(i),0,L.length-1),l=L[c];R(Object(Te.a)({},l,{time:i,x:a,y:r}))},onClick:function(e){var t=Dt(e,b.current),n=Object(s.a)(t,1)[0],a=_.invert(n).getTime();o(a)}},V.map((function(e){return r.a.createElement("path",{key:e.key,fill:te(e.key),d:Q(e),stroke:(t=e.key,"top"===l?Be.color(te(t)).darker():"none"),strokeWidth:2,strokeLinecap:"round"});var t}))),r.a.createElement("line",{x1:G(),y1:0,x2:G(),y2:350-x-y,stroke:"currentColor"}),r.a.createElement("g",{transform:"translate(".concat(10,",",-40,")")},r.a.createElement("rect",{x:-10,y:-10,fill:"transparent",width:I*Math.ceil(F.length/2),height:25*Math.min(F.length,2)}),F.map((function(e,t){return r.a.createElement("g",{key:e,transform:"translate(".concat(Y(t),", ").concat(Z(t),")"),onDoubleClick:function(t){d(e),p([]),t.stopPropagation()},onClick:function(t){var n=h.slice(),a=h.find((function(t){return ee(t)===e}));if(a){var r=h.indexOf(a);n.splice(r,1)}else n.push(e);p(n),v(e),t.stopPropagation()}},r.a.createElement("circle",{fill:te(e),cx:0,cy:0,r:5}),r.a.createElement("text",{dy:5,dx:10,fill:e===g?"red":"currentColor",fontSize:"12",clipPath:"url(#".concat(ne(e),")")},e,r.a.createElement("title",null,e)),r.a.createElement("defs",null,r.a.createElement("clipPath",{id:ne(e)},r.a.createElement("rect",{x:0,y:-12.5,width:I-5,height:25}))))}))),T&&r.a.createElement(xn,{extent:[0,0,1200-w-E,350-y-x],size:[H,K],pos:[T.x,10]},(function(e,t){return r.a.createElement("g",{transform:"translate(".concat(e,", ").concat(t,")")},r.a.createElement("rect",{width:H,height:K,rx:10,ry:10,fill:"white",stroke:"currentColor"}),r.a.createElement("text",{dx:10,dy:20},O(T.date)),r.a.createElement("g",{transform:"translate(10, 40)"},Object.keys(T).filter((function(e){return"time"!==e&&"x"!==e&&"y"!==e&&"date"!==e})).sort((function(e,t){return T[t]-T[e]})).map((function(e,t){return r.a.createElement("text",{fontSize:"10",key:e,x:X(t),y:J(t)},"".concat(e,": ").concat(T[e]))}))))}))),r.a.createElement("g",{className:"area-xAxis",transform:"translate(".concat(w,", ").concat(350-x,")")}),r.a.createElement("g",{className:"area-yAxis",transform:"translate(".concat(w,", ").concat(y,")")})))};function On(e,t){e.children&&e.children.forEach((function(e){return On(e,t)})),t(e)}function jn(e){return{title:"\u5168\u7403",value:"\u5168\u7403",children:e.map((function(e){return{title:e,value:e}}))}}function kn(){var e=Object(o.a)(["\n  display: flex;\n  margin: 1em 0 1em 0;\n\n  @media (max-width: 700px) {\n    flex-direction: column;\n  }\n"]);return kn=function(){return e},e}function Sn(){var e=Object(o.a)(["\n  position: relative;\n  margin-bottom: 4em;\n  padding: 0 10px;\n"]);return Sn=function(){return e},e}var Dn=yt.a.Option,Cn=u.b.div(Sn()),Tn=u.b.div(kn());var Rn=Object(c.connect)((function(e){var t=e.ncov,n=e.loading;return Object(Te.a)({loading:n.models.ncov},t)}),{setTreeData:function(e){return{type:"ncov/setTreeData",payload:e}},getCountryData:function(e,t,n,a){return{type:"ncov/getCountryData",payload:{country:e,dataByDate:t,dataByRegion:n,total:a}}},getNewsData:function(e,t){return{type:"news/getNewsData",payload:{region:e,date:t}}},getData:function(e){return{type:"ncov/getData",payload:e}},setSelectedCountries:function(e){return{type:"ncov/setSelectedCountries",payload:{keys:e}}}})((function(e){var t=e.dataByRegion,n=e.dataByDate,i=e.getData,c=e.countries,l=e.selectedCountries,o=e.setSelectedCountries,u=e.widthData,d=e.getCountryData,m=e.total,f=e.selectedTime,h=e.setSelectedTime,p=e.loading,g=e.treeData,v=e.setTreeData,b=e.selectedRegion,y=e.setSelectedRegion,E=Object(a.useState)(""),x=Object(s.a)(E,2),w=x[0],O=x[1],j=Object(a.useState)("confirmed"),k=Object(s.a)(j,2),S=k[0],D=k[1],C=Object(a.useState)("top"),T=Object(s.a)(C,2),R=T[0],B=T[1],z=Object(a.useState)([]),M=Object(s.a)(z,2),N=M[0],A=M[1],L=Me(new Date(f)),W={loading:p,dataByDate:n,selectedTime:f,setSelectedTime:h,selectedType:S,selectedLevel:R,focusRegion:w,setFocusRegion:O,selectedCountries:l,countries:c,highlightRegions:N,setHighlightRegions:A,selectedRegion:b,setSelectedRegion:y},F={regions:hn,selectedRegion:b,setSelectedRegion:y,selectedDate:L,setSelectedDate:function(e){return h(new Date(e).getTime())},setSelectedLevel:B,selectedLevel:R,selectedType:S,loading:p,dataByRegion:t,selectedCountries:l,treeData:g,setTreeData:v,handleChangeLevel:q,focusRegion:w,setFocusRegion:function(e){var t=function(e){var t=new Set(["\u534e\u5317\u5730\u533a","\u897f\u5317\u5730\u533a","\u4e1c\u5317\u5730\u533a","\u534e\u4e1c\u5730\u533a","\u534e\u4e2d\u5730\u533a","\u897f\u5357\u5730\u533a","\u534e\u5357\u5730\u533a","\u6e2f\u6fb3\u53f0\u5730\u533a"]),n=new Set(l);return t.has(e)?"second":n.has(e)?"top":"third"}(e);t!==R&&q(t);O(e)},highlightRegions:N,setHighlightRegions:A};function q(e,t){if("top"===e)v(Be.hierarchy(jn(l)));else if("second"===e){var n=void 0!==t?t:Be.hierarchy(hn).each((function(e){1===e.depth?e.hideChildren=!0:2===e.depth&&(e.hide=!0)}));v(n)}else{var a=void 0!==t?t:Be.hierarchy(hn);v(a)}B(e),O("")}return Object(a.useEffect)((function(){i(["\u7f8e\u56fd","\u82f1\u56fd","\u610f\u5927\u5229"])}),[i]),r.a.createElement(Cn,null,r.a.createElement(Tn,null,r.a.createElement("div",null,r.a.createElement("span",null,r.a.createElement("b",null,"\u7ea7\u522b")),"\u2002",r.a.createElement(yt.a,{value:R,onChange:function(e){return q(e)}},[{name:"\u56fd\u5bb6",key:"top"},{name:"\u5206\u533a",key:"second"},{name:"\u7701\u4efd",key:"third"}].map((function(e){return r.a.createElement(Dn,{key:e.key},e.name)}))),"\u2003",r.a.createElement("span",null,r.a.createElement("b",null,"\u79cd\u7c7b")),"\u2002",r.a.createElement(yt.a,{value:S,onChange:function(e){return D(e)}},[{name:"\u786e\u8bca",key:"confirmed"},{name:"\u6cbb\u6108",key:"cured"},{name:"\u6b7b\u4ea1",key:"dead"}].map((function(e){return r.a.createElement(Dn,{key:e.key},e.name)}))),"\u2003"),"top"===R&&r.a.createElement("div",{className:"country"},r.a.createElement("span",null,r.a.createElement("b",null,"\u67e5\u770b\u7684\u56fd\u5bb6")),"\u2002",r.a.createElement(yt.a,{mode:"tags",value:l,onChange:function(e){var a=new Set(c),r=!0;if(e.forEach((function(e){return!a.has(e)&&(r=!1)})),r)if(e.length>=30)alert("\u4e0d\u80fd\u8d85\u8fc7 30 \u4e2a\u56fd\u5bb6");else{var i=[],l=!0,s=!1,f=void 0;try{for(var h,p=e[Symbol.iterator]();!(l=(h=p.next()).done);l=!0){var g=h.value;u.has(g)?i.push(g):d(g,n,t,m)}}catch(b){s=!0,f=b}finally{try{l||null==p.return||p.return()}finally{if(s)throw f}}o(i),v(Be.hierarchy(jn(e)))}else alert("\u8f93\u5165\u65e0\u6548")},style:{minWidth:250}},c.map((function(e){return r.a.createElement(Dn,{key:e},e)}))))),r.a.createElement(Et.a,{gutter:[16,16]},r.a.createElement(xt.a,{span:24},r.a.createElement(wn,W)),r.a.createElement(xt.a,{span:24},r.a.createElement(En,F))))})),Bn=n(389);function zn(){var e=Object(o.a)(["\n  cursor: pointer;\n"]);return zn=function(){return e},e}function Mn(){var e=Object(o.a)(["\n  cursor: pointer;\n"]);return Mn=function(){return e},e}function Nn(){var e=Object(o.a)(["\n  cursor: pointer;\n"]);return Nn=function(){return e},e}function An(){var e=Object(o.a)(["\n  background: #f9f9f9;\n"]);return An=function(){return e},e}var Ln=u.b.svg(An()),Wn=u.b.g(Nn()),Fn=u.b.rect(Mn()),qn=u.b.circle(zn()),In=function(e){var t=e.selectedTime,n=e.running,i=e.toggleAnimation,c=e.changeValue,l=e.range,o=e.finish,u=e.totalDuration,d=e.duration,m=Object(a.useRef)(!1),f=Object(a.useRef)(null),h=Object(a.useRef)(null),p=Object(a.useState)({time:-1,duration:-1}),g=Object(s.a)(p,2),v=g[0],b=g[1],y=20,E=40,x=90,w=Be.scaleLinear().domain(l).range([x,1200-E]),O=Be.scaleLinear().domain([x,1200-E]).range([0,u]),j=function(e){var t=e/1e3|0,n=Math.max(t/60|0,0),a=Math.max(t%60,0);return"".concat(n<10?"0"+n:n,":").concat(a<10?"0"+a:a)},k=r.a.createElement("svg",{t:"1583152510891",className:"icon",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"2302",width:"30",height:"30"},r.a.createElement("path",{d:"M149.989688 874.093352a509.948138 509.948138 0 1 0-109.714286-162.700613 513.206978 513.206978 0 0 0 109.714286 162.700613z",fill:"#4D4D4D","p-id":"2303"}),r.a.createElement("path",{d:"M429.646454 687.977369a57.331447 57.331447 0 0 0 27.277699 7.000472 60.348892 60.348892 0 0 0 32.829797-10.017916l175.977369-115.990571a68.677039 68.677039 0 0 0 30.777935-58.055634 66.504479 66.504479 0 0 0-29.812353-56.486563l-177.54644-115.749175a57.934936 57.934936 0 0 0-60.348892-3.017445 67.832155 67.832155 0 0 0-33.312588 60.348893V627.628477a67.470061 67.470061 0 0 0 34.157473 60.348892z",fill:"#FFFFFF","p-id":"2304"})),S=r.a.createElement("svg",{t:"1583152894415",className:"icon",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"1002",width:"30",height:"30"},r.a.createElement("path",{d:"M874.058005 149.941995a510.06838 510.06838 0 1 0 109.740156 162.738976 511.396369 511.396369 0 0 0-109.740156-162.738976z",fill:"#4D4D4D","p-id":"1003"}),r.a.createElement("path",{d:"M417.954256 281.533601a41.046923 41.046923 0 0 0-41.77128 40.201839v385.116718a41.892007 41.892007 0 0 0 83.663287 0v-385.116718a41.167649 41.167649 0 0 0-41.892007-40.201839zM606.045744 281.533601a41.046923 41.046923 0 0 0-41.77128 40.201839v385.116718a41.892007 41.892007 0 0 0 83.663287 0v-385.116718a41.167649 41.167649 0 0 0-41.892007-40.201839z",fill:"#FFFFFF","p-id":"1004"})),D=r.a.createElement("svg",{t:"1583294650370",className:"icon",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"1815",width:"30",height:"30"},r.a.createElement("path",{d:"M471.616 361.728","p-id":"1816"}),r.a.createElement("path",{d:"M512 0C229.248 0 0 229.248 0 512s229.248 512 512 512 512-229.248 512-512S794.752 0 512 0zM534.976 860.672c-100.992 0-191.616-44.48-253.312-114.944l63.36-55.424c3.712 4.224 7.488 8.32 11.52 12.288 47.68 47.68 111.104 73.92 178.56 73.92 67.456 0 130.816-26.304 178.56-73.92 47.68-47.68 73.92-111.104 73.92-178.56s-26.304-130.816-73.92-178.56c-47.68-47.68-111.104-73.92-178.56-73.92-67.456 0-130.816 26.304-178.56 73.92l94.4 94.4L198.336 439.872 198.336 187.328 296.96 285.952c60.928-60.928 145.088-98.624 238.016-98.624 185.92 0 336.64 150.72 336.64 336.64C871.616 709.888 720.896 860.672 534.976 860.672z","p-id":"1817"}));return Object(a.useEffect)((function(){var e=function(){return m.current=!1},t=function(e){if(m.current){var t=Dt(e,f.current),n=Object(s.a)(t,1)[0],a=w.invert(n+x);c(a)}};return window.addEventListener("mouseup",e),window.addEventListener("mousemove",t),function(){window.removeEventListener("mouseup",e),window.removeEventListener("mousemove",t)}})),r.a.createElement(Ln,{viewBox:[0,0,1200,50],fontSize:"12"},r.a.createElement(Wn,{transform:"translate(".concat(10,", ",10,")"),onClick:i},n?S:o?D:k),r.a.createElement("g",{transform:"translate(".concat(x-10,", ").concat(25,")")},r.a.createElement("text",{textAnchor:"end",dy:"0.5em"},j(d))),r.a.createElement(Fn,{ref:f,x:x,y:y,width:1200-x-E,height:10,fill:"#eee",rx:5,onClick:function(e){var t=Dt(e,f.current),n=Object(s.a)(t,1)[0],a=w.invert(n+x);c(a)},onMouseMove:function(e){var t=Dt(e,f.current),n=Object(s.a)(t,1)[0],a=O(n+x),r=w.invert(n+x);b({time:r,duration:a})},onMouseOver:function(e){var t=Dt(e,f.current),n=Object(s.a)(t,1)[0],a=O(n+x),r=w.invert(n+x);b({time:r,duration:a})}},r.a.createElement("title",null,"[".concat(j(v.duration),"] ").concat(Me(new Date(v.time))))),r.a.createElement(qn,{ref:h,cx:w(t)||x,cy:25,r:7,onMouseDown:function(){return m.current=!0}}),r.a.createElement("g",{transform:"translate(".concat(1200,", ").concat(25,")")},r.a.createElement("text",{textAnchor:"end",color:"black",dy:"0.5em"},j(u))))},Pn=n(381),Hn=function(e){var t=e.loading,n=e.keyframes,i=e.selectedTime,c=e.running,l=e.color,o=e.selectedName,u=e.showWordsOfTopic,d=e.hideWordsOfTopic,m=e.selectedTopic,f=30,h=35,p=20,g=40;if(void 0===n)return r.a.createElement(fn,{viewBox:[0,0,600,400],loading:t,nodata:!0});var v=Object(a.useState)(!1),b=Object(s.a)(v,2),y=b[0],E=b[1],x=r.a.createElement(r.a.Fragment,null,r.a.createElement("span",null,"\u6807\u9898\u6a21\u5f0f"),r.a.createElement(Pn.a,{onChange:E,checked:y,size:"small"})),w=Be.bisector((function(e){return e[0]})),O=Be.scaleBand().domain(Be.range(11)).padding(.1).range([f,(400-p)/10*11]),j=O.bandwidth(),k=function(e,t){var n=w.left(e,t,0,e.length-1),a=e[n];if(!n||!c)return a[1].map((function(e){return Object(Te.a)({},e,{y:O(e.rank)})}));var r=e[n-1],i=(t-a[0])/(r[0]-a[0]);return a[1].map((function(e){var t=r[1].find((function(t){var n=t.name;return e.name===n}))||{value:e.value,rank:10},n=t.value,a=t.rank;return Object(Te.a)({},e,{y:O(e.rank)*(1-i)+O(a)*i,value:e.value*(1-i)+n*i})}))}(n,i),S=Be.scaleLinear().domain([0,Be.max(k,(function(e){return e.value}))]).range([g,600-h]),D=function(e,t){var n=t<8?0:90;return y?S.range()[1]-S(0)-n:Math.max(S(e.value)-S(0)-8,0)},C=k.map((function(e){return e.name})),T=function(e){return"t-".concat(e.value)},R=r.a.createElement("div",null,r.a.createElement("h3",null,"\u4f5c\u7528"),r.a.createElement("p",null,"\u53cd\u6620\u77e5\u4e4e\u70ed\u699c\u524d10\u7684\u8bdd\u9898\u7684\u70ed\u5ea6\u53d8\u5316\u60c5\u51b5\u3002"),r.a.createElement("h3",null,"\u8bf4\u660e"),r.a.createElement("p",null,"\u76ee\u524d\u53ea\u6709 2020-02-27 \u4e4b\u540e\u7684\u6570\u636e\u3002\u524d\u9762\u7684\u6570\u636e\u4f1a\u5c3d\u5feb\u8865\u4e0a\u3002"),r.a.createElement("h3",null,"\u4ea4\u4e92"),r.a.createElement("ul",null,r.a.createElement("li",null,r.a.createElement("b",null,"\u5355\u51fb"),"\u4efb\u610f\u70ed\u641c\u8bdd\u9898\uff0c\u65c1\u8fb9\u7684\u8bcd\u4e91\u4f1a\u53ea\u5c55\u793a\u5f53\u524d\u8bdd\u9898\u4e0b\u56de\u7b54\u4e2d\u7684\u70ed\u8bcd\u3002"),r.a.createElement("li",null,r.a.createElement("b",null,"\u9f20\u6807\u79fb\u52a8\u5230"),"\u4efb\u610f\u70ed\u641c\u8bdd\u9898\u4e0a\u9762\uff0c\u4f1a\u663e\u793a\u5b8c\u6574\u7684\u6807\u9898\u3002")));return l.cur(C),Object(a.useEffect)((function(){l.pre(C);var e=Be.axisTop(S).ticks(3.75).tickSizeOuter(0).tickSizeInner(-j*(11+O.padding())),t=Be.select("#bar-axis").call(e);t.select(".tick:first-of-type text").remove(),t.selectAll(".tick:not(:first-of-type) line").attr("stroke","white"),t.select(".domain").remove()})),r.a.createElement(fn,{viewBox:[0,0,600,400],loading:t,onClick:d,title:"\u52a8\u6001\u6761\u5f62\u56fe",introduction:R,slot:x},k.map((function(e){return r.a.createElement("g",{transform:"translate(".concat(g,", ").concat(c?e.y:O(e.rank),")"),key:e.name},r.a.createElement("rect",{width:y?S.range()[1]-S(0):S(e.value)-S(0),height:j,fill:(t=e.name,null!==m&&m!==t?"#efefef":l(t)),cursor:"pointer",fillOpacity:.7,onClick:function(t){u(e.name),t.stopPropagation()}},r.a.createElement("title",null,e.name)));var t})),r.a.createElement("g",{id:"bar-axis",transform:"translate(".concat(0,", ",f,")")}),k.map((function(e,t){return r.a.createElement("g",{transform:"translate(".concat(g,", ").concat(c?e.y:O(e.rank),")"),key:e.name},r.a.createElement("text",{dx:"8",dy:"1.1em",clipPath:"url(#".concat(T(e),")"),fontWeight:"bold",fontSize:"13",cursor:"pointer",onClick:function(t){u(e.name),t.stopPropagation()}},e.name,r.a.createElement("title",null,e.name)),r.a.createElement("text",{dx:"8",y:j,dy:"-0.33em",clipPath:"url(#".concat(T(e),")"),fontSize:"10",fill:"currentColor"},0|e.value),r.a.createElement("defs",null,r.a.createElement("clipPath",{id:T(e)},r.a.createElement("rect",{x:"0",y:"0",width:D(e,t),height:j}))))})),r.a.createElement("g",{transform:"translate(".concat(600-h-5,", ").concat(350,")"),textAnchor:"end",fill:y?"black":"#777"},r.a.createElement("text",{fontSize:35,fontWeight:"bold"},o),r.a.createElement("text",{fontSize:15,dy:"1.5em"},Me(new Date(i)))))};function Kn(){var e=Object(o.a)(["\n  width: 100%;\n  height: 100%;\n"]);return Kn=function(){return e},e}var Vn=u.b.canvas(Kn()),_n=function(e){var t=e.loading,n=e.nodata,i=e.style,c=e.className,l=e.id,o=e.dependcies,u=void 0===o?[]:o,s=e.children,d=e.width,m=e.height,f=e.filename,h=void 0===f?"words":f,p=e.introduction,g=e.title,v=e.hasZoom,b=void 0===v||v,y=Object(Ct.a)(e,["loading","nodata","style","className","id","dependcies","children","width","height","filename","introduction","title","hasZoom"]);var E=Object(a.useRef)(null),x={onDownload:function(){E.current.toBlob((function(e){sn(e,h)}))},id:l,style:i,className:c,loading:t,nodata:n,introduction:p,title:g},w=Object(Te.a)({ref:E,width:4*d,height:4*m,hasZoom:b},y);return Object(a.useEffect)((function(){var e=E.current.getContext("2d");e.restore(),e.save(),e.scale(4,4),s&&s(e)}),[].concat(Object(kt.a)(u),[s])),r.a.createElement(on,x,r.a.createElement(Vn,w))},Un=function(e){var t=e.loading,n=e.selectedTime,a=e.keyframes,i=e.running,c=e.selectedName,l=e.colorScale,o=e.color,u=e.selectedWords,s=e.selectedTopic;if(void 0===a||0===a.length)return r.a.createElement(_n,{width:900,height:600,loading:t,dependcies:[n,g],nodata:void 0===a});var d=new Set(["x","y","size"]),m=function(e){return Object(Te.a)({},e,{size:0})},f=function(e){return e.text},h=null===s?function(e){var t=(0,Be.bisector((function(e){return e[0]})).left)(a,e,0,a.length-1),n=a[t];if(!t||!i||e>n[0])return n[1];var r=a[t-1],c=Be.easeCircleInOut((e-n[0])/(r[0]-n[0])),l=r[1].filter((function(e){return!n[1].find((function(t){return f(t)===f(e)}))})).map(m);return[].concat(Object(kt.a)(l),Object(kt.a)(n[1])).map((function(e){var t=r[1].find((function(t){return f(t)===f(e)}))||m(e);return Object.keys(e).reduce((function(n,a){return d.has(a)?n[a]=e[a]*(1-c)+t[a]*c:n[a]=e[a],n}),{})}))}(n):u,p=r.a.createElement("div",null,r.a.createElement("h3",null,"\u4f5c\u7528"),r.a.createElement("p",null,"\u53cd\u6620\u5f53\u524d\u77e5\u4e4e\u70ed\u95e8\u8bdd\u9898\u4e0b\u56de\u7b54\u4e2d\u7684\u70ed\u8bcd\u53d8\u5316\u60c5\u51b5\u3002"),r.a.createElement("h3",null,"\u8bf4\u660e"),r.a.createElement("p",null,"\u76ee\u524d\u53ea\u6709 2020-02-27 \u4e4b\u540e\u7684\u6570\u636e\u3002\u524d\u9762\u7684\u6570\u636e\u4f1a\u5c3d\u5feb\u8865\u4e0a\u3002"),r.a.createElement("h3",null,"\u4ea4\u4e92"),r.a.createElement("p",null,"\u65e0"));function g(e){e.fillStyle="white",e.fillRect(0,0,900,600),function(e){e.save(),e.translate(450,300),e.textAlign="center";var t=!0,n=!1,a=void 0;try{for(var r,i=h[Symbol.iterator]();!(t=(r=i.next()).done);t=!0){var c=r.value,u=null===s?l(f(c)):o;e.fillStyle="".concat(u),e.font="".concat(c.size,"px siyuan"),e.fillText(f(c),c.x,c.y)}}catch(d){n=!0,a=d}finally{try{t||null==i.return||i.return()}finally{if(n)throw a}}e.restore()}(e),function(e){e.save(),e.translate(845,530),e.fillStyle="#777",e.textAlign="end",e.textBaseline="bottom",e.font="bold 50px siyuan",e.fillText(c,0,0),e.font="normal 25px \u5fae\u8f6f\u96c5\u9ed1",e.fillText(Me(new Date(n)),0,35),e.restore()}(e)}return r.a.createElement(_n,{width:900,height:600,dependcies:[n,g],loading:t,nodata:0===h.length,title:"\u52a8\u6001\u8bcd\u4e91",introduction:p},g)};function Yn(){var e=Object(o.a)(["\n  position: relative;\n  padding: 0 10px;\n"]);return Yn=function(){return e},e}Bn.a.config({maxCount:1});var Zn=u.b.div(Yn());var Xn=Object(c.connect)((function(e){var t=e.hots,n=e.loading;return Object(Te.a)({},t,{loadingHots:n.models.hots,loadingCommon:n.models.common})}),{setSelectedTime:function(e){return{type:"common/setSelectedTime",payload:e}},setSelectedWords:function(e){return{type:"hots/setSelectedWords",payload:e}},getWords:function(e,t,n){return{type:"hots/getWords",payload:{name:e,time:t,title:n}}},getData:function(e){return{type:"hots/getData",payload:e}},setSelectedName:function(e){return{type:"hots/setSelectedName",payload:e}},getTime:function(e){return{type:"hots/getTime",payload:{name:e}}},updateDataByTime:function(e){return{type:"hots/updateDataByTime",payload:e}}})((function(e){var t=e.dataByName,n=e.getData,i=e.loadingHots,c=e.loadingCommon,l=e.timeByName,o=e.getTime,u=e.selectedTime,d=e.setSelectedTime,m=e.updateDataByTime,f=e.getWords,h=e.selectedWords,p=e.setSelectedWords,g=e.wordsByTime,v=e.totalTimeRange,b=e.computingLayout,y=e.running,E=e.setRunning,x=e.requestAnimation,w=e.setFrame,O=e.timeScale,j=e.duration,k=e.interpolateInterval,S=e.totalDuration,D=e.stopAnimation,C=Object(a.useState)(null),T=Object(s.a)(C,2),R=T[0],B=T[1],z=Object(a.useState)(!1),M=Object(s.a)(z,2),N=M[0],A=M[1],L=Object(a.useRef)(function(e){var t=new Map,n=[],a=[];function r(r){var i=t.get(r);if(i)return i;var c=e.splice(0,1),l=Object(s.a)(c,1)[0];if(t.set(r,l),!e.length){var o=n.find((function(e){return!a.find((function(t){return t===e}))&&t.get(e)})),u=t.get(o);e.push(u),t.delete(o)}return l}return r.pre=function(e){return arguments.length?(n=e,r):n},r.cur=function(e){return arguments.length?(a=e,r):a},r}([].concat(Object(kt.a)(Be.schemeTableau10),["#634294","#d54087"]))),W=Object(a.useRef)(function(e){var t=new Map;return function(n){var a=t.get(n);if(a)return a;var r=Math.random()*e.length|0,i=e[r];return t.set(n,i),i}}(Be.schemeTableau10)),F=t.get("zhihu")||{},q=F.listKeyframes,I=F.cloudsKeyframes,P=l.get("zhihu"),H={width:600,height:400,keyframes:q,selectedTime:u,color:L.current,running:y,loading:i||c||b,selectedName:"\u77e5\u4e4e",showWordsOfTopic:function(e){B(e),D();var t=U(u),n=P[t].time/1e3,a=g.get(n);if(a){var r=a.find((function(t){return t.title===e})),i=r?r.keywords:[];p(i)}else f("zhihu",n,e)},hideWordsOfTopic:function(){return B(null)},selectedTopic:R,interpolateInterval:k},K={width:600,height:400,keyframes:I,selectedWords:h,selectedTopic:R,selectedTime:u,color:L.current(R),colorScale:W.current,loading:i||c||b,running:y||N,selectedName:"\u77e5\u4e4e"},V={selectedTime:u,running:y,toggleAnimation:function(){y?D():_()},changeValue:function(e){if(!P)return;var t=v[0],n=P[P.length-1].time;(e<t||e>n)&&Bn.a.error("\u8be5\u65f6\u95f4\u6bb5\u6682\u65f6\u6ca1\u6709\u6570\u636e!!!");var a=Math.max(t,Math.min(e,n));w(O.invert(a)),d(a)},range:v||[0,0],finish:j>=S,totalDuration:S,duration:j};function _(){if(!y)if(null!==R&&B(null),E(!0),j>=S){var e=v[0],t=O.invert(e);x(t)}else x(j)}function U(e){var t=Be.bisector((function(e){return e.time})).left(P,e);return Math.max(0,t-1)}return y&&i&&!N&&(D(),A(!0)),!N||i||y||(_(),A(!1)),Object(a.useEffect)((function(){if(P){var e=U(u);P[e].request||function(e){var t=1;for(t=1;t<10&&e+t<P.length-1;t++){if(P[e+t].request)break}m({name:"zhihu",from:e,to:e+t}),n({name:"zhihu",tick:P[e],start:P[0].time,limit:t,interval:k})}(e)}else o("zhihu")}),[o,"zhihu",P,u]),r.a.createElement(Zn,null,r.a.createElement(Et.a,{gutter:[16,16]},r.a.createElement(xt.a,{span:24,md:12},r.a.createElement(Hn,H)),r.a.createElement(xt.a,{span:24,md:12},r.a.createElement(Un,K))),r.a.createElement(Et.a,null,r.a.createElement(xt.a,{span:24},r.a.createElement(In,V))))}));var Jn=function(e){var t=e.data,n=e.loading,a=e.selectedDate,i=e.selectedRegion,c=t||{},l=c.keywords,o=c.fillingWords;function u(e,t,n){var a=n.fillStyle,r=n.textAlign,i=n.textBaseline;e.textAlign=r,e.textBaseline=i,e.fillStyle=a;var c=!0,l=!1,o=void 0;try{for(var u,s=t[Symbol.iterator]();!(c=(u=s.next()).done);c=!0){var d=u.value,m=d.name,f=d.transX,h=d.transY,p=d.rotate,g=d.fontSize,v=d.fillX,b=d.fillY;e.save(),e.font="".concat(g,"px siyuan"),e.translate(f,h),e.rotate(p),e.fillText(m,v,b),e.restore()}}catch(y){l=!0,o=y}finally{try{c||null==s.return||s.return()}finally{if(l)throw o}}}function s(e){e.save(),e.translate(860,560),e.fillStyle="#777",e.textAlign="end",e.textBaseline="bottom",e.font="bold 35px siyuan",e.fillText(i,0,0),e.font="normal 15px siyuan",e.fillText(a,0,25),e.restore()}function d(){return(d=Object(jt.a)(Ot.a.mark((function e(t){return Ot.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,l&&o){e.next=3;break}return e.abrupt("return");case 3:t.fillStyle="white",t.fillRect(0,0,900,600),s(t),u(t,l,{fillStyle:"#59569d",textAlign:"center",textBaseline:"alphabet"}),u(t,o,{fillStyle:"#f25292",textAlign:"start",textBaseline:"middle"}),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.error(e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})))).apply(this,arguments)}var m=r.a.createElement("div",null,r.a.createElement("h3",null,"\u4f5c\u7528"),r.a.createElement("p",null,"\u5c55\u793a\u8be5\u5730\u533a\u548c\u8be5\u65e5\u671f\u65b0\u95fb\u62a5\u9053\u4e2d\u7684\u5173\u952e\u5b57\u3002"),r.a.createElement("h3",null,"\u8bf4\u660e"),r.a.createElement("p",null,"\u76ee\u524d\u53ea\u6709\u7701\u4efd\u548c\u76f4\u8f96\u5e02\u7684\u6570\u636e\uff0c\u540c\u65f6\u6570\u636e\u53ef\u80fd\u51fa\u73b0\u7f3a\u5931\u7684\u60c5\u51b5\u3002"),r.a.createElement("h3",null,"\u4ea4\u4e92"),r.a.createElement("p",null,"\u65e0"));return r.a.createElement(_n,{width:900,height:600,loading:n,nodata:void 0===t,dependcies:[t],introduction:m,title:"Shapewordle"},(function(e){return d.apply(this,arguments)}))},Gn=function(e){var t=e.loading,n=e.selectedRegion,a=e.selectedDate,i=e.data,c=void 0===i?[]:i,l=50,o=40,u=40,s=20,d=Math.min(300-s-o,620-l-u)/2-1,m=Be.arc().innerRadius(0).outerRadius(d);c.sort((function(e,t){return t.count-e.count}));var f=c.map((function(e){return e.name})),h=Be.pie().sort(null).value((function(e){return e.count})),p=1===c.length?function(){return"#61d4b3"}:Be.scaleOrdinal().domain(f).range(Be.quantize((function(e){return Be.interpolateSpectral(.8*e+.1)}),c.length).reverse()),g=function(e){return 180*(e.startAngle+e.endAngle)/(2*Math.PI)-90},v=h(c),b=r.a.createElement("div",null,r.a.createElement("h3",null,"\u4f5c\u7528"),r.a.createElement("p",null,"\u5c55\u793a\u8be5\u5730\u533a\uff0c\u8be5\u65e5\u671f\u4e0d\u540c\u79cd\u7c7b\u7684\u65b0\u95fb\u62a5\u9053\u6570\u91cf\u7684\u5360\u6bd4\u3002"),r.a.createElement("h3",null,"\u8bf4\u660e"),r.a.createElement("p",null,"\u76ee\u524d\u53ea\u6709\u7701\u4efd\u548c\u76f4\u8f96\u5e02\u7684\u6570\u636e\uff0c\u540c\u65f6\u6570\u636e\u53ef\u80fd\u51fa\u73b0\u7f3a\u5931\u7684\u60c5\u51b5\u3002"),r.a.createElement("h3",null,"\u4ea4\u4e92"),r.a.createElement("p",null,"\u65e0"));return r.a.createElement(fn,{viewBox:[0,0,300,620],loading:t,nodata:0===c.length,introduction:b,title:"\u997c\u72b6\u56fe",hasZoom:!1},c.length&&r.a.createElement("g",{transform:"translate(".concat(300-o,", ").concat(620-u,")"),textAnchor:"end",fill:"#777"},r.a.createElement("text",{fontSize:35,fontWeight:"bold"},n),r.a.createElement("text",{fontSize:15,dy:"1.5em"},a)),r.a.createElement("g",{transform:"translate(".concat(s,", ").concat(l,")")},f.slice(0,5).map((function(e,t){return r.a.createElement("g",{key:e,transform:"translate(".concat(0,", ",25*t,")")},r.a.createElement("circle",{fill:p(e),r:5}),r.a.createElement("text",{fill:"currentColor",dx:10,dy:"0.31em"},e))}))),r.a.createElement("g",{transform:"translate(".concat(150,", ").concat(310,")")},v.map((function(e){return r.a.createElement("path",{key:e.data.name,d:m(e),fill:p(e.data.name)})})),v.map((function(e){return r.a.createElement("g",{key:e.data.name,transform:"rotate(".concat(g(e),") translate(").concat(d-20,")"),textAnchor:"middle"},r.a.createElement("text",{fill:"currentColor",fontSize:11,fontWeight:"bold",transform:"rotate(".concat(-g(e),")")},(((t=e).endAngle-t.startAngle)/Math.PI*50|0)+"%"));var t}))))};function Qn(){var e=Object(o.a)(["\n  display: flex;\n  margin: 0.5em 0 1em 0;\n"]);return Qn=function(){return e},e}function $n(){var e=Object(o.a)(["\n  position: relative;\n  margin-bottom: 4em;\n  padding: 0 10px;\n"]);return $n=function(){return e},e}var ea=yt.a.Option,ta=u.b.div($n()),na=u.b.div(Qn());var aa=Object(c.connect)((function(e){var t=e.loading,n=e.news;return Object(Te.a)({},n,{loadingNews:t.models.news})}),{getNewsData:function(e,t){return{type:"news/getNewsData",payload:{region:e,date:t}}}})((function(e){var t=e.getNewsData,n=e.newsByRegion,i=e.selectedRegion,c=e.setSelectedRegion,l=e.loadingNews,o=e.selectedDate,u=function(e,t){var n=[];return On(e,(function(e){t(e)&&n.push(e)})),n}(hn,(function(e){return 2===e.depth})).map((function(e){return e.title})),s=new Set(u).has(i)?i:"\u6e56\u5317",d=n.get(s),m=d&&d.get(o),f=m||{},h=f.words,p=f.tags,g={data:h,loading:l,selectedDate:o,selectedRegion:s},v={loading:l,data:p,selectedDate:o,selectedRegion:s};return Object(a.useEffect)((function(){void 0===m&&""!==o&&"\u4e2d\u56fd"!==s&&t(s,"".concat(o))}),[t,o,s,m]),r.a.createElement(ta,null,r.a.createElement(na,null,r.a.createElement("div",null,r.a.createElement("span",null,r.a.createElement("b",null,"\u5730\u533a")),"\u2002",r.a.createElement(yt.a,{style:{width:120},onChange:c,value:s},u.map((function(e){return r.a.createElement(ea,{key:e,value:e},e)}))))),r.a.createElement(Et.a,{gutter:[16,16]},r.a.createElement(xt.a,{md:6,span:24},r.a.createElement(Gn,v)),r.a.createElement(xt.a,{md:18,span:24},r.a.createElement(Jn,g))))})),ra=n(202),ia=n.n(ra);function ca(){var e=Object(o.a)(["\n  display: flex;\n  margin: 0.5em 0 1em 1em;\n"]);return ca=function(){return e},e}function la(){var e=Object(o.a)(["\n  width: 360px;\n  border-radius: 8px;\n"]);return la=function(){return e},e}function oa(){var e=Object(o.a)(["\n  width: 60%;\n  & ul {\n    padding-left: 2em;\n  }\n  @media (max-width: 768px) {\n    width: 100%;\n  }\n"]);return oa=function(){return e},e}function ua(){var e=Object(o.a)(["\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  width: 100%;\n  margin-bottom: 2em;\n\n  @media (max-width: 768px) {\n    flex-direction: column;\n  }\n"]);return ua=function(){return e},e}function sa(){var e=Object(o.a)(["\n  position: absolute;\n  top: -56px;\n"]);return sa=function(){return e},e}function da(){var e=Object(o.a)(["\n  position: relative;\n"]);return da=function(){return e},e}var ma=A.a.TabPane,fa=u.b.div(da()),ha=u.b.div(sa()),pa=u.b.div(ua()),ga=u.b.div(oa()),va=u.b.img(la()),ba=u.b.div(ca());var ya=Object(c.connect)((function(e){var t=e.common;return Object(Te.a)({},t)}),{getTime:function(){return{type:"common/getTime"}},setSelectedRegion:function(e){return{type:"common/setSelectedRegion",payload:e}},setSelectedTime:function(e){return{type:"common/setSelectedTime",payload:e}}})((function(e){var t=e.getTime,n=e.timeRange,i=e.selectedTime,c=e.selectedRegion,l=e.setSelectedRegion,o=e.setSelectedTime,u=Object(a.useState)(!1),d=Object(s.a)(u,2),m=d[0],f=d[1],h=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:60,n=Object(a.useRef)(),r=Object(a.useRef)(0),i=Object(a.useRef)(),c=function(e){e&&(r.current=e),n.current=setInterval(s,1e3/t)},l=function(){i.current=void 0,r.current=0,clearInterval(n.current)},o=function(e){r.current=e},u=function(){i.current=void 0,clearInterval(n.current)};function s(){var t=(new Date).getTime();void 0===i.current&&(i.current=t),r.current+=t-i.current,i.current=t,!1!==e(r.current)||l()}return{requestAnimation:c,pauseAnimation:u,setFrame:o}}((function(e){var t=Math.min(E(e),n[1]);if(o(t),e>y)return f(!1),!1})),p=h.requestAnimation,g=h.pauseAnimation,v=h.setFrame,b=Me(new Date(i)),y=5e3*Be.timeHour.every(12).range(n[0],n[1]).map((function(e){return e.getTime()})).length,E=Be.scaleLinear().domain([0,y]).range(n||[0,0]),x=E.invert(i),w={selectedRegion:c,setSelectedRegion:l,selectedTime:i,setSelectedTime:o},O={selectedTime:i,setSelectedTime:o,running:m,totalDuration:y,totalTimeRange:n,timeScale:E,duration:x,interpolateInterval:216e4,setRunning:f,requestAnimation:p,setFrame:v,stopAnimation:k},j={selectedRegion:c,setSelectedRegion:l,selectedDate:b};function k(){m&&(f(!1),o(i+1),g())}return Object(a.useEffect)((function(){t()}),[t]),r.a.createElement(fa,null,r.a.createElement(ha,{id:"vis"}),r.a.createElement("h1",null,"\u53ef\u89c6\u5316"),r.a.createElement(pa,null,r.a.createElement(ga,null,r.a.createElement("p",null,"\u8fd9\u91cc\u662f\u75ab\u60c5\u6570\u636e\u548c\u8206\u8bba\u65b0\u95fb\u6570\u636e\u7684\u53ef\u89c6\u5316\u3002\u4f60\u53ef\u4ee5\u5148\u75ab\u60c5\u6570\u636e\u51fa\u53d1\uff0c\u627e\u5230\u4e00\u4e9b\u611f\u5174\u8da3\u7684\u65e5\u671f\uff0c\u7136\u540e\u53bb\u8206\u8bba\u65b0\u95fb\u6570\u636e\u53ef\u89c6\u5316\u770b\u770b\u5f53\u65f6\u4eba\u4eec\u5728\u8ba8\u8bba\u4ec0\u4e48\u3001\u65b0\u95fb\u5728\u62a5\u9053\u4ec0\u4e48\uff1b\u5f53\u7136\u4f60\u4e5f\u53ef\u4ee5\u5148\u5bfb\u627e\u611f\u5174\u8da3\u7684\u8bdd\u9898\u548c\u65b0\u95fb\uff0c\u7136\u540e\u5728\u53bb\u770b\u770b\u5f53\u65f6\u7684\u75ab\u60c5\u53d1\u5c55\u5230\u4ec0\u4e48\u5730\u6b65\u4e86\u3002"),r.a.createElement("p",null,"\u5728",r.a.createElement("b",null,"\u75ab\u60c5\u6570\u636e"),"\u9762\u677f\uff0c\u6211\u4eec\u63d0\u4f9b\u4e86\u5168\u7403\u5404\u4e2a\u56fd\u5bb6\u3001\u4e2d\u56fd\u5404\u4e2a\u5206\u533a\u548c\u7701\u4efd\u786e\u8bca\u3001\u6cbb\u6108\u548c\u6b7b\u4ea1\u7684\u603b\u4eba\u6570\u548c\u6bcf\u5929\u53d8\u5316\u4eba\u6570\u3002\u4f60\u53ef\u4ee5\u8fd9\u4e2a\u9762\u677f\u63a2\u7d22\u5404\u4e2a\u5730\u533a\u786e\u8bca\u3001\u6cbb\u6108\u548c\u6b7b\u4ea1\u4eba\u6570\u603b\u7684\u53d8\u5316\u8d8b\u52bf\uff0c\u6216\u8005\u63a2\u7d22\u6bcf\u5929\u7684\u589e\u52a0\u6216\u51cf\u5c11\u8d8b\u52bf\uff0c\u4ece\u800c\u4e86\u89e3\u8be5\u5730\u533a\u75ab\u60c5\u7684\u603b\u4f53\u7684\u53d1\u5c55\u60c5\u51b5\u3002"),r.a.createElement("p",null,"\u5728",r.a.createElement("b",null,"\u8206\u8bba\u65b0\u95fb"),"\u9762\u677f\uff0c\u4e00\u65b9\u9762\u6211\u4eec\u63d0\u4f9b\u4e86",r.a.createElement("b",null,"\u77e5\u4e4e\u7684\u70ed\u699c"),"\u524d10\u4ee5\u53ca\u5bf9\u5e94\u56de\u7b54\u5173\u952e\u8bcd\u7684\u53ef\u89c6\u5316\uff0c\u53e6\u4e00\u65b9\u9762\u6211\u4eec\u63d0\u4f9b\u4e86",r.a.createElement("b",null,"\u4e2d\u56fd\u65b0\u95fb\u7f51"),"\u5404\u4e2a\u5730\u533a\u62a5\u9053\u65b0\u95fb\u5173\u952e\u8bcd\u7684\u53ef\u89c6\u5316\u3002\u4f60\u53ef\u4ee5\u627e\u5230\u4e00\u4e9b\u548c\u75ab\u60c5\u76f8\u5173\u7684\u8bdd\u9898\u548c\u65b0\u95fb\uff0c\u7136\u540e\u7ed3\u5408\u75ab\u60c5\u6570\u636e\u53bb\u627e\u539f\u56e0\u3002"),r.a.createElement("p",null,"\u5bf9\u4e8e\u6bcf\u4e00\u79cd\u53ef\u89c6\u5316\u56fe\u8868\uff0c\u4f60\u90fd\u53ef\u4ee5\u70b9\u51fb",r.a.createElement("b",null,"\u5de6\u4e0a\u89d2\u7684\u95ee\u53f7"),"\u4e86\u89e3\u66f4\u591a\u7684\u4f7f\u7528\u65b9\u6cd5\u3002")),r.a.createElement(va,{src:ia.a})),r.a.createElement(A.a,{defaultActiveKey:"1",onTabClick:function(e){return 2===+e&&k()}},r.a.createElement(ma,{tab:"\u8206\u8bba\u65b0\u95fb",key:"1"},r.a.createElement(ba,null,r.a.createElement("div",null,r.a.createElement("span",null,r.a.createElement("b",null,"\u65e5\u671f")),"\u2002",r.a.createElement(bt.a,{value:""===b?null:vt()(b),onChange:function(e,t){o(new Date(t).getTime())},disabledDate:function(e){if(0===n.length)return!0;var t=Object(s.a)(n,2),a=t[0],r=t[1];return e<vt()(a)||e>vt()(r)},showTody:!1}))),r.a.createElement(Xn,O),r.a.createElement(aa,j)),r.a.createElement(ma,{tab:"\u75ab\u60c5\u6570\u636e",key:"2"},r.a.createElement(Rn,w))))}));function Ea(){var e=Object(o.a)(["\n  margin: 0 auto;\n  width: 90%;\n  max-width: 1200px;\n"]);return Ea=function(){return e},e}var xa=u.b.div(Ea());var wa=function(){return r.a.createElement(u.a,{theme:{header:"black",content:"#f9f9f9",font:"white"}},r.a.createElement(R,null),r.a.createElement(xa,null,r.a.createElement(pe,null),r.a.createElement(Ce,null),r.a.createElement(ya,null),r.a.createElement(pt,null)),r.a.createElement(M,null))},Oa=n(59),ja=n(51),ka=n(118);function Sa(){var e=Object(o.a)(["\n      {\n        ncovOverall {\n          time\n          confirmed\n          confirmedIncr\n          cured\n          curedIncr\n          deadIncr\n          dead\n          remainingConfirmed\n          remainingConfirmedIncr\n          global {\n            confirmed\n            confirmedIncr\n            cured\n            curedIncr\n            deadIncr\n            dead\n            remainingConfirmed\n            remainingConfirmedIncr\n          }\n        }\n      }\n    "]);return Sa=function(){return e},e}var Da=new ja.a({});Object(jt.a)(Ot.a.mark((function e(){return Ot.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(ka.persistCache)({cache:Da,storage:window.localStorage});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))();var Ca=new Oa.a({cache:Da,uri:"https://api.ncovis.mllab.cn/graphql?token=fuBwv4pYedUUaHycszp21pMmloRf1TQS"}),Ta=function(){return Ca.query({query:Object(Oa.b)(Sa())})},Ra={namespace:"overview",state:{time:(new Date).getTime(),data:[{name:"\u5168\u7403",data:[{name:"\u7d2f\u8ba1\u786e\u8bca",value:0,change:0},{name:"\u73b0\u5b58\u786e\u8bca",value:0,change:0},{name:"\u7d2f\u8ba1\u6cbb\u6108",value:0,change:0},{name:"\u7d2f\u8ba1\u6b7b\u4ea1",value:0,change:0}]},{name:"\u5168\u56fd",data:[{name:"\u7d2f\u8ba1\u786e\u8bca",value:0,change:0},{name:"\u73b0\u5b58\u786e\u8bca",value:0,change:0},{name:"\u7d2f\u8ba1\u6cbb\u6108",value:0,change:0},{name:"\u7d2f\u8ba1\u6b7b\u4ea1",value:0,change:0}]}]},reducers:{save:function(e,t){return Object(Te.a)({},e,{},t.payload)}},effects:{getData:Ot.a.mark((function e(t,n){var a,r,i,c,l;return Ot.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.call,r=n.put,e.prev=1,e.next=4,a(Ta);case 4:return i=e.sent,c=i.data.ncovOverall,l=Ba(c),e.next=9,r({type:"save",payload:l});case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),console.error(e.t0);case 14:case"end":return e.stop()}}),e,null,[[1,11]])}))}};function Ba(e){var t=e.global,n=e.time,a=Object(Ct.a)(e,["global","time"]),r=function(e,t){var n=e.confirmed,a=e.confirmedIncr,r=e.cured,i=e.curedIncr,c=e.deadIncr,l=e.dead;return{name:t,data:[{name:"\u7d2f\u8ba1\u786e\u8bca",value:n,change:a},{name:"\u73b0\u5b58\u786e\u8bca",value:e.remainingConfirmed,change:e.remainingConfirmedIncr},{name:"\u7d2f\u8ba1\u6cbb\u6108",value:r,change:i},{name:"\u7d2f\u8ba1\u6b7b\u4ea1",value:l,change:c}]}};return{time:1e3*n,data:[r(t,"\u5168\u7403"),r(a,"\u5168\u56fd")]}}var za=n(206),Ma=n.n(za),Na=n(207),Aa=n.n(Na),La=n(208),Wa=n.n(La),Fa=n(209),qa=n.n(Fa),Ia=n(210),Pa=n.n(Ia),Ha=n(211),Ka=n.n(Ha),Va={namespace:"comment",state:{list:[{id:1,title:"\u75ab\u60c5\u671f\u95f4\uff0c\u6709\u54ea\u4e9b\u548c\u7f51\u8bfe\u76f8\u5173\u7684\u6709\u8da3\u8bdd\u9898\uff1f",url:"https://zhuanlan.zhihu.com/p/129089330",des:"\u901a\u8fc7\u5c71\u4e1c\u5927\u5b66VisLab\u7684\u75ab\u60c5\u53ef\u89c6\u5316\u5de5\u5177\u4e2d\u7684\u52a8\u6001\u6761\u5f62\u56fe\uff0c\u6211\u53d1\u73b0\u4e86\u4e00\u4e9b\u4e0e\u7f51\u8bfe\u6709\u5173\u7684\u6709\u8da3\u8bdd\u9898\uff0c\u7efc\u5408\u65f6\u95f4\u7ebf\u5206\u6790\u8bdd\u9898\u7684\u4ea7\u751f\u539f\u56e0\u548c\u5370\u8c61\u3002",createTime:new Date("2020-04-12"),author:"wxw",imageUrl:Ma.a},{id:2,title:"nCoVIS: \u4e00\u4e2a\u65b0\u51a0\u75ab\u60c5\u53ef\u89c6\u5316\u5206\u6790\u5e73\u53f0",url:"https://medium.com/@zcy201420752/ncovis-visualization-platform-for-covid-19-d3f255d5ce79",des:"\u672c\u7bc7\u535a\u5ba2\u65e8\u5728\u4f7f\u7528nCoVIS\u63d0\u4f9b\u7684\u79cd\u79cd\u529f\u80fd\u5bf9\u75ab\u60c5\u7684\u671f\u95f4\u7684\u6587\u672c\u548c\u6570\u503c\u6570\u636e\u4f5c\u51fa\u5206\u6790\uff0c\u5e76\u5bf9\u4e8e\u5206\u6790\u7ed3\u679c\u7ed9\u51fa\u6211\u4e00\u4e9b\u89c1\u89e3\u3002",createTime:new Date("2020-04-12"),author:"Chuyang",imageUrl:Aa.a},{id:3,title:"\u75ab\u60c5\u671f\u95f4\u798f\u5efa\u7701\u8206\u8bba\u53d8\u5316",url:"https://www.jianshu.com/p/27b71bfa92c2",des:"\u5206\u67901\u6708\u5e95\u81f34\u6708\u521d\uff0c\u798f\u5efa\u7701\u65b0\u95fb\u62a5\u9053\u5173\u952e\u8bcd\u7684\u53d8\u5316\u60c5\u51b5\u3002",createTime:new Date("2020-04-12"),author:"N7wings",imageUrl:Wa.a},{id:4,title:"\u5206\u6790\u75ab\u60c5\u671f\u95f4\u6709\u54ea\u4e9b\u70ed\u5ea6\u7279\u522b\u9ad8\u7684\u8d85\u7ea7\u8bdd\u9898",url:"https://www.yuque.com/docs/share/22dbc894-176e-40c1-b44d-f8032b094d6e?#",des:"\u5177\u6709\u7a81\u53d1\u6027\u3001\u5c0f\u6982\u7387\u4e8b\u4ef6\uff0c\u5bf9\u591a\u6570\u7528\u6237\u800c\u8a00\u662f\u975e\u5e38\u6709\u5438\u5f15\u529b\u7684\u4e00\u4e9b\u8bdd\u9898\uff0c\u65e0\u8bba\u662f\u4ec0\u4e48\u65f6\u95f4\uff0c\u8fd9\u6837\u7684\u65b0\u95fb\u4e5f\u4f1a\u662f\u70ed\u70b9\u3002",createTime:new Date("2020-04-12"),author:"yjq",imageUrl:qa.a},{id:5,title:"\u75ab\u60c5\u65b0\u95fb\u8206\u8bba\u6570\u636e\u53ef\u89c6\u5316\u5de5\u5177\u7684\u4f7f\u7528",url:"https://blog.csdn.net/weixin_43913977/article/details/105428347",des:"\u8fd9\u91cc\u5206\u6790\u4e86\u4ece\u75ab\u60c5\u7206\u53d1\u5230\u73b0\u5728\u65b0\u95fb\u70ed\u641c\u53d8\u5316\u7684\u8d8b\u52bf\u548c\u5176\u4e2d\u7684\u539f\u56e0\u3002",createTime:new Date("2020-04-12"),author:"\u4e00\u53ea\u5357\u6781\u7684\u718a",imageUrl:Pa.a},{id:6,title:"\u82f1\u56fd\u6297\u75ab",url:"https://www.lofter.com/lpost/1f439172_1c999146b",des:"\u82f1\u56fd\u505c\u6b62\u5bf9\u8f7b\u75c7\u60a3\u8005\u8fdb\u884c\u68c0\u6d4b\uff0c\u516c\u5171\u536b\u751f\u5b98\u5458\u672a\u80fd\u5236\u5b9a\u5927\u89c4\u6a21\u68c0\u6d4b\u8ba1\u5212\u3002",createTime:new Date("2020-04-12"),author:"Higgins011",imageUrl:Ka.a}],isOpen:!1},reducers:{setOpen:function(e,t){var n=t.payload.value;return Object(Te.a)({},e,{isOpen:n})}}},_a=new ja.a({});Object(jt.a)(Ot.a.mark((function e(){return Ot.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(ka.persistCache)({cache:_a,storage:window.localStorage,maxSize:!1});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))();var Ua=new Oa.a({cache:_a,uri:"https://api.ncovis.mllab.cn/graphql?token=fuBwv4pYedUUaHycszp21pMmloRf1TQS"});function Ya(){var e=Object(o.a)(['\n      {\n        ncov(country: "\u4e2d\u56fd") {\n          date\n        }\n      }\n    ']);return Ya=function(){return e},e}var Za=function(){return Ua.query({query:Object(Oa.b)(Ya())})},Xa={namespace:"common",state:{selectedTime:15795648e5,selectedRegion:"\u4e2d\u56fd",timeRange:[]},effects:{getTime:Ot.a.mark((function e(t,n){var a,r,i,c,l,o,u;return Ot.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.call,r=n.put,e.next=3,a(Za);case 3:return i=e.sent,c=i.data.ncov,l=Array.from(new Set(c.map((function(e){return e.date})))),o=Be.extent(l).map((function(e){return new Date(e)})),u=new Date(o[0]).getTime(),e.next=8,r({type:"save",payload:{timeRange:o,selectedTime:u}});case 8:case"end":return e.stop()}}),e)}))},reducers:{save:function(e,t){return Object(Te.a)({},e,{},t.payload)},setSelectedRegion:function(e,t){return Object(Te.a)({},e,{selectedRegion:t.payload})},setSelectedTime:function(e,t){return Object(Te.a)({},e,{selectedTime:t.payload})}}};function Ja(){var e=Object(o.a)(['\n      {\n        ncov(date: "2020-04-07") {\n          country\n        }\n      }\n    ']);return Ja=function(){return e},e}function Ga(){var e=Object(o.a)(['\n      {\n        ncov(country:"','") {\n          date\n          confirmed\n          dead\n          cured\n          region\n        }\n      }\n    ']);return Ga=function(){return e},e}var Qa=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"\u4e2d\u56fd";return Ua.query({query:Object(Oa.b)(Ga(),e)})},$a=function(){return Ua.query({query:Object(Oa.b)(Ja())})},er=Object(Te.a)({},Be,{},St),tr={namespace:"ncov",state:{dataByRegion:new Map,dataByDate:new Map,selectedDate:"2020-02-10",countries:[],widthData:new Set,total:[],selectedCountries:[],treeData:er.hierarchy({name:"empty",children:[]})},reducers:{addCountryData:function(e,t){var n=t.payload,a=n.dataByDate,r=n.dataByRegion,i=n.country,c=e.selectedCountries,l=e.widthData;return c.push(i),l.add(i),Object(Te.a)({},e,{dataByDate:a,dataByRegion:r,selectedCountries:c,treeData:er.hierarchy(jn(c))})},setSelectedCountries:function(e,t){var n=t.payload.keys;return Object(Te.a)({},e,{selectedCountries:n})},save:function(e,t){return Object(Te.a)({},e,{},t.payload)},setSelectedTime:function(e,t){return Object(Te.a)({},e,{selectedTime:t.payload})},setSelectedDate:function(e,t){return Object(Te.a)({},e,{selectedDate:t.payload})},setTreeData:function(e,t){return Object(Te.a)({},e,{treeData:t.payload})}},effects:{getCountryData:Ot.a.mark((function e(t,n){var a,r,i,c,l,o,u,d,m,f,h,p,g,v,b,y,E,x,w,O,j;return Ot.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.call,r=n.put,i=t.payload,c=i.country,l=i.total,o=i.dataByDate,u=i.dataByRegion,e.next=4,a(Qa,c);case 4:for(d=e.sent,m=d.data.ncov,f=nr(m,l,c),h=er.rollup(f,(function(e){return Object(s.a)(e,1)[0].data}),(function(e){return e.date})),p=er.rollup(f,(function(e){return Object(s.a)(e,1)[0]}),(function(e){return e.region}),(function(e){return e.date})),g=!0,v=!1,b=void 0,e.prev=12,y=o.entries()[Symbol.iterator]();!(g=(E=y.next()).done);g=!0)x=Object(s.a)(E.value,2),w=x[0],O=x[1],j=h.get(w),O.push({region:c,data:j}),o.set(w,O);e.next=20;break;case 16:e.prev=16,e.t0=e.catch(12),v=!0,b=e.t0;case 20:e.prev=20,e.prev=21,g||null==y.return||y.return();case 23:if(e.prev=23,!v){e.next=26;break}throw b;case 26:return e.finish(23);case 27:return e.finish(20);case 28:return u.set(c,p.get(c)),e.next=31,r({type:"addCountryData",payload:{dataByDate:o,dataByRegion:u,country:c}});case 31:case"end":return e.stop()}}),e,null,[[12,16,20,28],[21,,23,27]])})),getData:Ot.a.mark((function e(t,n){var a,r,i,c,l,o,u,d,m,f,h,p,g,v,b,y,E,x,w,O,j;return Ot.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.call,r=n.put,e.prev=1,e.next=4,a($a);case 4:return i=e.sent,c=Array.from(new Set(i.data.ncov.map((function(e){return e.country})).filter((function(e){return""!==e})))),l="\u4e2d\u56fd",e.next=9,a(Qa,l);case 9:return o=e.sent,u=o.data.ncov,d=Array.from(new Set(u.map((function(e){return e.date})))),m=nr(u,d,l),f=er.rollup(m,(function(e){return Object(s.a)(e,1)[0]}),(function(e){return e.region}),(function(e){return e.date})),h=er.rollup(m,(function(e){return e.map((function(e){return{region:e.region,data:e.data}}))}),(function(e){return e.date})),p=["\u4e2d\u56fd"],g=new Set(["\u4e2d\u56fd"]),v=er.hierarchy(jn([l])),e.next=15,r({type:"save",payload:{dataByRegion:f,dataByDate:h,country:l,selectedCountries:p,total:d,widthData:g,countries:c,treeData:v}});case 15:b=t.payload,y=!0,E=!1,x=void 0,e.prev=19,w=b[Symbol.iterator]();case 21:if(y=(O=w.next()).done){e.next=28;break}return j=O.value,e.next=25,r.resolve({type:"getCountryData",payload:{country:j,total:d,dataByDate:h,dataByRegion:f}});case 25:y=!0,e.next=21;break;case 28:e.next=34;break;case 30:e.prev=30,e.t0=e.catch(19),E=!0,x=e.t0;case 34:e.prev=34,e.prev=35,y||null==w.return||w.return();case 37:if(e.prev=37,!E){e.next=40;break}throw x;case 40:return e.finish(37);case 41:return e.finish(34);case 42:e.next=47;break;case 44:e.prev=44,e.t1=e.catch(1),console.error(e.t1);case 47:case"end":return e.stop()}}),e,null,[[1,44],[19,30,34,42],[35,,37,41]])}))}};function nr(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"\u4e2d\u56fd",a=er.hierarchy(hn),r=er.rollups(e,(function(e){return Object(s.a)(e,1)[0]}),(function(e){return e.region}),(function(e){return e.date})).filter((function(e){return"\u4e2d\u56fd"!==Object(s.a)(e,1)[0]})).map((function(e){var t=Object(s.a)(e,2);return[t[0],t[1].sort((function(e,t){return new Date(e[0])-new Date(t[0])}))]})).map((function(e){var n=Object(s.a)(e,2),a=n[0],r=n[1];return[a,t.map((function(e){return ar(r,e)}))]}));return"\u4e2d\u56fd"===n&&a.eachAfter((function(e){if(e.children){var n=rr(e.children.map((function(e){return e.data.title})),r,e.data.title,t);r.push(n)}})),r.flatMap((function(e){return Object(s.a)(e,2)[1]}))}function ar(e,t){var n=(0,er.bisector((function(e){var t=Object(s.a)(e,1)[0];return new Date(t)})).left)(e,new Date(t),0,e.length-1),a=e[n];if(!n)return{region:a[1].region,date:t,data:{confirmed:a[1].confirmed,dead:a[1].dead,cured:a[1].cured}};var r=e[n-1],i=(new Date(t)-new Date(a[0]))/(new Date(r[0])-new Date(a[0])),c=function(e){return Math.ceil(a[1][e]*(1-i)+r[1][e]*i)};return{region:r[1].region,date:t,data:{confirmed:c("confirmed"),dead:c("dead"),cured:c("cured")}}}function rr(e,t,n,a){var r=a.map((function(e){return{region:n,date:e,data:{confirmed:0,cured:0,dead:0}}})),i=er.rollup(r,(function(e){return Object(s.a)(e,1)[0]}),(function(e){return e.date})),c=!0,l=!1,o=void 0;try{for(var u,d=function(){var e=u.value,n=t.find((function(t){return Object(s.a)(t,1)[0]===e})),a=Object(s.a)(n,2)[1],r=!0,c=!1,l=void 0;try{for(var o,d=a[Symbol.iterator]();!(r=(o=d.next()).done);r=!0){var m=o.value,f=m.date,h=m.data,p=i.get(f);p.data.confirmed+=h.confirmed,p.data.cured+=h.cured,p.data.dead+=h.dead}}catch(g){c=!0,l=g}finally{try{r||null==d.return||d.return()}finally{if(c)throw l}}},m=e[Symbol.iterator]();!(c=(u=m.next()).done);c=!0)d()}catch(f){l=!0,o=f}finally{try{c||null==m.return||m.return()}finally{if(l)throw o}}return[n,r]}var ir=n(212),cr=n.n(ir);function lr(){var e=Object(o.a)(["\n      {\n        ","(\n          time:","\n        ){\n          data {\n            topics {\n              keywords {\n                name\n                weight\n              }\n              heat\n              title\n            }\n          }\n        }\n      }\n    "]);return lr=function(){return e},e}function or(){var e=Object(o.a)(["{\n      "," {\n        data{\n          time\n        }\n      }\n    }"]);return or=function(){return e},e}function ur(){var e=Object(o.a)(["\n      {\n        ","(\n          numWords:3\n          limit:",", \n          ","\n        ){\n          paging{\n            total\n            nextCursor\n          }\n          data {\n            time\n            topics {\n              heat\n              title\n              keywords{\n                name\n                weight\n              }\n            }\n          }\n        }\n      }\n    "]);return ur=function(){return e},e}var sr=function(e){var t=e.name,n=e.from,a=e.limit,r=void 0===a?10:a;return Ua.query({query:Object(Oa.b)(ur(),t,r,n?"from:".concat(n):"")})},dr=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"zhihu";return Ua.query({query:Object(Oa.b)(or(),e)})},mr=function(e){var t=e.name,n=e.time;return Ua.query({query:Object(Oa.b)(lr(),t,n)})},fr=Object(Te.a)({},Be,{},St),hr={namespace:"hots",state:{dataByName:fr.map(),timeByName:fr.map(),wordsByTime:fr.map(),selectedWords:[],computingLayout:!1},reducers:{setComputingLayout:function(e,t){return Object(Te.a)({},e,{computingLayout:t.payload})},setSelectedCountries:function(e,t){var n=t.payload;return Object(Te.a)({},e,{selectedCountries:n})},addWords:function(e,t){var n=t.payload,a=n.words,r=n.time,i=e.wordsByTime;return i.set(r,a),Object(Te.a)({},e,{wordsByTime:i})},setSelectedWords:function(e,t){return Object(Te.a)({},e,{selectedWords:t.payload})},addTimeRange:function(e,t){var n=t.payload,a=n.range,r=n.name,i=e.timeByName;return i.set(r,a),Object(Te.a)({},e,{timeByName:i})},updateDataByTime:function(e,t){var n=t.payload,a=n.name,r=n.from,i=n.to,c=e.timeByName,l=c.get(a).map((function(e,t){return Object(Te.a)({},e,{request:t>=r&&t<i||e.request})}));return c.set(a,l),Object(Te.a)({},e,{timeByName:c})},addFrames:function(e,t){var n=t.payload,a=n.name,r=n.listKeyframes,i=n.cloudsKeyframes,c=e.dataByName,l=c.get(a);if(l){var o=Or([].concat(Object(kt.a)(l.listKeyframes),Object(kt.a)(r)).sort((function(e,t){return e[0]-t[0]})),(function(e){return e[0]})),u=Or([].concat(Object(kt.a)(l.cloudsKeyframes),Object(kt.a)(i)).sort((function(e,t){return e[0]-t[0]})),(function(e){return e[0]}));c.set(a,{listKeyframes:o,cloudsKeyframes:u})}else c.set(a,{listKeyframes:r,cloudsKeyframes:i});return Object(Te.a)({},e,{dataByName:c,computingLayout:!1})}},effects:{getWords:Ot.a.mark((function e(t,n){var a,r,i,c,l,o,u,s,d,m,f;return Ot.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.call,r=n.put,e.prev=1,i=t.payload,c=i.time,l=i.name,o=i.title,e.next=5,a(mr,{name:l,time:c});case 5:return u=e.sent,s=u.data[l].data[0].topics,e.next=9,a(br,s);case 9:return d=e.sent,m=d.find((function(e){return e.title===o})),f=m?m.keywords:[],e.next=14,r({type:"addWords",payload:{wordsWithLayout:d,time:c}});case 14:return e.next=16,r({type:"setSelectedWords",payload:f});case 16:e.next=21;break;case 18:e.prev=18,e.t0=e.catch(1),console.error(e.t0);case 21:case"end":return e.stop()}}),e,null,[[1,18]])})),getTime:Ot.a.mark((function e(t,n){var a,r,i,c,l;return Ot.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.call,r=n.put,e.prev=1,i=t.payload.name,e.next=5,a(dr,i);case 5:return c=e.sent,l=c.data[i].data.map((function(e){return 1e3*e.time})).map((function(e){return{time:e,request:!1}})).sort((function(e,t){return e.time-t.time})),e.next=9,r({type:"addTimeRange",payload:{range:l,name:i}});case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),console.error(e.t0);case 14:case"end":return e.stop()}}),e,null,[[1,11]])})),getData:Ot.a.mark((function e(t,n){var a,r,i,c,l,o,u,s,d,m,f,h,p,g;return Ot.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.call,r=n.put,i=t.payload,c=i.name,l=i.interval,o=i.tick,u=i.limit,s=i.start,e.prev=2,e.next=5,r({type:"setComputingLayout",payload:!0});case 5:return e.next=7,a(sr,{name:c,from:(o.time/1e3|0)-1,limit:u+1});case 7:return d=e.sent,m=pr(d.data[c].data),f=Er(m,s,l),h=f.listKeyframes,p=f.wordsKeyframes,e.next=12,a(yr,p);case 12:return g=e.sent,e.next=15,r({type:"addFrames",payload:{name:c,listKeyframes:h,cloudsKeyframes:g}});case 15:e.next=20;break;case 17:e.prev=17,e.t0=e.catch(2),console.error(e.t0);case 20:case"end":return e.stop()}}),e,null,[[2,17]])}))}};function pr(e){return e.map((function(e){var t=e.time,n=e.topics,a=n.flatMap((function(e,t){return e.keywords.map((function(n){return{title:e.title,weight:n.weight*(1-.05*t),name:n.name}}))}));return{time:t,keywords:Array.from(new Set(a)),topics:n}}))}function gr(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:20,n=new Set(["\u6ca1\u6709","\u77e5\u9053","\u53ef\u80fd","\u89c9\u5f97","\u65f6\u5019","\u5e94\u8be5","\u8fd8\u6709","\u51fa\u6765","\u9700\u8981","\u4e8b\u60c5","\u5927\u5bb6","\u8fd8\u6709","\u770b\u5230"]);return e.map((function(e){return{text:e.name,value:e.weight||e.value}})).filter((function(e){return!n.has(e.text)})).sort((function(e,t){return t.value-e.value})).slice(0,t)}function vr(e,t){return new Promise((function(n){cr()().size([900,600]).words(e).padding(5).rotate(0).fontSize((function(e){return 80*Math.sqrt(e.value)})).on("end",(function(e){return n(t(e))})).start()}))}function br(e){return Promise.all(e.map((function(e){var t=e.keywords,n=e.title;return vr(gr(t),(function(e){return{keywords:e,title:n}}))})))}function yr(e){return Promise.all(e.map((function(e){var t=Object(s.a)(e,2),n=t[0];return vr(gr(t[1]),(function(e){return[n,e]}))})))}function Er(e,t,n){var a=e.map((function(e){var t=e.time,n=Object(Ct.a)(e,["time"]);return Object(Te.a)({time:1e3*t},n)})),r=fr.extent(a,(function(e){return e.time})),i=t+((r[0]-t)/n|0)*n,c=i+Math.ceil((r[1]-i)/n)*n+1,l=fr.range(i,c,n),o=fr.range(i,c,5*n),u=new Set(a.flatMap((function(e){return e.keywords.map((function(e){return e.name}))}))),d=new Set(a.flatMap((function(e){return e.topics.map((function(e){return e.title}))}))),m=Array.from(fr.rollup(a,(function(e){var t=Object(s.a)(e,1)[0];return fr.rollup(t.keywords,(function(e){return Object(s.a)(e,1)[0].weight}),(function(e){return e.name}))}),(function(e){return e.time}))),f=Array.from(fr.rollup(a,(function(e){var t=Object(s.a)(e,1)[0];return fr.rollup(t.topics,(function(e){return Object(s.a)(e,1)[0].heat}),(function(e){return e.title}))}),(function(e){return e.time}))).sort((function(e,t){return Object(s.a)(e,1)[0]-Object(s.a)(t,1)[0]}));return{listKeyframes:l.map((function(e){return xr(f,d,e)})).map((function(e){var t=Object(s.a)(e,2);return[t[0],t[1].map((function(e,t){return Object(Te.a)({},e,{rank:t})})).slice(0,10)]})),wordsKeyframes:o.map((function(e){return xr(m,u,e)}))}}function xr(e,t,n){var a=(0,fr.bisector((function(e){return e[0]})).left)(e,n,0,e.length-1),r=e[a];if(!a)return[n,wr(t,(function(e){return r[1].get(e)}))];var i=e[a-1],c=(n-r[0])/(i[0]-r[0]);return[n,wr(t,(function(e){var t=r[1].get(e)||0,n=i[1].get(e)||0;return t*(1-c)+n*c}))]}function wr(e,t){var n=Array.from(e,(function(e){return{name:e,value:t(e)||0}}));return n.sort((function(e,t){return fr.descending(e.value,t.value)})),n}function Or(e,t){return e.map((function(n,a){return 0===a||t(e[a-1])!==t(n)?[].concat(Object(kt.a)(n),[!0]):[].concat(Object(kt.a)(n),[!1])})).filter((function(e){return e[2]})).map((function(e){var t=Object(s.a)(e,2);return[t[0],t[1]]}))}function jr(){var e=Object(o.a)(['\n      {\n        news(region: "','", date: "','T16:00:00Z") {\n          news {\n            date\n            tags {\n              name\n              count\n            }\n            keywords {\n              name\n              color\n              fontSize\n              transX\n              transY\n              fillX\n              fillY\n              rotate\n            }\n            fillingWords {\n              name\n              color\n              fontSize\n              transX\n              transY\n              fillX\n              fillY\n              rotate\n            }\n          }\n        }\n      }\n    ']);return jr=function(){return e},e}var kr=function(e,t){return Ua.query({query:Object(Oa.b)(jr(),e,t)})},Sr=[Ra,Va,Xa,tr,hr,{namespace:"news",state:{newsByRegion:new Map},reducers:{addNews:function(e,t){var n=t.payload,a=n.region,r=n.dataByDate,i=e.newsByRegion;return i.set(a,r),Object(Te.a)({},e,{newsByRegion:i})}},effects:{getNewsData:Ot.a.mark((function e(t,n){var a,r,i,c,l,o,u,s,d,m,f;return Ot.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.call,r=n.put,e.prev=1,i=t.payload,c=i.region,l=i.date,e.next=5,a(kr,c,l);case 5:return o=e.sent,u=o.data.news.news[0],s=u.tags,d=u.keywords,m=u.fillingWords,f=new Map([[l,{tags:s,words:{keywords:d,fillingWords:m}}]]),e.next=11,r({type:"addNews",payload:{region:c,dataByDate:f}});case 11:e.next=16;break;case 13:e.prev=13,e.t0=e.catch(1),console.error(e.t0);case 16:case"end":return e.stop()}}),e,null,[[1,13]])}))}}],Dr=(n(372),n(373),new l.a);Dr.use(Object(i.a)()),Sr.forEach((function(e){return Dr.model(e)})),Dr.router((function(){return r.a.createElement(wa,null)})),Dr.start("#root"),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},46:function(e){e.exports=JSON.parse('{"title":"\u4e2d\u56fd","value":"\u4e2d\u56fd","key":1,"depth":0,"children":[{"title":"\u534e\u5317\u5730\u533a","value":"\u534e\u5317\u5730\u533a","key":2,"depth":1,"children":[{"title":"\u5317\u4eac","value":"\u5317\u4eac","key":10,"depth":2},{"title":"\u5929\u6d25","value":"\u5929\u6d25","key":11,"depth":2},{"title":"\u6cb3\u5317","value":"\u6cb3\u5317","key":12,"depth":2},{"title":"\u5c71\u897f","value":"\u5c71\u897f","key":13,"depth":2},{"title":"\u5185\u8499\u53e4","value":"\u5185\u8499\u53e4","key":14,"depth":2}]},{"title":"\u897f\u5317\u5730\u533a","value":"\u897f\u5317\u5730\u533a","key":3,"depth":1,"children":[{"title":"\u5b81\u590f","value":"\u5b81\u590f","key":15,"depth":2},{"title":"\u9752\u6d77","value":"\u9752\u6d77","key":16,"depth":2},{"title":"\u9655\u897f","value":"\u9655\u897f","key":17,"depth":2},{"title":"\u7518\u8083","value":"\u7518\u8083","key":18,"depth":2},{"title":"\u65b0\u7586","value":"\u65b0\u7586","key":19,"depth":2}]},{"title":"\u4e1c\u5317\u5730\u533a","value":"\u4e1c\u5317\u5730\u533a","key":4,"depth":1,"children":[{"title":"\u8fbd\u5b81","value":"\u8fbd\u5b81","key":20,"depth":2},{"title":"\u5409\u6797","value":"\u5409\u6797","key":21,"depth":2},{"title":"\u9ed1\u9f99\u6c5f","value":"\u9ed1\u9f99\u6c5f","key":22,"depth":2}]},{"title":"\u534e\u4e1c\u5730\u533a","value":"\u534e\u4e1c\u5730\u533a","key":5,"depth":1,"children":[{"title":"\u5c71\u4e1c","value":"\u5c71\u4e1c","key":23,"depth":2},{"title":"\u6c5f\u82cf","value":"\u6c5f\u82cf","key":24,"depth":2},{"title":"\u4e0a\u6d77","value":"\u4e0a\u6d77","key":25,"depth":2},{"title":"\u6d59\u6c5f","value":"\u6d59\u6c5f","key":26,"depth":2},{"title":"\u5b89\u5fbd","value":"\u5b89\u5fbd","key":27,"depth":2},{"title":"\u798f\u5efa","value":"\u798f\u5efa","key":28,"depth":2},{"title":"\u6c5f\u897f","value":"\u6c5f\u897f","key":29,"depth":2}]},{"title":"\u534e\u4e2d\u5730\u533a","value":"\u534e\u4e2d\u5730\u533a","key":6,"depth":1,"children":[{"title":"\u6cb3\u5357","value":"\u6cb3\u5357","key":30,"depth":2},{"title":"\u6e56\u5357","value":"\u6e56\u5357","key":31,"depth":2},{"title":"\u6e56\u5317","value":"\u6e56\u5317","key":32,"depth":2}]},{"title":"\u897f\u5357\u5730\u533a","value":"\u897f\u5357\u5730\u533a","key":7,"depth":1,"children":[{"title":"\u56db\u5ddd","value":"\u56db\u5ddd","key":33,"depth":2},{"title":"\u8d35\u5dde","value":"\u8d35\u5dde","key":34,"depth":2},{"title":"\u4e91\u5357","value":"\u4e91\u5357","key":35,"depth":2},{"title":"\u91cd\u5e86","value":"\u91cd\u5e86","key":36,"depth":2},{"title":"\u897f\u85cf","value":"\u897f\u85cf","key":37,"depth":2}]},{"title":"\u534e\u5357\u5730\u533a","value":"\u534e\u5357\u5730\u533a","key":8,"depth":1,"children":[{"title":"\u5e7f\u4e1c","value":"\u5e7f\u4e1c","key":38,"depth":2},{"title":"\u5e7f\u897f","value":"\u5e7f\u897f","key":39,"depth":2},{"title":"\u6d77\u5357","value":"\u6d77\u5357","key":40,"depth":2}]},{"title":"\u6e2f\u6fb3\u53f0\u5730\u533a","value":"\u6e2f\u6fb3\u53f0\u5730\u533a","key":9,"depth":1,"children":[{"title":"\u9999\u6e2f","value":"\u9999\u6e2f","key":41,"depth":2},{"title":"\u6fb3\u95e8","value":"\u6fb3\u95e8","key":42,"depth":2},{"title":"\u53f0\u6e7e","value":"\u53f0\u6e7e","key":43,"depth":2}]}]}')}},[[220,1,2]]]);
//# sourceMappingURL=main.b289ba00.chunk.js.map